---
title: Java JSONå¤„ç†
date: 2023-06-06 19:51:41
permalink: /pages/0b87e1/
categories: 
  - åç«¯Java
  - ä¼ä¸šåº”ç”¨
tags: 
  - Jacksonä½¿ç”¨æ•™ç¨‹
  - JSON
author: 
  name: è½©è¾•æ
  link: https://github.com/xuanyuanli
---

## å‰è¨€
JSONï¼ˆJavaScript Object Notationï¼‰æ˜¯ä¸€ç§è½»é‡çº§çš„æ•°æ®äº¤æ¢æ ¼å¼ï¼Œå®ƒä»¥æ˜“äºé˜…è¯»å’Œç¼–å†™çš„æ–‡æœ¬æ ¼å¼è¡¨ç¤ºç»“æ„åŒ–æ•°æ®ã€‚

JSONæœ€åˆç”±`Douglas Crockford`åœ¨2001å¹´æå‡ºï¼Œå¹¶ä¸”å¹¿æ³›åº”ç”¨äºWebåº”ç”¨ç¨‹åºä¹‹é—´çš„æ•°æ®äº¤æ¢ã€‚

<!-- more -->

### JSONçš„æ ¸å¿ƒç‰¹ç‚¹

1. **ç®€æ´æ€§**ï¼šJSONä½¿ç”¨ç®€å•çš„æ–‡æœ¬æ ¼å¼ï¼Œæ˜“äºé˜…è¯»å’Œç¼–å†™
2. **å¯è¯»æ€§**ï¼šJSONçš„ç»“æ„å¯¹å¼€å‘äººå‘˜æ¥è¯´éå¸¸ç›´è§‚å’Œæ˜“äºç†è§£
3. **è·¨å¹³å°æ”¯æŒ**ï¼šä½œä¸ºé€šç”¨çš„æ•°æ®äº¤æ¢æ ¼å¼ï¼Œå¯ä»¥åœ¨ä¸åŒå¹³å°å’Œç¼–ç¨‹è¯­è¨€ä¹‹é—´è¿›è¡Œäº¤æ¢å’Œè§£æ
4. **è¯­è¨€æ— å…³æ€§**ï¼šJSONä¸ç‰¹å®šçš„ç¼–ç¨‹è¯­è¨€æ— å…³ï¼Œå¯ä»¥åœ¨å¤šç§ç¼–ç¨‹è¯­è¨€ä¸­ä½¿ç”¨
5. **æ‰©å±•æ€§**ï¼šæ”¯æŒåµŒå¥—å’Œå¤æ‚çš„æ•°æ®ç»“æ„ï¼Œå¯ä»¥è¡¨ç¤ºå¤§è§„æ¨¡çš„æ•°æ®
6. **Webå‹å¥½**ï¼šä¸JavaScriptå¯†åˆ‡ç›¸å…³ï¼Œåœ¨Webåº”ç”¨ç¨‹åºä¸­å¹¿æ³›ä½¿ç”¨ï¼Œç‰¹åˆ«æ˜¯RESTful API

### JSONçš„æ•°æ®ç±»å‹

JSONæ”¯æŒä»¥ä¸‹åŸºæœ¬æ•°æ®ç±»å‹ï¼š
- **å­—ç¬¦ä¸²**ï¼ˆStringï¼‰ï¼šç”¨åŒå¼•å·åŒ…å›´çš„æ–‡æœ¬
- **æ•°å­—**ï¼ˆNumberï¼‰ï¼šæ•´æ•°æˆ–æµ®ç‚¹æ•°
- **å¸ƒå°”å€¼**ï¼ˆBooleanï¼‰ï¼š`true` æˆ– `false`
- **æ•°ç»„**ï¼ˆArrayï¼‰ï¼šæœ‰åºçš„å€¼åˆ—è¡¨ï¼Œç”¨æ–¹æ‹¬å· `[]` è¡¨ç¤º
- **å¯¹è±¡**ï¼ˆObjectï¼‰ï¼šé”®å€¼å¯¹é›†åˆï¼Œç”¨èŠ±æ‹¬å· `{}` è¡¨ç¤º
- **ç©ºå€¼**ï¼ˆNullï¼‰ï¼š`null`

### JSONç¤ºä¾‹

ä¸‹é¢æ˜¯ä¸€ä¸ªå®Œæ•´çš„JSONå¯¹è±¡ç¤ºä¾‹ï¼Œå±•ç¤ºäº†å„ç§æ•°æ®ç±»å‹çš„ä½¿ç”¨ï¼š

```json
{
  "name": "John",                    // å­—ç¬¦ä¸²ç±»å‹
  "age": 30,                         // æ•°å­—ç±»å‹
  "city": "New York",                // å­—ç¬¦ä¸²ç±»å‹
  "hobbies": [                       // æ•°ç»„ç±»å‹
    "reading", 
    "coding", 
    "traveling"
  ],
  "isStudent": false,                // å¸ƒå°”ç±»å‹
  "address": {                       // åµŒå¥—å¯¹è±¡
    "street": "123 Main St",
    "zip": "10001"
  },
  "spouse": null                     // ç©ºå€¼ç±»å‹
}
```

## Javaä¸­çš„JSONåº”ç”¨åœºæ™¯

åœ¨Javaå¼€å‘ä¸­ï¼ŒJSONçš„ä½¿ç”¨åœºæ™¯éå¸¸å¹¿æ³›ï¼Œä¸»è¦åŒ…æ‹¬ï¼š

### 1. æ•°æ®äº¤æ¢
JSONä½œä¸ºé€šç”¨çš„æ•°æ®äº¤æ¢æ ¼å¼ï¼Œå¯ä»¥åœ¨ä¸åŒç³»ç»Ÿã€ä¸åŒç¼–ç¨‹è¯­è¨€ä¹‹é—´è¿›è¡Œæ•°æ®äº¤æ¢ã€‚åœ¨Javaä¸­ï¼Œå¯ä»¥ä½¿ç”¨JSONæ¥åºåˆ—åŒ–Javaå¯¹è±¡ä¸ºJSONæ ¼å¼ï¼Œå¹¶å°†å…¶å‘é€ç»™å…¶ä»–ç³»ç»Ÿæˆ–æœåŠ¡ã€‚

### 2. WebæœåŠ¡ä¸RESTful API
- **Spring MVC**ï¼šé»˜è®¤ä½¿ç”¨Jacksonè¿›è¡ŒJSONå¤„ç†
- **JAX-RS**ï¼šæ”¯æŒå¤šç§JSONå¤„ç†åº“
- **Spring Boot**ï¼šè‡ªåŠ¨é…ç½®JSONåºåˆ—åŒ–/ååºåˆ—åŒ–

### 3. æ•°æ®å­˜å‚¨
- **NoSQLæ•°æ®åº“**ï¼šå¦‚MongoDBã€Elasticsearchç­‰åŸç”Ÿæ”¯æŒJSON
- **å…³ç³»å‹æ•°æ®åº“**ï¼šPostgreSQLã€MySQL 5.7+æ”¯æŒJSONæ•°æ®ç±»å‹
- **æ–‡ä»¶å­˜å‚¨**ï¼šå°†é…ç½®æˆ–æ•°æ®ä»¥JSONæ ¼å¼ä¿å­˜

### 4. å¾®æœåŠ¡é€šä¿¡
- **æœåŠ¡é—´è°ƒç”¨**ï¼šä½¿ç”¨JSONä½œä¸ºæ¶ˆæ¯æ ¼å¼
- **æ¶ˆæ¯é˜Ÿåˆ—**ï¼šRabbitMQã€Kafkaç­‰æ¶ˆæ¯ä¸­é—´ä»¶çš„æ¶ˆæ¯æ ¼å¼
- **æœåŠ¡æ³¨å†Œä¸å‘ç°**ï¼šé…ç½®ä¿¡æ¯çš„ä¼ é€’

### 5. é…ç½®ç®¡ç†
- **åº”ç”¨é…ç½®**ï¼šSpring Bootçš„`application.json`
- **åŠ¨æ€é…ç½®**ï¼šé…ç½®ä¸­å¿ƒï¼ˆå¦‚Apolloã€Nacosï¼‰ä½¿ç”¨JSONæ ¼å¼

### 6. æµ‹è¯•æ•°æ®
- **Mockæ•°æ®**ï¼šæ¨¡æ‹Ÿå¤–éƒ¨æœåŠ¡å“åº”
- **æµ‹è¯•ç”¨ä¾‹**ï¼šå®šä¹‰æµ‹è¯•è¾“å…¥å’ŒæœŸæœ›è¾“å‡º
- **æ¥å£æ–‡æ¡£**ï¼šSwagger/OpenAPIè§„èŒƒä½¿ç”¨JSONæè¿°API

## Javaä¸­çš„JSONåº“æ¦‚è¿°

åœ¨Javaç”Ÿæ€ç³»ç»Ÿä¸­ï¼Œæœ‰å¤šä¸ªæˆç†Ÿçš„JSONå¤„ç†åº“å¯ä¾›é€‰æ‹©ï¼š

### ä¸»æµJSONåº“å¯¹æ¯”

| ç‰¹æ€§ | Jackson | Gson | Fastjson2 |
|------|---------|------|----------|
| **æ€§èƒ½** | ä¼˜ç§€ | è‰¯å¥½ | æœ€å¿« |
| **åŠŸèƒ½ä¸°å¯Œåº¦** | æœ€å…¨é¢ | é€‚ä¸­ | ä¸°å¯Œ |
| **ç¤¾åŒºæ”¯æŒ** | æœ€æ´»è·ƒ | æ´»è·ƒ | æ´»è·ƒ |
| **Springé›†æˆ** | é»˜è®¤æ”¯æŒ | éœ€é…ç½® | éœ€é…ç½® |
| **å®‰å…¨æ€§** | ä¼˜ç§€ | ä¼˜ç§€ | å·²æ”¹è¿› |
| **å­¦ä¹ æ›²çº¿** | é€‚ä¸­ | ç®€å• | ç®€å• |

### Jacksonçš„æ ¸å¿ƒä¼˜åŠ¿

Springæ¡†æ¶é»˜è®¤é€‰æ‹©Jacksonä½œä¸ºJSONå¤„ç†åº“ï¼Œä¸»è¦åŸºäºä»¥ä¸‹ä¼˜åŠ¿ï¼š

1. **å“è¶Šçš„æ€§èƒ½**
   - é«˜æ•ˆçš„æµå¼APIï¼ˆStreaming APIï¼‰
   - ä¼˜åŒ–çš„å†…å­˜ä½¿ç”¨
   - å¿«é€Ÿçš„åºåˆ—åŒ–/ååºåˆ—åŒ–é€Ÿåº¦

2. **å¼ºå¤§çš„åŠŸèƒ½ç‰¹æ€§**
   - æ”¯æŒå¤æ‚çš„ç±»å‹å¤„ç†ï¼ˆæ³›å‹ã€å¤šæ€ï¼‰
   - çµæ´»çš„è‡ªå®šä¹‰åºåˆ—åŒ–å™¨/ååºåˆ—åŒ–å™¨
   - å®Œå–„çš„æ³¨è§£ä½“ç³»

3. **å¤šæ ¼å¼æ”¯æŒ**
   - JSONï¼ˆé»˜è®¤ï¼‰
   - XMLï¼ˆjackson-dataformat-xmlï¼‰
   - YAMLï¼ˆjackson-dataformat-yamlï¼‰
   - CSVï¼ˆjackson-dataformat-csvï¼‰
   - Propertiesï¼ˆjackson-dataformat-propertiesï¼‰
   - CBORã€Smileç­‰äºŒè¿›åˆ¶æ ¼å¼

4. **æ¨¡å—åŒ–æ¶æ„**
   - `jackson-core`ï¼šæ ¸å¿ƒæµå¤„ç†
   - `jackson-databind`ï¼šæ•°æ®ç»‘å®š
   - `jackson-annotations`ï¼šæ³¨è§£æ”¯æŒ
   - ä¸°å¯Œçš„æ‰©å±•æ¨¡å—

5. **ä¼ä¸šçº§ç‰¹æ€§**
   - çº¿ç¨‹å®‰å…¨çš„`ObjectMapper`
   - å®Œå–„çš„å¼‚å¸¸å¤„ç†
   - è¯¦ç»†çš„æ–‡æ¡£å’Œç¤¾åŒºæ”¯æŒ

æœ¬ç¯‡æ–‡ç« ä¸»è¦ä»‹ç»Jacksonçš„ä½¿ç”¨ï¼ŒåŒæ—¶ç®€è¦ä»‹ç»å…¶ä»–ä¸»æµåº“ã€‚

### å…¶ä»–ä¸»æµJSONåº“ç®€ä»‹

#### Gson
**Gson**æ˜¯Googleå¼€å‘çš„JSONå¤„ç†åº“ï¼Œä»¥ç®€å•æ˜“ç”¨è‘—ç§°ï¼š
- **ä¼˜ç‚¹**ï¼šAPIç®€æ´ã€å­¦ä¹ æˆæœ¬ä½ã€é€‚åˆç®€å•åœºæ™¯
- **ç¼ºç‚¹**ï¼šæ€§èƒ½ç›¸å¯¹è¾ƒå¼±ã€åŠŸèƒ½ä¸å¦‚Jacksonä¸°å¯Œ
- **ä½¿ç”¨åœºæ™¯**ï¼šAndroidå¼€å‘ã€ç®€å•çš„JSONå¤„ç†éœ€æ±‚
- å‚è€ƒæ–‡æ¡£ï¼š[Gsonç”¨æˆ·æŒ‡å—](https://github.com/google/gson/blob/main/UserGuide.md)

#### Fastjson2
**Fastjson2**æ˜¯é˜¿é‡Œå·´å·´å¼€æºçš„é«˜æ€§èƒ½JSONåº“ï¼š
- **ä¼˜ç‚¹**ï¼šæè‡´çš„æ€§èƒ½ä¼˜åŒ–ã€APIç®€å•ã€ä¸­æ–‡æ–‡æ¡£ä¸°å¯Œ
- **æ”¹è¿›**ï¼šç›¸æ¯”Fastjson 1.xï¼Œå®‰å…¨æ€§å¤§å¹…æå‡
- **ä½¿ç”¨åœºæ™¯**ï¼šé«˜æ€§èƒ½è¦æ±‚åœºæ™¯ã€Dubbo 3.2+é»˜è®¤ä½¿ç”¨
- æ€§èƒ½å¯¹æ¯”ï¼š[Fastjson2 Benchmark](https://github.com/alibaba/fastjson2/wiki/fastjson_benchmark)
- å‚è€ƒæ–‡æ¡£ï¼š[Fastjson2å®˜æ–¹æ–‡æ¡£](https://github.com/alibaba/fastjson2)

## Jacksonçš„ä½¿ç”¨
### 1. æ·»åŠ Jacksonä¾èµ–
é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦å°†Jacksonåº“æ·»åŠ åˆ°é¡¹ç›®çš„ä¾èµ–ä¸­ã€‚å¯ä»¥åœ¨é¡¹ç›®çš„æ„å»ºæ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹ä¾èµ–ï¼š

```xml
<!-- Maven ä¾èµ– -->
<dependency>
    <groupId>com.fasterxml.jackson.core</groupId>
    <artifactId>jackson-databind</artifactId>
    <version>2.15.2</version>
</dependency>
```

### 2. åˆ›å»ºå’Œé…ç½®ObjectMapper

`ObjectMapper`æ˜¯Jacksonçš„æ ¸å¿ƒç±»ï¼Œè´Ÿè´£JSONçš„åºåˆ—åŒ–å’Œååºåˆ—åŒ–æ“ä½œã€‚

#### åŸºç¡€åˆ›å»º
```java
import com.fasterxml.jackson.databind.ObjectMapper;

ObjectMapper objectMapper = new ObjectMapper();
```

#### æœ€ä½³å®è·µï¼šå•ä¾‹æ¨¡å¼

`ObjectMapper`æ˜¯çº¿ç¨‹å®‰å…¨çš„é‡é‡çº§å¯¹è±¡ï¼Œå»ºè®®ä½¿ç”¨å•ä¾‹æ¨¡å¼ï¼š

```java
public class JsonUtils {
    private static final ObjectMapper MAPPER = new ObjectMapper();
    
    static {
        // é…ç½®ObjectMapper
        MAPPER.configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, false);
        MAPPER.configure(SerializationFeature.WRITE_DATES_AS_TIMESTAMPS, false);
        // æ³¨å†Œæ¨¡å—
        MAPPER.registerModule(new JavaTimeModule());
    }
    
    public static ObjectMapper getMapper() {
        return MAPPER;
    }
    
    // å·¥å…·æ–¹æ³•
    public static String toJson(Object obj) throws JsonProcessingException {
        return MAPPER.writeValueAsString(obj);
    }
    
    public static <T> T fromJson(String json, Class<T> clazz) throws JsonProcessingException {
        return MAPPER.readValue(json, clazz);
    }
}
```

âš ï¸ **æ³¨æ„äº‹é¡¹**ï¼š
- `ObjectMapper`åˆ›å»ºæˆæœ¬é«˜ï¼Œåº”é¿å…é¢‘ç¹åˆ›å»º
- çº¿ç¨‹å®‰å…¨ï¼Œå¯åœ¨å¤šçº¿ç¨‹ç¯å¢ƒå…±äº«
- é…ç½®åä¸åº”å†ä¿®æ”¹ï¼Œä¿è¯çº¿ç¨‹å®‰å…¨

### 3. JSONä¸Javaå¯¹è±¡çš„ç›¸äº’è½¬æ¢

Jacksonæä¾›äº†å°†JSONæ•°æ®ä¸Javaå¯¹è±¡ç›¸äº’è½¬æ¢çš„åŠŸèƒ½ã€‚

#### ç¤ºä¾‹ç±»å®šä¹‰

ä¸ºäº†æ¼”ç¤ºJacksonçš„ä½¿ç”¨ï¼Œæˆ‘ä»¬å®šä¹‰ä»¥ä¸‹æµ‹è¯•ç±»ï¼š

```java
// ä½¿ç”¨Java 14+çš„recordï¼ˆæ¨èï¼‰
record MyClass(String name, Integer age) {}

// æˆ–ä½¿ç”¨ä¼ ç»Ÿçš„POJOç±»
public class MyClass {
    private String name;
    private Integer age;
    
    // å¿…é¡»æœ‰æ— å‚æ„é€ å‡½æ•°ï¼ˆç”¨äºååºåˆ—åŒ–ï¼‰
    public MyClass() {}
    
    public MyClass(String name, Integer age) {
        this.name = name;
        this.age = age;
    }
    
    // Getters and Setters
    public String getName() { return name; }
    public void setName(String name) { this.name = name; }
    public Integer getAge() { return age; }
    public void setAge(Integer age) { this.age = age; }
}
```

1) JSONå­—ç¬¦ä¸²è½¬Javaå¯¹è±¡

è¦å°†JSONå­—ç¬¦ä¸²è½¬æ¢ä¸ºJavaå¯¹è±¡ï¼Œå¯ä»¥ä½¿ç”¨ObjectMapperçš„`readValue()`æ–¹æ³•ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼š

```java
String jsonString = "{\"name\":\"John\",\"age\":30}";

// JSONå­—ç¬¦ä¸²è½¬Javaå¯¹è±¡
MyClass myObject = objectMapper.readValue(jsonString, MyClass.class);
```

åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å°†JSONå­—ç¬¦ä¸²è½¬æ¢ä¸ºMyClasså¯¹è±¡ã€‚

2) JSONæ–‡ä»¶è½¬Javaå¯¹è±¡

è¦å°†JSONæ–‡ä»¶è½¬æ¢ä¸ºJavaå¯¹è±¡ï¼Œå¯ä»¥ä½¿ç”¨ObjectMapperçš„`readValue()`æ–¹æ³•ï¼Œå¹¶å°†æ–‡ä»¶ä½œä¸ºè¾“å…¥æºã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼š

```java
File jsonFile = new File("data.json");

// JSONæ–‡ä»¶è½¬Javaå¯¹è±¡
MyClass myObject = objectMapper.readValue(jsonFile, MyClass.class);
```

åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å°†JSONæ–‡ä»¶è½¬æ¢ä¸ºMyClasså¯¹è±¡ã€‚

3) Javaå¯¹è±¡è½¬JSONå­—ç¬¦ä¸²

è¦å°†Javaå¯¹è±¡è½¬æ¢ä¸ºJSONå­—ç¬¦ä¸²ï¼Œå¯ä»¥ä½¿ç”¨ObjectMapperçš„`writeValueAsString()`æ–¹æ³•ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼š

```java
MyClass myObject = new MyClass("John", 30);

// Javaå¯¹è±¡è½¬JSONå­—ç¬¦ä¸²
String jsonString = objectMapper.writeValueAsString(myObject);
```

åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å°†MyClasså¯¹è±¡è½¬æ¢ä¸ºJSONå­—ç¬¦ä¸²ã€‚

4) Javaå¯¹è±¡è¾“å‡ºåˆ°JSONæ–‡ä»¶

è¦å°†Javaå¯¹è±¡è¾“å‡ºåˆ°JSONæ–‡ä»¶ï¼Œå¯ä»¥ä½¿ç”¨ObjectMapperçš„`writeValue()`æ–¹æ³•ï¼Œå¹¶å°†æ–‡ä»¶ä½œä¸ºè¾“å‡ºç›®æ ‡ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼š

```java
MyClass myObject = new MyClass("John", 30);
File jsonFile = new File("output.json");

// Javaå¯¹è±¡è¾“å‡ºåˆ°JSONæ–‡ä»¶
objectMapper.writeValue(jsonFile, myObject);
```

åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å°†MyClasså¯¹è±¡è¾“å‡ºåˆ°åä¸º"output.json"çš„æ–‡ä»¶ä¸­ã€‚

### 4. JSONä¸Javaé›†åˆçš„ç›¸äº’è½¬æ¢

é™¤äº†è½¬æ¢å•ä¸ªJavaå¯¹è±¡ï¼ŒJacksonè¿˜æä¾›äº†å°†JSONä¸Javaé›†åˆç›¸äº’è½¬æ¢çš„åŠŸèƒ½ã€‚

1) JSONå­—ç¬¦ä¸²è½¬Javaé›†åˆ

è¦å°†JSONå­—ç¬¦ä¸²è½¬æ¢ä¸ºJavaé›†åˆï¼Œå¯ä»¥ä½¿ç”¨ObjectMapperçš„`readValue()`æ–¹æ³•ï¼Œå¹¶æŒ‡å®šç›®æ ‡é›†åˆç±»å‹ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼š

```java
String jsonArray = "[{\"name\":\"John\",\"age\":30},{\"name\":\"Alice\",\"age\":25}]";

// JSONå­—ç¬¦ä¸²è½¬Javaé›†åˆ
MyClass[] myObjects = objectMapper.readValue(jsonArray, MyClass[].class);
// æˆ–è€…
List<MyClass> myObjects = objectMapper.readValue(jsonArray, new TypeReference<List<MyClass>>() {});
```

åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å°†JSONæ•°ç»„è½¬æ¢ä¸º`List<MyClass>`é›†åˆã€‚

ä¸Šé¢ä»£ç ä¸­æˆ‘ä»¬çœ‹åˆ°äº†`TypeReference`ï¼Œå®ƒæ˜¯Jacksonåº“ä¸­çš„ä¸€ä¸ªç±»ï¼Œç”¨äºè§£å†³Javaæ³›å‹ç±»å‹åœ¨åºåˆ—åŒ–å’Œååºåˆ—åŒ–è¿‡ç¨‹ä¸­çš„ç±»å‹æ“¦é™¤é—®é¢˜ã€‚ç”±äºJavaçš„æ³›å‹ä¿¡æ¯åœ¨è¿è¡Œæ—¶è¢«æ“¦é™¤ï¼Œæ— æ³•ç›´æ¥è·å¾—æ³›å‹ç±»å‹ï¼Œå› æ­¤Jacksonæä¾›äº†`TypeReference`ç±»æ¥æ•è·æ³›å‹ç±»å‹çš„ä¿¡æ¯ã€‚

åœ¨ä½¿ç”¨Jacksonè¿›è¡Œååºåˆ—åŒ–æ—¶ï¼Œå¦‚æœç›®æ ‡ç±»å‹æ˜¯ä¸€ä¸ªæ³›å‹ç±»å‹ï¼Œå¯ä»¥ä½¿ç”¨`TypeReference`æ¥æŒ‡å®šæ³›å‹ç±»å‹ï¼Œå¹¶è·å–å‡†ç¡®çš„ç±»å‹ä¿¡æ¯ï¼Œä»¥ä¾¿æ­£ç¡®åœ°è¿›è¡Œååºåˆ—åŒ–ã€‚

é€šè¿‡ä½¿ç”¨`TypeReference`ï¼Œæˆ‘ä»¬èƒ½å¤Ÿè§£å†³Javaæ³›å‹ç±»å‹çš„ç±»å‹æ“¦é™¤é—®é¢˜ï¼Œç¡®ä¿åœ¨ååºåˆ—åŒ–æ—¶è·å¾—å‡†ç¡®çš„ç±»å‹ä¿¡æ¯ï¼Œä»è€Œæ­£ç¡®åœ°è½¬æ¢ä¸ºç›®æ ‡ç±»å‹ã€‚


ä½ ä¹Ÿå¯ä»¥æŠŠJSONå¯¹è±¡è½¬æ¢ä¸ºMapå¯¹è±¡ï¼Œä¾‹å¦‚ï¼š
```java
List<Map<String,Object> myObjects = objectMapper.readValue(jsonArray, new TypeReference<List<Map<String,Object>>() {});
```

2) JSONæ–‡ä»¶è½¬Javaé›†åˆ

è¦å°†JSONæ–‡ä»¶è½¬æ¢ä¸ºJavaé›†åˆï¼Œå¯ä»¥ä½¿ç”¨ObjectMapperçš„`readValue()`æ–¹æ³•ï¼Œå¹¶å°†æ–‡ä»¶ä½œä¸ºè¾“å…¥æºã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼š

```java
File jsonFile = new File("data.json");

// JSONæ–‡ä»¶è½¬Javaé›†åˆ
List<MyClass> myObjects = objectMapper.readValue(jsonFile, new TypeReference<List<MyClass>>() {});
```

åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å°†JSONæ–‡ä»¶è½¬æ¢ä¸º`List<MyClass>`é›†åˆã€‚

3) Javaé›†åˆè½¬JSONå­—ç¬¦ä¸²

è¦å°†Javaé›†åˆè½¬æ¢ä¸ºJSONå­—ç¬¦ä¸²ï¼Œå¯ä»¥ä½¿ç”¨ObjectMapperçš„`writeValueAsString()`æ–¹æ³•ã€‚ ä»¥ä¸‹æ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼š

```java
List<MyClass> myObjects = new ArrayList<>();
myObjects.add(new MyClass("John", 30));
myObjects.add(new MyClass("Alice", 25));

// Javaé›†åˆè½¬JSONå­—ç¬¦ä¸²
String jsonArray = objectMapper.writeValueAsString(myObjects);
```

åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å°†`List<MyClass>`é›†åˆè½¬æ¢ä¸ºJSONå­—ç¬¦ä¸²ã€‚

### 5. å¤æ‚å¯¹è±¡çš„å¤„ç†
æ¼”ç¤ºä¸€ä¸‹å¤æ‚JSONæ•°æ®çš„å¤„ç†ï¼ŒåŒ…æ‹¬åµŒå¥—å¯¹è±¡ã€æ•°ç»„ç­‰ã€‚

å‡è®¾æœ‰å¦‚ä¸‹ç±»ï¼š
```java
public class CompositeClass {
    private String name;
    private int age;
    private Address address;
    private List<Pet> pets;

    // æ„é€ å‡½æ•°ã€Getterå’ŒSetteræ–¹æ³•ç­‰

    public static class Address {
        private String street;
        private String city;

        // æ„é€ å‡½æ•°ã€Getterå’ŒSetteræ–¹æ³•ç­‰

        // çœç•¥å…¶ä»–ä»£ç 
    }

    public static class Pet {
        private String name;
        private String species;

        // æ„é€ å‡½æ•°ã€Getterå’ŒSetteræ–¹æ³•ç­‰

        // çœç•¥å…¶ä»–ä»£ç 
    }

    // çœç•¥å…¶ä»–ä»£ç 
}
```
è¦æŠŠJSONè½¬æ¢ä¸ºCompositeClasså¯¹è±¡ï¼Œå¯ä»¥ä½¿ç”¨ObjectMapperçš„`readValue()`æ–¹æ³•ï¼Œå¹¶æŒ‡å®šç›®æ ‡ç±»å‹ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼š

```java
    String jsonString = "{\"name\":\"John\",\"age\":30,\"address\":{\"street\":\"123 Main St\",\"city\":\"New York\"},\"pets\":[{\"name\":\"Fluffy\",\"species\":\"cat\"},{\"name\":\"Buddy\",\"species\":\"dog\"}]}";

    // å°†JSONè½¬æ¢ä¸ºJavaå¯¹è±¡
    MyClass myObject = objectMapper.readValue(jsonString, MyClass.class);

    // è®¿é—®Javaå¯¹è±¡ä¸­çš„æ•°æ®
    String name = myObject.getName();
    int age = myObject.getAge();
    String street = myObject.getAddress().getStreet();
    String city = myObject.getAddress().getCity();
    List<Pet> pets = myObject.getPets();

    System.out.println("Name: " + name);
    System.out.println("Age: " + age);
    System.out.println("Street: " + street);
    System.out.println("City: " + city);
    System.out.println("Pets:");

    for (Pet pet : pets) {
        String petName = pet.getName();
        String species = pet.getSpecies();
        System.out.println("  Pet Name: " + petName);
        System.out.println("  Species: " + species);
    }
```

### 6. JsonNodeçš„ç”¨æ³•
ObjectMapperçš„`readTree()`æ–¹æ³•æ¥å—ä¸€ä¸ªJSONå­—ç¬¦ä¸²ä½œä¸ºå‚æ•°ï¼Œå¹¶è¿”å›ä¸€ä¸ªJsonNodeå¯¹è±¡ï¼Œè¡¨ç¤ºè§£æåçš„JSONæ•°æ®çš„æ ‘å½¢ç»“æ„ã€‚

ä»¥ä¸‹æ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼š
```java
    String jsonString = "{\"name\":\"John\",\"age\":30,\"address\":{\"street\":\"123 Main St\",\"city\":\"New York\"},\"pets\":[{\"name\":\"Fluffy\",\"species\":\"cat\"},{\"name\":\"Buddy\",\"species\":\"dog\"}]}";
    // å°†JSONå­—ç¬¦ä¸²è½¬æ¢ä¸ºJsonNodeå¯¹è±¡
    JsonNode jsonNode = objectMapper.readTree(jsonString);

    // è®¿é—®JsonNodeä¸­çš„æ•°æ®
    String name = jsonNode.get("name").asText();
    int age = jsonNode.get("age").asInt();
    String street = jsonNode.get("address").get("street").asText();
    String city = jsonNode.get("address").get("city").asText();
    JsonNode pets = jsonNode.get("pets");

    System.out.println("Name: " + name);
    System.out.println("Age: " + age);
    System.out.println("Street: " + street);
    System.out.println("City: " + city);
    System.out.println("Pets:");

    for (JsonNode pet : pets) {
        String petName = pet.get("name").asText();
        String species = pet.get("species").asText();
        System.out.println("  Pet Name: " + petName);
        System.out.println("  Species: " + species);
    }
```

### 7. ç¾åŒ–JSONè¾“å‡º

å¦‚æœéœ€è¦å¯¹ç”Ÿæˆçš„JSONè¿›è¡Œæ ¼å¼åŒ–å’Œç¾åŒ–ï¼Œå¯ä»¥ä½¿ç”¨ObjectMapperçš„`writerWithDefaultPrettyPrinter()`æ–¹æ³•ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼š

```java
MyClass myObject = new MyClass("John", 30);

// Javaå¯¹è±¡è½¬JSONå­—ç¬¦ä¸²ï¼ˆæ ¼å¼åŒ–è¾“å‡ºï¼‰
String jsonString = objectMapper.writerWithDefaultPrettyPrinter().writeValueAsString(myObject);
```

### 8. JSONå¤„ç†çš„è¡Œä¸ºå’Œç‰¹æ€§é…ç½®
`ObjectMapper.configure()`æ˜¯Jacksonåº“ä¸­`ObjectMapper`ç±»çš„ä¸€ä¸ªæ–¹æ³•ï¼Œç”¨äºé…ç½®`ObjectMapper`çš„å„ç§è¡Œä¸ºå’Œç‰¹æ€§ã€‚é€šè¿‡è¯¥æ–¹æ³•ï¼Œå¯ä»¥è‡ªå®šä¹‰å’Œæ§åˆ¶`ObjectMapper`åœ¨åºåˆ—åŒ–å’Œååºåˆ—åŒ–è¿‡ç¨‹ä¸­çš„è¡Œä¸ºã€‚

`configure()`æ–¹æ³•æ¥å—ä¸¤ä¸ªå‚æ•°ï¼šä¸€ä¸ªæšä¸¾ç±»å‹çš„é…ç½®é€‰é¡¹ï¼Œå’Œä¸€ä¸ªå¸ƒå°”å€¼å‚æ•°ï¼Œç”¨äºæŒ‡å®šé…ç½®é€‰é¡¹çš„è®¾ç½®å€¼ã€‚ä¸‹é¢æ˜¯ä¸€äº›å¸¸ç”¨çš„é…ç½®é€‰é¡¹åŠå…¶è¯´æ˜ï¼š

1. `DeserializationFeature`ï¼šç”¨äºé…ç½®ååºåˆ—åŒ–æ—¶çš„è¡Œä¸ºé€‰é¡¹ï¼Œä¾‹å¦‚å¤„ç†æœªçŸ¥å±æ€§ã€å¿½ç•¥ç©ºå€¼ã€æ”¯æŒä½¿ç”¨å•å¼•å·ç­‰ã€‚
   - `FAIL_ON_UNKNOWN_PROPERTIES`: æ§åˆ¶æ˜¯å¦åœ¨é‡åˆ°æœªçŸ¥å±æ€§æ—¶æŠ›å‡ºå¼‚å¸¸ã€‚è®¾ç½®ä¸º`false`è¡¨ç¤ºå¿½ç•¥æœªçŸ¥å±æ€§ï¼Œé»˜è®¤ä¸º`true`ã€‚
   - `ACCEPT_EMPTY_STRING_AS_NULL_OBJECT`: æŒ‡å®šæ˜¯å¦å°†ç©ºå­—ç¬¦ä¸²è§£æä¸º`null`å¯¹è±¡ã€‚é»˜è®¤ä¸º`false`ã€‚
   - `UNWRAP_SINGLE_VALUE_ARRAYS`: æ§åˆ¶æ˜¯å¦è‡ªåŠ¨å°†åŒ…å«å•ä¸ªå€¼çš„æ•°ç»„è§£åŒ…ã€‚é»˜è®¤ä¸º`false`ã€‚
   - `USE_BIG_DECIMAL_FOR_FLOATS`: æ§åˆ¶æ˜¯å¦ä½¿ç”¨`BigDecimal`æ¥è¡¨ç¤ºæµ®ç‚¹æ•°ã€‚é»˜è®¤ä¸º`false`ï¼Œä½¿ç”¨`double`è¡¨ç¤ºæµ®ç‚¹æ•°ã€‚
   - `USE_BIG_INTEGER_FOR_INTS`: æ§åˆ¶æ˜¯å¦ä½¿ç”¨`BigInteger`æ¥è¡¨ç¤ºæ•´æ•°ã€‚é»˜è®¤ä¸º`false`ï¼Œä½¿ç”¨`int`æˆ–`long`è¡¨ç¤ºæ•´æ•°ã€‚

2. `SerializationFeature`ï¼šç”¨äºé…ç½®åºåˆ—åŒ–æ—¶çš„è¡Œä¸ºé€‰é¡¹ï¼Œä¾‹å¦‚å¤„ç†ç©ºå€¼ã€ç¼©è¿›è¾“å‡ºã€ä½¿ç”¨å­—é¢å€¼è¾“å‡ºæšä¸¾ç­‰ã€‚
   - `INDENT_OUTPUT`: æ§åˆ¶æ˜¯å¦ç¼©è¿›è¾“å‡ºçš„JSONã€‚é»˜è®¤ä¸º`false`ã€‚
   - `WRITE_DATES_AS_TIMESTAMPS`: æ§åˆ¶æ˜¯å¦å°†æ—¥æœŸå†™å…¥ä¸ºæ—¶é—´æˆ³ã€‚é»˜è®¤ä¸º`true`ã€‚
   - `WRITE_NULL_MAP_VALUES`: æ§åˆ¶æ˜¯å¦å†™å…¥ç©ºå€¼å­—æ®µã€‚é»˜è®¤ä¸º`true`ã€‚
   - `WRITE_ENUMS_USING_TO_STRING`: æ§åˆ¶æ˜¯å¦ä½¿ç”¨`toString()`æ–¹æ³•æ¥åºåˆ—åŒ–æšä¸¾å€¼ã€‚é»˜è®¤ä¸º`false`ï¼Œä½¿ç”¨æšä¸¾å¸¸é‡åç§°ã€‚
   - `WRITE_CHAR_ARRAYS_AS_JSON_ARRAYS`: æ§åˆ¶æ˜¯å¦å°†å­—ç¬¦æ•°ç»„å†™å…¥ä¸ºJSONæ•°ç»„ã€‚é»˜è®¤ä¸º`false`ã€‚

3. `JsonParser.Feature`ï¼šç”¨äºé…ç½®JSONè§£æå™¨çš„è¡Œä¸ºé€‰é¡¹ï¼Œä¾‹å¦‚æ”¯æŒå•å¼•å·ã€å…è®¸æ³¨é‡Šç­‰ã€‚
   - `ALLOW_COMMENTS`: æ§åˆ¶æ˜¯å¦å…è®¸åœ¨JSONä¸­åŒ…å«æ³¨é‡Šã€‚é»˜è®¤ä¸º`false`ã€‚
   - `ALLOW_SINGLE_QUOTES`: æ§åˆ¶æ˜¯å¦å…è®¸ä½¿ç”¨å•å¼•å·ä½œä¸ºå­—ç¬¦ä¸²çš„å¼•å·ã€‚é»˜è®¤ä¸º`false`ã€‚
   - `ALLOW_UNQUOTED_FIELD_NAMES`: æ§åˆ¶æ˜¯å¦å…è®¸åœ¨JSONä¸­ä½¿ç”¨éå¼•å·æ‹¬èµ·çš„å­—æ®µåç§°ã€‚é»˜è®¤ä¸º`false`ã€‚

4. `JsonGenerator.Feature`ï¼šç”¨äºé…ç½®JSONç”Ÿæˆå™¨çš„è¡Œä¸ºé€‰é¡¹ï¼Œä¾‹å¦‚ç¼©è¿›è¾“å‡ºã€ä½¿ç”¨åŒå¼•å·åŒ…è£…å±æ€§ç­‰ã€‚
   - `QUOTE_FIELD_NAMES`: æ§åˆ¶æ˜¯å¦åœ¨ç”Ÿæˆçš„JSONä¸­å°†å­—æ®µåç§°ç”¨å¼•å·æ‹¬èµ·ã€‚é»˜è®¤ä¸º`true`ã€‚
   - `WRITE_BIGDECIMAL_AS_PLAIN`: æ§åˆ¶æ˜¯å¦å°†`BigDecimal`å†™å…¥ä¸ºæ™®é€šæ•°å­—ï¼Œè€Œä¸æ˜¯ç§‘å­¦è®¡æ•°æ³•ã€‚é»˜è®¤ä¸º`false`ã€‚

é€šè¿‡è°ƒç”¨`ObjectMapper.configure()`æ–¹æ³•ï¼Œå¯ä»¥æ ¹æ®å…·ä½“éœ€æ±‚è®¾ç½®ä¸Šè¿°é€‰é¡¹åŠå…¶ä»–é€‰é¡¹ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªç¤ºä¾‹ä»£ç ï¼Œå±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨`configure()`æ–¹æ³•è®¾ç½®`ObjectMapper`çš„é…ç½®é€‰é¡¹ï¼š

```java
    ObjectMapper OBJECT_MAPPER = new ObjectMapper();

    // ååºåˆ—åŒ–æ—¶ï¼Œå½“é‡åˆ°æœªçŸ¥çš„å±æ€§ï¼ˆåœ¨JSONä¸­å­˜åœ¨ä½†åœ¨ç›®æ ‡Javaç±»ä¸­ä¸å­˜åœ¨ï¼‰æ—¶ï¼Œæ§åˆ¶æ˜¯å¦æŠ›å‡ºå¼‚å¸¸ã€‚é€šè¿‡å°†å…¶è®¾ç½®ä¸ºfalseï¼Œå¯ä»¥å¿½ç•¥æœªçŸ¥çš„å±æ€§è€Œä¸æŠ›å‡ºå¼‚å¸¸ã€‚
    OBJECT_MAPPER.configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, false);
    // åºåˆ—åŒ–æ—¶ï¼Œæ§åˆ¶æ˜¯å¦å°†å­—ç¬¦æ•°ç»„å†™å…¥ä¸ºJSONæ•°ç»„ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå­—ç¬¦æ•°ç»„è¢«åºåˆ—åŒ–ä¸ºå­—ç¬¦ä¸²ï¼Œä½†å°†å…¶è®¾ç½®ä¸ºtrueå¯ä»¥å°†å­—ç¬¦æ•°ç»„åºåˆ—åŒ–ä¸ºJSONæ•°ç»„ã€‚
    OBJECT_MAPPER.configure(SerializationFeature.WRITE_CHAR_ARRAYS_AS_JSON_ARRAYS, true);
    // è§£ææ—¶ï¼Œæ§åˆ¶æ˜¯å¦å…è®¸åœ¨JSONä¸­ä½¿ç”¨å•å¼•å·ä½œä¸ºå­—ç¬¦ä¸²çš„å¼•å·ã€‚å°†å…¶è®¾ç½®ä¸ºtrueå¯ä»¥å…è®¸ä½¿ç”¨å•å¼•å·æ¥è¡¨ç¤ºå­—ç¬¦ä¸²ï¼Œè€Œä¸ä»…é™äºåŒå¼•å·ã€‚
    OBJECT_MAPPER.configure(JsonParser.Feature.ALLOW_SINGLE_QUOTES, true);
```

### 9. æ—¶é—´å¤„ç†

Jacksoné»˜è®¤å°†`Date`åºåˆ—åŒ–ä¸ºæ—¶é—´æˆ³æ ¼å¼ï¼ˆä»1970å¹´1æœˆ1æ—¥UTCå¼€å§‹çš„æ¯«ç§’æ•°ï¼‰ã€‚
```java
    SimpleDateFormat df = new SimpleDateFormat("dd-MM-yyyy hh:mm");
    df.setTimeZone(TimeZone.getTimeZone("UTC"));

    Date date = df.parse("01-01-1970 01:00");
    Event event = new Event("party", date);

    ObjectMapper mapper = new ObjectMapper();
    mapper.writeValueAsString(event);
```

å®é™…è¾“å‡ºçš„ç»“æœå¦‚ä¸‹ï¼š

```json
{
    "name": "party",
    "eventDate": 3600000
}
```

#### é…ç½®ObjectMapperæ—¥æœŸæ ¼å¼
é…ç½®`ObjectMapper`ä»¥å…è®¸æˆ‘ä»¬è®¾ç½®æ—¥æœŸçš„æ ¼å¼ï¼š

```java
    SimpleDateFormat df = new SimpleDateFormat("dd-MM-yyyy hh:mm");

    String toParse = "20-12-2014 02:30";
    Date date = df.parse(toParse);
    Event event = new Event("party", date);

    ObjectMapper mapper = new ObjectMapper();
    mapper.setDateFormat(df);

    String result = mapper.writeValueAsString(event);
    // result = toParse
```

è¯·æ³¨æ„ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†å…¨å±€é…ç½®ï¼Œå½±å“æ•´ä¸ª`ObjectMapper`çš„è¡Œä¸ºã€‚

#### ä½¿ç”¨@JsonFormatæ ¼å¼åŒ–æ—¥æœŸ

å¯ä»¥ä½¿ç”¨`@JsonFormat`æ³¨è§£åœ¨å•ä¸ªç±»ä¸Šæ§åˆ¶æ—¥æœŸæ ¼å¼ï¼Œè€Œä¸æ˜¯å…¨å±€é…ç½®æ•´ä¸ªåº”ç”¨ç¨‹åºçš„æ—¥æœŸæ ¼å¼ï¼š

```java
public class Event {
    public String name;

    @JsonFormat(shape = JsonFormat.Shape.STRING, pattern = "dd-MM-yyyy hh:mm:ss")
    public Date eventDate;
}
```

ç°åœ¨è®©æˆ‘ä»¬è¿›è¡Œæµ‹è¯•ï¼š

```java
@Test
public void whenUsingJsonFormatAnnotationToFormatDate_thenCorrect()
throws JsonProcessingException, ParseException {

    SimpleDateFormat df = new SimpleDateFormat("dd-MM-yyyy hh:mm:ss");
    df.setTimeZone(TimeZone.getTimeZone("UTC"));

    String toParse = "20-12-2014 02:30:00";
    Date date = df.parse(toParse);
    Event event = new Event("party", date);

    ObjectMapper mapper = new ObjectMapper();
    String result = mapper.writeValueAsString(event);
    assertThat(result, containsString(toParse));
}
```

#### è‡ªå®šä¹‰æ—¥æœŸåºåˆ—åŒ–å™¨

ä¸ºäº†å®Œå…¨æ§åˆ¶è¾“å‡ºç»“æœï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨è‡ªå®šä¹‰çš„æ—¥æœŸåºåˆ—åŒ–å™¨ï¼š

```java
public class CustomDateSerializer extends StdSerializer<Date> {

    private SimpleDateFormat formatter = new SimpleDateFormat("dd-MM-yyyy hh:mm:ss");

    public CustomDateSerializer() {
        this(null);
    }

    public CustomDateSerializer(Class<Date> t) {
        super(t);
    }
    
    @Override
    public void serialize(Date value, JsonGenerator gen, SerializerProvider provider)
      throws IOException, JsonProcessingException {
        gen.writeString(formatter.format(value));
    }
}
```

ç°åœ¨ï¼Œæˆ‘ä»¬å°†å®ƒä½œä¸º"eventDate"å­—æ®µçš„åºåˆ—åŒ–å™¨ï¼š

```java
public class Event {
    public String name;

    @JsonSerialize(using = CustomDateSerializer.class)
    public Date eventDate;
}
```

æœ€åï¼Œè®©æˆ‘ä»¬è¿›è¡Œæµ‹è¯•ï¼š

```java
@Test
public void whenUsingCustomDateSerializer_thenCorrect()
throws JsonProcessingException, ParseException {

    SimpleDateFormat df = new SimpleDateFormat("dd-MM-yyyy hh:mm:ss");

    String toParse = "20-12-2014 02:30:00";
    Date date = df.parse(toParse);
    Event event = new Event("party", date);

    ObjectMapper mapper = new ObjectMapper();
    String result = mapper.writeValueAsString(event);
    assertThat(result, containsString(toParse));
}
```
#### ä½¿ç”¨Jacksonåºåˆ—åŒ–Joda-Time

æ—¥æœŸå¹¶ä¸æ€»æ˜¯`java.util.Date`çš„å®ä¾‹ã€‚å®é™…ä¸Šï¼Œè¶Šæ¥è¶Šå¤šçš„æƒ…å†µä¸‹ï¼Œæ—¥æœŸæ˜¯ç”±å…¶ä»–ç±»è¡¨ç¤ºçš„ï¼Œè€Œå¸¸è§çš„ä¸€ç§æ˜¯Joda-Timeåº“ä¸­çš„`DateTime`ç±»ã€‚

è®©æˆ‘ä»¬çœ‹çœ‹å¦‚ä½•ä½¿ç”¨Jacksonå¯¹`DateTime`è¿›è¡Œåºåˆ—åŒ–ã€‚

æˆ‘ä»¬å°†ä½¿ç”¨`jackson-datatype-joda`æ¨¡å—æ¥æ”¯æŒJoda-Timeçš„åºåˆ—åŒ–ï¼š

```xml
<dependency>
  <groupId>com.fasterxml.jackson.datatype</groupId>
  <artifactId>jackson-datatype-joda</artifactId>
  <version>2.15.2</version>
</dependency>
```

ç„¶åï¼Œæˆ‘ä»¬åªéœ€è¦æ³¨å†Œ`JodaModule`å³å¯ï¼š

```java
@Test
public void whenSerializingJodaTime_thenCorrect()
throws JsonProcessingException {
    DateTime date = new DateTime(2014, 12, 20, 2, 30,
        DateTimeZone.forID("Europe/London"));

    ObjectMapper mapper = new ObjectMapper();
    mapper.registerModule(new JodaModule());
    mapper.disable(SerializationFeature.WRITE_DATES_AS_TIMESTAMPS);

    String result = mapper.writeValueAsString(date);
    assertThat(result, containsString("2014-12-20T02:30:00.000Z"));
}
```
#### ä½¿ç”¨Jacksonåºåˆ—åŒ–Java 8æ—¥æœŸ
ç°åœ¨è®©æˆ‘ä»¬çœ‹çœ‹å¦‚ä½•ä½¿ç”¨Jacksonå¯¹Java 8æ—¥æœŸï¼ˆä¾‹å¦‚`LocalDateTime`ï¼‰è¿›è¡Œåºåˆ—åŒ–ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨`jackson-datatype-jsr310`æ¨¡å—ï¼š

```xml
<dependency>
    <groupId>com.fasterxml.jackson.datatype</groupId>
    <artifactId>jackson-datatype-jsr310</artifactId>
    <version>2.15.2</version>
</dependency>
```

ç„¶åï¼Œæˆ‘ä»¬åªéœ€è¦æ³¨å†Œ`JavaTimeModule`ï¼ˆ`JSR310Module`å·²è¢«å¼ƒç”¨ï¼‰ï¼ŒJacksonå°†ä¼šå¤„ç†å‰©ä¸‹çš„äº‹æƒ…ï¼š

```java
@Test
public void whenSerializingJava8Date_thenCorrect()
throws JsonProcessingException {
    LocalDateTime date = LocalDateTime.of(2014, 12, 20, 2, 30);

    ObjectMapper mapper = new ObjectMapper();
    mapper.registerModule(new JavaTimeModule());
    mapper.disable(SerializationFeature.WRITE_DATES_AS_TIMESTAMPS);

    String result = mapper.writeValueAsString(date);
    assertThat(result, containsString("2014-12-20T02:30"));
}
```

### 10. è‡ªå®šä¹‰åºåˆ—åŒ–å’Œååºåˆ—åŒ–
åœ¨æ—¶é—´å¤„ç†ä¸€ç« ä¸­ï¼Œæˆ‘ä»¬å·²ç»åšåˆ°äº†è‡ªå®šä¹‰åºåˆ—åŒ–å¤„ç†ï¼Œç°åœ¨è¡¥å……ä¸€ä¸‹è‡ªå®šä¹‰Dateçš„ååºåˆ—åŒ–å¤„ç†ï¼š

```java
public class CustomDateDeserializer extends StdDeserializer<Date> {

    private SimpleDateFormat formatter = 
      new SimpleDateFormat("dd-MM-yyyy hh:mm:ss");

    public CustomDateDeserializer() {
        this(null);
    }

    public CustomDateDeserializer(Class<?> vc) {
        super(vc);
    }

    @Override
    public Date deserialize(JsonParser jsonparser, DeserializationContext context)
      throws IOException, JsonProcessingException {
        String date = jsonparser.getText();
        try {
            return formatter.parse(date);
        } catch (ParseException e) {
            throw new RuntimeException(e);
        }
    }
}
```

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†å°†å…¶ç”¨ä½œ"eventDate"çš„ååºåˆ—åŒ–å™¨ï¼š

```java
public class Event {
    public String name;

    @JsonDeserialize(using = CustomDateDeserializer.class)
    public Date eventDate;
}
```

æœ€åï¼Œæˆ‘ä»¬å°†è¿›è¡Œæµ‹è¯•ï¼š

```java
@Test
public void whenDeserializingDateUsingCustomDeserializer_thenCorrect()
throws JsonProcessingException, IOException {

    String json = "{\"name\":\"party\",\"eventDate\":\"20-12-2014 02:30:00\"}";

    SimpleDateFormat df = new SimpleDateFormat("dd-MM-yyyy hh:mm:ss");
    ObjectMapper mapper = new ObjectMapper();

    Event event = mapper.readerFor(Event.class).readValue(json);
    assertEquals("20-12-2014 02:30:00", df.format(event.eventDate));
}
```

#### Jacksonçš„datatypeæ¨¡å— 
åœ¨å‰é¢æˆ‘ä»¬å·²ç»çœ‹åˆ°äº†Jacksonæœ¬èº«æä¾›äº†å¾ˆå¤šdatatypeæ¨¡å—ï¼Œç”¨äºæä¾›å¯¹ä¸åŒæ•°æ®ç±»å‹çš„åºåˆ—åŒ–å’Œååºåˆ—åŒ–æ”¯æŒã€‚å®ƒåŒ…å«äº†ä¸€äº›ç‰¹å®šç±»å‹çš„åºåˆ—åŒ–å’Œååºåˆ—åŒ–å™¨ï¼Œä½¿å¾—åœ¨å¤„ç†ç‰¹å®šæ•°æ®ç±»å‹æ—¶æ›´åŠ æ–¹ä¾¿å’Œçµæ´»ã€‚

é™¤äº†æ—¥æœŸå’Œæ—¶é—´ç±»å‹ï¼Œdatatypeæ¨¡å—è¿˜æä¾›äº†å¯¹å…¶ä»–æ•°æ®ç±»å‹çš„æ”¯æŒï¼Œå¦‚Guavaç±»å‹ã€Java8ç±»å‹ã€PCollectionsç±»å‹ç­‰ã€‚é€šè¿‡ä½¿ç”¨ç›¸åº”çš„æ¨¡å—ï¼Œå¯ä»¥è½»æ¾åœ°å¤„ç†è¿™äº›ç‰¹å®šç±»å‹çš„åºåˆ—åŒ–å’Œååºåˆ—åŒ–ã€‚

è¦åœ¨é¡¹ç›®ä¸­ä½¿ç”¨datatypeæ¨¡å—ï¼Œéœ€è¦å°†ç›¸åº”çš„ä¾èµ–é¡¹æ·»åŠ åˆ°é¡¹ç›®çš„æ„å»ºæ–‡ä»¶ï¼ˆå¦‚pom.xmlï¼‰ã€‚å…·ä½“ä¾èµ–é¡¹çš„åç§°å’Œç‰ˆæœ¬å·å¯ä»¥æ ¹æ®éœ€è¦å’Œä½¿ç”¨çš„Jacksonç‰ˆæœ¬è¿›è¡Œè°ƒæ•´ã€‚

ä»¥ä¸‹æ˜¯å¸¸ç”¨çš„datatypeæ¨¡å—ä¾èµ–é¡¹ï¼š

- `jackson-datatype-jsr310`ï¼šæä¾›å¯¹Java 8æ—¥æœŸå’Œæ—¶é—´APIçš„æ”¯æŒã€‚
- `jackson-module-parameter-names`ï¼šæä¾›äº†å¯¹ä½¿ç”¨æ–°çš„JDK 8ç‰¹æ€§çš„æ”¯æŒçš„æ¨¡å—ï¼Œèƒ½å¤Ÿè®¿é—®æ„é€ å‡½æ•°å’Œæ–¹æ³•å‚æ•°çš„åç§°ï¼Œä»¥å…è®¸çœç•¥@JsonPropertyã€‚
- `jackson-datatype-jdk8`ï¼šæ”¯æŒé™¤æ—¥æœŸ/æ—¶é—´ç±»å‹ä»¥å¤–çš„JDK 8æ•°æ®ç±»å‹ï¼ŒåŒ…æ‹¬Optionalã€‚
- `jackson-datatype-joda`ï¼šæä¾›å¯¹Joda-Timeåº“çš„æ”¯æŒã€‚
- `jackson-datatype-guava`ï¼šæä¾›å¯¹Guavaåº“çš„æ”¯æŒã€‚
- `jackson-datatype-pcollections`ï¼šæä¾›å¯¹PCollectionsåº“çš„æ”¯æŒã€‚

åœ¨å°†è¿™äº›ä¾èµ–é¡¹æ·»åŠ åˆ°é¡¹ç›®ä¸­åï¼Œå¯ä»¥é€šè¿‡æ³¨å†Œç›¸åº”çš„æ¨¡å—æ¥å¯ç”¨å®ƒä»¬ï¼Œä¾‹å¦‚ä½¿ç”¨`ObjectMapper`çš„`registerModule`æ–¹æ³•ã€‚

æ›´å¤šdatatypeï¼Œå‚è€ƒ [Third-party datatype modules](https://github.com/FasterXML/jackson#third-party-datatype-modules)

#### æ³¨å†Œè‡ªå·±çš„Module
åœ¨ä½¿ç”¨Guavaçš„Tableç±»å‹æ—¶ï¼Œå‘ç°å¹¶æ²¡æœ‰å¯¹äºTableç±»ååºåˆ—åŒ–çš„æ”¯æŒã€‚å¯ä»¥è‡ªå·±æ¥æ·»åŠ æ”¯æŒï¼š
```java
    ObjectMapper OBJECT_MAPPER = new ObjectMapper();
    // æ·»åŠ åºåˆ—åŒ–æ–¹æ¡ˆ
    OBJECT_MAPPER.registerModule(new GuavaModule());
    // Guavaçš„Tableæ²¡æœ‰ååºåˆ—åŒ–æ–¹æ¡ˆï¼Œä½¿ç”¨è‡ªå®šä¹‰æ–¹æ¡ˆ
    SimpleModule simpleModule = new SimpleModule();
    simpleModule.addDeserializer(Table.class, new TableDeserializer());
    OBJECT_MAPPER.registerModule(simpleModule);
        
    /**
     * Guavua Tableçš„ååºåˆ—åŒ–æ–¹æ¡ˆ
     */
    public static class TableDeserializer extends JsonDeserializer<Table<?, ?, ?>> {

        @Override
        public Table<?, ?, ?> deserialize(final JsonParser jp, final DeserializationContext ctxt) throws IOException {
            final ImmutableTable.Builder<Object, Object, Object> tableBuilder = ImmutableTable.builder();
            @SuppressWarnings("unchecked") final Map<Object, Map<Object, Object>> rowMap = jp.readValueAs(Map.class);
            for (final Map.Entry<Object, Map<Object, Object>> rowEntry : rowMap.entrySet()) {
                final Object rowKey = rowEntry.getKey();
                for (final Map.Entry<Object, Object> cellEntry : rowEntry.getValue().entrySet()) {
                    final Object colKey = cellEntry.getKey();
                    final Object val = cellEntry.getValue();
                    tableBuilder.put(rowKey, colKey, val);
                }
            }
            return tableBuilder.build();
        }
    }
```

### 11. Jacksonçš„æ³¨è§£
åœ¨æ—¶é—´å¤„ç†ä¸€èŠ‚ï¼Œæˆ‘ä»¬å·²ç»é¢†ç•¥äº†`@JsonFormat`æ³¨è§£çš„ä½¿ç”¨ã€‚

Jacksonæä¾›äº†ä¸€ç³»åˆ—çš„æ³¨è§£ï¼Œç”¨äºæ§åˆ¶åºåˆ—åŒ–å’Œååºåˆ—åŒ–è¿‡ç¨‹ä¸­çš„è¡Œä¸ºã€‚

ä¸‹é¢å¯¹ä¸€äº›å¸¸ç”¨çš„æ³¨è§£è¿›è¡Œè¯´æ˜ï¼š
1. `@JsonIgnore`:
   - ä½œç”¨: æ ‡è®°æŸä¸ªå­—æ®µæˆ–æ–¹æ³•ï¼Œåœ¨åºåˆ—åŒ–å’Œååºåˆ—åŒ–è¿‡ç¨‹ä¸­å¿½ç•¥è¯¥å±æ€§ã€‚
   - ç¤ºä¾‹ä»£ç :
   ```java
   public class Person {
       private String name;
       @JsonIgnore
       private int age;

       // çœç•¥æ„é€ å‡½æ•°å’Œå…¶ä»–æ–¹æ³•

       // getters and setters
   }
   ```

2. `@JsonProperty`:
   - ä½œç”¨: æŒ‡å®šå­—æ®µæˆ–æ–¹æ³•åœ¨åºåˆ—åŒ–å’Œååºåˆ—åŒ–ä¸­çš„åç§°ã€‚
   - ç¤ºä¾‹ä»£ç :
   ```java
   public class Person {
       @JsonProperty("full_name")
       private String name;

       // çœç•¥æ„é€ å‡½æ•°å’Œå…¶ä»–æ–¹æ³•

       // getters and setters
   }
   ```

3. `@JsonAnyGetter`:
   - ä½œç”¨: åœ¨åºåˆ—åŒ–æ—¶å°†Javaå¯¹è±¡çš„åŠ¨æ€å±æ€§ä½œä¸ºé”®å€¼å¯¹æ·»åŠ åˆ°JSONä¸­ã€‚
   - ç¤ºä¾‹ä»£ç :
   ```java
   public class Person {
       private Map<String, Object> properties = new HashMap<>();

       public void setProperty(String key, Object value) {
           properties.put(key, value);
       }

       @JsonAnyGetter
       public Map<String, Object> getProperties() {
           return properties;
       }
   }
   ```

4. `@JsonPropertyOrder`:
   - ä½œç”¨: æŒ‡å®šåºåˆ—åŒ–æ—¶å±æ€§çš„é¡ºåºã€‚
   - ç¤ºä¾‹ä»£ç :
   ```java
   @JsonPropertyOrder({ "name", "age", "email" })
   public class Person {
       private String name;
       private int age;
       private String email;

       // çœç•¥æ„é€ å‡½æ•°å’Œå…¶ä»–æ–¹æ³•

       // getters and setters
   }
   ```

5. `@JsonRawValue`:
   - ä½œç”¨: å°†å­—ç¬¦ä¸²å±æ€§çš„åŸå§‹å€¼ç›´æ¥è¾“å‡ºï¼Œè€Œä¸è¿›è¡Œé¢å¤–çš„è½¬ä¹‰æˆ–å¼•å·æ·»åŠ ã€‚
   - ç¤ºä¾‹ä»£ç :
   ```java
   public class Person {
       private String description;

       @JsonRawValue
       public String getDescription() {
           return description;
       }

       // çœç•¥æ„é€ å‡½æ•°å’Œå…¶ä»–æ–¹æ³•

       // setters
   }
   ```

6. `@JsonAlias`:
   - ä½œç”¨: å®šä¹‰ä¸€ä¸ªæˆ–å¤šä¸ªæ›¿ä»£åç§°ï¼Œç”¨äºåœ¨ååºåˆ—åŒ–è¿‡ç¨‹ä¸­åŒ¹é…JSONå±æ€§ã€‚
   - ç¤ºä¾‹ä»£ç :
   ```java
   public class Person {
       @JsonAlias({ "firstName", "givenName" })
       private String name;

       // çœç•¥æ„é€ å‡½æ•°å’Œå…¶ä»–æ–¹æ³•

       // getters and setters
   }
   ```

7. `@JsonIgnoreType`:
   - ä½œç”¨: åœ¨åºåˆ—åŒ–å’Œååºåˆ—åŒ–è¿‡ç¨‹ä¸­å¿½ç•¥æŒ‡å®šçš„ç±»å‹ã€‚
   - ç¤ºä¾‹ä»£ç :
   ```java
   @JsonIgnoreType
   public class SecretDetails {
       private String password;
       private String secretKey;

       // çœç•¥æ„é€ å‡½æ•°å’Œå…¶ä»–æ–¹æ³•

       // getters and setters
   }

   public class Person {
       private String name;
       private int age;
       private SecretDetails secretDetails;

       // çœç•¥æ„é€ å‡½æ•°å’Œå…¶ä»–æ–¹æ³•

       // getters and setters
   }
   ```

Jacksonè¿˜æä¾›äº†å¾ˆå¤šå…¶ä»–æ³¨è§£ï¼Œè¯·å‚è€ƒ [Jackson Annotations](https://github.com/FasterXML/jackson-annotations/wiki/Jackson-Annotations) å’Œ [Jackson Annotation Examples](https://www.baeldung.com/jackson-annotations)

### 12. å¯¹å…¶ä»–æ•°æ®æ ¼å¼çš„æ”¯æŒ
é™¤äº†é»˜è®¤çš„JSONæ ¼å¼å¤–ï¼ŒJacksonæä¾›äº†å¾ˆå¤šæ‰©å±•æ¨¡å—ã€‚è¿™äº›æ‰©å±•æ¨¡å—æä¾›äº†å¯¹å„ç§æ•°æ®æ ¼å¼çš„æ”¯æŒï¼Œå¦‚XMLã€YAMLã€CSVç­‰ã€‚

Jacksonçš„Data format modulesæä¾›äº†ä»¥ä¸‹åŠŸèƒ½ï¼š

1. XMLæ”¯æŒï¼ˆJackson XML Moduleï¼‰ï¼š
   Jackson XML Moduleå…è®¸ä½ å°†Javaå¯¹è±¡åºåˆ—åŒ–ä¸ºXMLæ ¼å¼ï¼Œæˆ–å°†XMLååºåˆ—åŒ–ä¸ºJavaå¯¹è±¡ã€‚å®ƒæä¾›äº†ä¸Jackson JSONåº“ç›¸ä¼¼çš„APIå’Œæ³¨è§£ï¼Œç”¨äºæ§åˆ¶XMLåºåˆ—åŒ–å’Œååºåˆ—åŒ–çš„è¡Œä¸ºã€‚

2. YAMLæ”¯æŒï¼ˆJackson YAML Moduleï¼‰ï¼š
   Jackson YAML Moduleå…è®¸ä½ å°†Javaå¯¹è±¡åºåˆ—åŒ–ä¸ºYAMLæ ¼å¼ï¼Œæˆ–å°†YAMLååºåˆ—åŒ–ä¸ºJavaå¯¹è±¡ã€‚å®ƒæä¾›äº†ç®€å•è€Œç›´è§‚çš„APIå’Œæ³¨è§£ï¼Œç”¨äºå¤„ç†YAMLæ•°æ®ã€‚

3. CSVæ”¯æŒï¼ˆJackson CSV Moduleï¼‰ï¼š
   Jackson CSV Moduleæä¾›äº†å¯¹CSVï¼ˆé€—å·åˆ†éš”å€¼ï¼‰æ ¼å¼çš„æ”¯æŒã€‚å®ƒå…è®¸ä½ å°†Javaå¯¹è±¡åºåˆ—åŒ–ä¸ºCSVæ ¼å¼ï¼Œæˆ–å°†CSVååºåˆ—åŒ–ä¸ºJavaå¯¹è±¡ã€‚ä½ å¯ä»¥é€šè¿‡æ³¨è§£æˆ–é…ç½®æ¥æ§åˆ¶CSVçš„æ˜ å°„è§„åˆ™ã€‚

4. Protobufæ”¯æŒï¼ˆJackson Protobuf Moduleï¼‰ï¼š
   Jackson Protobuf Moduleæä¾›äº†å¯¹Google Protobufæ ¼å¼çš„æ”¯æŒã€‚å®ƒå…è®¸ä½ å°†Protobufæ¶ˆæ¯åºåˆ—åŒ–ä¸ºJSONæˆ–XMLï¼Œæˆ–å°†JSONæˆ–XMLååºåˆ—åŒ–ä¸ºProtobufæ¶ˆæ¯ã€‚

5. CBORæ”¯æŒï¼ˆJackson CBOR Moduleï¼‰ï¼š
   Jackson CBOR Moduleæä¾›äº†å¯¹CBORï¼ˆConcise Binary Object Representationï¼‰æ ¼å¼çš„æ”¯æŒã€‚å®ƒå…è®¸ä½ å°†Javaå¯¹è±¡åºåˆ—åŒ–ä¸ºCBORæ ¼å¼ï¼Œæˆ–å°†CBORååºåˆ—åŒ–ä¸ºJavaå¯¹è±¡ã€‚CBORæ˜¯ä¸€ç§ç´§å‡‘çš„äºŒè¿›åˆ¶æ ¼å¼ï¼Œé€‚ç”¨äºé«˜æ•ˆçš„æ•°æ®ä¼ è¾“å’Œå­˜å‚¨ã€‚

é™¤äº†ä¸Šè¿°æåˆ°çš„æ¨¡å—ï¼ŒJacksonè¿˜æä¾›äº†å…¶ä»–æ•°æ®æ ¼å¼çš„æ”¯æŒæ‰©å±•æ¨¡å—ï¼Œå¦‚Smileï¼ˆäºŒè¿›åˆ¶JSONæ ¼å¼ï¼‰å’ŒPropertiesæ–‡ä»¶æ ¼å¼ã€‚

ä½¿ç”¨è¿™äº›Data format modulesï¼Œä½ å¯ä»¥åœ¨Jacksonä¸­å¤„ç†ä¸åŒçš„æ•°æ®æ ¼å¼ï¼Œå®ç°çµæ´»çš„æ•°æ®è½¬æ¢å’Œäº¤äº’ã€‚ä½ å¯ä»¥æ ¹æ®éœ€è¦é€‰æ‹©ç›¸åº”çš„æ¨¡å—ï¼Œå¹¶æ ¹æ®æ¨¡å—çš„æ–‡æ¡£å’Œç¤ºä¾‹è¿›è¡Œé…ç½®å’Œä½¿ç”¨ã€‚è¿™äº›æ¨¡å—çš„å¼•å…¥é€šå¸¸éœ€è¦æ·»åŠ ç›¸åº”çš„ä¾èµ–é¡¹åˆ°é¡¹ç›®çš„æ„å»ºæ–‡ä»¶ä¸­ã€‚

ä»¥ä¸Šçš„æ”¯æŒï¼Œä½ éƒ½å¯ä»¥åœ¨ [Data format modules](https://github.com/FasterXML/jackson#data-format-modules) ä¸­æ‰¾åˆ°ã€‚

### 13. å…¶ä»–
Jacksonè¿˜æä¾›äº†ä»¥ä¸‹åŠŸèƒ½ï¼š
- [å¯¹äºJAX-RSçš„æ”¯æŒ](https://github.com/FasterXML/jackson-jaxrs-providers)
- [JSON Views](https://www.baeldung.com/jackson-json-view-annotation)

## æ€§èƒ½ä¼˜åŒ–å»ºè®®

### 1. ObjectMapperå¤ç”¨
```java
// âŒ é”™è¯¯ï¼šæ¯æ¬¡åˆ›å»ºæ–°å®ä¾‹
public String toJson(Object obj) {
    return new ObjectMapper().writeValueAsString(obj);
}

// âœ… æ­£ç¡®ï¼šå¤ç”¨å•ä¾‹
private static final ObjectMapper MAPPER = new ObjectMapper();
public String toJson(Object obj) {
    return MAPPER.writeValueAsString(obj);
}
```

### 2. ä½¿ç”¨@JsonPropertyå‡å°‘åå°„
```java
public class Person {
    @JsonProperty("n")
    private String name;
    
    @JsonProperty("a")
    private int age;
}
```

### 3. é¿å…ä½¿ç”¨JsonNodeè¿›è¡Œå¤§é‡æ•°æ®å¤„ç†
- `JsonNode`é€‚åˆåŠ¨æ€JSONï¼Œä½†æ€§èƒ½ä¸å¦‚æ•°æ®ç»‘å®š
- å¤§æ•°æ®é‡æ—¶ä¼˜å…ˆä½¿ç”¨æµå¼APIï¼ˆ`JsonParser`/`JsonGenerator`ï¼‰

### 4. åˆç†é…ç½®Feature
```java
// å…³é—­ä¸éœ€è¦çš„ç‰¹æ€§æå‡æ€§èƒ½
mapper.configure(SerializationFeature.INDENT_OUTPUT, false);
mapper.configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, false);
```

## å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ

### 1. å¾ªç¯å¼•ç”¨
```java
@JsonManagedReference  // çˆ¶ç«¯
private List<Child> children;

@JsonBackReference     // å­ç«¯
private Parent parent;
```

### 2. æ—¥æœŸæ ¼å¼é—®é¢˜
```java
// å…¨å±€é…ç½®
mapper.setDateFormat(new SimpleDateFormat("yyyy-MM-dd HH:mm:ss"));

// æˆ–ä½¿ç”¨Java 8æ—¶é—´API
mapper.registerModule(new JavaTimeModule());
mapper.disable(SerializationFeature.WRITE_DATES_AS_TIMESTAMPS);
```

### 3. å¤§æ–‡ä»¶å¤„ç†
```java
// ä½¿ç”¨æµå¼APIå¤„ç†å¤§æ–‡ä»¶
try (JsonParser parser = mapper.getFactory().createParser(new File("large.json"))) {
    while (parser.nextToken() != JsonToken.END_OBJECT) {
        // é€ä¸ªå¤„ç†token
    }
}
```

## æ€»ç»“

æœ¬æ–‡å…¨é¢ä»‹ç»äº†Javaä¸­JSONå¤„ç†çš„æ–¹æ–¹é¢é¢ï¼Œé‡ç‚¹è®²è§£äº†Jacksonåº“çš„ä½¿ç”¨ï¼š

1. **åŸºç¡€çŸ¥è¯†**ï¼šJSONæ ¼å¼ã€æ•°æ®ç±»å‹ã€åº”ç”¨åœºæ™¯
2. **åº“å¯¹æ¯”**ï¼šJacksonã€Gsonã€Fastjson2çš„ç‰¹ç‚¹å’Œé€‰æ‹©
3. **æ ¸å¿ƒç”¨æ³•**ï¼šå¯¹è±¡æ˜ å°„ã€é›†åˆå¤„ç†ã€å¤æ‚ç±»å‹
4. **é«˜çº§ç‰¹æ€§**ï¼šè‡ªå®šä¹‰åºåˆ—åŒ–ã€æ³¨è§£ä½“ç³»ã€å¤šæ ¼å¼æ”¯æŒ
5. **æœ€ä½³å®è·µ**ï¼šæ€§èƒ½ä¼˜åŒ–ã€å¸¸è§é—®é¢˜è§£å†³

Jacksonä½œä¸ºJavaç”Ÿæ€ä¸­æœ€æˆç†Ÿçš„JSONå¤„ç†åº“ï¼Œæä¾›äº†ï¼š
- ğŸš€ å“è¶Šçš„æ€§èƒ½
- ğŸ¯ å®Œæ•´çš„åŠŸèƒ½ç‰¹æ€§
- ğŸ”§ çµæ´»çš„é…ç½®é€‰é¡¹
- ğŸ“š ä¸°å¯Œçš„æ‰©å±•ç”Ÿæ€

æŒæ¡Jacksonçš„ä½¿ç”¨ï¼Œå°†æå¤§æå‡ä½ åœ¨Javaé¡¹ç›®ä¸­å¤„ç†JSONæ•°æ®çš„æ•ˆç‡å’Œè´¨é‡ã€‚

**ç¥ä½ å˜å¾—æ›´å¼º!**
