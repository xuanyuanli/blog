---
title: Javaå¼€å‘è€…è½¬æˆ˜Pythonï¼šåŸºç¡€ç¯‡
date: 2025-01-13 20:10:00
permalink: /pages/python-for-java-dev-base/
categories:
  - åç«¯
  - å…¶ä»–è¯­è¨€
tags:
  - Python
author:
  name: è½©è¾•æ
  link: https://github.com/xuanyuanli
---

## ä¸€ã€Pythonç®€ä»‹ä¸ç¯å¢ƒæ­å»º

### 1ã€Pythonçš„å‘å±•å†ç¨‹ä¸ç‰¹ç‚¹

ä½œä¸ºJavaå¼€å‘è€…,ä½ å¯èƒ½å¬è¿‡è¿™æ ·ä¸€ä¸ªæ®µå­:"äººç”Ÿè‹¦çŸ­,æˆ‘ç”¨Python"ã€‚è¿™ä¸ä»…ä»…æ˜¯ä¸€å¥å£å·,è€Œæ˜¯Pythonç®€æ´é«˜æ•ˆçš„çœŸå®å†™ç…§ã€‚

<!-- more -->

#### 1.1ã€Pythonçš„å†å²æ¼”è¿›

Pythonç”±Guido van Rossumåœ¨1989å¹´åœ£è¯èŠ‚æœŸé—´åˆ›é€ ,åˆè¡·æ˜¯å¼€å‘ä¸€é—¨æ—¢ç®€å•åˆå¼ºå¤§çš„ç¼–ç¨‹è¯­è¨€ã€‚è®©æˆ‘ä»¬å¿«é€Ÿäº†è§£å®ƒçš„æ¼”è¿›å†ç¨‹:

- **Python 1.0**(1994å¹´):ç¡®ç«‹äº†æ ¸å¿ƒè®¾è®¡ç†å¿µ,å¼•å…¥lambdaã€mapã€filterç­‰å‡½æ•°å¼ç¼–ç¨‹ç‰¹æ€§
- **Python 2.x**(2000-2010å¹´):é€æ¸æµè¡Œ,æˆä¸ºç§‘å­¦è®¡ç®—å’ŒWebå¼€å‘çš„é‡è¦å·¥å…·ã€‚æœ€åç‰ˆæœ¬æ˜¯Python 2.7(2010å¹´)
- **Python 3.x**(2008å¹´è‡³ä»Š):**å½»åº•é‡æ–°è®¾è®¡**,ä¿®æ­£äº†è®¸å¤šå†å²é—ç•™é—®é¢˜,ä½†ä¸å‘åå…¼å®¹Python 2

éœ€è¦æ³¨æ„çš„æ˜¯,Python 2å·²ç»åœ¨2020å¹´1æœˆ1æ—¥æ­£å¼åœæ­¢ç»´æŠ¤ã€‚å¦‚æœä½ æ˜¯ç°åœ¨å¼€å§‹å­¦ä¹ Python,**ç›´æ¥å­¦Python 3å°±å¥½**,å®Œå…¨ä¸ç”¨çº ç»“Python 2ã€‚

#### 1.2ã€3çš„é‡å¤§æ”¹è¿›

ä½œä¸ºJavaå¼€å‘è€…,ä½ ä¼šæ¬£èµPython 3å¸¦æ¥çš„è¿™äº›æ”¹è¿›:

- **ç»Ÿä¸€çš„Unicodeå­—ç¬¦ä¸²å¤„ç†**:æ‰€æœ‰å­—ç¬¦ä¸²é»˜è®¤Unicode,å‘Šåˆ«Javaæ—©æœŸçš„å­—ç¬¦ç¼–ç å™©æ¢¦
- **æ›´æ¸…æ™°çš„æ•´æ•°é™¤æ³•**:`3/2`å¾—åˆ°`1.5`è€Œä¸æ˜¯`1`,æ•´é™¤ä½¿ç”¨`//`æ“ä½œç¬¦
- **æ”¹è¿›çš„å¼‚å¸¸è¯­æ³•**:ç±»ä¼¼Javaçš„`catch`è¯­æ³•,`except Exception as e`æ›´ç›´è§‚
- **ç±»å‹æ³¨è§£æ”¯æŒ**(Python 3.5+):è®©ä¹ æƒ¯é™æ€ç±»å‹çš„Javaå¼€å‘è€…æ›´èˆ’é€‚
- **å¼‚æ­¥ç¼–ç¨‹åŸç”Ÿæ”¯æŒ**(Python 3.5+):`async/await`è¯­æ³•,ç±»ä¼¼Javaçš„CompletableFuture

#### 1.3ã€Pythonçš„è®¾è®¡å“²å­¦

åœ¨Pythonäº¤äº’ç¯å¢ƒä¸­è¾“å…¥`import this`,ä½ ä¼šçœ‹åˆ°"The Zen of Python"(Pythonä¹‹ç¦…)ã€‚è¿™æ˜¯Pythonçš„è®¾è®¡ç†å¿µ,å…¶ä¸­å‡ æ¡ç‰¹åˆ«å€¼å¾—Javaå¼€å‘è€…å…³æ³¨:

```
ä¼˜ç¾èƒœäºä¸‘é™‹(Beautiful is better than ugly)
æ˜äº†èƒœäºæ™¦æ¶©(Explicit is better than implicit)
ç®€æ´èƒœäºå¤æ‚(Simple is better than complex)
å¯è¯»æ€§å¾ˆé‡è¦(Readability counts)
```

å¯¹æ¯”Javaå†—é•¿çš„æ ·æ¿ä»£ç ,Pythonè¿½æ±‚çš„æ˜¯**ç”¨æœ€å°‘çš„ä»£ç è¡¨è¾¾æœ€æ¸…æ™°çš„æ„å›¾**ã€‚æ¯”å¦‚åˆ›å»ºä¸€ä¸ªPersonç±»:

```java
// Javaå†™æ³•
public class Person {
    private String name;
    private int age;

    public Person(String name, int age) {
        this.name = name;
        this.age = age;
    }

    public String getName() { return name; }
    public void setName(String name) { this.name = name; }
    public int getAge() { return age; }
    public void setAge(int age) { this.age = age; }

    @Override
    public String toString() {
        return "Person{name='" + name + "', age=" + age + "}";
    }
}
```

```python
# Pythonå†™æ³•(ä½¿ç”¨dataclass)
from dataclasses import dataclass

@dataclass
class Person:
    name: str
    age: int
```

çœ‹åˆ°å·®è·äº†å§?Pythonåªç”¨4è¡Œä»£ç å°±å®ç°äº†Javaéœ€è¦20å¤šè¡Œå®Œæˆçš„åŠŸèƒ½ã€‚

#### 1.4ã€Pythonçš„æ ¸å¿ƒä¼˜åŠ¿

1. **ç®€æ´æ˜“è¯»çš„è¯­æ³•**:ç”¨ç¼©è¿›ä»£æ›¿èŠ±æ‹¬å·,ä»£ç ç»“æ„ä¸€ç›®äº†ç„¶ã€‚ä¹ æƒ¯äº†Javaçš„ä½ å¯èƒ½ä¸€å¼€å§‹ä¸é€‚åº”,ä½†å¾ˆå¿«å°±ä¼šçˆ±ä¸Šè¿™ç§æ¸…çˆ½çš„æ„Ÿè§‰

2. **ä¸°å¯Œçš„æ ‡å‡†åº“å’Œç¬¬ä¸‰æ–¹ç”Ÿæ€**:Pythonè‡ªå¸¦"ç”µæ± "(batteries included),æ ‡å‡†åº“å‡ ä¹è¦†ç›–äº†æ—¥å¸¸å¼€å‘çš„å„ä¸ªæ–¹é¢ã€‚å†åŠ ä¸ŠPyPI(Python Package Index)ä¸Š50ä¸‡+çš„ç¬¬ä¸‰æ–¹åŒ…,ä½ å‡ ä¹æ€»èƒ½æ‰¾åˆ°ç°æˆçš„è½®å­

3. **åŠ¨æ€ç±»å‹ä¸è§£é‡Šæ‰§è¡Œ**:æ— éœ€ç¼–è¯‘,å†™å®Œå³è·‘ã€‚è¿™å¯¹å¿«é€ŸåŸå‹å¼€å‘å’Œè„šæœ¬ç¼–å†™ç‰¹åˆ«å‹å¥½ã€‚å½“ç„¶,ä½ ä¹Ÿå¯ä»¥ç”¨ç±»å‹æ³¨è§£+é™æ€æ£€æŸ¥å·¥å…·æ¥è·å¾—ç±»å‹å®‰å…¨

4. **è·¨å¹³å°å…¼å®¹æ€§**:å†™ä¸€æ¬¡,åˆ°å¤„è¿è¡Œâ€”â€”è¿™æ¬¡æ˜¯çœŸçš„ã€‚ä¸åƒJavaè¿˜éœ€è¦è€ƒè™‘ä¸åŒJVMçš„å·®å¼‚,Pythonçš„è·¨å¹³å°èƒ½åŠ›æ›´åŠ å½»åº•

5. **å¤šèŒƒå¼ç¼–ç¨‹æ”¯æŒ**:é¢å‘å¯¹è±¡ã€å‡½æ•°å¼ã€è¿‡ç¨‹å¼â€”â€”æƒ³æ€ä¹ˆå†™å°±æ€ä¹ˆå†™ã€‚Pythonä¸åƒJavaé‚£æ ·å¼ºåˆ¶é¢å‘å¯¹è±¡,ä½ å¯ä»¥æ ¹æ®åœºæ™¯çµæ´»é€‰æ‹©ç¼–ç¨‹èŒƒå¼

### 2ã€Pythonä¸Javaçš„æ ¸å¿ƒå·®å¼‚

ä»Javaè½¬åˆ°Python,æœ€å¤§çš„æ„Ÿå—å°±æ˜¯"è½»è£…ä¸Šé˜µ"ã€‚ä½†è½»è£…ä¸ä»£è¡¨ç®€é™‹,è®©æˆ‘ä»¬çœ‹çœ‹ä¸¤è€…çš„æ ¸å¿ƒå·®å¼‚ã€‚

#### 2.1ã€è¿è¡Œæœºåˆ¶å·®å¼‚

**ç¼–è¯‘å‹ vs è§£é‡Šå‹**

```java
// Java: ç¼–è¯‘åè¿è¡Œ
javac HelloWorld.java  // ç”Ÿæˆ .classå­—èŠ‚ç 
java HelloWorld        // JVMæ‰§è¡Œå­—èŠ‚ç 
```

```python
# Python: ç›´æ¥è§£é‡Šæ‰§è¡Œ
python hello_world.py  # è§£é‡Šå™¨ç›´æ¥è¿è¡Œ
```

Javaæ˜¯å…¸å‹çš„ç¼–è¯‘å‹è¯­è¨€(ä¸¥æ ¼è¯´æ˜¯å…ˆç¼–è¯‘æˆå­—èŠ‚ç å†ç”±JVMè§£é‡Šæ‰§è¡Œ),è€ŒPythonæ˜¯è§£é‡Šå‹è¯­è¨€ã€‚è¿™å¸¦æ¥å‡ ä¸ªç›´æ¥å½±å“:

- **å¼€å‘é€Ÿåº¦**:Pythonæ”¹å®Œä»£ç ç›´æ¥è·‘,æ— éœ€ç¼–è¯‘ç¯èŠ‚,è¿­ä»£æ›´å¿«
- **è¿è¡Œæ€§èƒ½**:Javaé€šå¸¸æ¯”Pythonå¿«3-10å€(ä½†å¯¹å¤§å¤šæ•°Webåº”ç”¨æ¥è¯´,æ€§èƒ½ç“¶é¢ˆåœ¨I/Oè€Œéè®¡ç®—)
- **é”™è¯¯å‘ç°**:Javaåœ¨ç¼–è¯‘æœŸå°±èƒ½å‘ç°ç±»å‹é”™è¯¯,Pythonè¦åˆ°è¿è¡Œæ—¶æ‰æš´éœ²(ä½†å¯ä»¥ç”¨ç±»å‹æ£€æŸ¥å·¥å…·å¼¥è¡¥)

#### 2.2ã€ç±»å‹ç³»ç»Ÿå·®å¼‚

**é™æ€ç±»å‹ vs åŠ¨æ€ç±»å‹**

è¿™æ˜¯æœ€æ ¸å¿ƒçš„å·®å¼‚ä¹‹ä¸€:

```java
// Java: é™æ€ç±»å‹,å˜é‡ç±»å‹ç¼–è¯‘æœŸç¡®å®š
String name = "å¼ ä¸‰";
name = 123;  // ç¼–è¯‘é”™è¯¯!
```

```python
# Python: åŠ¨æ€ç±»å‹,å˜é‡åªæ˜¯å¯¹è±¡çš„å¼•ç”¨
name = "å¼ ä¸‰"
name = 123  # å®Œå…¨åˆæ³•,nameç°åœ¨æŒ‡å‘æ•´æ•°å¯¹è±¡
```

åŠ¨æ€ç±»å‹çš„ä¼˜åŠ¿:
- ä»£ç æ›´ç®€æ´,ä¸éœ€è¦å†™ç±»å‹å£°æ˜
- çµæ´»æ€§æ›´é«˜,é¸­å­ç±»å‹(duck typing)è®©å¤šæ€æ›´è‡ªç„¶

åŠ¨æ€ç±»å‹çš„åŠ£åŠ¿:
- ç±»å‹é”™è¯¯è¦åˆ°è¿è¡Œæ—¶æ‰æš´éœ²
- IDEçš„ä»£ç è¡¥å…¨å’Œé‡æ„èƒ½åŠ›ç›¸å¯¹è¾ƒå¼±

**å¥½æ¶ˆæ¯**:Python 3.5+å¼•å…¥äº†ç±»å‹æ³¨è§£,å¯ä»¥ä¸¤å…¨å…¶ç¾:

```python
def greet(name: str) -> str:
    return f"Hello, {name}"

# é…åˆmypyå·¥å…·åšé™æ€æ£€æŸ¥
result: int = greet("å¼ ä¸‰")  # mypyä¼šè­¦å‘Šç±»å‹ä¸åŒ¹é…
```

**æ˜¾å¼ç±»å‹å£°æ˜ vs ç±»å‹æ¨æ–­**

```java
// Javaéœ€è¦æ˜¾å¼å£°æ˜
Map<String, List<Integer>> data = new HashMap<>();
```

```python
# Pythonç›´æ¥æ¨æ–­
data = {}  # ç©ºå­—å…¸
data = {"scores": [95, 87, 92]}  # è‡ªåŠ¨æ¨æ–­ä¸ºdict[str, list[int]]
```

Pythonçš„ç±»å‹æ¨æ–­è®©ä»£ç æ›´ç®€æ´,ä½†å¦‚æœä½ ä¹ æƒ¯äº†Javaçš„æ˜ç¡®æ€§,ä¹Ÿå¯ä»¥åŠ ä¸Šç±»å‹æ³¨è§£:

```python
from typing import Dict, List

data: Dict[str, List[int]] = {"scores": [95, 87, 92]}
```

#### 2.3ã€æ€§èƒ½ä¸å†…å­˜ç®¡ç†

**æ€§èƒ½ç‰¹æ€§å¯¹æ¯”**

| ç»´åº¦ | Java | Python |
|-----|------|--------|
| å¯åŠ¨é€Ÿåº¦ | è¾ƒæ…¢(JVMå¯åŠ¨å¼€é”€) | å¿«(ç›´æ¥è§£é‡Šæ‰§è¡Œ) |
| è¿è¡Œé€Ÿåº¦ | å¿«(JITç¼–è¯‘ä¼˜åŒ–) | è¾ƒæ…¢(è§£é‡Šæ‰§è¡Œ) |
| å†…å­˜å ç”¨ | è¾ƒå¤§(JVMå †) | è¾ƒå° |
| å¤šçº¿ç¨‹ | çœŸæ­£çš„å¹¶è¡Œ | GILé™åˆ¶(åé¢ä¼šè®²) |

å®é™…é¡¹ç›®ä¸­,Pythonçš„"æ…¢"å¾€å¾€æ²¡æƒ³è±¡ä¸­é‚£ä¹ˆä¸¥é‡,å› ä¸º:
1. æ€§èƒ½ç“¶é¢ˆé€šå¸¸åœ¨I/Oè€ŒéCPU
2. å¯ä»¥ç”¨Cæ‰©å±•åŠ é€Ÿå…³é”®ä»£ç (NumPyã€Pandasåº•å±‚éƒ½æ˜¯C)
3. å¼€å‘æ•ˆç‡çš„æå‡èƒ½å¼¥è¡¥è¿è¡Œæ•ˆç‡çš„æŸå¤±

**å†…å­˜ç®¡ç†æœºåˆ¶**

```java
// Java: åƒåœ¾å›æ”¶(GC)
Object obj = new Object();
obj = null;  // ç­‰å¾…GCå›æ”¶
```

```python
# Python: å¼•ç”¨è®¡æ•° + åƒåœ¾å›æ”¶
obj = SomeClass()
obj = None  # å¼•ç”¨è®¡æ•°ä¸º0,ç«‹å³å›æ”¶
```

Pythonä½¿ç”¨å¼•ç”¨è®¡æ•°ä½œä¸ºä¸»è¦å†…å­˜ç®¡ç†æœºåˆ¶,é…åˆå‘¨æœŸæ€§åƒåœ¾å›æ”¶å¤„ç†å¾ªç¯å¼•ç”¨ã€‚è¿™æ„å‘³ç€:
- å¯¹è±¡é”€æ¯æ›´åŠæ—¶(å¼•ç”¨è®¡æ•°å½’é›¶å³å›æ”¶)
- ä½†å¾ªç¯å¼•ç”¨éœ€è¦GCä»‹å…¥
- å¯ä»¥ç”¨`with`è¯­å¥æ˜ç¡®ç®¡ç†èµ„æºç”Ÿå‘½å‘¨æœŸ

#### 2.4ã€ä»£ç ç»„ç»‡ä¸è¯­æ³•é£æ ¼

**ä»£ç ç»„ç»‡æ–¹å¼**

```java
// Java: å¼ºåˆ¶é¢å‘å¯¹è±¡,ä¸€åˆ‡çš†ç±»
public class MathUtils {
    public static int add(int a, int b) {
        return a + b;
    }
}
```

```python
# Python: æ¨¡å—åŒ–,æ›´çµæ´»
# å¯ä»¥ç›´æ¥å†™å‡½æ•°,ä¸éœ€è¦ç±»
def add(a, b):
    return a + b

# å½“ç„¶ä¹Ÿå¯ä»¥ç”¨ç±»
class MathUtils:
    @staticmethod
    def add(a, b):
        return a + b
```

Pythonçš„æ¨¡å—å°±æ˜¯æ–‡ä»¶,ä¸éœ€è¦åƒJavaé‚£æ ·åŒ…åå’Œç›®å½•ç»“æ„å®Œå…¨å¯¹åº”ã€‚ä¸€ä¸ªç®€å•çš„å·¥å…·å‡½æ•°,Pythonå¯ä»¥ç›´æ¥å†™åœ¨æ¨¡å—çº§åˆ«,è€ŒJavaå¿…é¡»å¥—ä¸Šä¸€ä¸ªç±»ã€‚

**å°ç»“å¯¹æ¯”è¡¨**

| ç‰¹æ€§ | Java | Python | è¿ç§»å»ºè®® |
|-----|------|--------|---------|
| ç±»å‹ç³»ç»Ÿ | é™æ€ | åŠ¨æ€(å¯é€‰æ³¨è§£) | å¤æ‚é¡¹ç›®å»ºè®®ç”¨ç±»å‹æ³¨è§£ |
| è¿è¡Œæ–¹å¼ | ç¼–è¯‘+è§£é‡Š | ç›´æ¥è§£é‡Š | ä¹ æƒ¯çƒ­é‡è½½çš„å¿«æ„Ÿ |
| æ€§èƒ½ | é«˜ | ä¸­ç­‰ | ç“¶é¢ˆå¤„è€ƒè™‘ç”¨Cæ‰©å±• |
| è¯­æ³•é£æ ¼ | å†—é•¿ä¸¥è°¨ | ç®€æ´çµæ´» | æ‹¥æŠ±ç®€æ´,ä½†æ³¨æ„è§„èŒƒ |
| å¹¶å‘æ¨¡å‹ | å¤šçº¿ç¨‹å‹å¥½ | å¤šè¿›ç¨‹ä¸ºä¸» | äº†è§£GILçš„å½±å“ |
| å­¦ä¹ æ›²çº¿ | é™¡å³­ | å¹³ç¼“ | ä½†ç²¾é€šåŒæ ·éœ€è¦æ—¶é—´ |

### 3ã€Pythonç¯å¢ƒæ­å»º

å¯¹Javaå¼€å‘è€…æ¥è¯´,Pythonçš„ç¯å¢ƒæ­å»ºæ¯”JDKç®€å•å¤šäº†â€”â€”æ²¡æœ‰é‚£ä¹ˆå¤šç‰ˆæœ¬å…¼å®¹æ€§çš„å‘,ä¹Ÿä¸éœ€è¦é…ç½®CLASSPATHã€‚

#### 3.1ã€Pythonå®‰è£…

æˆªè‡³2024å¹´,Python 3.13æ˜¯æœ€æ–°çš„ç¨³å®šç‰ˆæœ¬ã€‚ä¸è¿‡å®é™…é¡¹ç›®ä¸­,Python 3.9+ éƒ½æ˜¯ä¸é”™çš„é€‰æ‹©ã€‚

**Windowså®‰è£…**

1. è®¿é—® [python.org](https://python.org) ä¸‹è½½Windowså®‰è£…åŒ…
2. **é‡è¦**:å®‰è£…æ—¶å‹¾é€‰"Add Python to PATH",è¿™æ ·å°±ä¸ç”¨æ‰‹åŠ¨é…ç½®ç¯å¢ƒå˜é‡äº†
3. å»ºè®®é€‰æ‹©"Custom Installation",å¯ä»¥é€‰æ‹©å®‰è£…ä½ç½®å’Œç»„ä»¶

```bash
# éªŒè¯å®‰è£…
python --version    # è¾“å‡º: Python 3.13.x
pip --version      # pipæ˜¯Pythonçš„åŒ…ç®¡ç†å™¨,ç±»ä¼¼Maven
```

**macOSå®‰è£…**

æ¨èä½¿ç”¨Homebrew,æ¯”å®˜æ–¹å®‰è£…åŒ…æ›´æ–¹ä¾¿ç®¡ç†:

```bash
# å®‰è£…Homebrew(å¦‚æœæ²¡æœ‰)
/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"

# å®‰è£…Python
brew install python@3.13

# éªŒè¯
python3 --version
pip3 --version
```

**Linuxå®‰è£…**

å¤§å¤šæ•°ç°ä»£Linuxå‘è¡Œç‰ˆéƒ½é¢„è£…äº†Python,ä½†å¯èƒ½ä¸æ˜¯æœ€æ–°ç‰ˆæœ¬:

```bash
# Ubuntu/Debian
sudo apt update
sudo apt install python3.13 python3.13-pip python3.13-venv

# CentOS/RHEL/Fedora
sudo dnf install python3.13 python3.13-pip

# éªŒè¯
python3.13 --version
```

#### 3.2ã€è™šæ‹Ÿç¯å¢ƒç®¡ç†

Javaå¼€å‘è€…å¯¹ä¾èµ–å†²çªåº”è¯¥ä¸é™Œç”Ÿ(ä¸åŒç‰ˆæœ¬çš„åŒä¸€ä¸ªjaråŒ…)ã€‚Pythonç”¨è™šæ‹Ÿç¯å¢ƒè§£å†³è¿™ä¸ªé—®é¢˜,ç±»ä¼¼äºDockerä½†æ›´è½»é‡ã€‚

**ä¸ºä»€ä¹ˆéœ€è¦è™šæ‹Ÿç¯å¢ƒ?**

æƒ³è±¡ä¸€ä¸‹è¿™ä¸ªåœºæ™¯:
- é¡¹ç›®Aéœ€è¦Django 3.2
- é¡¹ç›®Béœ€è¦Django 4.0
- å…¨å±€åªèƒ½å®‰è£…ä¸€ä¸ªç‰ˆæœ¬...

è™šæ‹Ÿç¯å¢ƒè®©æ¯ä¸ªé¡¹ç›®éƒ½æœ‰ç‹¬ç«‹çš„Pythonç¯å¢ƒ,å®Œç¾è§£å†³ç‰ˆæœ¬å†²çªã€‚

**venvâ€”â€”Pythonå®˜æ–¹æ–¹æ¡ˆ**

```bash
# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ(ç±»ä¼¼åˆ›å»ºä¸€ä¸ªç‹¬ç«‹çš„Pythonå®‰è£…)
python -m venv myproject_env

# Windowsæ¿€æ´»
myproject_env\Scripts\activate

# macOS/Linuxæ¿€æ´»
source myproject_env/bin/activate

# æ¿€æ´»å,å‘½ä»¤è¡Œå‰ç¼€ä¼šæ˜¾ç¤ºç¯å¢ƒå
(myproject_env) $ python --version

# é€€å‡ºè™šæ‹Ÿç¯å¢ƒ
deactivate
```

**virtualenvâ€”â€”ç¬¬ä¸‰æ–¹å¢å¼ºç‰ˆ**

åŠŸèƒ½æ›´ä¸°å¯Œ,æ”¯æŒæ›´å¤šPythonç‰ˆæœ¬:

```bash
# å®‰è£…
pip install virtualenv

# åˆ›å»ºç¯å¢ƒ(å¯ä»¥æŒ‡å®šPythonç‰ˆæœ¬)
virtualenv -p python3.9 myproject_env

# ä½¿ç”¨æ–¹å¼å’Œvenvç›¸åŒ
```

**condaâ€”â€”æ•°æ®ç§‘å­¦ç•Œçš„ç‘å£«å†›åˆ€**

å¦‚æœä½ è¦åšæ•°æ®ç§‘å­¦æˆ–æœºå™¨å­¦ä¹ ,æ¨ècondaã€‚å®ƒä¸ä»…ç®¡ç†PythonåŒ…,è¿˜èƒ½ç®¡ç†C++åº“ã€RåŒ…ç­‰:

```bash
# å®‰è£…Miniconda(è½»é‡ç‰ˆ)æˆ–Anaconda(å®Œæ•´ç‰ˆ)
# ä¸‹è½½åœ°å€: https://conda.io/

# åˆ›å»ºç¯å¢ƒ
conda create -n myproject python=3.13

# æ¿€æ´»
conda activate myproject

# å®‰è£…åŒ…(condaä¼šè‡ªåŠ¨è§£å†³ä¾èµ–)
conda install numpy pandas matplotlib

# åˆ—å‡ºç¯å¢ƒ
conda env list
```

#### 3.3ã€IDEä¸ç¼–è¾‘å™¨é€‰æ‹©

ä»Javaç”Ÿæ€è½¬æ¥,ä½ éœ€è¦é€‰æ‹©è¶æ‰‹çš„å¼€å‘å·¥å…·:

**PyCharmâ€”â€”Pythonç•Œçš„IntelliJ IDEA**

JetBrainså‡ºå“,ç•Œé¢å’Œå¿«æ·é”®ä¸IDEAç±»ä¼¼,é€‚åˆJavaå¼€å‘è€…:

- **ä¼˜ç‚¹**:æ™ºèƒ½ä»£ç è¡¥å…¨ã€å¼ºå¤§çš„è°ƒè¯•ã€é‡æ„å·¥å…·ã€Gité›†æˆ
- **ç¼ºç‚¹**:æ¯”è¾ƒé‡,å¯åŠ¨æ…¢
- **é€‚åˆ**:å¤§å‹é¡¹ç›®,å›¢é˜Ÿå¼€å‘

ä¸»è¦åŠŸèƒ½:
- æ™ºèƒ½ä»£ç è¡¥å…¨å’Œé”™è¯¯æ£€æµ‹
- å¼ºå¤§çš„è°ƒè¯•å™¨(ç±»ä¼¼IDEAçš„è°ƒè¯•ä½“éªŒ)
- å†…ç½®ç»ˆç«¯å’Œæ•°æ®åº“å·¥å…·
- ç‰ˆæœ¬æ§åˆ¶é›†æˆ

**VS Codeâ€”â€”å¾®è½¯çš„è½»é‡é€‰æ‹©**

- **ä¼˜ç‚¹**:å¯åŠ¨å¿«,æ’ä»¶ä¸°å¯Œ,å†…å­˜å ç”¨å°
- **ç¼ºç‚¹**:éœ€è¦é…ç½®æ’ä»¶æ‰èƒ½è·å¾—å®Œæ•´ä½“éªŒ
- **é€‚åˆ**:å¿«é€Ÿå¼€å‘,å¤šè¯­è¨€é¡¹ç›®

æ¨èæ’ä»¶:
- Python(å¾®è½¯å®˜æ–¹)
- Pylance(ç±»å‹æ£€æŸ¥å’Œæ™ºèƒ½æç¤º)
- Python Docstring Generator
- GitLens

**Jupyter Notebookâ€”â€”äº¤äº’å¼å¼€å‘**

ç‰¹åˆ«é€‚åˆæ•°æ®åˆ†æå’Œæœºå™¨å­¦ä¹ :

```bash
# å®‰è£…
pip install jupyter

# å¯åŠ¨
jupyter notebook

# æµè§ˆå™¨ä¼šè‡ªåŠ¨æ‰“å¼€ http://localhost:8888
```

Jupyterçš„ä¼˜åŠ¿:
- ä»£ç ã€æ–‡æ¡£ã€å›¾è¡¨æ··åˆç¼–å†™
- é€ä¸ªå•å…ƒæ ¼æ‰§è¡Œä»£ç 
- å¯è§†åŒ–ç»“æœç›´æ¥å±•ç¤º
- æ”¯æŒMarkdownæ–‡æ¡£

#### 3.4ã€pipåŒ…ç®¡ç†å™¨

pipæ˜¯Pythonçš„æ ‡å‡†åŒ…ç®¡ç†å™¨,ç±»ä¼¼Mavenä½†æ›´ç®€å•:

**pipåŸºç¡€å‘½ä»¤**

```bash
# å®‰è£…åŒ…
pip install requests

# å®‰è£…ç‰¹å®šç‰ˆæœ¬
pip install django==4.0

# å®‰è£…æœ€æ–°ç‰ˆæœ¬
pip install --upgrade numpy

# å¸è½½
pip uninstall requests

# åˆ—å‡ºå·²å®‰è£…çš„åŒ…
pip list

# æ˜¾ç¤ºåŒ…ä¿¡æ¯
pip show requests

# æœç´¢åŒ…(å·²åºŸå¼ƒ,å»ºè®®å»PyPIç½‘ç«™æœç´¢)
```

**requirements.txtâ€”â€”ä¾èµ–ç®¡ç†æ–‡ä»¶**

ç±»ä¼¼äºMavençš„pom.xml,ä½†æ›´ç®€æ´:

```bash
# ç”Ÿæˆå½“å‰ç¯å¢ƒçš„ä¾èµ–åˆ—è¡¨
pip freeze > requirements.txt

# requirements.txtå†…å®¹ç¤ºä¾‹:
# Django==4.2.0
# requests==2.31.0
# numpy==1.24.3

# åœ¨æ–°ç¯å¢ƒä¸­å®‰è£…æ‰€æœ‰ä¾èµ–
pip install -r requirements.txt
```

**å›½å†…é•œåƒæºé…ç½®â€”â€”å‘Šåˆ«é¾Ÿé€Ÿä¸‹è½½**

é»˜è®¤pipä»å›½å¤–æºä¸‹è½½,é€Ÿåº¦æ„Ÿäººã€‚é…ç½®å›½å†…é•œåƒæº:

**ä¸´æ—¶ä½¿ç”¨**:
```bash
pip install -i https://pypi.tuna.tsinghua.edu.cn/simple/ requests
```

**æ°¸ä¹…é…ç½®**(æ¨è):

Windows: åœ¨ `%APPDATA%\pip\pip.ini` æ–‡ä»¶ä¸­æ·»åŠ :
```ini
[global]
index-url = https://pypi.tuna.tsinghua.edu.cn/simple/
trusted-host = pypi.tuna.tsinghua.edu.cn
```

macOS/Linux: åœ¨ `~/.pip/pip.conf` æ–‡ä»¶ä¸­æ·»åŠ :
```ini
[global]
index-url = https://pypi.tuna.tsinghua.edu.cn/simple/
trusted-host = pypi.tuna.tsinghua.edu.cn
```

**å¸¸ç”¨å›½å†…é•œåƒæº**:
- æ¸…åå¤§å­¦: `https://pypi.tuna.tsinghua.edu.cn/simple/`
- é˜¿é‡Œäº‘: `https://mirrors.aliyun.com/pypi/simple/`
- è…¾è®¯äº‘: `https://mirrors.cloud.tencent.com/pypi/simple/`

**å¿«é€Ÿä¸Šæ‰‹æ£€éªŒ**

å®‰è£…å®Œæˆå,è®©æˆ‘ä»¬å†™ç¬¬ä¸€ä¸ªPythonç¨‹åº:

```python
# hello.py
def greet(name):
    return f"Hello, {name}! æ¬¢è¿æ¥åˆ°Pythonä¸–ç•Œ!"

if __name__ == "__main__":
    print(greet("Javaå¼€å‘è€…"))
    print("Pythonå®‰è£…æˆåŠŸ! ğŸ‰")
```

è¿è¡Œ:
```bash
python hello.py
```

å¦‚æœçœ‹åˆ°è¾“å‡º,æ­å–œä½ ,Pythonç¯å¢ƒæ­å»ºæˆåŠŸ!

**å°è´´å£«**:
1. å»ºè®®æ¯ä¸ªé¡¹ç›®éƒ½ç”¨ç‹¬ç«‹çš„è™šæ‹Ÿç¯å¢ƒ
2. requirements.txtè¦çº³å…¥ç‰ˆæœ¬æ§åˆ¶
3. å®šæœŸæ›´æ–°pipæœ¬èº«:`python -m pip install --upgrade pip`
4. å¦‚æœç½‘ç»œä¸ç¨³å®š,å¯ä»¥è€ƒè™‘ä½¿ç”¨condaæ›¿ä»£pip

## äºŒã€PythonåŸºç¡€è¯­æ³•

### 1ã€å˜é‡ä¸æ•°æ®ç±»å‹

ä»Javaè½¬åˆ°Pythonï¼Œç¬¬ä¸€ä¸ªæƒŠå–œå°±æ˜¯ï¼šä¸ç”¨å†™ç±»å‹å£°æ˜äº†ï¼ä½†è¿™ä¸ä»£è¡¨Pythonæ²¡æœ‰ç±»å‹ï¼Œåªæ˜¯æ›´åŠ çµæ´»ã€‚

#### 1.1ã€å˜é‡å£°æ˜ä¸å‘½åè§„èŒƒ

**Pythonçš„å˜é‡å£°æ˜**

```java
// Java: å¿…é¡»å£°æ˜ç±»å‹
int age = 25;
String name = "å¼ ä¸‰";
```

```python
# Python: ç›´æ¥èµ‹å€¼å³å¯
age = 25
name = "å¼ ä¸‰"
```

Pythonçš„å˜é‡æœ¬è´¨ä¸Šæ˜¯å¯¹è±¡çš„å¼•ç”¨ï¼ˆç±»ä¼¼Javaçš„å¼•ç”¨ç±»å‹ï¼‰ï¼Œèµ‹å€¼æ—¶ä¼šè‡ªåŠ¨æ¨æ–­ç±»å‹ã€‚

**å‘½åè§„èŒƒ**

Pythonå’ŒJavaçš„å‘½åé£æ ¼æœ‰äº›å·®å¼‚ï¼š

```python
# Pythoné£æ ¼ - æ¨èä½¿ç”¨
user_name = "å¼ ä¸‰"          # å˜é‡å’Œå‡½æ•°ï¼šsnake_caseï¼ˆä¸‹åˆ’çº¿å‘½åï¼‰
MAX_SIZE = 100             # å¸¸é‡ï¼šå…¨å¤§å†™+ä¸‹åˆ’çº¿
class UserProfile:         # ç±»åï¼šPascalCaseï¼ˆå¤§é©¼å³°ï¼‰
    pass

# Javaé£æ ¼ - åœ¨Pythonä¸­ä¸æ¨è
userName = "å¼ ä¸‰"           # camelCaseåœ¨Pythonä¸å¸¸ç”¨
```

**å‘½åè§„åˆ™**ï¼š
- åªèƒ½åŒ…å«å­—æ¯ã€æ•°å­—ã€ä¸‹åˆ’çº¿
- ä¸èƒ½ä»¥æ•°å­—å¼€å¤´
- åŒºåˆ†å¤§å°å†™ï¼ˆ`name`å’Œ`Name`æ˜¯ä¸åŒå˜é‡ï¼‰
- ä¸èƒ½ä½¿ç”¨Pythonå…³é”®å­—ï¼ˆ`if`ã€`for`ã€`class`ç­‰ï¼‰

**ç‰¹æ®Šå‘½åçº¦å®š**ï¼š
```python
_internal_var = "ç§æœ‰å˜é‡"    # å•ä¸‹åˆ’çº¿å¼€å¤´ï¼šå†…éƒ¨ä½¿ç”¨ï¼ˆçº¦å®šï¼Œéå¼ºåˆ¶ï¼‰
__private_var = "æ›´ç§æœ‰"      # åŒä¸‹åˆ’çº¿å¼€å¤´ï¼šåç§°æ”¹å†™ï¼ˆé¿å…å­ç±»å†²çªï¼‰
__magic__ = "é­”æœ¯æ–¹æ³•"        # åŒä¸‹åˆ’çº¿å‰åï¼š1ã€Pythonå†…ç½®ç‰¹æ®Šæ–¹æ³•-é­”æ³•æ–¹æ³•ï¼Œç”¨äºè‡ªå®šä¹‰ç±»çš„è¡Œä¸ºï¼›2ã€ç‰¹æ®Šå†…ç½®å±æ€§ï¼Œç”±è§£é‡Šå™¨è‡ªåŠ¨è®¾ç½®
```

#### 1.2ã€åŸºæœ¬æ•°æ®ç±»å‹

Pythonçš„ç±»å‹ç³»ç»Ÿæ¯”Javaç®€å•ï¼Œä½†è¯¥æœ‰çš„éƒ½æœ‰ã€‚

**æ•°å€¼ç±»å‹**

```python
# int - æ•´æ•°ï¼ˆæ²¡æœ‰å¤§å°é™åˆ¶ï¼ï¼‰
age = 25
big_num = 123456789012345678901234567890  # Javaçš„longéƒ½è£…ä¸ä¸‹

# float - æµ®ç‚¹æ•°
price = 99.99
scientific = 1.5e10  # ç§‘å­¦è®¡æ•°æ³•ï¼š1.5 Ã— 10^10

# complex - å¤æ•°ï¼ˆJavaæ²¡æœ‰åŸç”Ÿæ”¯æŒï¼‰
z = 3 + 4j
print(z.real)  # è¾“å‡º: 3.0
print(z.imag)  # è¾“å‡º: 4.0
```

å¯¹æ¯”Javaï¼š
```java
// Javaéœ€è¦è€ƒè™‘å¤§å°
int age = 25;              // 32ä½
long bigNum = 123456L;     // 64ä½
BigInteger huge = new BigInteger("123..."); // ä»»æ„å¤§å°

double price = 99.99;      // 64ä½
float f = 99.99f;          // 32ä½
```

**å¸ƒå°”ç±»å‹**

```python
# bool - æ³¨æ„é¦–å­—æ¯å¤§å†™ï¼
is_active = True   # ä¸æ˜¯true
is_valid = False   # ä¸æ˜¯false

# å¸ƒå°”è¿ç®—
result = True and False  # ä½¿ç”¨ andï¼Œä¸æ˜¯ &&
result = True or False   # ä½¿ç”¨ orï¼Œä¸æ˜¯ ||
result = not True        # ä½¿ç”¨ notï¼Œä¸æ˜¯ !
```

**Pythonçš„"çœŸå€¼"ï¼ˆTruthy/Falsyï¼‰**

è¿™æ˜¯Pythonçš„ç‹¬ç‰¹ä¹‹å¤„ï¼Œä»¥ä¸‹å€¼ä¼šè¢«å½“ä½œ`False`ï¼š
```python
# è¿™äº›éƒ½æ˜¯"å‡"
bool(0)          # False
bool(0.0)        # False
bool("")         # False - ç©ºå­—ç¬¦ä¸²
bool([])         # False - ç©ºåˆ—è¡¨
bool({})         # False - ç©ºå­—å…¸
bool(None)       # False

# å…¶ä»–åŸºæœ¬éƒ½æ˜¯"çœŸ"
bool(1)          # True
bool("hello")    # True
bool([1, 2])     # True
```

è¿™è®©æ¡ä»¶åˆ¤æ–­æ›´ç®€æ´ï¼š
```python
# Pythoné£æ ¼
if user_list:  # ç›´æ¥åˆ¤æ–­ï¼Œç©ºåˆ—è¡¨ä¸ºFalse
    process(user_list)

# ä¸éœ€è¦åƒJavaé‚£æ ·
# if (userList != null && !userList.isEmpty()) { ... }
```

**å­—ç¬¦ä¸²**

```python
# str - å­—ç¬¦ä¸²ï¼ˆä¸å¯å˜ç±»å‹ï¼‰
name = "å¼ ä¸‰"
message = 'Hello'
```

å…³äºå­—ç¬¦ä¸²çš„æ›´å¤šå†…å®¹ï¼Œæˆ‘ä»¬åœ¨ä¸‹ä¸€èŠ‚è¯¦ç»†è®²è§£ã€‚

**Noneç±»å‹**

```python
# None - ç›¸å½“äºJavaçš„null
result = None

# åˆ¤æ–­None
if result is None:  # æ¨èç”¨ is
    print("æ²¡æœ‰ç»“æœ")

if result == None:  # ä¹Ÿå¯ä»¥ï¼Œä½†ä¸æ¨è
    print("æ²¡æœ‰ç»“æœ")
```

å¯¹æ¯”Javaï¼š
```java
String result = null;
if (result == null) {
    System.out.println("æ²¡æœ‰ç»“æœ");
}
```

#### 1.3ã€ç±»å‹è½¬æ¢ä¸ç±»å‹æ£€æŸ¥

**ç±»å‹è½¬æ¢**

```python
# æ˜¾å¼è½¬æ¢
age_str = "25"
age = int(age_str)      # å­—ç¬¦ä¸² â†’ æ•´æ•°

price = 99.99
price_int = int(price)  # æµ®ç‚¹ â†’ æ•´æ•°ï¼ˆæˆªæ–­ï¼Œä¸æ˜¯å››èˆäº”å…¥ï¼‰

num = 100
num_str = str(num)      # æ•´æ•° â†’ å­—ç¬¦ä¸²
num_float = float(num)  # æ•´æ•° â†’ æµ®ç‚¹

# è½¬æ¢å¤±è´¥ä¼šæŠ›å¼‚å¸¸
try:
    int("abc")  # ValueError
except ValueError as e:
    print(f"è½¬æ¢å¤±è´¥: {e}")
```

**ç±»å‹æ£€æŸ¥**

```python
# type() - è·å–ç±»å‹
age = 25
print(type(age))        # <class 'int'>
print(type(age) == int) # True

# isinstance() - ç±»å‹æ£€æŸ¥ï¼ˆæ¨èï¼Œæ”¯æŒç»§æ‰¿ï¼‰
age = 25
print(isinstance(age, int))           # True
print(isinstance(age, (int, float)))  # True - æ£€æŸ¥å¤šä¸ªç±»å‹

# å¯¹æ¯”Java
# if (obj instanceof String) { ... }
```

**ç±»å‹æ³¨è§£ï¼ˆType Hintsï¼‰**

Python 3.5+æ”¯æŒç±»å‹æ³¨è§£ï¼Œè®©Javaå¼€å‘è€…æ›´èˆ’é€‚ï¼š

```python
# åŠ ä¸Šç±»å‹æ³¨è§£
def greet(name: str, age: int) -> str:
    return f"Hello, {name}! You are {age} years old."

# å˜é‡ç±»å‹æ³¨è§£
user_name: str = "å¼ ä¸‰"
score: float = 95.5
users: list[str] = ["å¼ ä¸‰", "æå››"]

# æ³¨æ„ï¼šè¿™åªæ˜¯"æ³¨è§£"ï¼Œè¿è¡Œæ—¶ä¸ä¼šæ£€æŸ¥ï¼
result = greet("å¼ ä¸‰", "25")  # ä¼ äº†å­—ç¬¦ä¸²ï¼Œä¸ä¼šæŠ¥é”™
# éœ€è¦é…åˆmypyç­‰å·¥å…·åšé™æ€æ£€æŸ¥
```

#### 1.4ã€ä¸Javaçš„ç±»å‹ç³»ç»Ÿå¯¹æ¯”

| ç‰¹æ€§ | Java | Python |
|-----|------|--------|
| ç±»å‹å£°æ˜ | å¼ºåˆ¶ | å¯é€‰ï¼ˆç±»å‹æ³¨è§£ï¼‰ |
| åŸºæœ¬ç±»å‹ | æœ‰ï¼ˆint, doubleç­‰ï¼‰ | æ— ï¼Œä¸€åˆ‡çš†å¯¹è±¡ |
| åŒ…è£…ç±»å‹ | æœ‰ï¼ˆInteger, Doubleç­‰ï¼‰ | æ— éœ€åŒºåˆ† |
| æ•´æ•°èŒƒå›´ | å›ºå®šï¼ˆint 32ä½, long 64ä½ï¼‰ | ä»»æ„å¤§å° |
| å­—ç¬¦ç±»å‹ | æœ‰ï¼ˆcharï¼‰ | æ— ï¼Œç”¨å•å­—ç¬¦å­—ç¬¦ä¸² |
| ç©ºå€¼ | null | None |
| ç±»å‹æ£€æŸ¥æ—¶æœº | ç¼–è¯‘æœŸ | è¿è¡ŒæœŸï¼ˆå¯ç”¨å·¥å…·é™æ€æ£€æŸ¥ï¼‰ |

**å®æˆ˜å»ºè®®**ï¼š
1. å°è„šæœ¬å¯ä»¥ä¸å†™ç±»å‹æ³¨è§£ï¼Œè¿½æ±‚å¿«é€Ÿå¼€å‘
2. å¤§é¡¹ç›®å»ºè®®åŠ ä¸Šç±»å‹æ³¨è§£ï¼Œé…åˆmypyæ£€æŸ¥
3. åˆ©ç”¨Pythonçš„"é¸­å­ç±»å‹"ï¼Œå…³æ³¨å¯¹è±¡è¡Œä¸ºè€Œéç±»å‹
4. å–„ç”¨`isinstance()`åšè¿è¡Œæ—¶ç±»å‹æ£€æŸ¥

**å°æŠ€å·§**ï¼š

```python
# å¤šé‡èµ‹å€¼
x, y, z = 1, 2, 3

# å˜é‡äº¤æ¢ï¼ˆJavaéœ€è¦ä¸­é—´å˜é‡ï¼‰
a, b = b, a

# é“¾å¼æ¯”è¾ƒï¼ˆJavaåšä¸åˆ°ï¼‰
age = 25
if 18 <= age < 60:  # ç›¸å½“äº age >= 18 and age < 60
    print("å·¥ä½œå¹´é¾„æ®µ")
```

### 2ã€å­—ç¬¦ä¸²æ“ä½œ

å­—ç¬¦ä¸²æ˜¯ç¼–ç¨‹ä¸­æœ€å¸¸ç”¨çš„æ•°æ®ç±»å‹ï¼ŒPythonçš„å­—ç¬¦ä¸²æ“ä½œæ¯”Javaç®€æ´å¤ªå¤šäº†ã€‚

#### 2.1ã€å­—ç¬¦ä¸²å®šä¹‰æ–¹å¼

**å•å¼•å·ã€åŒå¼•å·ã€ä¸‰å¼•å·**

```python
# å•å¼•å·å’ŒåŒå¼•å·å®Œå…¨ç­‰ä»·
name1 = 'Python'
name2 = "Python"
print(name1 == name2)  # True

# ä¼˜åŠ¿ï¼šå¯ä»¥äº’ç›¸åµŒå¥—
message1 = "He said 'Hello'"
message2 = 'She replied "Hi"'

# ä¸‰å¼•å·ï¼šå¤šè¡Œå­—ç¬¦ä¸²ï¼ˆç›¸å½“äºJavaçš„æ–‡æœ¬å—ï¼‰
long_text = """
è¿™æ˜¯ä¸€æ®µ
å¤šè¡Œæ–‡æœ¬
å¯ä»¥éšæ„æ¢è¡Œ
"""

sql = '''
SELECT * FROM users
WHERE age > 18
  AND status = 'active'
'''
```

å¯¹æ¯”Javaï¼ˆJava 15+æ‰æ”¯æŒæ–‡æœ¬å—ï¼‰ï¼š
```java
// Java 15+
String sql = """
    SELECT * FROM users
    WHERE age > 18
      AND status = 'active'
    """;
```

#### 2.2ã€å­—ç¬¦ä¸²æ ¼å¼åŒ–

Pythonæœ‰ä¸‰ç§å­—ç¬¦ä¸²æ ¼å¼åŒ–æ–¹å¼ï¼Œæ¨èä½¿ç”¨f-stringï¼ˆæœ€ç°ä»£ã€æœ€ç®€æ´ï¼‰ã€‚

**% æ ¼å¼åŒ–ï¼ˆè€å¼å†™æ³•ï¼‰**

```python
name = "å¼ ä¸‰"
age = 25
# ç±»ä¼¼Cè¯­è¨€çš„printf
message = "æˆ‘å«%sï¼Œä»Šå¹´%då²" % (name, age)
print(message)  # æˆ‘å«å¼ ä¸‰ï¼Œä»Šå¹´25å²

# æ ¼å¼æ§åˆ¶
price = 99.999
print("ä»·æ ¼ï¼š%.2få…ƒ" % price)  # ä»·æ ¼ï¼š100.00å…ƒ
```

**str.format()ï¼ˆPython 2.6+ï¼‰**

```python
name = "å¼ ä¸‰"
age = 25

# ä½ç½®å‚æ•°
message = "æˆ‘å«{}ï¼Œä»Šå¹´{}å²".format(name, age)

# ç´¢å¼•å‚æ•°
message = "æˆ‘å«{0}ï¼Œä»Šå¹´{1}å²ï¼Œ{0}å¾ˆé«˜å…´è®¤è¯†ä½ ".format(name, age)

# å‘½åå‚æ•°ï¼ˆæ¨èï¼Œå¯è¯»æ€§å¥½ï¼‰
message = "æˆ‘å«{name}ï¼Œä»Šå¹´{age}å²".format(name=name, age=age)

# æ ¼å¼æ§åˆ¶
price = 99.999
print("ä»·æ ¼ï¼š{:.2f}å…ƒ".format(price))  # ä»·æ ¼ï¼š100.00å…ƒ

# å¡«å……å’Œå¯¹é½
print("{:>10}".format("å³å¯¹é½"))   # "      å³å¯¹é½"
print("{:<10}".format("å·¦å¯¹é½"))   # "å·¦å¯¹é½      "
print("{:^10}".format("å±…ä¸­"))     # "   å±…ä¸­   "
print("{:0>5}".format("42"))      # "00042"
```

**f-stringï¼ˆPython 3.6+ï¼Œå¼ºçƒˆæ¨èï¼ï¼‰**

```python
name = "å¼ ä¸‰"
age = 25
score = 95.678

# æœ€ç®€æ´çš„æ–¹å¼
message = f"æˆ‘å«{name}ï¼Œä»Šå¹´{age}å²"

# å¯ä»¥ç›´æ¥åœ¨{}ä¸­å†™è¡¨è¾¾å¼
print(f"æ˜å¹´æˆ‘{age + 1}å²")
print(f"æˆç»©ï¼š{score:.2f}åˆ†")  # æˆç»©ï¼š95.68åˆ†

# æ”¯æŒå¤æ‚è¡¨è¾¾å¼
users = ["å¼ ä¸‰", "æå››", "ç‹äº”"]
print(f"å…±æœ‰{len(users)}ä¸ªç”¨æˆ·")

# å¯ä»¥è°ƒç”¨æ–¹æ³•
text = "hello"
print(f"å¤§å†™ï¼š{text.upper()}")  # å¤§å†™ï¼šHELLO

# å¤šè¡Œf-string
message = (
    f"å§“åï¼š{name}\n"
    f"å¹´é¾„ï¼š{age}\n"
    f"æˆç»©ï¼š{score:.2f}"
)

# Python 3.8+ æ”¯æŒ = è°ƒè¯•
x = 10
print(f"{x=}")  # x=10ï¼ˆæ˜¾ç¤ºå˜é‡åå’Œå€¼ï¼Œè°ƒè¯•åˆ©å™¨ï¼‰
```

å¯¹æ¯”Javaï¼š
```java
// Javaä¼ ç»Ÿæ–¹å¼
String message = String.format("æˆ‘å«%sï¼Œä»Šå¹´%då²", name, age);

// Java 15+ æ–‡æœ¬å— + formatted()
String message = """
    å§“åï¼š%s
    å¹´é¾„ï¼š%d
    """.formatted(name, age);
```

#### 2.3ã€å¸¸ç”¨å­—ç¬¦ä¸²æ–¹æ³•

Pythonçš„å­—ç¬¦ä¸²æ–¹æ³•éå¸¸ä¸°å¯Œï¼Œè€Œä¸”éƒ½è¿”å›æ–°å­—ç¬¦ä¸²ï¼ˆå­—ç¬¦ä¸²æ˜¯ä¸å¯å˜çš„ï¼‰ã€‚

**å¤§å°å†™è½¬æ¢**

```python
text = "Hello World"

print(text.upper())       # HELLO WORLD
print(text.lower())       # hello world
print(text.capitalize())  # Hello worldï¼ˆé¦–å­—æ¯å¤§å†™ï¼‰
print(text.title())       # Hello Worldï¼ˆæ¯ä¸ªå•è¯é¦–å­—æ¯å¤§å†™ï¼‰
print(text.swapcase())    # hELLO wORLDï¼ˆå¤§å°å†™äº’æ¢ï¼‰
```

**æŸ¥æ‰¾å’Œåˆ¤æ–­**

```python
text = "Hello Python"

# æŸ¥æ‰¾å­ä¸²
print(text.find("Python"))      # 6ï¼ˆè¿”å›ç´¢å¼•ï¼‰
print(text.find("Java"))        # -1ï¼ˆæ‰¾ä¸åˆ°ï¼‰
print(text.index("Python"))     # 6ï¼ˆæ‰¾ä¸åˆ°ä¼šæŠ›å¼‚å¸¸ï¼‰

# åˆ¤æ–­
print(text.startswith("Hello")) # True
print(text.endswith("Python"))  # True
print("123".isdigit())          # Trueï¼ˆæ˜¯å¦å…¨æ˜¯æ•°å­—ï¼‰
print("abc".isalpha())          # Trueï¼ˆæ˜¯å¦å…¨æ˜¯å­—æ¯ï¼‰
print("abc123".isalnum())       # Trueï¼ˆæ˜¯å¦å…¨æ˜¯å­—æ¯æˆ–æ•°å­—ï¼‰
print("  ".isspace())           # Trueï¼ˆæ˜¯å¦å…¨æ˜¯ç©ºç™½å­—ç¬¦ï¼‰
```

**æ›¿æ¢å’Œåˆ†å‰²**

```python
text = "Hello Python Python"

# æ›¿æ¢
print(text.replace("Python", "Java"))        # Hello Java Java
print(text.replace("Python", "Java", 1))     # Hello Java Pythonï¼ˆåªæ›¿æ¢1æ¬¡ï¼‰

# åˆ†å‰²
csv = "å¼ ä¸‰,25,åŒ—äº¬"
parts = csv.split(",")
print(parts)  # ['å¼ ä¸‰', '25', 'åŒ—äº¬']

# å¤šè¡Œåˆ†å‰²
text = "ç¬¬ä¸€è¡Œ\nç¬¬äºŒè¡Œ\nç¬¬ä¸‰è¡Œ"
lines = text.splitlines()
print(lines)  # ['ç¬¬ä¸€è¡Œ', 'ç¬¬äºŒè¡Œ', 'ç¬¬ä¸‰è¡Œ']

# è¿æ¥ï¼ˆåå‘æ“ä½œï¼‰
words = ["Hello", "Python", "World"]
result = " ".join(words)
print(result)  # Hello Python World
```

å¯¹æ¯”Javaï¼š
```java
// Javaéœ€è¦æ›´å¤šä»£ç 
String[] parts = csv.split(",");
String result = String.join(" ", words);
```

**å»é™¤ç©ºç™½**

```python
text = "  Hello Python  "

print(text.strip())   # "Hello Python"ï¼ˆå»é™¤ä¸¤ç«¯ç©ºç™½ï¼‰
print(text.lstrip())  # "Hello Python  "ï¼ˆå»é™¤å·¦ä¾§ï¼‰
print(text.rstrip())  # "  Hello Python"ï¼ˆå»é™¤å³ä¾§ï¼‰

# å»é™¤æŒ‡å®šå­—ç¬¦
url = "https://example.com/"
print(url.rstrip("/"))  # https://example.com
```

#### 2.4ã€å­—ç¬¦ä¸²åˆ‡ç‰‡æ“ä½œ

è¿™æ˜¯Pythonçš„ç‰¹è‰²åŠŸèƒ½ï¼Œæ¯”Javaçš„substring()çµæ´»å¤šäº†ï¼

**åŸºæœ¬åˆ‡ç‰‡**

```python
text = "Python"

# è¯­æ³•ï¼š[start:end:step]
print(text[0])      # Pï¼ˆå•ä¸ªå­—ç¬¦ï¼‰
print(text[0:3])    # Pytï¼ˆç´¢å¼•0åˆ°2ï¼Œä¸åŒ…å«3ï¼‰
print(text[:3])     # Pytï¼ˆçœç•¥startï¼Œä»å¤´å¼€å§‹ï¼‰
print(text[3:])     # honï¼ˆçœç•¥endï¼Œåˆ°æœ«å°¾ï¼‰
print(text[:])      # Pythonï¼ˆå®Œæ•´å¤åˆ¶ï¼‰

# è´Ÿç´¢å¼•ï¼ˆä»å³å¾€å·¦æ•°ï¼‰
print(text[-1])     # nï¼ˆæœ€åä¸€ä¸ªå­—ç¬¦ï¼‰
print(text[-3:])    # honï¼ˆæœ€å3ä¸ªå­—ç¬¦ï¼‰
print(text[:-1])    # Pythoï¼ˆé™¤äº†æœ€åä¸€ä¸ªï¼‰

# æ­¥é•¿
print(text[::2])    # Ptoï¼ˆæ¯éš”ä¸€ä¸ªå–ä¸€ä¸ªï¼‰
print(text[::-1])   # nohtyPï¼ˆåè½¬å­—ç¬¦ä¸²ï¼ï¼‰
```

å¯¹æ¯”Javaï¼š
```java
// Javaéœ€è¦ç”¨substring
String text = "Python";
String sub = text.substring(0, 3);  // Pyt

// åè½¬éœ€è¦StringBuilder
String reversed = new StringBuilder(text).reverse().toString();
```

**åˆ‡ç‰‡çš„å®ç”¨æŠ€å·§**

```python
# å»é™¤æ–‡ä»¶æ‰©å±•å
filename = "document.pdf"
name = filename[:-4]  # document

# æå–åŸŸå
email = "user@example.com"
domain = email[email.index("@")+1:]  # example.com

# æ¯éš”Nä¸ªå­—ç¬¦æ’å…¥åˆ†éš”ç¬¦
card = "1234567890123456"
formatted = "-".join([card[i:i+4] for i in range(0, len(card), 4)])
print(formatted)  # 1234-5678-9012-3456
```

#### 2.5ã€åŸå§‹å­—ç¬¦ä¸²ä¸è½¬ä¹‰å­—ç¬¦

**è½¬ä¹‰å­—ç¬¦**

```python
# å¸¸è§è½¬ä¹‰å­—ç¬¦
print("ç¬¬ä¸€è¡Œ\nç¬¬äºŒè¡Œ")     # æ¢è¡Œ
print("å§“åï¼š\tå¼ ä¸‰")       # åˆ¶è¡¨ç¬¦
print("è·¯å¾„ï¼šC:\\Users")    # åæ–œæ 
print("ä»–è¯´ï¼š\"ä½ å¥½\"")     # åŒå¼•å·
```

**åŸå§‹å­—ç¬¦ä¸²ï¼ˆraw stringï¼‰**

```python
# æ­£åˆ™è¡¨è¾¾å¼å’ŒWindowsè·¯å¾„ç‰¹åˆ«æœ‰ç”¨
path = r"C:\Users\å¼ ä¸‰\Documents"  # ä¸éœ€è¦è½¬ä¹‰
regex = r"\d+\.\d+"                # æ­£åˆ™è¡¨è¾¾å¼

# å¯¹æ¯”æ™®é€šå­—ç¬¦ä¸²
path_normal = "C:\\Users\\å¼ ä¸‰\\Documents"  # éœ€è¦åŒåæ–œæ 
```

å¯¹æ¯”Javaï¼š
```java
// Javaä¹Ÿéœ€è¦è½¬ä¹‰
String path = "C:\\Users\\å¼ ä¸‰\\Documents";

// Java 15+ æ”¯æŒåŸå§‹å­—ç¬¦ä¸²å­—é¢é‡ï¼ˆé¢„è§ˆç‰¹æ€§ï¼‰
```

**Unicodeå­—ç¬¦**

```python
# Unicodeå­—ç¬¦
print("\u4e2d\u6587")  # ä¸­æ–‡
print("\U0001F600")    # ğŸ˜€ï¼ˆemojiï¼‰

# Python 3é»˜è®¤UTF-8ï¼Œç›´æ¥å†™ä¸­æ–‡å’Œemoji
message = "ä½ å¥½ ğŸ‰"
```

**å­—ç¬¦ä¸²çš„ä¸å¯å˜æ€§**

```python
text = "Python"
# text[0] = "J"  # TypeError: 'str' object does not support item assignment

# éœ€è¦åˆ›å»ºæ–°å­—ç¬¦ä¸²
text = "J" + text[1:]  # "Jython"

# æˆ–è€…ç”¨replace
text = text.replace("P", "J")
```

#### 2.6ã€å­—ç¬¦ä¸²æ€§èƒ½æç¤º

**æ‹¼æ¥å¤§é‡å­—ç¬¦ä¸²**

```python
# âŒ é”™è¯¯æ–¹å¼ï¼šåœ¨å¾ªç¯ä¸­ç”¨+æ‹¼æ¥ï¼ˆO(nÂ²)å¤æ‚åº¦ï¼‰
result = ""
for i in range(1000):
    result += str(i)

# âœ… æ­£ç¡®æ–¹å¼ï¼šç”¨joinï¼ˆO(n)å¤æ‚åº¦ï¼‰
result = "".join(str(i) for i in range(1000))

# âœ… æˆ–è€…ç”¨åˆ—è¡¨ç§¯ç´¯å†join
parts = []
for i in range(1000):
    parts.append(str(i))
result = "".join(parts)
```

å¯¹æ¯”Javaï¼š
```java
// Javaä¹Ÿæ˜¯åŒæ ·çš„é“ç†
// âŒ String result = "";
//    for (int i = 0; i < 1000; i++) result += i;

// âœ… StringBuilder sb = new StringBuilder();
//    for (int i = 0; i < 1000; i++) sb.append(i);
//    String result = sb.toString();
```

**å°ç»“å¯¹æ¯”è¡¨**

| æ“ä½œ | Java | Python |
|-----|------|--------|
| æ ¼å¼åŒ– | String.format() | f-stringï¼ˆæ¨èï¼‰ |
| åˆ†å‰² | split() | split() |
| è¿æ¥ | String.join() | str.join() |
| æ›¿æ¢ | replace() | replace() |
| åˆ‡ç‰‡ | substring() | [start:end] |
| åè½¬ | StringBuilder.reverse() | [::-1] |
| å¤šè¡Œæ–‡æœ¬ | """..."""ï¼ˆJava 15+ï¼‰ | """...""" |

Pythonçš„å­—ç¬¦ä¸²æ“ä½œæ›´ç®€æ´ç›´è§‚ï¼Œå°¤å…¶æ˜¯f-stringå’Œåˆ‡ç‰‡è¯­æ³•ï¼Œèƒ½å¤§å¤§æé«˜å¼€å‘æ•ˆç‡ï¼

### 3ã€è¿ç®—ç¬¦

Pythonçš„è¿ç®—ç¬¦å’ŒJavaå¤§éƒ¨åˆ†ç›¸ä¼¼ï¼Œä½†ä¹Ÿæœ‰ä¸€äº›ç‹¬ç‰¹çš„åœ°æ–¹ï¼Œç‰¹åˆ«æ˜¯æˆå‘˜è¿ç®—ç¬¦å’Œèº«ä»½è¿ç®—ç¬¦ã€‚

#### 3.1ã€ç®—æœ¯è¿ç®—ç¬¦

```python
a = 10
b = 3

print(a + b)   # 13 - åŠ æ³•
print(a - b)   # 7  - å‡æ³•
print(a * b)   # 30 - ä¹˜æ³•
print(a / b)   # 3.333... - é™¤æ³•ï¼ˆæ³¨æ„ï¼šæ€»æ˜¯è¿”å›æµ®ç‚¹æ•°ï¼ï¼‰
print(a // b)  # 3  - æ•´é™¤ï¼ˆå‘ä¸‹å–æ•´ï¼‰
print(a % b)   # 1  - å–æ¨¡
print(a ** b)  # 1000 - å¹‚è¿ç®—ï¼ˆ10çš„3æ¬¡æ–¹ï¼‰
```

**é‡ç‚¹å·®å¼‚**ï¼š

```java
// Java
int a = 10, b = 3;
System.out.println(a / b);  // 3ï¼ˆæ•´æ•°é™¤æ³•ï¼‰
```

```python
# Python
a, b = 10, 3
print(a / b)   # 3.3333...ï¼ˆæ€»æ˜¯æµ®ç‚¹é™¤æ³•ï¼‰
print(a // b)  # 3ï¼ˆæ•´é™¤ï¼‰
```

**å¹‚è¿ç®—**æ˜¯Pythonçš„ç‰¹è‰²ï¼š

```python
# Pythonæœ‰ä¸“é—¨çš„å¹‚è¿ç®—ç¬¦
print(2 ** 10)  # 1024

# Javaéœ€è¦ç”¨Math.pow()
# Math.pow(2, 10)
```

**å¤åˆèµ‹å€¼**ï¼š

```python
x = 10
x += 5   # x = x + 5
x -= 3   # x = x - 3
x *= 2   # x = x * 2
x /= 4   # x = x / 4
x //= 2  # x = x // 2
x %= 3   # x = x % 3
x **= 2  # x = x ** 2
```

#### 3.2ã€æ¯”è¾ƒè¿ç®—ç¬¦

```python
a = 10
b = 20

print(a == b)   # False - ç­‰äº
print(a != b)   # True  - ä¸ç­‰äº
print(a > b)    # False - å¤§äº
print(a < b)    # True  - å°äº
print(a >= b)   # False - å¤§äºç­‰äº
print(a <= b)   # True  - å°äºç­‰äº
```

**é“¾å¼æ¯”è¾ƒ**ï¼ˆPythonç‹¬æœ‰ï¼Œè¶…çº§å®ç”¨ï¼ï¼‰ï¼š

```python
age = 25

# Pythonå¯ä»¥è¿™æ ·å†™
if 18 <= age < 60:
    print("å·¥ä½œå¹´é¾„æ®µ")

# ç›¸å½“äºï¼ˆä½†æ›´ç®€æ´ï¼‰
if age >= 18 and age < 60:
    print("å·¥ä½œå¹´é¾„æ®µ")

# å¤šé‡æ¯”è¾ƒ
x = 5
if 1 < x < 10 < 100:  # å®Œå…¨åˆæ³•ï¼
    print("xåœ¨1åˆ°10ä¹‹é—´ï¼Œ10å°äº100")
```

å¯¹æ¯”Javaï¼š
```java
// Javaä¸æ”¯æŒé“¾å¼æ¯”è¾ƒ
if (age >= 18 && age < 60) {
    System.out.println("å·¥ä½œå¹´é¾„æ®µ");
}
```

#### 3.3ã€é€»è¾‘è¿ç®—ç¬¦

```python
# Pythonä½¿ç”¨è‹±æ–‡å•è¯ï¼Œæ›´æ˜“è¯»
a = True
b = False

print(a and b)   # False - é€»è¾‘ä¸ï¼ˆJavaç”¨&&ï¼‰
print(a or b)    # True  - é€»è¾‘æˆ–ï¼ˆJavaç”¨||ï¼‰
print(not a)     # False - é€»è¾‘éï¼ˆJavaç”¨!ï¼‰
```

**çŸ­è·¯æ±‚å€¼**ï¼š

```python
# andï¼šå¦‚æœç¬¬ä¸€ä¸ªä¸ºFalseï¼Œä¸ä¼šè®¡ç®—ç¬¬äºŒä¸ª
def expensive_check():
    print("æ‰§è¡Œäº†æ˜‚è´µçš„æ£€æŸ¥")
    return True

x = False
if x and expensive_check():  # expensive_check()ä¸ä¼šæ‰§è¡Œ
    print("éƒ½ä¸ºçœŸ")

# orï¼šå¦‚æœç¬¬ä¸€ä¸ªä¸ºTrueï¼Œä¸ä¼šè®¡ç®—ç¬¬äºŒä¸ª
x = True
if x or expensive_check():  # expensive_check()ä¸ä¼šæ‰§è¡Œ
    print("è‡³å°‘ä¸€ä¸ªä¸ºçœŸ")
```

**é€»è¾‘è¿ç®—çš„è¿”å›å€¼**ï¼ˆPythonçš„ç‹¬ç‰¹ä¹‹å¤„ï¼‰ï¼š

```python
# andè¿”å›ç¬¬ä¸€ä¸ªå‡å€¼ï¼Œæˆ–æœ€åä¸€ä¸ªå€¼
print(5 and 10)      # 10ï¼ˆéƒ½ä¸ºçœŸï¼Œè¿”å›æœ€åä¸€ä¸ªï¼‰
print(0 and 10)      # 0ï¼ˆç¬¬ä¸€ä¸ªä¸ºå‡ï¼‰
print("" and "abc")  # ""ï¼ˆç©ºå­—ç¬¦ä¸²ä¸ºå‡ï¼‰

# orè¿”å›ç¬¬ä¸€ä¸ªçœŸå€¼ï¼Œæˆ–æœ€åä¸€ä¸ªå€¼
print(5 or 10)       # 5ï¼ˆç¬¬ä¸€ä¸ªä¸ºçœŸï¼‰
print(0 or 10)       # 10ï¼ˆç¬¬ä¸€ä¸ªä¸ºå‡ï¼Œè¿”å›ç¬¬äºŒä¸ªï¼‰
print("" or "abc")   # "abc"

# å®ç”¨æŠ€å·§ï¼šæä¾›é»˜è®¤å€¼
name = input_name or "åŒ¿åç”¨æˆ·"  # å¦‚æœinput_nameä¸ºç©ºï¼Œä½¿ç”¨é»˜è®¤å€¼
```

#### 3.4ã€ä½è¿ç®—ç¬¦

ä¸Javaå®Œå…¨ç›¸åŒï¼š

```python
a = 60  # 0011 1100
b = 13  # 0000 1101

print(a & b)   # 12 (0000 1100) - æŒ‰ä½ä¸
print(a | b)   # 61 (0011 1101) - æŒ‰ä½æˆ–
print(a ^ b)   # 49 (0011 0001) - æŒ‰ä½å¼‚æˆ–
print(~a)      # -61 - æŒ‰ä½å–å
print(a << 2)  # 240 (1111 0000) - å·¦ç§»
print(a >> 2)  # 15 (0000 1111) - å³ç§»
```

#### 3.5ã€æˆå‘˜è¿ç®—ç¬¦ï¼ˆPythonç‹¬æœ‰ï¼‰

è¿™æ˜¯Pythonçš„ç‰¹è‰²ï¼Œè¶…çº§å¥½ç”¨ï¼

```python
# in - æ£€æŸ¥å…ƒç´ æ˜¯å¦åœ¨åºåˆ—ä¸­
fruits = ["è‹¹æœ", "é¦™è•‰", "æ©™å­"]
print("è‹¹æœ" in fruits)      # True
print("è‘¡è„" in fruits)      # False

# not in - æ£€æŸ¥å…ƒç´ æ˜¯å¦ä¸åœ¨åºåˆ—ä¸­
print("è‘¡è„" not in fruits)  # True

# é€‚ç”¨äºå„ç§å®¹å™¨
text = "Hello Python"
print("Python" in text)      # True

numbers = {1, 2, 3, 4, 5}
print(3 in numbers)          # True

user_dict = {"name": "å¼ ä¸‰", "age": 25}
print("name" in user_dict)   # Trueï¼ˆæ£€æŸ¥é”®ï¼‰
```

å¯¹æ¯”Javaï¼š
```java
// Javaéœ€è¦ç”¨contains()æ–¹æ³•
List<String> fruits = Arrays.asList("è‹¹æœ", "é¦™è•‰", "æ©™å­");
boolean hasApple = fruits.contains("è‹¹æœ");

// æˆ–è€…å­—ç¬¦ä¸²çš„contains()
String text = "Hello Python";
boolean hasPython = text.contains("Python");
```

**å®ç”¨åœºæ™¯**ï¼š

```python
# éªŒè¯è¾“å…¥
command = input("è¯·è¾“å…¥å‘½ä»¤: ")
if command not in ["start", "stop", "restart"]:
    print("æ— æ•ˆå‘½ä»¤")

# è¿‡æ»¤æ•°æ®
valid_ids = {1, 2, 3, 4, 5}
if user_id in valid_ids:
    process_user(user_id)

# å­—ç¬¦ä¸²æ£€æŸ¥
email = "user@example.com"
if "@" not in email:
    print("é‚®ç®±æ ¼å¼é”™è¯¯")
```

#### 3.6ã€èº«ä»½è¿ç®—ç¬¦ï¼ˆPythonç‹¬æœ‰ï¼‰

ç”¨äºåˆ¤æ–­ä¸¤ä¸ªå˜é‡æ˜¯å¦å¼•ç”¨åŒä¸€ä¸ªå¯¹è±¡ï¼ˆä¸æ˜¯å€¼ç›¸ç­‰ï¼Œæ˜¯å¯¹è±¡ç›¸ç­‰ï¼‰ã€‚

```python
# is - åˆ¤æ–­æ˜¯å¦æ˜¯åŒä¸€ä¸ªå¯¹è±¡
a = [1, 2, 3]
b = a        # bæŒ‡å‘åŒä¸€ä¸ªåˆ—è¡¨å¯¹è±¡
c = [1, 2, 3]  # cæ˜¯æ–°çš„åˆ—è¡¨å¯¹è±¡

print(a is b)      # True - æŒ‡å‘åŒä¸€å¯¹è±¡
print(a is c)      # False - ä¸åŒå¯¹è±¡
print(a == c)      # True - ä½†å€¼ç›¸ç­‰

# is not
print(a is not c)  # True
```

**ä½•æ—¶ä½¿ç”¨`is`ï¼Ÿ**

```python
# âœ… æ£€æŸ¥Noneï¼ˆæ¨èç”¨isï¼‰
result = some_function()
if result is None:
    print("æ²¡æœ‰è¿”å›å€¼")

# âœ… æ£€æŸ¥å•ä¾‹å¯¹è±¡
if obj is True:   # æ£€æŸ¥æ˜¯å¦æ˜¯Trueå¯¹è±¡
    pass

# âŒ ä¸è¦ç”¨isæ¯”è¾ƒå€¼
x = 1000
y = 1000
if x is y:  # å¯èƒ½æ˜¯Falseï¼ï¼ˆå°æ•´æ•°æœ‰ç¼“å­˜ï¼Œå¤§æ•´æ•°æ²¡æœ‰ï¼‰
    print("ç›¸ç­‰")

# âœ… åº”è¯¥ç”¨==æ¯”è¾ƒå€¼
if x == y:  # æ­£ç¡®
    print("ç›¸ç­‰")
```

**å°æ•´æ•°ç¼“å­˜æœºåˆ¶**ï¼š

```python
# Pythonç¼“å­˜äº†-5åˆ°256çš„æ•´æ•°
a = 10
b = 10
print(a is b)  # True - æŒ‡å‘åŒä¸€ä¸ªç¼“å­˜å¯¹è±¡

# å¤§æ•´æ•°ä¸ç¼“å­˜
a = 1000
b = 1000
print(a is b)  # Falseï¼ˆé€šå¸¸ï¼Œå–å†³äºå®ç°ï¼‰
print(a == b)  # True - ä½†å€¼ç›¸ç­‰
```

#### 3.7ã€è¿ç®—ç¬¦ä¼˜å…ˆçº§

ä»é«˜åˆ°ä½æ’åˆ—ï¼š

| ä¼˜å…ˆçº§ | è¿ç®—ç¬¦ | è¯´æ˜ |
|-------|--------|------|
| 1 | `**` | å¹‚è¿ç®— |
| 2 | `~`, `+x`, `-x` | æŒ‰ä½å–åã€æ­£å·ã€è´Ÿå· |
| 3 | `*`, `/`, `//`, `%` | ä¹˜ã€é™¤ã€æ•´é™¤ã€å–æ¨¡ |
| 4 | `+`, `-` | åŠ ã€å‡ |
| 5 | `<<`, `>>` | ä½ç§» |
| 6 | `&` | æŒ‰ä½ä¸ |
| 7 | `^` | æŒ‰ä½å¼‚æˆ– |
| 8 | `\|` | æŒ‰ä½æˆ– |
| 9 | `==`, `!=`, `>`, `<`, `>=`, `<=`, `is`, `is not`, `in`, `not in` | æ¯”è¾ƒè¿ç®— |
| 10 | `not` | é€»è¾‘é |
| 11 | `and` | é€»è¾‘ä¸ |
| 12 | `or` | é€»è¾‘æˆ– |

**å®ä¾‹**ï¼š

```python
# å¤æ‚è¡¨è¾¾å¼
result = 2 + 3 * 4 ** 2  # å…ˆå¹‚è¿ç®—(16)ï¼Œå†ä¹˜æ³•(48)ï¼Œæœ€ååŠ æ³•(50)
print(result)  # 50

# å»ºè®®ï¼šå¤æ‚è¡¨è¾¾å¼åŠ æ‹¬å·æé«˜å¯è¯»æ€§
result = 2 + (3 * (4 ** 2))  # æ›´æ¸…æ™°

# é€»è¾‘è¿ç®—
x = 5
result = x > 3 and x < 10 or x == 0  # (x > 3 and x < 10) or (x == 0)
print(result)  # True
```

**ä¸‰å…ƒè¿ç®—ç¬¦**ï¼ˆPythonç‰ˆæœ¬ï¼‰ï¼š

```python
# Pythonçš„ä¸‰å…ƒè¡¨è¾¾å¼
age = 25
status = "æˆå¹´" if age >= 18 else "æœªæˆå¹´"

# å¯¹æ¯”Java
// String status = age >= 18 ? "æˆå¹´" : "æœªæˆå¹´";

# å¯ä»¥åµŒå¥—ï¼ˆä½†ä¸æ¨èï¼Œå½±å“å¯è¯»æ€§ï¼‰
score = 85
grade = "ä¼˜ç§€" if score >= 90 else "è‰¯å¥½" if score >= 80 else "åŠæ ¼" if score >= 60 else "ä¸åŠæ ¼"
```

**æµ·è±¡è¿ç®—ç¬¦ := ï¼ˆPython 3.8+ï¼‰**

åœ¨è¡¨è¾¾å¼ä¸­èµ‹å€¼ï¼š

```python
# ä¼ ç»Ÿå†™æ³•
n = len(some_list)
if n > 10:
    print(f"åˆ—è¡¨å¾ˆé•¿ï¼Œæœ‰{n}ä¸ªå…ƒç´ ")

# ä½¿ç”¨æµ·è±¡è¿ç®—ç¬¦
if (n := len(some_list)) > 10:
    print(f"åˆ—è¡¨å¾ˆé•¿ï¼Œæœ‰{n}ä¸ªå…ƒç´ ")

# åœ¨whileå¾ªç¯ä¸­ç‰¹åˆ«æœ‰ç”¨
while (line := file.readline()) != "":
    process(line)
```

**å°ç»“å¯¹æ¯”**

| ç‰¹æ€§ | Java | Python |
|-----|------|--------|
| é™¤æ³• | `/`è¿”å›æ•´æ•° | `/`æ€»æ˜¯è¿”å›æµ®ç‚¹æ•° |
| æ•´é™¤ | ç”¨`/` | ä¸“é—¨çš„`//` |
| å¹‚è¿ç®— | `Math.pow()` | `**`è¿ç®—ç¬¦ |
| é€»è¾‘è¿ç®— | `&&`, `\|\|`, `!` | `and`, `or`, `not` |
| æˆå‘˜æ£€æŸ¥ | `contains()` | `in`, `not in` |
| èº«ä»½æ£€æŸ¥ | `==` | `is`, `is not` |
| ä¸‰å…ƒè¿ç®— | `a ? b : c` | `b if a else c` |
| é“¾å¼æ¯”è¾ƒ | ä¸æ”¯æŒ | `a < b < c` |

### 4ã€æ§åˆ¶æµ

Pythonçš„æ§åˆ¶æµè¯­æ³•æ¯”Javaç®€æ´ï¼Œç”¨ç¼©è¿›ä»£æ›¿èŠ±æ‹¬å·ï¼Œå¼ºåˆ¶å†™å‡ºæ›´æ¸…æ™°çš„ä»£ç ç»“æ„ã€‚

#### 4.1ã€if-elif-elseæ¡ä»¶è¯­å¥

**åŸºæœ¬è¯­æ³•**

```python
age = 25

# ç®€å•ifè¯­å¥
if age >= 18:
    print("æˆå¹´äºº")

# if-else
if age >= 18:
    print("æˆå¹´äºº")
else:
    print("æœªæˆå¹´")

# if-elif-elseï¼ˆç›¸å½“äºJavaçš„if-else if-elseï¼‰
if age < 18:
    print("å°‘å¹´")
elif age < 60:
    print("æˆå¹´")
else:
    print("è€å¹´")
```

å¯¹æ¯”Javaï¼š
```java
// Javaéœ€è¦èŠ±æ‹¬å·
if (age >= 18) {
    System.out.println("æˆå¹´äºº");
} else if (age < 60) {
    System.out.println("æˆå¹´");
} else {
    System.out.println("è€å¹´");
}
```

**Pythonçš„ä¼˜åŠ¿**ï¼š

```python
# é“¾å¼æ¯”è¾ƒ
score = 85
if 90 <= score <= 100:
    grade = "A"
elif 80 <= score < 90:
    grade = "B"
elif 70 <= score < 80:
    grade = "C"
else:
    grade = "D"

# æˆå‘˜è¿ç®—ç¬¦è®©æ¡ä»¶æ›´ç®€æ´
command = "start"
if command in ["start", "run", "begin"]:
    print("å¯åŠ¨ç¨‹åº")
elif command in ["stop", "end", "quit"]:
    print("åœæ­¢ç¨‹åº")
else:
    print("æœªçŸ¥å‘½ä»¤")
```

**åˆ©ç”¨Pythonçš„"çœŸå€¼"ç‰¹æ€§**ï¼š

```python
# âœ… Pythonicå†™æ³•
name = input("è¯·è¾“å…¥å§“å: ")
if name:  # ç©ºå­—ç¬¦ä¸²ä¸ºFalse
    print(f"æ¬¢è¿, {name}")
else:
    print("å§“åä¸èƒ½ä¸ºç©º")

# âœ… æ£€æŸ¥åˆ—è¡¨æ˜¯å¦ä¸ºç©º
users = get_users()
if users:  # ç©ºåˆ—è¡¨ä¸ºFalse
    for user in users:
        print(user)
else:
    print("æ²¡æœ‰ç”¨æˆ·")

# å¯¹æ¯”Java
// if (name != null && !name.isEmpty()) { ... }
// if (users != null && !users.isEmpty()) { ... }
```

#### 4.2ã€whileå¾ªç¯

**åŸºæœ¬è¯­æ³•**

```python
# ç®€å•whileå¾ªç¯
count = 0
while count < 5:
    print(f"ç¬¬{count + 1}æ¬¡å¾ªç¯")
    count += 1  # Pythonæ²¡æœ‰++è¿ç®—ç¬¦

# æ— é™å¾ªç¯
while True:
    user_input = input("è¾“å…¥'quit'é€€å‡º: ")
    if user_input == "quit":
        break
    print(f"ä½ è¾“å…¥äº†: {user_input}")
```

å¯¹æ¯”Javaï¼š
```java
// Java
int count = 0;
while (count < 5) {
    System.out.println("ç¬¬" + (count + 1) + "æ¬¡å¾ªç¯");
    count++;  // Javaæœ‰++è¿ç®—ç¬¦
}
```

**while-elseï¼ˆPythonç‹¬æœ‰ï¼‰**

```python
# whileæ­£å¸¸ç»“æŸæ—¶æ‰§è¡Œelse
search_list = [1, 3, 5, 7, 9]
target = 6

while search_list:
    item = search_list.pop(0)
    if item == target:
        print(f"æ‰¾åˆ°äº†: {target}")
        break
else:
    print(f"æ²¡æ‰¾åˆ°: {target}")  # åªæœ‰whileæ­£å¸¸ç»“æŸæ‰æ‰§è¡Œ

# å¦‚æœç”¨breaké€€å‡ºï¼Œelseä¸ä¼šæ‰§è¡Œ
```

#### 4.3ã€forå¾ªç¯ä¸è¿­ä»£å™¨

è¿™æ˜¯Pythonæœ€å¼ºå¤§çš„ç‰¹æ€§ä¹‹ä¸€ï¼

**éå†åºåˆ—**

```python
# éå†åˆ—è¡¨
fruits = ["è‹¹æœ", "é¦™è•‰", "æ©™å­"]
for fruit in fruits:
    print(fruit)

# éå†å­—ç¬¦ä¸²
for char in "Python":
    print(char)

# éå†å­—å…¸
user = {"name": "å¼ ä¸‰", "age": 25, "city": "åŒ—äº¬"}

# éå†é”®
for key in user:
    print(key)

# éå†å€¼
for value in user.values():
    print(value)

# éå†é”®å€¼å¯¹
for key, value in user.items():
    print(f"{key}: {value}")
```

å¯¹æ¯”Javaï¼š
```java
// Javaéœ€è¦æ›´å¤šä»£ç 
List<String> fruits = Arrays.asList("è‹¹æœ", "é¦™è•‰", "æ©™å­");

// ä¼ ç»Ÿforå¾ªç¯
for (int i = 0; i < fruits.size(); i++) {
    System.out.println(fruits.get(i));
}

// å¢å¼ºforå¾ªç¯
for (String fruit : fruits) {
    System.out.println(fruit);
}
```

**enumerate() - åŒæ—¶è·å–ç´¢å¼•å’Œå€¼**

```python
fruits = ["è‹¹æœ", "é¦™è•‰", "æ©™å­"]

# åŒæ—¶è·å–ç´¢å¼•å’Œå€¼
for index, fruit in enumerate(fruits):
    print(f"{index}: {fruit}")

# ä»æŒ‡å®šç´¢å¼•å¼€å§‹
for index, fruit in enumerate(fruits, start=1):
    print(f"ç¬¬{index}ä¸ª: {fruit}")
```

**zip() - å¹¶è¡Œéå†å¤šä¸ªåºåˆ—**

```python
names = ["å¼ ä¸‰", "æå››", "ç‹äº”"]
ages = [25, 30, 35]
cities = ["åŒ—äº¬", "ä¸Šæµ·", "å¹¿å·"]

# å¹¶è¡Œéå†
for name, age, city in zip(names, ages, cities):
    print(f"{name}, {age}å², æ¥è‡ª{city}")

# ç»“æœï¼š
# å¼ ä¸‰, 25å², æ¥è‡ªåŒ—äº¬
# æå››, 30å², æ¥è‡ªä¸Šæµ·
# ç‹äº”, 35å², æ¥è‡ªå¹¿å·
```

#### 4.4ã€range()å‡½æ•°

ä¸“é—¨ç”¨äºç”Ÿæˆæ•°å­—åºåˆ—ï¼Œåœ¨forå¾ªç¯ä¸­ç‰¹åˆ«æœ‰ç”¨ã€‚

```python
# range(stop) - ä»0å¼€å§‹
for i in range(5):
    print(i)  # 0, 1, 2, 3, 4

# range(start, stop) - æŒ‡å®šå¼€å§‹å’Œç»“æŸ
for i in range(2, 8):
    print(i)  # 2, 3, 4, 5, 6, 7

# range(start, stop, step) - æŒ‡å®šæ­¥é•¿
for i in range(0, 10, 2):
    print(i)  # 0, 2, 4, 6, 8

# åå‘
for i in range(10, 0, -1):
    print(i)  # 10, 9, 8, 7, 6, 5, 4, 3, 2, 1

# ç”Ÿæˆåˆ—è¡¨ï¼ˆä½†é€šå¸¸ä¸éœ€è¦ï¼‰
numbers = list(range(5))  # [0, 1, 2, 3, 4]
```

**å®ç”¨åœºæ™¯**ï¼š

```python
# ä¼ ç»Ÿçš„Cé£æ ¼å¾ªç¯
data = ["a", "b", "c", "d"]
for i in range(len(data)):
    print(f"ç´¢å¼•{i}: {data[i]}")

# ä½†æ›´Pythonicçš„æ–¹å¼æ˜¯ç”¨enumerate
for i, item in enumerate(data):
    print(f"ç´¢å¼•{i}: {item}")

# åˆ›å»ºåµŒå¥—åˆ—è¡¨ï¼ˆäºŒç»´æ•°ç»„ï¼‰
matrix = []
for i in range(3):
    row = []
    for j in range(4):
        row.append(i * 4 + j)
    matrix.append(row)
```

#### 4.5ã€breakã€continueã€pass

**break - è·³å‡ºå¾ªç¯**

```python
# åœ¨forå¾ªç¯ä¸­ä½¿ç”¨
for i in range(10):
    if i == 5:
        break
    print(i)  # 0, 1, 2, 3, 4

# åœ¨whileå¾ªç¯ä¸­ä½¿ç”¨
count = 0
while True:
    if count >= 3:
        break
    print(f"è®¡æ•°: {count}")
    count += 1

# åªè·³å‡ºæœ€å†…å±‚å¾ªç¯
for i in range(3):
    for j in range(3):
        if j == 1:
            break  # åªè·³å‡ºå†…å±‚å¾ªç¯
        print(f"i={i}, j={j}")
```

**continue - è·³è¿‡æœ¬æ¬¡å¾ªç¯**

```python
# è·³è¿‡å¶æ•°
for i in range(10):
    if i % 2 == 0:
        continue
    print(i)  # 1, 3, 5, 7, 9

# å¤„ç†æ–‡ä»¶ï¼Œè·³è¿‡ç©ºè¡Œ
lines = ["ç¬¬ä¸€è¡Œ", "", "ç¬¬ä¸‰è¡Œ", "", "ç¬¬äº”è¡Œ"]
for line in lines:
    if not line:  # ç©ºå­—ç¬¦ä¸²ä¸ºFalse
        continue
    print(f"å¤„ç†: {line}")
```

**pass - å ä½ç¬¦**

```python
# åœ¨å¼€å‘ä¸­ä½œä¸ºå ä½ç¬¦
def future_function():
    pass  # æš‚æ—¶ä¸å®ç°ï¼Œé¿å…è¯­æ³•é”™è¯¯

# æ¡ä»¶åˆ†æ”¯å ä½
score = 85
if score >= 90:
    pass  # æš‚æ—¶ä¸å¤„ç†ä¼˜ç§€æƒ…å†µ
elif score >= 60:
    print("åŠæ ¼")
else:
    print("ä¸åŠæ ¼")

# ç±»å®šä¹‰å ä½
class MyClass:
    pass  # æš‚æ—¶ç©ºçš„ç±»

# å¼‚å¸¸å¤„ç†å ä½
try:
    risky_operation()
except SpecificError:
    pass  # å¿½ç•¥ç‰¹å®šé”™è¯¯
```

#### 4.6ã€å¾ªç¯ä¸­çš„elseå­å¥

Pythonç‹¬æœ‰çš„ç‰¹æ€§ï¼Œå¾ˆå¤šäººä¸çŸ¥é“ä½†å¾ˆæœ‰ç”¨ï¼

**for-else**

```python
# elseåœ¨å¾ªç¯æ­£å¸¸ç»“æŸæ—¶æ‰§è¡Œ
numbers = [2, 4, 6, 8]
for num in numbers:
    if num % 2 != 0:  # æŸ¥æ‰¾å¥‡æ•°
        print(f"æ‰¾åˆ°å¥‡æ•°: {num}")
        break
else:
    print("æ‰€æœ‰æ•°å­—éƒ½æ˜¯å¶æ•°")  # å¾ªç¯æ­£å¸¸ç»“æŸæ‰§è¡Œ

# æœç´¢åœºæ™¯
users = ["å¼ ä¸‰", "æå››", "ç‹äº”"]
target = "èµµå…­"

for user in users:
    if user == target:
        print(f"æ‰¾åˆ°ç”¨æˆ·: {user}")
        break
else:
    print(f"ç”¨æˆ· {target} ä¸å­˜åœ¨")  # æ²¡æ‰¾åˆ°æ—¶æ‰§è¡Œ
```

**while-else**

```python
# å¯†ç éªŒè¯ï¼ˆæœ€å¤š3æ¬¡æœºä¼šï¼‰
attempts = 0
max_attempts = 3

while attempts < max_attempts:
    password = input("è¯·è¾“å…¥å¯†ç : ")
    if password == "123456":
        print("å¯†ç æ­£ç¡®ï¼Œç™»å½•æˆåŠŸï¼")
        break
    attempts += 1
    print(f"å¯†ç é”™è¯¯ï¼Œè¿˜æœ‰{max_attempts - attempts}æ¬¡æœºä¼š")
else:
    print("å¯†ç é”™è¯¯æ¬¡æ•°è¿‡å¤šï¼Œè´¦æˆ·é”å®šï¼")  # å¾ªç¯æ­£å¸¸ç»“æŸæ‰§è¡Œ
```

#### 4.7ã€åµŒå¥—å¾ªç¯ä¸æ€§èƒ½ä¼˜åŒ–

**åµŒå¥—å¾ªç¯**

```python
# ä¹ä¹ä¹˜æ³•è¡¨
for i in range(1, 10):
    for j in range(1, i + 1):
        print(f"{j}Ã—{i}={i*j}", end="\t")
    print()  # æ¢è¡Œ

# æŸ¥æ‰¾é‡å¤å…ƒç´ 
numbers = [1, 2, 3, 4, 2, 5, 3]
duplicates = []

for i in range(len(numbers)):
    for j in range(i + 1, len(numbers)):
        if numbers[i] == numbers[j] and numbers[i] not in duplicates:
            duplicates.append(numbers[i])

print(f"é‡å¤å…ƒç´ : {duplicates}")
```

**æ€§èƒ½ä¼˜åŒ–æŠ€å·§**

```python
# âŒ ä½æ•ˆï¼šæ¯æ¬¡éƒ½è°ƒç”¨len()
data = list(range(1000))
for i in range(len(data)):
    process(data[i])

# âœ… é«˜æ•ˆï¼šç›´æ¥è¿­ä»£
for item in data:
    process(item)

# âŒ ä½æ•ˆï¼šåœ¨å¾ªç¯ä¸­è¿›è¡Œå¤æ‚è®¡ç®—
for i in range(1000):
    result = expensive_calculation()  # æ¯æ¬¡éƒ½è®¡ç®—
    process(i, result)

# âœ… é«˜æ•ˆï¼šæå‰è®¡ç®—
result = expensive_calculation()  # åªè®¡ç®—ä¸€æ¬¡
for i in range(1000):
    process(i, result)

# âŒ ä½æ•ˆï¼šå­—ç¬¦ä¸²æ‹¼æ¥
result = ""
for i in range(1000):
    result += str(i)

# âœ… é«˜æ•ˆï¼šä½¿ç”¨join
result = "".join(str(i) for i in range(1000))
```

#### 4.8ã€å®ç”¨çš„æ§åˆ¶æµæŠ€å·§

**Pythonicçš„ä»£ç æç¤º**

```python
# æç¤ºï¼šè¿™é‡Œå±•ç¤ºçš„ç®€æ´å†™æ³•å°†åœ¨ç¬¬6ç« "æ•°æ®ç»“æ„"ä¸­è¯¦ç»†è®²è§£
# åŒ…æ‹¬åˆ—è¡¨æ¨å¯¼å¼ã€å­—å…¸æ¨å¯¼å¼ç­‰Pythonç‰¹æœ‰è¯­æ³•

# ä¼ ç»Ÿå¾ªç¯ vs Pythonicå†™æ³•
# ä¼ ç»Ÿæ–¹å¼
squares = []
for x in range(10):
    squares.append(x ** 2)

# Pythonicæ–¹å¼ï¼ˆè§ç¬¬6ç« è¯¦è§£ï¼‰
squares = [x ** 2 for x in range(10)]
```

**å¤šä¸ªæ¡ä»¶çš„ä¼˜é›…å¤„ç†**

```python
# ä½¿ç”¨å…ƒç»„
def get_season(month):
    if month in (12, 1, 2):
        return "å†¬å­£"
    elif month in (3, 4, 5):
        return "æ˜¥å­£"
    elif month in (6, 7, 8):
        return "å¤å­£"
    elif month in (9, 10, 11):
        return "ç§‹å­£"
    else:
        return "æ— æ•ˆæœˆä»½"

# ä½¿ç”¨å­—å…¸ï¼ˆæ›´é«˜æ•ˆï¼‰
SEASON_MAP = {
    1: "å†¬å­£", 2: "å†¬å­£", 3: "æ˜¥å­£", 4: "æ˜¥å­£",
    5: "æ˜¥å­£", 6: "å¤å­£", 7: "å¤å­£", 8: "å¤å­£",
    9: "ç§‹å­£", 10: "ç§‹å­£", 11: "ç§‹å­£", 12: "å†¬å­£"
}

def get_season_fast(month):
    return SEASON_MAP.get(month, "æ— æ•ˆæœˆä»½")
```

**å°ç»“å¯¹æ¯”è¡¨**

| ç‰¹æ€§ | Java | Python |
|-----|------|--------|
| ä»£ç å— | èŠ±æ‹¬å·`{}` | ç¼©è¿› |
| else if | `else if` | `elif` |
| å¾ªç¯åæ¸…ç† | finallyå— | `else`å­å¥ |
| éå†å®¹å™¨ | å¢å¼ºforå¾ªç¯ | `for item in container` |
| åŒæ—¶è·å–ç´¢å¼• | æ‰‹åŠ¨è®¡æ•° | `enumerate()` |
| å¹¶è¡Œéå† | å¤æ‚ | `zip()` |
| æ•°å­—åºåˆ— | æ‰‹åŠ¨åˆ›å»º | `range()` |
| å ä½ç¬¦ | ç©ºè¯­å¥`;` | `pass` |

Pythonçš„æ§åˆ¶æµè®¾è®¡å“²å­¦æ˜¯"ç®€æ´å³æ˜¯ç¾"ï¼Œç”¨æ›´å°‘çš„ä»£ç å®ç°æ›´æ¸…æ™°çš„é€»è¾‘ï¼

### 5ã€æ•°æ®ç»“æ„ä¸æ¨å¯¼å¼

Pythonçš„å†…ç½®æ•°æ®ç»“æ„éå¸¸å¼ºå¤§ï¼Œæ¯”Javaçš„é›†åˆæ¡†æ¶æ›´ç®€æ´æ˜“ç”¨ã€‚ç‰¹åˆ«å€¼å¾—ä¸€æçš„æ˜¯Pythonçš„æ¨å¯¼å¼è¯­æ³•ï¼Œå®ƒè®©é›†åˆæ“ä½œå˜å¾—æå…¶ä¼˜é›…ã€‚ç†è§£è¿™äº›æ¦‚å¿µæ˜¯æŒæ¡Pythonçš„å…³é”®ã€‚

#### 5.1ã€åˆ—è¡¨ï¼ˆlistï¼‰

åˆ—è¡¨æ˜¯Pythonæœ€å¸¸ç”¨çš„æ•°æ®ç»“æ„ï¼Œç›¸å½“äºJavaçš„ArrayListï¼Œä½†åŠŸèƒ½æ›´å¼ºå¤§ã€‚

**åŸºæœ¬æ“ä½œ**

```python
# åˆ›å»ºåˆ—è¡¨
fruits = ["è‹¹æœ", "é¦™è•‰", "æ©™å­"]
numbers = [1, 2, 3, 4, 5]
mixed = ["Python", 3.14, True, None]  # å¯ä»¥å­˜å‚¨ä¸åŒç±»å‹

# è®¿é—®å…ƒç´ 
print(fruits[0])     # è‹¹æœ
print(fruits[-1])    # æ©™å­ï¼ˆè´Ÿç´¢å¼•ï¼šä»å³å¾€å·¦ï¼‰

# ä¿®æ”¹å…ƒç´ 
fruits[1] = "è‘¡è„"
print(fruits)        # ['è‹¹æœ', 'è‘¡è„', 'æ©™å­']

# åˆ—è¡¨é•¿åº¦
print(len(fruits))   # 3
```

**åˆ—è¡¨æ“ä½œæ–¹æ³•**

```python
fruits = ["è‹¹æœ", "é¦™è•‰"]

# æ·»åŠ å…ƒç´ 
fruits.append("æ©™å­")                # æœ«å°¾æ·»åŠ 
fruits.insert(1, "è‘¡è„")             # æŒ‡å®šä½ç½®æ’å…¥
fruits.extend(["èŠ’æœ", "è‰è“"])        # æ‰¹é‡æ·»åŠ 
print(fruits)  # ['è‹¹æœ', 'è‘¡è„', 'é¦™è•‰', 'æ©™å­', 'èŠ’æœ', 'è‰è“']

# åˆ é™¤å…ƒç´ 
fruits.remove("é¦™è•‰")                # åˆ é™¤æŒ‡å®šå…ƒç´ 
last_fruit = fruits.pop()           # åˆ é™¤å¹¶è¿”å›æœ€åä¸€ä¸ª
second_fruit = fruits.pop(1)        # åˆ é™¤å¹¶è¿”å›æŒ‡å®šä½ç½®
del fruits[0]                       # ç›´æ¥åˆ é™¤æŒ‡å®šä½ç½®

# æŸ¥æ‰¾å…ƒç´ 
if "è‹¹æœ" in fruits:
    index = fruits.index("è‹¹æœ")     # è¿”å›é¦–æ¬¡å‡ºç°çš„ç´¢å¼•
    count = fruits.count("è‹¹æœ")     # ç»Ÿè®¡å‡ºç°æ¬¡æ•°

# æ’åº
numbers = [3, 1, 4, 1, 5, 9]
numbers.sort()                      # åŸåœ°æ’åº
print(numbers)                      # [1, 1, 3, 4, 5, 9]

sorted_nums = sorted([3, 1, 4])     # è¿”å›æ–°åˆ—è¡¨
numbers.reverse()                   # åŸåœ°åè½¬
```

å¯¹æ¯”Javaï¼š
```java
// Javaéœ€è¦æ›´å¤šä»£ç 
List<String> fruits = new ArrayList<>();
fruits.add("è‹¹æœ");
fruits.add("é¦™è•‰");
fruits.remove("é¦™è•‰");
Collections.sort(fruits);
```

**åˆ—è¡¨åˆ‡ç‰‡**

```python
numbers = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]

# åŸºæœ¬åˆ‡ç‰‡
print(numbers[2:5])     # [2, 3, 4]ï¼ˆä¸åŒ…å«ç´¢å¼•5ï¼‰
print(numbers[:3])      # [0, 1, 2]ï¼ˆå‰3ä¸ªï¼‰
print(numbers[7:])      # [7, 8, 9]ï¼ˆä»ç´¢å¼•7åˆ°æœ«å°¾ï¼‰
print(numbers[:])       # å®Œæ•´å¤åˆ¶

# æ­¥é•¿åˆ‡ç‰‡
print(numbers[::2])     # [0, 2, 4, 6, 8]ï¼ˆæ¯éš”ä¸€ä¸ªï¼‰
print(numbers[1::2])    # [1, 3, 5, 7, 9]ï¼ˆå¥‡æ•°ä½ç½®ï¼‰
print(numbers[::-1])    # [9, 8, 7, 6, 5, 4, 3, 2, 1, 0]ï¼ˆåè½¬ï¼‰

# åˆ‡ç‰‡èµ‹å€¼ï¼ˆå¾ˆå¼ºå¤§ï¼ï¼‰
numbers[2:5] = [20, 30, 40]         # æ›¿æ¢ä¸€æ®µ
numbers[2:2] = [15, 25]             # æ’å…¥
numbers[2:4] = []                   # åˆ é™¤
```

**åˆ—è¡¨æ¨å¯¼å¼ï¼ˆList Comprehensionï¼‰**

è¿™æ˜¯Pythonçš„æ€æ‰‹çº§ç‰¹æ€§ï¼

```python
# ä¼ ç»Ÿæ–¹å¼
squares = []
for x in range(10):
    squares.append(x ** 2)

# åˆ—è¡¨æ¨å¯¼å¼ï¼ˆä¸€è¡Œæå®šï¼‰
squares = [x ** 2 for x in range(10)]

# å¸¦æ¡ä»¶çš„æ¨å¯¼å¼
even_squares = [x ** 2 for x in range(10) if x % 2 == 0]
# [0, 4, 16, 36, 64]

# å¤æ‚å¤„ç†
words = ["hello", "world", "python"]
capitalized = [word.upper() for word in words if len(word) > 4]
# ['HELLO', 'WORLD', 'PYTHON']

# åµŒå¥—æ¨å¯¼å¼ï¼ˆæ…ç”¨ï¼Œå½±å“å¯è¯»æ€§ï¼‰
matrix = [[x * y for x in range(3)] for y in range(3)]
# [[0, 0, 0], [0, 1, 2], [0, 2, 4]]
```

#### 5.2ã€å…ƒç»„ï¼ˆtupleï¼‰

å…ƒç»„æ˜¯ä¸å¯å˜çš„åºåˆ—ï¼Œç›¸å½“äºåªè¯»çš„åˆ—è¡¨ã€‚

**åŸºæœ¬ç‰¹æ€§**

```python
# åˆ›å»ºå…ƒç»„
point = (3, 4)
colors = ("çº¢", "ç»¿", "è“")
single = (42,)        # å•å…ƒç´ å…ƒç»„éœ€è¦é€—å·
empty = ()            # ç©ºå…ƒç»„

# æˆ–è€…çœç•¥æ‹¬å·
point = 3, 4
colors = "çº¢", "ç»¿", "è“"

# è®¿é—®å…ƒç´ ï¼ˆå’Œåˆ—è¡¨ä¸€æ ·ï¼‰
print(point[0])       # 3
print(colors[-1])     # è“

# ä¸èƒ½ä¿®æ”¹
# point[0] = 5        # TypeError
```

**å…ƒç»„è§£åŒ…ï¼ˆTuple Unpackingï¼‰**

```python
point = (3, 4)

# è§£åŒ…èµ‹å€¼
x, y = point
print(f"åæ ‡ï¼š({x}, {y})")

# å‡½æ•°è¿”å›å¤šä¸ªå€¼
def get_name_age():
    return "å¼ ä¸‰", 25

name, age = get_name_age()

# äº¤æ¢å˜é‡ï¼ˆPythonç‹¬æœ‰ï¼‰
a, b = 10, 20
a, b = b, a           # äº¤æ¢ï¼Œæ— éœ€ä¸­é—´å˜é‡

# æ‰©å±•è§£åŒ…ï¼ˆPython 3+ï¼‰
numbers = (1, 2, 3, 4, 5)
first, *middle, last = numbers
print(first)          # 1
print(middle)         # [2, 3, 4]
print(last)           # 5
```

**å…ƒç»„çš„ç”¨é€”**

```python
# 1. å‡½æ•°è¿”å›å¤šä¸ªå€¼
def divmod_custom(a, b):
    return a // b, a % b

quotient, remainder = divmod_custom(10, 3)

# 2. ä½œä¸ºå­—å…¸çš„é”®ï¼ˆå¿…é¡»ä¸å¯å˜ï¼‰
locations = {
    (0, 0): "åŸç‚¹",
    (1, 1): "å¯¹è§’çº¿",
    (3, 4): "æŸä¸ªç‚¹"
}

# 3. é…ç½®å’Œå¸¸é‡
DEFAULT_CONFIG = ("localhost", 8080, "utf-8")
HOST, PORT, ENCODING = DEFAULT_CONFIG
```

##### aã€å‘½åå…ƒç»„ï¼ˆnamedtupleï¼‰

æ™®é€šå…ƒç»„é€šè¿‡ç´¢å¼•è®¿é—®å…ƒç´ ï¼Œå¯è¯»æ€§è¾ƒå·®ã€‚`namedtuple`ï¼ˆå‘½åå…ƒç»„ï¼‰è®©ä½ å¯ä»¥é€šè¿‡åç§°è®¿é—®ï¼ŒåŒæ—¶ä¿æŒå…ƒç»„çš„ä¸å¯å˜æ€§å’Œæ€§èƒ½ä¼˜åŠ¿ã€‚

```python
from collections import namedtuple

# å®šä¹‰å‘½åå…ƒç»„
Point = namedtuple('Point', ['x', 'y'])

# åˆ›å»ºå®ä¾‹
p1 = Point(3, 4)
p2 = Point(x=10, y=20)

# é€šè¿‡åç§°è®¿é—®ï¼ˆæ›´æ¸…æ™°ï¼‰
print(p1.x, p1.y)        # 3 4

# ä¹Ÿæ”¯æŒç´¢å¼•è®¿é—®ï¼ˆå…¼å®¹æ™®é€šå…ƒç»„ï¼‰
print(p1[0], p1[1])      # 3 4

# ä¸å¯å˜
# p1.x = 5               # AttributeError
```

**å®šä¹‰æ–¹å¼å¯¹æ¯”**

```python
# æ–¹å¼1ï¼šåˆ—è¡¨å½¢å¼
Point = namedtuple('Point', ['x', 'y'])

# æ–¹å¼2ï¼šç©ºæ ¼åˆ†éš”å­—ç¬¦ä¸²
Point = namedtuple('Point', 'x y')

# æ–¹å¼3ï¼šé€—å·åˆ†éš”å­—ç¬¦ä¸²
Point = namedtuple('Point', 'x, y')
```

**å®é™…åº”ç”¨**

```python
# 1. è¡¨ç¤ºåæ ‡ç‚¹
Point = namedtuple('Point', ['x', 'y'])
p = Point(3, 4)
print(f"åæ ‡: ({p.x}, {p.y})")

# 2. æ•°æ®åº“æŸ¥è¯¢ç»“æœ
Student = namedtuple('Student', ['name', 'age', 'score'])
students = [
    Student('å¼ ä¸‰', 20, 85),
    Student('æå››', 21, 92),
    Student('ç‹äº”', 19, 78)
]

for s in students:
    print(f"{s.name}: {s.score}åˆ†")

# 3. å‡½æ•°è¿”å›å¤šä¸ªå€¼ï¼ˆæ›´æ¸…æ™°ï¼‰
def get_user_info():
    User = namedtuple('User', ['name', 'age', 'email'])
    return User('å¼ ä¸‰', 25, 'zhang@example.com')

user = get_user_info()
print(user.name)    # å¼ ä¸‰
print(user.email)   # zhang@example.com
```

**å¸¸ç”¨æ–¹æ³•**

```python
Point = namedtuple('Point', ['x', 'y'])
p = Point(3, 4)

# è½¬æ¢ä¸ºå­—å…¸
print(p._asdict())
# {'x': 3, 'y': 4}

# æ›¿æ¢å­—æ®µï¼ˆè¿”å›æ–°å¯¹è±¡ï¼‰
p2 = p._replace(x=10)
print(p2)           # Point(x=10, y=4)
print(p)            # Point(x=3, y=4)ï¼ˆåŸå¯¹è±¡ä¸å˜ï¼‰

# å­—æ®µåç§°
print(p._fields)    # ('x', 'y')

# ä»åºåˆ—åˆ›å»º
data = [5, 6]
p3 = Point._make(data)
print(p3)           # Point(x=5, y=6)
```

**æ‰©å±•å‘½åå…ƒç»„**

```python
# æ·»åŠ é»˜è®¤å€¼ï¼ˆPython 3.7+ï¼‰
Point = namedtuple('Point', ['x', 'y'], defaults=[0, 0])
p1 = Point()         # Point(x=0, y=0)
p2 = Point(3)        # Point(x=3, y=0)
p3 = Point(3, 4)     # Point(x=3, y=4)

# ç»§æ‰¿å¹¶æ·»åŠ æ–¹æ³•
from collections import namedtuple

class Point(namedtuple('Point', ['x', 'y'])):
    """æ‰©å±•çš„ç‚¹ç±»"""
    __slots__ = ()  # èŠ‚çœå†…å­˜

    def distance_from_origin(self):
        """è®¡ç®—åˆ°åŸç‚¹çš„è·ç¦»"""
        return (self.x ** 2 + self.y ** 2) ** 0.5

    def __str__(self):
        return f"({self.x}, {self.y})"

p = Point(3, 4)
print(p.distance_from_origin())  # 5.0
print(p)                         # (3, 4)
```

**å¯¹æ¯”æ™®é€šå…ƒç»„**

```python
# æ™®é€šå…ƒç»„ï¼šå¯è¯»æ€§å·®
person = ("å¼ ä¸‰", 25, "åŒ—äº¬")
print(person[0])    # å¼ ä¸‰ï¼ˆéœ€è¦è®°ä½ç´¢å¼•å«ä¹‰ï¼‰
print(person[1])    # 25

# å‘½åå…ƒç»„ï¼šå¯è¯»æ€§å¼º
Person = namedtuple('Person', ['name', 'age', 'city'])
person = Person("å¼ ä¸‰", 25, "åŒ—äº¬")
print(person.name)  # å¼ ä¸‰ï¼ˆè¯­ä¹‰æ¸…æ™°ï¼‰
print(person.age)   # 25
```

**ä¼˜åŠ¿ä¸é™åˆ¶**

ä¼˜åŠ¿ï¼š
- âœ… å¯è¯»æ€§å¼ºï¼ˆé€šè¿‡åç§°è®¿é—®ï¼‰
- âœ… ä¸å¯å˜ï¼ˆçº¿ç¨‹å®‰å…¨ï¼‰
- âœ… å†…å­˜æ•ˆç‡é«˜ï¼ˆæ¯”å­—å…¸èŠ‚çœå†…å­˜ï¼‰
- âœ… å¯ä»¥ä½œä¸ºå­—å…¸é”®
- âœ… å…¼å®¹æ™®é€šå…ƒç»„ï¼ˆæ”¯æŒç´¢å¼•å’Œè§£åŒ…ï¼‰

é™åˆ¶ï¼š
- âŒ ä¸å¯å˜ï¼ˆä¸èƒ½ä¿®æ”¹å­—æ®µå€¼ï¼‰
- âŒ ä¸æ”¯æŒé»˜è®¤å€¼ï¼ˆPython 3.7ä¹‹å‰ï¼‰
- âŒ å­—æ®µååœ¨å®šä¹‰åä¸èƒ½ä¿®æ”¹

å¯¹æ¯”Javaï¼š

```java
// Javaéœ€è¦å®šä¹‰å®Œæ•´çš„ç±»
public class Point {
    private final int x;
    private final int y;

    public Point(int x, int y) {
        this.x = x;
        this.y = y;
    }

    public int getX() { return x; }
    public int getY() { return y; }
}

// æˆ–ä½¿ç”¨Java 14+ Recordï¼ˆæ›´æ¥è¿‘namedtupleï¼‰
public record Point(int x, int y) {}
```

**ä½•æ—¶ä½¿ç”¨namedtuple**

- âœ… éœ€è¦è½»é‡çº§çš„ä¸å¯å˜æ•°æ®å®¹å™¨
- âœ… è¡¨ç¤ºå›ºå®šå­—æ®µçš„è®°å½•ï¼ˆå¦‚åæ ‡ã€é…ç½®ï¼‰
- âœ… å‡½æ•°è¿”å›å¤šä¸ªå€¼æ—¶æé«˜å¯è¯»æ€§
- âœ… æ›¿ä»£å­—å…¸ä»¥èŠ‚çœå†…å­˜
- âŒ éœ€è¦å¯å˜æ•°æ®æ—¶ï¼ˆç”¨dataclassæˆ–æ™®é€šç±»ï¼‰
- âŒ éœ€è¦å¤æ‚è¡Œä¸ºæ—¶ï¼ˆç”¨æ™®é€šç±»ï¼‰

#### 5.3ã€å­—å…¸ï¼ˆdictï¼‰

å­—å…¸æ˜¯é”®å€¼å¯¹æ˜ å°„ï¼Œç›¸å½“äºJavaçš„HashMapï¼Œä½†ä½¿ç”¨æ›´ç®€å•ã€‚

**åŸºæœ¬æ“ä½œ**

```python
# åˆ›å»ºå­—å…¸
user = {"name": "å¼ ä¸‰", "age": 25, "city": "åŒ—äº¬"}
empty_dict = {}
scores = dict(math=95, english=87, physics=92)

# è®¿é—®å’Œä¿®æ”¹
print(user["name"])          # å¼ ä¸‰
print(user.get("phone"))     # Noneï¼ˆé”®ä¸å­˜åœ¨æ—¶è¿”å›Noneï¼‰
print(user.get("phone", "æœªè®¾ç½®"))  # æœªè®¾ç½®ï¼ˆæä¾›é»˜è®¤å€¼ï¼‰

user["age"] = 26             # ä¿®æ”¹
user["phone"] = "13800138000" # æ·»åŠ æ–°é”®

# åˆ é™¤
del user["city"]             # åˆ é™¤é”®å€¼å¯¹
phone = user.pop("phone")    # åˆ é™¤å¹¶è¿”å›å€¼
last_item = user.popitem()   # åˆ é™¤å¹¶è¿”å›æœ€åä¸€ä¸ªé”®å€¼å¯¹
```

**å­—å…¸æ–¹æ³•**

```python
user = {"name": "å¼ ä¸‰", "age": 25, "city": "åŒ—äº¬"}

# è·å–æ‰€æœ‰é”®ã€å€¼ã€é”®å€¼å¯¹
print(user.keys())           # dict_keys(['name', 'age', 'city'])
print(user.values())         # dict_values(['å¼ ä¸‰', 25, 'åŒ—äº¬'])
print(user.items())          # dict_keys([('name', 'å¼ ä¸‰'), ('age', 25), ('city', 'åŒ—äº¬')])

# éå†å­—å…¸
for key in user:
    print(f"{key}: {user[key]}")

for key, value in user.items():
    print(f"{key}: {value}")

# åˆå¹¶å­—å…¸
defaults = {"theme": "dark", "lang": "zh"}
user.update(defaults)        # åˆå¹¶åˆ°userä¸­

# Python 3.9+ åˆå¹¶è¿ç®—ç¬¦
# config = defaults | user
```

**å­—å…¸æ¨å¯¼å¼**

```python
# ä¼ ç»Ÿæ–¹å¼
squares = {}
for x in range(5):
    squares[x] = x ** 2

# å­—å…¸æ¨å¯¼å¼
squares = {x: x ** 2 for x in range(5)}
# {0: 0, 1: 1, 2: 4, 3: 9, 4: 16}

# å¸¦æ¡ä»¶
even_squares = {x: x ** 2 for x in range(10) if x % 2 == 0}

# å¤„ç†ç°æœ‰æ•°æ®
words = ["apple", "banana", "cherry"]
word_lengths = {word: len(word) for word in words}
# {'apple': 5, 'banana': 6, 'cherry': 6}
```

**æœ‰åºå­—å…¸ç‰¹æ€§ï¼ˆPython 3.7+ï¼‰**

```python
# Python 3.7+å­—å…¸ä¿æŒæ’å…¥é¡ºåº
user = {"name": "å¼ ä¸‰", "age": 25}
user["city"] = "åŒ—äº¬"
print(list(user.keys()))  # ['name', 'age', 'city']ï¼ˆä¿æŒé¡ºåºï¼‰

# åœ¨æ—©æœŸç‰ˆæœ¬ä¸­ï¼Œå¦‚éœ€æœ‰åºå­—å…¸ï¼š
from collections import OrderedDict
ordered_dict = OrderedDict([("a", 1), ("b", 2)])
```

#### 5.4ã€é›†åˆï¼ˆsetï¼‰

é›†åˆæ˜¯æ— åºä¸”ä¸é‡å¤çš„å…ƒç´ é›†åˆï¼Œç±»ä¼¼Javaçš„HashSetã€‚

**åŸºæœ¬æ“ä½œ**

```python
# åˆ›å»ºé›†åˆ
fruits = {"è‹¹æœ", "é¦™è•‰", "æ©™å­"}
numbers = set([1, 2, 3, 4, 5])
empty_set = set()            # æ³¨æ„ï¼š{}æ˜¯ç©ºå­—å…¸

# æ·»åŠ å’Œåˆ é™¤å…ƒç´ 
fruits.add("è‘¡è„")
fruits.remove("é¦™è•‰")        # ä¸å­˜åœ¨ä¼šæŠ¥é”™
fruits.discard("èŠ’æœ")       # ä¸å­˜åœ¨ä¸æŠ¥é”™
popped = fruits.pop()        # éšæœºåˆ é™¤å¹¶è¿”å›

# æˆå‘˜æ£€æŸ¥ï¼ˆå¾ˆå¿«ï¼ï¼‰
print("è‹¹æœ" in fruits)      # True
```

**é›†åˆè¿ç®—**

```python
set1 = {1, 2, 3, 4, 5}
set2 = {4, 5, 6, 7, 8}

# å¹¶é›†
print(set1 | set2)          # {1, 2, 3, 4, 5, 6, 7, 8}
print(set1.union(set2))

# äº¤é›†
print(set1 & set2)          # {4, 5}
print(set1.intersection(set2))

# å·®é›†
print(set1 - set2)          # {1, 2, 3}
print(set1.difference(set2))

# å¯¹ç§°å·®é›†ï¼ˆå¼‚æˆ–ï¼‰
print(set1 ^ set2)          # {1, 2, 3, 6, 7, 8}
print(set1.symmetric_difference(set2))

# å­é›†å’Œè¶…é›†
print({1, 2}.issubset(set1))     # True
print(set1.issuperset({1, 2}))   # True
```

**é›†åˆæ¨å¯¼å¼**

```python
# å»é‡å¹¶å¤„ç†
numbers = [1, 2, 2, 3, 3, 4, 5]
unique_squares = {x ** 2 for x in numbers}
# {1, 4, 9, 16, 25}

# å®é™…åº”ç”¨ï¼šå»é‡
emails = ["user1@example.com", "user2@example.com", "user1@example.com"]
unique_emails = set(emails)
```

**frozensetï¼ˆä¸å¯å˜é›†åˆï¼‰**

```python
# åˆ›å»ºä¸å¯å˜é›†åˆ
immutable_set = frozenset([1, 2, 3, 4])

# å¯ä»¥ä½œä¸ºå­—å…¸çš„é”®
cache = {
    frozenset([1, 2]): "ç»“æœ1",
    frozenset([3, 4]): "ç»“æœ2"
}

# ä¸èƒ½ä¿®æ”¹
# immutable_set.add(5)  # AttributeError
```

#### 5.5ã€ä¸Javaé›†åˆæ¡†æ¶å¯¹æ¯”

**å¯¹æ¯”è¡¨**

| Python | Java | ç‰¹ç‚¹ |
|--------|------|------|
| `list` | `ArrayList` | åŠ¨æ€æ•°ç»„ï¼Œå¯å˜ |
| `tuple` | æ— ç›´æ¥å¯¹åº” | ä¸å¯å˜åºåˆ— |
| `dict` | `HashMap` | é”®å€¼æ˜ å°„ï¼ŒPython 3.7+æœ‰åº |
| `set` | `HashSet` | æ— åºä¸é‡å¤é›†åˆ |
| `frozenset` | æ— ç›´æ¥å¯¹åº” | ä¸å¯å˜é›†åˆ |

**è¯­æ³•å¯¹æ¯”**

```java
// Java - åˆ›å»ºå’Œæ“ä½œ
List<String> list = new ArrayList<>();
list.add("item");
String item = list.get(0);

Map<String, Integer> map = new HashMap<>();
map.put("key", 42);
Integer value = map.get("key");

Set<String> set = new HashSet<>();
set.add("item");
boolean exists = set.contains("item");
```

```python
# Python - æ›´ç®€æ´
list = ["item"]
list.append("item2")
item = list[0]

dict = {"key": 42}
dict["key2"] = 43
value = dict["key"]

set = {"item"}
set.add("item2")
exists = "item" in set
```

**å®ç”¨æŠ€å·§**

```python
# åˆ—è¡¨å»é‡å¹¶ä¿æŒé¡ºåº
def unique_list(items):
    seen = set()
    result = []
    for item in items:
        if item not in seen:
            seen.add(item)
            result.append(item)
    return result

# æˆ–è€…ç”¨dictï¼ˆPython 3.7+ï¼‰
def unique_list_dict(items):
    # dict.fromkeys å¿«é€Ÿåˆ›å»ºä¸€ä¸ªæ–°å­—å…¸ï¼Œé”®ä¸ºitemsä¸­çš„å…ƒç´ ï¼Œå€¼ä¸ºNone
    return list(dict.fromkeys(items))

# ç»Ÿè®¡å…ƒç´ é¢‘ç‡
from collections import Counter
words = ["apple", "banana", "apple", "cherry", "banana", "apple"]
frequency = Counter(words)
print(frequency)  # Counter({'apple': 3, 'banana': 2, 'cherry': 1})

# é»˜è®¤å€¼å­—å…¸
from collections import defaultdict
# defaultdict åˆ›å»ºä¸€ä¸ªé»˜è®¤å€¼ä¸ºç©ºåˆ—è¡¨çš„dict
groups = defaultdict(list)
for name, score in [("å¼ ä¸‰", 95), ("æå››", 87), ("å¼ ä¸‰", 92)]:
    groups[name].append(score)
print(dict(groups))  # {'å¼ ä¸‰': [95, 92], 'æå››': [87]}
```

**é€‰æ‹©æŒ‡å—**

- **list**ï¼šéœ€è¦æœ‰åºã€å¯å˜ã€å…è®¸é‡å¤çš„åºåˆ—
- **tuple**ï¼šéœ€è¦ä¸å¯å˜çš„åºåˆ—ï¼Œå¦‚åæ ‡ã€é…ç½®
- **dict**ï¼šéœ€è¦é”®å€¼æ˜ å°„ï¼Œå¦‚é…ç½®ã€ç¼“å­˜ã€ç´¢å¼•
- **set**ï¼šéœ€è¦å»é‡ã€å¿«é€Ÿæˆå‘˜æ£€æŸ¥ã€é›†åˆè¿ç®—
- **frozenset**ï¼šéœ€è¦ä¸å¯å˜çš„é›†åˆï¼Œå¦‚å­—å…¸çš„é”®

Pythonçš„æ•°æ®ç»“æ„è®¾è®¡ç²¾å¦™ï¼ŒæŒæ¡å®ƒä»¬å°±èƒ½å†™å‡ºæ›´Pythonicçš„ä»£ç ï¼

### 6ã€å‡½æ•°å®šä¹‰ä¸ä½¿ç”¨

Pythonçš„å‡½æ•°æ¯”Javaçš„æ–¹æ³•æ›´çµæ´»å¼ºå¤§ï¼Œæ”¯æŒå¤šç§å‚æ•°ä¼ é€’æ–¹å¼ï¼Œè€Œä¸”å‡½æ•°æ˜¯"ä¸€ç­‰å…¬æ°‘"ã€‚

#### 6.1ã€å‡½æ•°å®šä¹‰è¯­æ³•

**åŸºæœ¬è¯­æ³•**

```python
# ç®€å•å‡½æ•°
def greet(name):
    return f"Hello, {name}!"

# å¸¦ç±»å‹æ³¨è§£çš„å‡½æ•°ï¼ˆæ¨èï¼‰
def add(a: int, b: int) -> int:
    """è®¡ç®—ä¸¤ä¸ªæ•°çš„å’Œ"""
    return a + b

# æ— è¿”å›å€¼çš„å‡½æ•°
def print_info(name: str, age: int) -> None:
    print(f"å§“å: {name}, å¹´é¾„: {age}")

# æ–‡æ¡£å­—ç¬¦ä¸²ï¼ˆDocstringï¼‰
def calculate_area(radius: float) -> float:
    """
    è®¡ç®—åœ†çš„é¢ç§¯

    Args:
        radius: åœ†çš„åŠå¾„

    Returns:
        åœ†çš„é¢ç§¯

    Raises:
        ValueError: å½“åŠå¾„ä¸ºè´Ÿæ•°æ—¶
    """
    if radius < 0:
        raise ValueError("åŠå¾„ä¸èƒ½ä¸ºè´Ÿæ•°")
    return 3.14159 * radius ** 2
```

å¯¹æ¯”Javaï¼š
```java
// Javaéœ€è¦æ›´å¤šæ ·æ¿ä»£ç 
public class MathUtils {
    /**
     * è®¡ç®—ä¸¤ä¸ªæ•°çš„å’Œ
     */
    public static int add(int a, int b) {
        return a + b;
    }

    public static void printInfo(String name, int age) {
        System.out.println("å§“å: " + name + ", å¹´é¾„: " + age);
    }
}
```

#### 6.2ã€å‚æ•°ä¼ é€’

Pythonçš„å‚æ•°ä¼ é€’æœºåˆ¶éå¸¸çµæ´»ï¼Œæ”¯æŒå¤šç§æ–¹å¼ã€‚

**ä½ç½®å‚æ•°**

```python
def introduce(name, age, city):
    return f"æˆ‘å«{name}ï¼Œ{age}å²ï¼Œæ¥è‡ª{city}"

# æŒ‰ä½ç½®ä¼ é€’
result = introduce("å¼ ä¸‰", 25, "åŒ—äº¬")
```

**å…³é”®å­—å‚æ•°**

```python
# å¯ä»¥æŒ‰ä»»æ„é¡ºåºä¼ é€’
result = introduce(city="åŒ—äº¬", name="å¼ ä¸‰", age=25)

# æ··åˆä½¿ç”¨ï¼ˆä½ç½®å‚æ•°å¿…é¡»åœ¨å‰ï¼‰
result = introduce("å¼ ä¸‰", age=25, city="åŒ—äº¬")
```

**é»˜è®¤å‚æ•°**

```python
def greet(name, greeting="Hello", punctuation="!"):
    return f"{greeting}, {name}{punctuation}"

print(greet("å¼ ä¸‰"))                    # Hello, å¼ ä¸‰!
print(greet("å¼ ä¸‰", "ä½ å¥½"))             # ä½ å¥½, å¼ ä¸‰!
print(greet("å¼ ä¸‰", punctuation="ï¼Ÿ"))   # Hello, å¼ ä¸‰ï¼Ÿ

# æ³¨æ„ï¼šé»˜è®¤å‚æ•°çš„é™·é˜±ã€‚åœ¨ Python ä¸­ï¼Œå‡½æ•°çš„é»˜è®¤å‚æ•°åœ¨å‡½æ•°å®šä¹‰æ—¶ï¼ˆdef æ—¶ï¼‰è¢«åˆ›å»ºä¸€æ¬¡ï¼Œè€Œä¸æ˜¯æ¯æ¬¡è°ƒç”¨æ—¶é‡æ–°åˆ›å»ºã€‚
# [] è¿™ä¸ªåˆ—è¡¨å¯¹è±¡åœ¨å‡½æ•°å®šä¹‰æ—¶å°±åˆ›å»ºäº†ï¼Œæ‰€æœ‰åç»­è°ƒç”¨å…±äº«åŒä¸€ä¸ªåˆ—è¡¨å¯¹è±¡ã€‚
def append_to_list(item, target_list=[]):  # âŒ å±é™©ï¼
    target_list.append(item)
    return target_list

# æ­£ç¡®çš„å†™æ³•
def append_to_list(item, target_list=None):  # âœ… æ­£ç¡®
    if target_list is None:
        target_list = []
    target_list.append(item)
    return target_list
```

**å¯å˜å‚æ•°ï¼ˆ*args å’Œ **kwargsï¼‰**

```python
# *args - å¯å˜ä½ç½®å‚æ•°
def sum_all(*numbers):
    """è®¡ç®—æ‰€æœ‰æ•°å­—çš„å’Œ"""
    return sum(numbers)

print(sum_all(1, 2, 3, 4, 5))  # 15
print(sum_all(10, 20))         # 30

# **kwargs - å¯å˜å…³é”®å­—å‚æ•°
def create_user(**kwargs):
    """åˆ›å»ºç”¨æˆ·ä¿¡æ¯"""
    user = {}
    for key, value in kwargs.items():
        user[key] = value
    return user

user = create_user(name="å¼ ä¸‰", age=25, city="åŒ—äº¬", job="ç¨‹åºå‘˜")
print(user)  # {'name': 'å¼ ä¸‰', 'age': 25, 'city': 'åŒ—äº¬', 'job': 'ç¨‹åºå‘˜'}

# æ··åˆä½¿ç”¨
def flexible_function(required, *args, **kwargs):
    print(f"å¿…éœ€å‚æ•°: {required}")
    print(f"ä½ç½®å‚æ•°: {args}")
    print(f"å…³é”®å­—å‚æ•°: {kwargs}")

flexible_function("å¿…é¡»çš„", 1, 2, 3, name="å¼ ä¸‰", age=25)
```

**å‚æ•°è§£åŒ…**

```python
# è§£åŒ…åˆ—è¡¨/å…ƒç»„
def calculate(a, b, c):
    return a + b * c

numbers = [2, 3, 4]
result = calculate(*numbers)  # ç›¸å½“äº calculate(2, 3, 4)

# è§£åŒ…å­—å…¸
def greet(name, age, city):
    return f"{name}, {age}å², æ¥è‡ª{city}"

person = {"name": "å¼ ä¸‰", "age": 25, "city": "åŒ—äº¬"}
message = greet(**person)  # ç›¸å½“äº greet(name="å¼ ä¸‰", age=25, city="åŒ—äº¬")
```

#### 6.3ã€è¿”å›å€¼ä¸å¤šè¿”å›å€¼

**å•ä¸ªè¿”å›å€¼**

```python
def square(x):
    return x ** 2

def get_greeting():
    return "Hello, World!"

# æ²¡æœ‰æ˜ç¡®returnï¼Œè¿”å›None
def print_message(msg):
    print(msg)
    # éšå¼è¿”å› None
```

**å¤šè¿”å›å€¼ï¼ˆå…ƒç»„è§£åŒ…ï¼‰**

```python
def get_name_age():
    return "å¼ ä¸‰", 25  # å®é™…è¿”å›å…ƒç»„

# è§£åŒ…æ¥æ”¶
name, age = get_name_age()

def divmod_custom(a, b):
    return a // b, a % b  # å•†å’Œä½™æ•°

quotient, remainder = divmod_custom(17, 5)
print(f"å•†: {quotient}, ä½™æ•°: {remainder}")  # å•†: 3, ä½™æ•°: 2

# å¤æ‚çš„å¤šè¿”å›å€¼
def analyze_data(data):
    total = sum(data)
    count = len(data)
    average = total / count if count > 0 else 0
    return total, count, average, min(data), max(data)

data = [1, 5, 3, 9, 2]
total, count, avg, min_val, max_val = analyze_data(data)
```

#### 6.4ã€å‡½æ•°ä½œä¸ºä¸€ç­‰å…¬æ°‘

Pythonä¸­å‡½æ•°æ˜¯å¯¹è±¡ï¼Œå¯ä»¥èµ‹å€¼ã€ä¼ é€’ã€å­˜å‚¨ã€‚

**å‡½æ•°èµ‹å€¼**

```python
def greet(name):
    return f"Hello, {name}!"

# å‡½æ•°èµ‹å€¼ç»™å˜é‡
say_hello = greet
print(say_hello("å¼ ä¸‰"))  # Hello, å¼ ä¸‰!

# å‡½æ•°å­˜å‚¨åœ¨æ•°æ®ç»“æ„ä¸­
operations = {
    "add": lambda x, y: x + y,
    "subtract": lambda x, y: x - y,
    "multiply": lambda x, y: x * y
}

result = operations["add"](5, 3)  # 8
```

**å‡½æ•°ä½œä¸ºå‚æ•°**

```python
def apply_operation(numbers, operation):
    """å¯¹æ•°å­—åˆ—è¡¨åº”ç”¨æ“ä½œ"""
    return [operation(x) for x in numbers]

def square(x):
    return x ** 2

def cube(x):
    return x ** 3

numbers = [1, 2, 3, 4, 5]
squares = apply_operation(numbers, square)   # [1, 4, 9, 16, 25]
cubes = apply_operation(numbers, cube)       # [1, 8, 27, 64, 125]

# ä½¿ç”¨å†…ç½®å‡½æ•°
data = ["hello", "WORLD", "Python"]
uppercase = list(map(str.upper, data))      # ['HELLO', 'WORLD', 'PYTHON']
lengths = list(map(len, data))              # [5, 5, 6]
```

**å‡½æ•°è¿”å›å‡½æ•°**

```python
def create_multiplier(factor):
    """åˆ›å»ºä¸€ä¸ªä¹˜æ³•å‡½æ•°"""
    def multiplier(x):
        return x * factor
    return multiplier

double = create_multiplier(2)
triple = create_multiplier(3)

print(double(5))  # 10
print(triple(4))  # 12

# è£…é¥°å™¨çš„åŸºç¡€
def timer_decorator(func):
    import time
    def wrapper(*args, **kwargs):
        start = time.time()
        result = func(*args, **kwargs)
        end = time.time()
        print(f"{func.__name__} æ‰§è¡Œæ—¶é—´: {end - start:.4f}ç§’")
        return result
    return wrapper

@timer_decorator
def slow_function():
    import time
    time.sleep(1)
    return "å®Œæˆ"
```

#### 6.5ã€lambdaè¡¨è¾¾å¼

lambdaæ˜¯åˆ›å»ºåŒ¿åå‡½æ•°çš„ç®€æ´æ–¹å¼ã€‚

**åŸºæœ¬è¯­æ³•**

```python
# åŸºæœ¬lambda
square = lambda x: x ** 2
print(square(5))  # 25

# å¤šå‚æ•°lambda
add = lambda x, y: x + y
print(add(3, 4))  # 7

# å¯¹æ¯”æ™®é€šå‡½æ•°
def square_func(x):
    return x ** 2

# æ•ˆæœç›¸åŒï¼Œä½†lambdaæ›´ç®€æ´
```

**å®é™…åº”ç”¨**

```python
# æ’åº
students = [("å¼ ä¸‰", 85), ("æå››", 92), ("ç‹äº”", 78)]

# æŒ‰æˆç»©æ’åº
by_score = sorted(students, key=lambda student: student[1])
print(by_score)  # [('ç‹äº”', 78), ('å¼ ä¸‰', 85), ('æå››', 92)]

# è¿‡æ»¤
numbers = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
evens = list(filter(lambda x: x % 2 == 0, numbers))
print(evens)  # [2, 4, 6, 8, 10]

# æ˜ å°„
squares = list(map(lambda x: x ** 2, range(5)))
print(squares)  # [0, 1, 4, 9, 16]

# å­—å…¸æ“ä½œ
users = [
    {"name": "å¼ ä¸‰", "age": 25},
    {"name": "æå››", "age": 30},
    {"name": "ç‹äº”", "age": 22}
]

# æŒ‰å¹´é¾„æ’åº
sorted_users = sorted(users, key=lambda user: user["age"])
```

#### 6.6ã€ä½œç”¨åŸŸä¸LEGBè§„åˆ™

Pythonä½¿ç”¨LEGBè§„åˆ™è§£æå˜é‡åã€‚

**LEGBè§„åˆ™**

- **L**ocalï¼ˆå±€éƒ¨ä½œç”¨åŸŸï¼‰
- **E**nclosingï¼ˆåµŒå¥—å‡½æ•°çš„å¤–å±‚ä½œç”¨åŸŸï¼‰
- **G**lobalï¼ˆå…¨å±€ä½œç”¨åŸŸï¼‰
- **B**uilt-inï¼ˆå†…ç½®ä½œç”¨åŸŸï¼‰

```python
x = "å…¨å±€å˜é‡"

def outer():
    x = "å¤–å±‚å‡½æ•°å˜é‡"

    def inner():
        x = "å†…å±‚å‡½æ•°å˜é‡"
        print(f"å†…å±‚: {x}")  # å†…å±‚å‡½æ•°å˜é‡

    inner()
    print(f"å¤–å±‚: {x}")      # å¤–å±‚å‡½æ•°å˜é‡

outer()
print(f"å…¨å±€: {x}")          # å…¨å±€å˜é‡
```

**globalå’Œnonlocalå…³é”®å­—**

```python
count = 0  # å…¨å±€å˜é‡

def increment_global():
    # åœ¨å‡½æ•°å†…éƒ¨è¯»å–æˆ–ä¿®æ”¹æ¨¡å—çº§åˆ«ï¼ˆå…¨å±€ï¼‰çš„å˜é‡
    global count
    count += 1

def create_counter():
    count = 0  # å±€éƒ¨å˜é‡

    def increment():
        # åœ¨åµŒå¥—å‡½æ•°ä¸­ä¿®æ”¹å¤–å±‚å‡½æ•°çš„å±€éƒ¨å˜é‡ï¼ˆä¸æ˜¯å…¨å±€å˜é‡ï¼‰
        nonlocal count
        count += 1
        return count

    return increment

# ä½¿ç”¨
increment_global()
print(count)  # 1

counter = create_counter()
print(counter())  # 1
print(counter())  # 2
```

#### 6.7ã€é—­åŒ…

é—­åŒ…æ˜¯å‡½æ•°å’Œå…¶å‘¨å›´çŠ¶æ€çš„ç»„åˆã€‚

**åŸºæœ¬é—­åŒ…**

```python
def create_adder(x):
    def adder(y):
        return x + y  # æ•è·å¤–å±‚å˜é‡x
    return adder

add_5 = create_adder(5)
add_10 = create_adder(10)

print(add_5(3))   # 8
print(add_10(3))  # 13

# æ£€æŸ¥é—­åŒ…å˜é‡
print(add_5.__closure__)  # (<cell at 0x...: int object at 0x...>,)
```

**å®é™…åº”ç”¨**

```python
# è®¡æ•°å™¨
def create_counter(start=0):
    count = start

    def counter():
        nonlocal count
        count += 1
        return count

    def reset():
        nonlocal count
        count = start

    def get_count():
        return count

    # è¿”å›å¤šä¸ªå‡½æ•°
    counter.reset = reset
    counter.get_count = get_count
    return counter

counter = create_counter(10)
print(counter())         # 11
print(counter())         # 12
print(counter.get_count())  # 12
counter.reset()
print(counter())         # 11

# é…ç½®å·¥å‚
def create_formatter(prefix, suffix):
    def formatter(text):
        return f"{prefix}{text}{suffix}"
    return formatter

html_formatter = create_formatter("<p>", "</p>")
markdown_formatter = create_formatter("**", "**")

print(html_formatter("Hello"))     # <p>Hello</p>
print(markdown_formatter("Bold"))  # **Bold**
```

**è£…é¥°å™¨ç®€ä»‹**

```python
# æç¤ºï¼šè£…é¥°å™¨æ˜¯Pythonçš„é‡è¦ç‰¹æ€§ï¼Œå°†åœ¨ç¬¬8ç« "é«˜çº§ç‰¹æ€§"ä¸­è¯¦ç»†è®²è§£
# è¿™é‡Œç®€è¦å±•ç¤ºè£…é¥°å™¨ä¸é—­åŒ…çš„å…³ç³»

def timer_decorator(func):
    """ç®€å•çš„è®¡æ—¶è£…é¥°å™¨ï¼ˆç¬¬8ç« è¯¦è§£ï¼‰"""
    import time
    def wrapper(*args, **kwargs):
        start = time.time()
        result = func(*args, **kwargs)
        end = time.time()
        print(f"{func.__name__} æ‰§è¡Œæ—¶é—´: {end - start:.4f}ç§’")
        return result
    return wrapper

# ä½¿ç”¨è£…é¥°å™¨
@timer_decorator
def slow_function():
    import time
    time.sleep(1)
    return "å®Œæˆ"
```

**ä¸Javaå¯¹æ¯”**

| ç‰¹æ€§ | Java | Python |
|-----|------|--------|
| å‡½æ•°å®šä¹‰ | å¿…é¡»åœ¨ç±»ä¸­ | å¯ä»¥ç‹¬ç«‹å­˜åœ¨ |
| æ–¹æ³•é‡è½½ | æ”¯æŒï¼ˆä¸åŒå‚æ•°ï¼‰ | ä¸æ”¯æŒï¼ˆç”¨é»˜è®¤å‚æ•°ï¼‰ |
| å¯å˜å‚æ•° | `...`è¯­æ³• | `*args`, `**kwargs` |
| å‡½æ•°å¯¹è±¡ | éœ€è¦æ¥å£/lambda | å‡½æ•°å³å¯¹è±¡ |
| é—­åŒ… | lambdaè¡¨è¾¾å¼ | å®Œæ•´é—­åŒ…æ”¯æŒ |
| ä½œç”¨åŸŸ | å—çº§ä½œç”¨åŸŸ | å‡½æ•°çº§ä½œç”¨åŸŸ |

Pythonçš„å‡½æ•°ç³»ç»Ÿæ¯”Javaæ›´çµæ´»ï¼Œæ”¯æŒå‡½æ•°å¼ç¼–ç¨‹èŒƒå¼ï¼Œèƒ½å†™å‡ºæ›´ç®€æ´ä¼˜é›…çš„ä»£ç ï¼

### 7ã€æ¨¡å—ä¸åŒ…

Pythonçš„æ¨¡å—ç³»ç»Ÿæ¯”Javaçš„åŒ…ç³»ç»Ÿæ›´ç®€å•ç›´è§‚ï¼Œä¸€ä¸ª`.py`æ–‡ä»¶å°±æ˜¯ä¸€ä¸ªæ¨¡å—ï¼Œæ–‡ä»¶å¤¹å°±æ˜¯åŒ…ã€‚

#### 7.1ã€æ¨¡å—å¯¼å…¥æ–¹å¼

**importè¯­å¥**

```python
# å¯¼å…¥æ•´ä¸ªæ¨¡å—
import math
print(math.pi)        # 3.141592653589793
print(math.sqrt(16))  # 4.0

import os
print(os.getcwd())    # è·å–å½“å‰å·¥ä½œç›®å½•

# å¯¼å…¥å¤šä¸ªæ¨¡å—
import sys, json, re

# å¯¼å…¥æ—¶é‡å‘½å
import datetime as dt
now = dt.datetime.now()
```

**from...importè¯­å¥**

```python
# å¯¼å…¥æ¨¡å—ä¸­çš„ç‰¹å®šå‡½æ•°/ç±»
from math import pi, sqrt, sin
print(pi)      # ç›´æ¥ä½¿ç”¨ï¼Œæ— éœ€å‰ç¼€
print(sqrt(16)) # 4.0

# å¯¼å…¥å¤šä¸ª
from os import getcwd, listdir, path

# å¯¼å…¥æ‰€æœ‰ï¼ˆä¸æ¨èï¼‰
from math import *  # å¯èƒ½é€ æˆå‘½åå†²çª

# å¯¼å…¥æ—¶é‡å‘½å
from datetime import datetime as dt
now = dt.now()
```

**importåˆ«å**

```python
# å¸¸è§çš„åˆ«åçº¦å®š
import numpy as np           # æ•°æ®ç§‘å­¦å¸¸ç”¨
import pandas as pd          # æ•°æ®åˆ†æ
import matplotlib.pyplot as plt  # ç»˜å›¾

# è‡ªå®šä¹‰æ¨¡å—åˆ«å
import my_very_long_module_name as short_name
```

å¯¹æ¯”Javaï¼š
```java
// Javaçš„import
import java.util.List;
import java.util.ArrayList;
import java.util.Map;
import java.util.HashMap;

// é™æ€å¯¼å…¥
import static java.lang.Math.PI;
import static java.lang.Math.sqrt;
```

#### 7.2ã€æ¨¡å—æœç´¢è·¯å¾„

PythonæŒ‰ä»¥ä¸‹é¡ºåºæœç´¢æ¨¡å—ï¼š

```python
import sys

# æŸ¥çœ‹æ¨¡å—æœç´¢è·¯å¾„
for path in sys.path:
    print(path)

# 1. å½“å‰è„šæœ¬æ‰€åœ¨ç›®å½•
# 2. PYTHONPATHç¯å¢ƒå˜é‡æŒ‡å®šçš„ç›®å½•
# 3. Pythonæ ‡å‡†åº“ç›®å½•
# 4. site-packagesç›®å½•ï¼ˆç¬¬ä¸‰æ–¹åŒ…ï¼‰

# åŠ¨æ€æ·»åŠ æœç´¢è·¯å¾„
sys.path.append('/path/to/my/modules')
sys.path.insert(0, '/priority/path')  # ä¼˜å…ˆæœç´¢
```

**æŸ¥æ‰¾æ¨¡å—ä½ç½®**

```python
import math
print(math.__file__)  # æ˜¾ç¤ºæ¨¡å—æ–‡ä»¶ä½ç½®

# æˆ–è€…ç”¨inspectæ¨¡å—
import inspect
import requests
print(inspect.getfile(requests))
```

#### 7.3ã€`__name__`å˜é‡ä¸å…¥å£ç‚¹

è¿™æ˜¯Pythonæ¨¡å—ç³»ç»Ÿçš„é‡è¦æ¦‚å¿µã€‚

```python
# my_module.py
def hello():
    print("Hello from my_module!")

def main():
    print("è¿™æ˜¯ä¸»ç¨‹åº")
    hello()

# å…³é”®ä»£ç ï¼šæ¨¡å—çš„å…¥å£ç‚¹
if __name__ == "__main__":
    main()
```

**å·¥ä½œåŸç†**

```python
# å½“ç›´æ¥è¿è¡Œè„šæœ¬æ—¶
# python my_module.py
# __name__ çš„å€¼æ˜¯ "__main__"

# å½“è¢«å…¶ä»–æ¨¡å—å¯¼å…¥æ—¶
# import my_module
# __name__ çš„å€¼æ˜¯ "my_module"

# å®é™…åº”ç”¨
def add(a, b):
    return a + b

def multiply(a, b):
    return a * b

# æµ‹è¯•ä»£ç ï¼Œåªåœ¨ç›´æ¥è¿è¡Œæ—¶æ‰§è¡Œ
if __name__ == "__main__":
    # è¿™é‡Œçš„ä»£ç åªåœ¨ç›´æ¥è¿è¡Œæ—¶æ‰§è¡Œï¼Œå¯¼å…¥æ—¶ä¸æ‰§è¡Œ
    print("æµ‹è¯•æ¨¡å—åŠŸèƒ½...")
    print(f"2 + 3 = {add(2, 3)}")
    print(f"4 * 5 = {multiply(4, 5)}")
```

å¯¹æ¯”Javaï¼š
```java
// Javaçš„mainæ–¹æ³•
public class MyClass {
    public static void add(int a, int b) {
        return a + b;
    }

    public static void main(String[] args) {
        // ç¨‹åºå…¥å£ç‚¹
        System.out.println("2 + 3 = " + add(2, 3));
    }
}
```

#### 7.4ã€åŒ…çš„ç»„ç»‡ç»“æ„

åŒ…å°±æ˜¯åŒ…å«`__init__.py`æ–‡ä»¶çš„ç›®å½•ã€‚

**åŸºæœ¬åŒ…ç»“æ„**

```
mypackage/
    __init__.py      # åŒ…çš„åˆå§‹åŒ–æ–‡ä»¶
    module1.py       # æ¨¡å—1
    module2.py       # æ¨¡å—2
    subpackage/      # å­åŒ…
        __init__.py
        submodule.py
```

**åˆ›å»ºåŒ…**

```python
# mypackage/__init__.py
"""
æˆ‘çš„PythonåŒ…
"""

# åŒ…çº§åˆ«çš„å˜é‡
__version__ = "1.0.0"
__author__ = "å¼ ä¸‰"

# å¯¼å…¥å­æ¨¡å—ï¼Œæ–¹ä¾¿ä½¿ç”¨
from .module1 import function1
from .module2 import Class2

# å®šä¹‰åŒ…çš„å…¬å¼€æ¥å£
__all__ = ["function1", "Class2", "helper_function"]

def helper_function():
    return "è¿™æ˜¯åŒ…çº§åˆ«çš„å‡½æ•°"
```

```python
# mypackage/module1.py
def function1():
    return "æ¥è‡ªæ¨¡å—1çš„å‡½æ•°"

def internal_function():
    return "å†…éƒ¨å‡½æ•°"
```

```python
# mypackage/module2.py
class Class2:
    def method(self):
        return "æ¥è‡ªç±»2çš„æ–¹æ³•"
```

#### 7.5ã€`__init__.py`æ–‡ä»¶çš„ä½œç”¨

`__init__.py`è®©ç›®å½•å˜æˆPythonåŒ…ï¼Œå¹¶æ§åˆ¶åŒ…çš„å¯¼å…¥è¡Œä¸ºã€‚

**åŸºæœ¬ä½œç”¨**

```python
# ç©ºçš„__init__.py
# ä»…ä»…è®©ç›®å½•æˆä¸ºåŒ…

# æˆ–è€…åŒ…å«åˆå§‹åŒ–ä»£ç 
print("æ­£åœ¨åˆå§‹åŒ–mypackage...")

# å¯¼å…¥å­æ¨¡å—
from .database import connect
from .utils import helper

# è®¾ç½®åŒ…çº§åˆ«å˜é‡
VERSION = "2.1.0"
DEBUG = False
```

**æ§åˆ¶å¯¼å…¥**

```python
# mypackage/__init__.py
# åªå¯¼å‡ºç‰¹å®šçš„å‡½æ•°/ç±»
from .core import important_function
from .helpers import utility_class

# æ§åˆ¶ from mypackage import * çš„è¡Œä¸º
__all__ = [
    "important_function",
    "utility_class",
    "VERSION"
]

VERSION = "1.0.0"

# åˆå§‹åŒ–ä»£ç 
def _initialize():
    print("åŒ…åˆå§‹åŒ–å®Œæˆ")

_initialize()
```

**ä½¿ç”¨åŒ…**

```python
# å¯¼å…¥åŒ…
import mypackage
print(mypackage.VERSION)
result = mypackage.function1()

# å¯¼å…¥åŒ…ä¸­çš„æ¨¡å—
from mypackage import module1
result = module1.function1()

# å¯¼å…¥ç‰¹å®šåŠŸèƒ½
from mypackage.module2 import Class2
obj = Class2()
```

#### 7.6ã€ç›¸å¯¹å¯¼å…¥ä¸ç»å¯¹å¯¼å…¥

**ç»å¯¹å¯¼å…¥ï¼ˆæ¨èï¼‰**

```python
# æ€»æ˜¯ä»é¡¶çº§åŒ…å¼€å§‹
from mypackage.subpackage import submodule
from mypackage.module1 import function1
import mypackage.database.models
```

**ç›¸å¯¹å¯¼å…¥**

```python
# åœ¨åŒ…å†…éƒ¨ä½¿ç”¨ç›¸å¯¹å¯¼å…¥
# mypackage/module1.py

# å¯¼å…¥åŒçº§æ¨¡å—
from . import module2          # å½“å‰åŒ…çš„module2
from .module2 import Class2    # å½“å‰åŒ…module2çš„Class2

# å¯¼å…¥ä¸Šçº§åŒ…
from .. import parent_module   # ä¸Šçº§åŒ…çš„æ¨¡å—
from ..utils import helper     # ä¸Šçº§åŒ…utilsçš„helper

# å¯¼å…¥å­åŒ…
from .subpackage import submodule  # å­åŒ…çš„æ¨¡å—
```

**æœ€ä½³å®è·µ**

```python
# âœ… æ¨èï¼šä½¿ç”¨ç»å¯¹å¯¼å…¥
from myproject.database import models
from myproject.utils.helpers import format_date

# âœ… åŒ…å†…ç›¸å¯¹å¯¼å…¥ä¹Ÿå¯ä»¥
from .database import models
from ..utils import helpers

# âŒ é¿å…ï¼šéšå¼ç›¸å¯¹å¯¼å…¥ï¼ˆPython 3å·²ç§»é™¤ï¼‰
# import models  # ä¸æ¸…æ¥šæ¥æº
```

#### 7.7ã€å®é™…é¡¹ç›®ç»“æ„ç¤ºä¾‹

**å…¸å‹çš„Pythoné¡¹ç›®ç»“æ„**

```
myproject/
    README.md
    requirements.txt     # ä¾èµ–åˆ—è¡¨
    # æ³¨æ„ï¼šç°ä»£ Python æ¨èä½¿ç”¨ pyproject.tomlï¼ˆPEP 518/621ï¼‰ä½œä¸ºé¦–é€‰æ‰“åŒ…é…ç½®æ–¹å¼ï¼Œä½† setup.py ä»å¹¿æ³›ä½¿ç”¨ï¼Œå°¤å…¶åœ¨æ—§é¡¹ç›®ä¸­
    setup.py            # å®‰è£…è„šæœ¬
    myproject/          # ä¸»åŒ…
        __init__.py
        main.py         # ç¨‹åºå…¥å£
        config.py       # é…ç½®
        models/         # æ•°æ®æ¨¡å‹
            __init__.py
            user.py
            product.py
        views/          # è§†å›¾å±‚
            __init__.py
            api.py
            web.py
        utils/          # å·¥å…·å‡½æ•°
            __init__.py
            helpers.py
            validators.py
        tests/          # æµ‹è¯•ä»£ç 
            __init__.py
            test_models.py
            test_views.py
```

**é…ç½®æ¨¡å—**

```python
# myproject/config.py
import os

class Config:
    SECRET_KEY = os.environ.get('SECRET_KEY', 'dev-secret')
    DATABASE_URL = os.environ.get('DATABASE_URL', 'sqlite:///app.db')
    DEBUG = os.environ.get('DEBUG', 'False').lower() == 'true'

class DevelopmentConfig(Config):
    DEBUG = True

class ProductionConfig(Config):
    DEBUG = False

# æ ¹æ®ç¯å¢ƒé€‰æ‹©é…ç½®
config = {
    'development': DevelopmentConfig,
    'production': ProductionConfig,
    'default': DevelopmentConfig
}
```

**ä¸»ç¨‹åºå…¥å£**

```python
# myproject/main.py
from myproject.config import config
from myproject.models import User
from myproject.utils.helpers import format_date

def main():
    cfg = config['default']()
    if cfg.DEBUG:
        print("è¿è¡Œåœ¨è°ƒè¯•æ¨¡å¼")

    # ä¸šåŠ¡é€»è¾‘
    user = User("å¼ ä¸‰", 25)
    print(f"ç”¨æˆ·: {user.name}, æ³¨å†Œæ—¥æœŸ: {format_date(user.created_at)}")

if __name__ == "__main__":
    main()
```

#### 7.8ã€ç¬¬ä¸‰æ–¹åŒ…ç®¡ç†

**ä½¿ç”¨pipå®‰è£…åŒ…**

```bash
# å®‰è£…å•ä¸ªåŒ…
pip install requests

# å®‰è£…ç‰¹å®šç‰ˆæœ¬
pip install django==4.2.0

# ä»requirements.txtå®‰è£…
pip install -r requirements.txt

# å®‰è£…å¼€å‘ç‰ˆæœ¬
pip install git+https://github.com/user/repo.git
```

**requirements.txtç¤ºä¾‹**

```txt
# ç”Ÿäº§ä¾èµ–
Django>=4.1,<5.0
requests>=2.28.0
psycopg2-binary==2.9.3

# å¼€å‘ä¾èµ–ï¼ˆé€šå¸¸æ”¾åœ¨dev-requirements.txtï¼‰
pytest>=7.0.0
black>=22.0.0
flake8>=5.0.0
```

**è™šæ‹Ÿç¯å¢ƒä¸­çš„åŒ…ç®¡ç†**

```bash
# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python -m venv myproject_env

# æ¿€æ´»ç¯å¢ƒ
# Windows
myproject_env\Scripts\activate
# macOS/Linux
source myproject_env/bin/activate

# å®‰è£…åŒ…
pip install -r requirements.txt

# å¯¼å‡ºå½“å‰ç¯å¢ƒçš„åŒ…åˆ—è¡¨
pip freeze > requirements.txt

# é€€å‡ºç¯å¢ƒ
deactivate
```

**ä¸Javaå¯¹æ¯”**

| ç‰¹æ€§ | Java | Python |
|-----|------|--------|
| åŸºæœ¬å•ä½ | ç±»ï¼ˆå¿…é¡»åœ¨åŒ…ä¸­ï¼‰ | æ¨¡å—ï¼ˆ.pyæ–‡ä»¶ï¼‰ |
| åŒ…å£°æ˜ | `package com.example` | ç›®å½•+`__init__.py` |
| å¯¼å…¥ | `import com.example.Class` | `from package import module` |
| ä¾èµ–ç®¡ç† | Maven/Gradle | pip+requirements.txt |
| é¡¹ç›®ç»“æ„ | å¼ºåˆ¶ç›®å½•ç»“æ„ | çµæ´»çš„ç›®å½•ç»“æ„ |
| æ¨¡å—æœç´¢ | CLASSPATH | sys.path |

**å®ç”¨æŠ€å·§**

```python
# åŠ¨æ€å¯¼å…¥æ¨¡å—
import importlib

module_name = "math"
math_module = importlib.import_module(module_name)
print(math_module.pi)

# æ£€æŸ¥æ¨¡å—æ˜¯å¦å­˜åœ¨
try:
    import optional_module
    HAS_OPTIONAL = True
except ImportError:
    HAS_OPTIONAL = False

# æ¡ä»¶å¯¼å…¥
if HAS_OPTIONAL:
    from optional_module import feature

# å»¶è¿Ÿå¯¼å…¥ï¼ˆåœ¨å‡½æ•°å†…éƒ¨å¯¼å…¥ï¼‰
def process_data():
    import pandas as pd  # åªåœ¨éœ€è¦æ—¶å¯¼å…¥
    return pd.DataFrame()

# è·å–æ¨¡å—ä¿¡æ¯
import inspect
import requests

print(f"æ¨¡å—å: {requests.__name__}")
print(f"æ¨¡å—æ–‡ä»¶: {requests.__file__}")
print(f"æ¨¡å—æ–‡æ¡£: {requests.__doc__}")
```

Pythonçš„æ¨¡å—ç³»ç»Ÿè®¾è®¡ç®€æ´ä¼˜é›…ï¼Œæ¯”Javaçš„åŒ…ç³»ç»Ÿæ›´å®¹æ˜“ç†è§£å’Œä½¿ç”¨ã€‚æŒæ¡æ¨¡å—å’ŒåŒ…çš„æ¦‚å¿µï¼Œèƒ½å¸®ä½ æ›´å¥½åœ°ç»„ç»‡ä»£ç å’Œç®¡ç†é¡¹ç›®ï¼

## ä¸‰ã€é¢å‘å¯¹è±¡ç¼–ç¨‹

### 1ã€ç±»ä¸å¯¹è±¡

Pythonçš„é¢å‘å¯¹è±¡ç¼–ç¨‹æ¯”Javaæ›´çµæ´»ï¼Œæ²¡æœ‰é‚£ä¹ˆå¤šä¸¥æ ¼çš„è§„åˆ™ï¼Œä½†åŒæ ·å¼ºå¤§ã€‚

#### 1.1ã€ç±»çš„å®šä¹‰

**åŸºæœ¬è¯­æ³•**

```python
# ç®€å•çš„ç±»å®šä¹‰
class Person:
    """è¿™æ˜¯ä¸€ä¸ªäººç±»"""
    pass  # ç©ºç±»ï¼Œå ä½ç¬¦

# å¸¦å±æ€§å’Œæ–¹æ³•çš„ç±»
class Dog:
    """ç‹—ç±»"""

    # ç±»å±æ€§ï¼ˆæ‰€æœ‰å®ä¾‹å…±äº«ï¼‰
    species = "Canis familiaris"

    def bark(self):
        """å®ä¾‹æ–¹æ³•"""
        return "æ±ªæ±ªæ±ªï¼"

# åˆ›å»ºå¯¹è±¡ï¼ˆå®ä¾‹åŒ–ï¼‰
dog = Dog()
print(dog.species)  # Canis familiaris
print(dog.bark())   # æ±ªæ±ªæ±ªï¼
```

å¯¹æ¯”Javaï¼š
```java
// Javaéœ€è¦æ›´å¤šæ ·æ¿ä»£ç 
public class Dog {
    // ç±»å±æ€§ï¼ˆé™æ€ï¼‰
    public static final String SPECIES = "Canis familiaris";

    // å®ä¾‹æ–¹æ³•
    public String bark() {
        return "æ±ªæ±ªæ±ªï¼";
    }
}

// å®ä¾‹åŒ–
Dog dog = new Dog();
```

#### 1.2ã€æ„é€ å‡½æ•°ï¼ˆ`__init__`ï¼‰

Pythonä½¿ç”¨`__init__`æ–¹æ³•åˆå§‹åŒ–å¯¹è±¡ï¼Œç±»ä¼¼Javaçš„æ„é€ å‡½æ•°ã€‚

**åŸºæœ¬æ„é€ å‡½æ•°**

```python
class Person:
    def __init__(self, name, age):
        """æ„é€ å‡½æ•°ï¼Œåˆ›å»ºå¯¹è±¡æ—¶è‡ªåŠ¨è°ƒç”¨"""
        self.name = name  # å®ä¾‹å±æ€§
        self.age = age

    def introduce(self):
        return f"æˆ‘å«{self.name}ï¼Œ{self.age}å²"

# åˆ›å»ºå¯¹è±¡
person = Person("å¼ ä¸‰", 25)
print(person.introduce())  # æˆ‘å«å¼ ä¸‰ï¼Œ25å²
```

**å¸¦é»˜è®¤å€¼çš„æ„é€ å‡½æ•°**

```python
class User:
    def __init__(self, username, email, is_active=True, role="user"):
        self.username = username
        self.email = email
        self.is_active = is_active
        self.role = role

    def __repr__(self):
        return f"User(username='{self.username}', email='{self.email}')"

# ä½¿ç”¨é»˜è®¤å€¼
user1 = User("å¼ ä¸‰", "zhangsan@example.com")

# è¦†ç›–é»˜è®¤å€¼
user2 = User("æå››", "lisi@example.com", is_active=False, role="admin")
```

å¯¹æ¯”Javaï¼š
```java
// Javaçš„æ„é€ å‡½æ•°
public class Person {
    private String name;
    private int age;

    // æ„é€ å‡½æ•°
    public Person(String name, int age) {
        this.name = name;
        this.age = age;
    }

    // éœ€è¦æ‰‹åŠ¨å†™getter/setter
    public String getName() { return name; }
    public void setName(String name) { this.name = name; }
}
```

#### 1.3ã€å®ä¾‹å±æ€§ä¸ç±»å±æ€§

**å®ä¾‹å±æ€§**

```python
class BankAccount:
    def __init__(self, owner, balance=0):
        self.owner = owner      # å®ä¾‹å±æ€§
        self.balance = balance  # æ¯ä¸ªå®ä¾‹ç‹¬ç«‹

    def deposit(self, amount):
        self.balance += amount
        return self.balance

account1 = BankAccount("å¼ ä¸‰", 1000)
account2 = BankAccount("æå››", 2000)

account1.deposit(500)
print(account1.balance)  # 1500
print(account2.balance)  # 2000ï¼ˆäº’ä¸å½±å“ï¼‰
```

**ç±»å±æ€§**

```python
class BankAccount:
    # ç±»å±æ€§ï¼ˆæ‰€æœ‰å®ä¾‹å…±äº«ï¼‰
    bank_name = "Pythoné“¶è¡Œ"
    interest_rate = 0.03
    account_count = 0

    def __init__(self, owner, balance=0):
        self.owner = owner
        self.balance = balance
        # ä¿®æ”¹ç±»å±æ€§ï¼ˆé€šè¿‡ç±»åï¼‰
        BankAccount.account_count += 1

    @classmethod
    def get_account_count(cls):
        """ç±»æ–¹æ³•ï¼Œè®¿é—®ç±»å±æ€§"""
        return cls.account_count

# è®¿é—®ç±»å±æ€§
print(BankAccount.bank_name)  # Pythoné“¶è¡Œ

# å®ä¾‹ä¹Ÿå¯ä»¥è®¿é—®
account = BankAccount("å¼ ä¸‰", 1000)
print(account.bank_name)      # Pythoné“¶è¡Œ

# åˆ›å»ºå¤šä¸ªå®ä¾‹
account1 = BankAccount("å¼ ä¸‰")
account2 = BankAccount("æå››")
print(BankAccount.get_account_count())  # 2
```

**å®ä¾‹å±æ€§ vs ç±»å±æ€§**

```python
class Example:
    class_var = "ç±»å±æ€§"  # ç±»å±æ€§

    def __init__(self, value):
        self.instance_var = value  # å®ä¾‹å±æ€§

# è®¿é—®ç±»å±æ€§
print(Example.class_var)  # ç±»å±æ€§

# å®ä¾‹è®¿é—®
obj1 = Example("å®ä¾‹1")
obj2 = Example("å®ä¾‹2")

print(obj1.instance_var)  # å®ä¾‹1
print(obj2.instance_var)  # å®ä¾‹2

# ä¿®æ”¹ç±»å±æ€§
Example.class_var = "æ–°çš„ç±»å±æ€§"
print(obj1.class_var)  # æ–°çš„ç±»å±æ€§ï¼ˆæ‰€æœ‰å®ä¾‹éƒ½å˜äº†ï¼‰
print(obj2.class_var)  # æ–°çš„ç±»å±æ€§

# æ³¨æ„ï¼šå®ä¾‹èµ‹å€¼ä¼šåˆ›å»ºåŒåçš„å®ä¾‹å±æ€§ï¼Œä¸ä¼šä¿®æ”¹ç±»å±æ€§
obj1.class_var = "å®ä¾‹å±æ€§"
print(obj1.class_var)        # å®ä¾‹å±æ€§ï¼ˆå®ä¾‹çš„ï¼‰
print(obj2.class_var)        # æ–°çš„ç±»å±æ€§ï¼ˆç±»çš„ï¼‰
print(Example.class_var)     # æ–°çš„ç±»å±æ€§ï¼ˆç±»çš„ï¼‰
```

#### 1.4ã€å®ä¾‹æ–¹æ³•ã€ç±»æ–¹æ³•ã€é™æ€æ–¹æ³•

**å®ä¾‹æ–¹æ³•**

```python
class Calculator:
    def __init__(self, name):
        self.name = name

    # å®ä¾‹æ–¹æ³•ï¼šç¬¬ä¸€ä¸ªå‚æ•°æ˜¯self
    def add(self, a, b):
        return a + b

    def greet(self):
        return f"æˆ‘æ˜¯{self.name}è®¡ç®—å™¨"

calc = Calculator("ç§‘å­¦")
print(calc.add(2, 3))   # 5
print(calc.greet())     # æˆ‘æ˜¯ç§‘å­¦è®¡ç®—å™¨
```

**ç±»æ–¹æ³•**

```python
class Date:
    def __init__(self, year, month, day):
        self.year = year
        self.month = month
        self.day = day

    # ç±»æ–¹æ³•ï¼šç¬¬ä¸€ä¸ªå‚æ•°æ˜¯clsï¼ˆç±»æœ¬èº«ï¼‰
    @classmethod
    def from_string(cls, date_string):
        """å·¥å‚æ–¹æ³•ï¼šä»å­—ç¬¦ä¸²åˆ›å»ºæ—¥æœŸ"""
        year, month, day = map(int, date_string.split('-'))
        return cls(year, month, day)  # è¿”å›ç±»çš„å®ä¾‹

    @classmethod
    def today(cls):
        """å·¥å‚æ–¹æ³•ï¼šåˆ›å»ºä»Šå¤©çš„æ—¥æœŸ"""
        import datetime
        now = datetime.date.today()
        return cls(now.year, now.month, now.day)

    # é¢å‘ç”¨æˆ·çš„å¯è¯»å­—ç¬¦ä¸²
    def __str__(self):
        return f"{self.year}-{self.month:02d}-{self.day:02d}"

# ä½¿ç”¨ç±»æ–¹æ³•
date1 = Date.from_string("2024-10-26")
date2 = Date.today()
print(date1)  # 2024-10-26
print(date2)  # å½“å‰æ—¥æœŸ
```

**é™æ€æ–¹æ³•**

```python
class MathUtils:
    # é™æ€æ–¹æ³•ï¼šä¸éœ€è¦selfæˆ–cls
    @staticmethod
    def is_even(number):
        """æ£€æŸ¥æ˜¯å¦æ˜¯å¶æ•°"""
        return number % 2 == 0

    @staticmethod
    def factorial(n):
        """è®¡ç®—é˜¶ä¹˜"""
        if n <= 1:
            return 1
        return n * MathUtils.factorial(n - 1)

# ä½¿ç”¨é™æ€æ–¹æ³•ï¼ˆæ— éœ€åˆ›å»ºå®ä¾‹ï¼‰
print(MathUtils.is_even(4))    # True
print(MathUtils.factorial(5))  # 120

# ä¹Ÿå¯ä»¥é€šè¿‡å®ä¾‹è°ƒç”¨
utils = MathUtils()
print(utils.is_even(3))        # False
```

**ä¸‰ç§æ–¹æ³•çš„å¯¹æ¯”**

| æ–¹æ³•ç±»å‹ | ç¬¬ä¸€ä¸ªå‚æ•° | è£…é¥°å™¨ | è®¿é—®æ–¹å¼ | ç”¨é€” |
|---------|-----------|--------|---------|------|
| å®ä¾‹æ–¹æ³• | `self` | æ—  | å®ä¾‹è°ƒç”¨ | æ“ä½œå®ä¾‹æ•°æ® |
| ç±»æ–¹æ³• | `cls` | `@classmethod` | ç±»/å®ä¾‹è°ƒç”¨ | å·¥å‚æ–¹æ³•ã€æ“ä½œç±»å±æ€§ |
| é™æ€æ–¹æ³• | æ—  | `@staticmethod` | ç±»/å®ä¾‹è°ƒç”¨ | å·¥å…·å‡½æ•°ã€ä¸éœ€è¦è®¿é—®ç±»/å®ä¾‹æ•°æ® |

å¯¹æ¯”Javaï¼š
```java
public class Example {
    private String name;

    // å®ä¾‹æ–¹æ³•
    public void instanceMethod() {
        System.out.println(this.name);
    }

    // é™æ€æ–¹æ³•
    public static void staticMethod() {
        System.out.println("é™æ€æ–¹æ³•");
    }
}
```

#### 1.5ã€ç§æœ‰å±æ€§ä¸æ–¹æ³•

Pythonæ²¡æœ‰çœŸæ­£çš„ç§æœ‰å±æ€§ï¼Œä½¿ç”¨å‘½åçº¦å®šæ¥è¡¨ç¤ºã€‚

**å‘½åçº¦å®š**

```python
class BankAccount:
    def __init__(self, owner, balance):
        self.owner = owner             # å…¬å¼€å±æ€§
        self._balance = balance        # å•ä¸‹åˆ’çº¿ï¼šå—ä¿æŠ¤ï¼ˆçº¦å®šï¼‰
        self.__pin = "1234"            # åŒä¸‹åˆ’çº¿ï¼šç§æœ‰ï¼ˆåç§°æ”¹å†™ï¼‰

    def get_balance(self):
        """å…¬å¼€æ–¹æ³•è®¿é—®ç§æœ‰æ•°æ®"""
        return self._balance

    def _internal_method(self):
        """å—ä¿æŠ¤æ–¹æ³•ï¼ˆçº¦å®šï¼‰"""
        return "å†…éƒ¨ä½¿ç”¨"

    def __private_method(self):
        """ç§æœ‰æ–¹æ³•"""
        return "çœŸæ­£çš„ç§æœ‰"

    def check_pin(self, pin):
        return self.__pin == pin

account = BankAccount("å¼ ä¸‰", 1000)

# å…¬å¼€å±æ€§
print(account.owner)         # å¼ ä¸‰

# å—ä¿æŠ¤å±æ€§ï¼ˆå¯ä»¥è®¿é—®ï¼Œä½†ä¸æ¨èï¼‰
print(account._balance)      # 1000

# ç§æœ‰å±æ€§ï¼ˆåç§°æ”¹å†™ä¸º _BankAccount__pinï¼‰
# print(account.__pin)       # AttributeError
print(account._BankAccount__pin)  # 1234ï¼ˆå¼ºåˆ¶è®¿é—®ï¼Œä¸æ¨èï¼‰

# é€šè¿‡å…¬å¼€æ–¹æ³•è®¿é—®
print(account.get_balance())  # 1000
print(account.check_pin("1234"))  # True
```

**æœ€ä½³å®è·µ**

```python
class User:
    def __init__(self, username, password):
        self.username = username      # å…¬å¼€
        self._email = None            # å—ä¿æŠ¤ï¼ˆå†…éƒ¨ä½¿ç”¨ï¼‰
        self.__password_hash = self._hash_password(password)  # ç§æœ‰

    def _hash_password(self, password):
        """å—ä¿æŠ¤æ–¹æ³•ï¼šå¯†ç å“ˆå¸Œ"""
        # ç®€åŒ–ç¤ºä¾‹
        return hash(password)

    def verify_password(self, password):
        """å…¬å¼€æ–¹æ³•ï¼šéªŒè¯å¯†ç """
        return self.__password_hash == self._hash_password(password)
```

å¯¹æ¯”Javaï¼š
```java
public class BankAccount {
    public String owner;        // å…¬å¼€
    protected double balance;   // å—ä¿æŠ¤
    private String pin;         // ç§æœ‰

    // ç§æœ‰æ–¹æ³•
    private void privateMethod() {
        // ...
    }
}
```

#### 1.6ã€å±æ€§è®¿é—®å™¨ï¼ˆpropertyè£…é¥°å™¨ï¼‰

ä½¿ç”¨`@property`åˆ›å»ºgetterå’Œsetterï¼Œè®©æ–¹æ³•åƒå±æ€§ä¸€æ ·è®¿é—®ã€‚

**åŸºæœ¬ç”¨æ³•**

```python
class Temperature:
    def __init__(self, celsius):
        self._celsius = celsius

    # getter
    @property
    def celsius(self):
        """æ‘„æ°æ¸©åº¦"""
        return self._celsius

    # setter
    @celsius.setter
    def celsius(self, value):
        if value < -273.15:
            raise ValueError("æ¸©åº¦ä¸èƒ½ä½äºç»å¯¹é›¶åº¦")
        self._celsius = value

    # åªè¯»å±æ€§ï¼ˆåªæœ‰getterï¼‰
    @property
    def fahrenheit(self):
        """åæ°æ¸©åº¦ï¼ˆåªè¯»ï¼‰"""
        return self._celsius * 9/5 + 32

# ä½¿ç”¨
temp = Temperature(25)
print(temp.celsius)      # 25ï¼ˆè°ƒç”¨getterï¼‰
print(temp.fahrenheit)   # 77.0

temp.celsius = 30        # è°ƒç”¨setter
print(temp.celsius)      # 30

# temp.fahrenheit = 100  # AttributeErrorï¼ˆåªè¯»ï¼‰
# temp.celsius = -300    # ValueErrorï¼ˆéªŒè¯å¤±è´¥ï¼‰
```

**å®é™…åº”ç”¨**

```python
class Person:
    def __init__(self, name, age):
        self._name = name
        self._age = age

    @property
    def name(self):
        """å§“åï¼ˆåªè¯»ï¼‰"""
        return self._name

    @property
    def age(self):
        """å¹´é¾„"""
        return self._age

    @age.setter
    def age(self, value):
        if not isinstance(value, int):
            raise TypeError("å¹´é¾„å¿…é¡»æ˜¯æ•´æ•°")
        if value < 0 or value > 150:
            raise ValueError("å¹´é¾„å¿…é¡»åœ¨0-150ä¹‹é—´")
        self._age = value

    @property
    def is_adult(self):
        """æ˜¯å¦æˆå¹´ï¼ˆè®¡ç®—å±æ€§ï¼‰"""
        return self._age >= 18

person = Person("å¼ ä¸‰", 25)
print(person.name)       # å¼ ä¸‰
print(person.age)        # 25
print(person.is_adult)   # True

person.age = 30          # ä½¿ç”¨setter
# person.name = "æå››"   # AttributeErrorï¼ˆåªè¯»ï¼‰
```

**åˆ é™¤å™¨ï¼ˆdeleterï¼‰**

```python
class Resource:
    def __init__(self, name):
        self._name = name
        self._loaded = False

    @property
    def name(self):
        return self._name

    @property
    def data(self):
        if not self._loaded:
            print("åŠ è½½æ•°æ®...")
            self._loaded = True
        return f"æ•°æ®: {self._name}"

    @data.deleter
    def data(self):
        """åˆ é™¤æ•°æ®"""
        print("æ¸…ç†æ•°æ®...")
        self._loaded = False

resource = Resource("æ–‡ä»¶.txt")
print(resource.data)     # åŠ è½½æ•°æ®... æ•°æ®: æ–‡ä»¶.txt
print(resource.data)     # æ•°æ®: æ–‡ä»¶.txtï¼ˆå·²åŠ è½½ï¼‰
del resource.data        # æ¸…ç†æ•°æ®...
print(resource.data)     # åŠ è½½æ•°æ®... æ•°æ®: æ–‡ä»¶.txt
```

å¯¹æ¯”Javaï¼š
```java
public class Temperature {
    private double celsius;

    // getter
    public double getCelsius() {
        return celsius;
    }

    // setter
    public void setCelsius(double value) {
        if (value < -273.15) {
            throw new IllegalArgumentException("æ¸©åº¦ä¸èƒ½ä½äºç»å¯¹é›¶åº¦");
        }
        this.celsius = value;
    }

    // è®¡ç®—å±æ€§
    public double getFahrenheit() {
        return celsius * 9/5 + 32;
    }
}

// ä½¿ç”¨
Temperature temp = new Temperature();
temp.setCelsius(25);          // å¿…é¡»è°ƒç”¨æ–¹æ³•
double c = temp.getCelsius(); // å¿…é¡»è°ƒç”¨æ–¹æ³•
```

**propertyçš„ä¼˜åŠ¿**

```python
# Pythonä½¿ç”¨@propertyï¼Œåƒè®¿é—®å±æ€§ä¸€æ ·
person.age = 30        # è‡ªç„¶çš„è¯­æ³•
temp = person.age

# Javaå¿…é¡»è°ƒç”¨æ–¹æ³•
person.setAge(30);     // æ–¹æ³•è°ƒç”¨
int temp = person.getAge();

# Pythonå¯ä»¥åœ¨ä¸ç ´åæ¥å£çš„æƒ…å†µä¸‹æ·»åŠ é€»è¾‘
class Circle:
    def __init__(self, radius):
        self.radius = radius  # æœ€åˆæ˜¯æ™®é€šå±æ€§

    # åæ¥æ·»åŠ éªŒè¯ï¼Œæ— éœ€ä¿®æ”¹è°ƒç”¨ä»£ç 
    @property
    def radius(self):
        return self._radius

    @radius.setter
    def radius(self, value):
        if value < 0:
            raise ValueError("åŠå¾„ä¸èƒ½ä¸ºè´Ÿæ•°")
        self._radius = value
```

**å°ç»“å¯¹æ¯”è¡¨**

| ç‰¹æ€§ | Java | Python |
|-----|------|--------|
| ç±»å®šä¹‰ | `class Name { }` | `class Name:` |
| æ„é€ å‡½æ•° | `public Name() { }` | `def __init__(self):` |
| å®ä¾‹å±æ€§ | `private Type field;` | `self.field = value` |
| ç±»å±æ€§ | `static Type field;` | ç±»çº§åˆ«å®šä¹‰ |
| ç§æœ‰æˆå‘˜ | `private` | `__name`ï¼ˆåç§°æ”¹å†™ï¼‰ |
| å—ä¿æŠ¤æˆå‘˜ | `protected` | `_name`ï¼ˆçº¦å®šï¼‰ |
| getter/setter | æ‰‹åŠ¨ç¼–å†™ | `@property` |
| ç±»æ–¹æ³• | `static` | `@classmethod` |
| é™æ€æ–¹æ³• | `static` | `@staticmethod` |

Pythonçš„ç±»è®¾è®¡æ›´ç®€æ´ï¼Œæ²¡æœ‰Javaé‚£ä¹ˆå¤šè®¿é—®ä¿®é¥°ç¬¦ï¼Œé€šè¿‡çº¦å®šå’Œè£…é¥°å™¨å®ç°ç±»ä¼¼åŠŸèƒ½ï¼

### 2ã€ç»§æ‰¿ä¸å¤šæ€

Pythonçš„ç»§æ‰¿æœºåˆ¶æ¯”Javaæ›´çµæ´»ï¼Œæ”¯æŒå¤šç»§æ‰¿ï¼Œå¹¶æœ‰ç‹¬ç‰¹çš„æ–¹æ³•è§£æé¡ºåºï¼ˆMROï¼‰ã€‚

#### 2.1ã€å•ç»§æ‰¿

**åŸºæœ¬è¯­æ³•**

```python
# çˆ¶ç±»ï¼ˆåŸºç±»ï¼‰
class Animal:
    def __init__(self, name):
        self.name = name

    def speak(self):
        return "å‘å‡ºå£°éŸ³"

    def info(self):
        return f"æˆ‘æ˜¯{self.name}"

# å­ç±»ï¼ˆæ´¾ç”Ÿç±»ï¼‰
class Dog(Animal):
    def __init__(self, name, breed):
        # è°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•°
        super().__init__(name)
        self.breed = breed

    # é‡å†™çˆ¶ç±»æ–¹æ³•
    def speak(self):
        return "æ±ªæ±ªæ±ªï¼"

    # æ–°å¢æ–¹æ³•
    def fetch(self):
        return f"{self.name}å»æ¡çƒäº†"

# ä½¿ç”¨
dog = Dog("æ—ºè´¢", "é‡‘æ¯›")
print(dog.info())     # æˆ‘æ˜¯æ—ºè´¢ï¼ˆç»§æ‰¿è‡ªAnimalï¼‰
print(dog.speak())    # æ±ªæ±ªæ±ªï¼ï¼ˆé‡å†™äº†ï¼‰
print(dog.fetch())    # æ—ºè´¢å»æ¡çƒäº†ï¼ˆæ–°æ–¹æ³•ï¼‰
```

å¯¹æ¯”Javaï¼š
```java
// Javaçš„ç»§æ‰¿
public class Animal {
    protected String name;

    public Animal(String name) {
        this.name = name;
    }

    public String speak() {
        return "å‘å‡ºå£°éŸ³";
    }
}

public class Dog extends Animal {
    private String breed;

    public Dog(String name, String breed) {
        super(name);  // è°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•°
        this.breed = breed;
    }

    @Override
    public String speak() {
        return "æ±ªæ±ªæ±ªï¼";
    }
}
```

**isinstance()å’Œissubclass()**

```python
class Animal:
    pass

class Dog(Animal):
    pass

dog = Dog()

# isinstance: æ£€æŸ¥å®ä¾‹ç±»å‹
print(isinstance(dog, Dog))     # True
print(isinstance(dog, Animal))  # Trueï¼ˆå­ç±»å®ä¾‹ä¹Ÿæ˜¯çˆ¶ç±»å®ä¾‹ï¼‰
print(isinstance(dog, object))  # Trueï¼ˆæ‰€æœ‰ç±»éƒ½ç»§æ‰¿è‡ªobjectï¼‰

# issubclass: æ£€æŸ¥ç»§æ‰¿å…³ç³»
print(issubclass(Dog, Animal))   # True
print(issubclass(Animal, Dog))   # False
print(issubclass(Dog, object))   # True
```

#### 2.2ã€å¤šç»§æ‰¿ä¸MROï¼ˆæ–¹æ³•è§£æé¡ºåºï¼‰

Pythonæ”¯æŒå¤šç»§æ‰¿ï¼Œä¸€ä¸ªç±»å¯ä»¥ç»§æ‰¿å¤šä¸ªçˆ¶ç±»ã€‚

**åŸºæœ¬å¤šç»§æ‰¿**

```python
class Flyable:
    def fly(self):
        return "èƒ½é£"

class Swimmable:
    def swim(self):
        return "èƒ½æ¸¸æ³³"

class Duck(Flyable, Swimmable):
    def quack(self):
        return "å˜å˜å˜"

# ä½¿ç”¨
duck = Duck()
print(duck.fly())      # èƒ½é£
print(duck.swim())     # èƒ½æ¸¸æ³³
print(duck.quack())    # å˜å˜å˜
```

**MROï¼ˆMethod Resolution Orderï¼‰**

å½“å¤šä¸ªçˆ¶ç±»æœ‰åŒåæ–¹æ³•æ—¶ï¼ŒPythonä½¿ç”¨C3çº¿æ€§åŒ–ç®—æ³•ç¡®å®šè°ƒç”¨é¡ºåºã€‚

```python
class A:
    def method(self):
        return "Açš„æ–¹æ³•"

class B(A):
    def method(self):
        return "Bçš„æ–¹æ³•"

class C(A):
    def method(self):
        return "Cçš„æ–¹æ³•"

class D(B, C):
    pass

# æŸ¥çœ‹MRO
print(D.__mro__)
# (<class 'D'>, <class 'B'>, <class 'C'>, <class 'A'>, <class 'object'>)

d = D()
print(d.method())  # Bçš„æ–¹æ³•ï¼ˆæŒ‰MROé¡ºåºï¼šD -> B -> C -> Aï¼‰
```

**è±å½¢ç»§æ‰¿é—®é¢˜**

å…¸å‹çš„è±å½¢ç»§æ‰¿ç»“æ„ï¼š
```
     Person
    /      \
Student   Teacher
    \      /
TeachingAssistant
```

ç¤ºä¾‹ä»£ç ï¼š
```python
class Person:
    def __init__(self, name, **kwargs):
        super().__init__(**kwargs)  # ä¸ºæœªæ¥å¤šç»§æ‰¿ç•™æ¥å£
        self.name = name
        print(f"Person.__init__({name})")

class Student(Person):
    def __init__(self, student_id, **kwargs):
        super().__init__(**kwargs)
        self.student_id = student_id
        print(f"Student.__init__({student_id})")

class Teacher(Person):
    def __init__(self, subject, **kwargs):
        super().__init__(**kwargs)
        self.subject = subject
        print(f"Teacher.__init__({subject})")

class TeachingAssistant(Student, Teacher):
    def __init__(self, name, student_id, subject):
        super().__init__(name=name, student_id=student_id, subject=subject)

# åˆ›å»ºå®ä¾‹
ta = TeachingAssistant("å¼ ä¸‰", "S001", "Python")
print("\nMRO:", TeachingAssistant.__mro__)
print(f"\nta.name={ta.name}, ta.student_id={ta.student_id}, ta.subject={ta.subject}")

# è¾“å‡º
Teacher.__init__(Python)
Student.__init__(S001)
Person.__init__(å¼ ä¸‰)

MRO: (<class '__main__.TeachingAssistant'>, <class '__main__.Student'>, <class '__main__.Teacher'>, <class '__main__.Person'>, <class 'object'>)

ta.name=å¼ ä¸‰, ta.student_id=S001, ta.subject=Python

# æ³¨æ„ï¼šè™½ç„¶ MRO é¡ºåºæ˜¯ Student åœ¨ Teacher å‰ï¼Œä½†å› ä¸º Student.__init__ è°ƒç”¨äº† super()ï¼Œè€Œ super() åœ¨ Student ä¸­æŒ‡å‘ Teacherï¼ˆæ ¹æ® MROï¼‰ï¼Œæ‰€ä»¥å®é™…åˆå§‹åŒ–é¡ºåºæ˜¯ Teacher â†’ Student â†’ Personï¼ˆä»æœ€å³çˆ¶ç±»å‘å·¦å›æº¯ï¼‰ã€‚
```

å¯¹æ¯”Javaï¼š
```java
// Javaä¸æ”¯æŒå¤šç»§æ‰¿ï¼Œä½¿ç”¨æ¥å£æ›¿ä»£
public interface Flyable {
    void fly();
}

public interface Swimmable {
    void swim();
}

public class Duck implements Flyable, Swimmable {
    public void fly() {
        System.out.println("èƒ½é£");
    }

    public void swim() {
        System.out.println("èƒ½æ¸¸æ³³");
    }
}
```

#### 2.3ã€super()å‡½æ•°

`super()`ç”¨äºè°ƒç”¨çˆ¶ç±»çš„æ–¹æ³•ï¼Œåœ¨å¤šç»§æ‰¿ä¸­ç‰¹åˆ«æœ‰ç”¨ã€‚

**åŸºæœ¬ç”¨æ³•**

```python
class Rectangle:
    def __init__(self, width, height):
        self.width = width
        self.height = height

    def area(self):
        return self.width * self.height

class Square(Rectangle):
    def __init__(self, side):
        # è°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•°
        super().__init__(side, side)

    def perimeter(self):
        return 4 * self.width

square = Square(5)
print(square.area())       # 25
print(square.perimeter())  # 20
```

**å¤šç»§æ‰¿ä¸­çš„super()**

```python
class Base:
    def __init__(self):
        print("Baseåˆå§‹åŒ–")

class A(Base):
    def __init__(self):
        print("Aåˆå§‹åŒ–å¼€å§‹")
        super().__init__()
        print("Aåˆå§‹åŒ–ç»“æŸ")

class B(Base):
    def __init__(self):
        print("Båˆå§‹åŒ–å¼€å§‹")
        super().__init__()
        print("Båˆå§‹åŒ–ç»“æŸ")

class C(A, B):
    def __init__(self):
        print("Cåˆå§‹åŒ–å¼€å§‹")
        super().__init__()  # æŒ‰MROè°ƒç”¨ï¼šC -> A -> B -> Base
        print("Cåˆå§‹åŒ–ç»“æŸ")

c = C()
# è¾“å‡ºï¼š
# Cåˆå§‹åŒ–å¼€å§‹
# Aåˆå§‹åŒ–å¼€å§‹
# Båˆå§‹åŒ–å¼€å§‹
# Baseåˆå§‹åŒ–
# Båˆå§‹åŒ–ç»“æŸ
# Aåˆå§‹åŒ–ç»“æŸ
# Cåˆå§‹åŒ–ç»“æŸ
```

**æ˜¾å¼è°ƒç”¨çˆ¶ç±»æ–¹æ³•**

```python
class Animal:
    def speak(self):
        return "å‘å‡ºå£°éŸ³"

class Dog(Animal):
    def speak(self):
        # è°ƒç”¨çˆ¶ç±»æ–¹æ³•
        parent_sound = super().speak()
        return f"{parent_sound} -> æ±ªæ±ªæ±ªï¼"

    def speak_like_parent(self):
        # ä¹Ÿå¯ä»¥ç›´æ¥é€šè¿‡ç±»åè°ƒç”¨
        return Animal.speak(self)

dog = Dog()
print(dog.speak())              # å‘å‡ºå£°éŸ³ -> æ±ªæ±ªæ±ªï¼
print(dog.speak_like_parent())  # å‘å‡ºå£°éŸ³
```

#### 2.4ã€æ–¹æ³•é‡å†™

å­ç±»å¯ä»¥é‡å†™ï¼ˆè¦†ç›–ï¼‰çˆ¶ç±»çš„æ–¹æ³•ã€‚

**ç®€å•é‡å†™**

```python
class Employee:
    def __init__(self, name, salary):
        self.name = name
        self.salary = salary

    def get_bonus(self):
        return self.salary * 0.1  # åŸºæœ¬å¥–é‡‘10%

class Manager(Employee):
    def __init__(self, name, salary, team_size):
        super().__init__(name, salary)
        self.team_size = team_size

    # é‡å†™get_bonusæ–¹æ³•
    def get_bonus(self):
        base_bonus = super().get_bonus()  # è·å–åŸºæœ¬å¥–é‡‘
        team_bonus = self.team_size * 1000  # å›¢é˜Ÿå¥–é‡‘
        return base_bonus + team_bonus

# ä½¿ç”¨
employee = Employee("å¼ ä¸‰", 10000)
manager = Manager("æå››", 15000, 5)

print(employee.get_bonus())  # 1000.0
print(manager.get_bonus())   # 6500.0ï¼ˆ1500 + 5000ï¼‰
```

**é‡å†™ç‰¹æ®Šæ–¹æ³•**

```python
class Person:
    def __init__(self, name, age):
        self.name = name
        self.age = age

    def __str__(self):
        return f"{self.name}ï¼Œ{self.age}å²"

    def __repr__(self):
        return f"Person('{self.name}', {self.age})"

class Student(Person):
    def __init__(self, name, age, grade):
        super().__init__(name, age)
        self.grade = grade

    # é‡å†™__str__
    def __str__(self):
        parent_str = super().__str__()
        return f"{parent_str}ï¼Œ{self.grade}å¹´çº§"

    # é‡å†™__repr__
    def __repr__(self):
        return f"Student('{self.name}', {self.age}, {self.grade})"

student = Student("å¼ ä¸‰", 18, 12)
print(str(student))   # å¼ ä¸‰ï¼Œ18å²ï¼Œ12å¹´çº§
print(repr(student))  # Student('å¼ ä¸‰', 18, 12)
```

#### 2.5ã€å¤šæ€æ€§å®ç°

Pythonçš„å¤šæ€æ˜¯"é¸­å­ç±»å‹"ï¼ˆDuck Typingï¼‰ï¼šå¦‚æœå¯¹è±¡è¡Œä¸ºåƒé¸­å­ï¼Œå°±å¯ä»¥å½“é¸­å­ç”¨ã€‚

**åŸºäºç»§æ‰¿çš„å¤šæ€**

```python
class Shape:
    def area(self):
        raise NotImplementedError("å­ç±»å¿…é¡»å®ç°areaæ–¹æ³•")

    def perimeter(self):
        raise NotImplementedError("å­ç±»å¿…é¡»å®ç°perimeteræ–¹æ³•")

class Rectangle(Shape):
    def __init__(self, width, height):
        self.width = width
        self.height = height

    def area(self):
        return self.width * self.height

    def perimeter(self):
        return 2 * (self.width + self.height)

class Circle(Shape):
    def __init__(self, radius):
        self.radius = radius

    def area(self):
        return 3.14159 * self.radius ** 2

    def perimeter(self):
        return 2 * 3.14159 * self.radius

# å¤šæ€å‡½æ•°
def print_shape_info(shape):
    """æ¥å—ä»»ä½•Shapeå­ç±»"""
    print(f"é¢ç§¯: {shape.area():.2f}")
    print(f"å‘¨é•¿: {shape.perimeter():.2f}")

# ä½¿ç”¨
rectangle = Rectangle(5, 3)
circle = Circle(4)

print_shape_info(rectangle)
print_shape_info(circle)
```

**é¸­å­ç±»å‹ï¼ˆDuck Typingï¼‰**

```python
# ä¸éœ€è¦ç»§æ‰¿å…³ç³»ï¼Œåªè¦æœ‰ç›¸åŒçš„æ–¹æ³•å°±è¡Œ
class Dog:
    def speak(self):
        return "æ±ªæ±ªæ±ª"

class Cat:
    def speak(self):
        return "å–µå–µå–µ"

class Duck:
    def speak(self):
        return "å˜å˜å˜"

# å¤šæ€å‡½æ•°ï¼ˆä¸æ£€æŸ¥ç±»å‹ï¼‰
def make_animal_speak(animal):
    """åªè¦æœ‰speakæ–¹æ³•å°±è¡Œ"""
    print(animal.speak())

# ä½¿ç”¨
dog = Dog()
cat = Cat()
duck = Duck()

make_animal_speak(dog)   # æ±ªæ±ªæ±ª
make_animal_speak(cat)   # å–µå–µå–µ
make_animal_speak(duck)  # å˜å˜å˜

# ç”šè‡³å¯ä»¥ä¼ å…¥ä»»ä½•æœ‰speakæ–¹æ³•çš„å¯¹è±¡
class Robot:
    def speak(self):
        return "å“”å“”å“”"

make_animal_speak(Robot())  # å“”å“”å“”
```

å¯¹æ¯”Javaï¼š
```java
// Javaéœ€è¦æ˜ç¡®çš„ç»§æ‰¿æˆ–æ¥å£å…³ç³»
public interface Animal {
    String speak();
}

public class Dog implements Animal {
    public String speak() {
        return "æ±ªæ±ªæ±ª";
    }
}

public void makeAnimalSpeak(Animal animal) {
    // å¿…é¡»æ˜¯Animalç±»å‹
    System.out.println(animal.speak());
}
```

#### 2.6ã€æŠ½è±¡åŸºç±»ï¼ˆABCæ¨¡å—ï¼‰

å¦‚æœæƒ³åœ¨Pythonä¸­å¼ºåˆ¶å­ç±»å®ç°æŸäº›æ–¹æ³•ï¼Œå¯ä»¥ä½¿ç”¨æŠ½è±¡åŸºç±»ã€‚

**åŸºæœ¬ç”¨æ³•**

```python
from abc import ABC, abstractmethod

# æŠ½è±¡åŸºç±»
class Animal(ABC):
    def __init__(self, name):
        self.name = name

    @abstractmethod
    def speak(self):
        """å­ç±»å¿…é¡»å®ç°"""
        pass

    @abstractmethod
    def move(self):
        """å­ç±»å¿…é¡»å®ç°"""
        pass

    def info(self):
        """å…·ä½“æ–¹æ³•ï¼Œå­ç±»å¯ä»¥ç›´æ¥ä½¿ç”¨"""
        return f"æˆ‘æ˜¯{self.name}"

# å…·ä½“å®ç°
class Dog(Animal):
    def speak(self):
        return "æ±ªæ±ªæ±ª"

    def move(self):
        return "è·‘åŠ¨"

# ä½¿ç”¨
# animal = Animal("åŠ¨ç‰©")  # TypeError: ä¸èƒ½å®ä¾‹åŒ–æŠ½è±¡ç±»
dog = Dog("æ—ºè´¢")
print(dog.speak())  # æ±ªæ±ªæ±ª
print(dog.move())   # è·‘åŠ¨
print(dog.info())   # æˆ‘æ˜¯æ—ºè´¢
```

**æŠ½è±¡å±æ€§**

```python
from abc import ABC, abstractmethod

class Shape(ABC):
    @property
    @abstractmethod
    def area(self):
        """æŠ½è±¡å±æ€§"""
        pass

    @property
    @abstractmethod
    def perimeter(self):
        """æŠ½è±¡å±æ€§"""
        pass

class Rectangle(Shape):
    def __init__(self, width, height):
        self._width = width
        self._height = height

    @property
    def area(self):
        return self._width * self._height

    @property
    def perimeter(self):
        return 2 * (self._width + self._height)

rect = Rectangle(5, 3)
print(rect.area)       # 15
print(rect.perimeter)  # 16
```

**å®é™…åº”ç”¨**

```python
from abc import ABC, abstractmethod

class DataProcessor(ABC):
    """æ•°æ®å¤„ç†æŠ½è±¡åŸºç±»"""

    @abstractmethod
    def load_data(self, source):
        """åŠ è½½æ•°æ®"""
        pass

    @abstractmethod
    def process_data(self, data):
        """å¤„ç†æ•°æ®"""
        pass

    @abstractmethod
    def save_data(self, data, destination):
        """ä¿å­˜æ•°æ®"""
        pass

    def run(self, source, destination):
        """æ¨¡æ¿æ–¹æ³•ï¼ˆå…·ä½“å®ç°ï¼‰"""
        print("å¼€å§‹å¤„ç†...")
        data = self.load_data(source)
        processed = self.process_data(data)
        self.save_data(processed, destination)
        print("å¤„ç†å®Œæˆ!")

class CSVProcessor(DataProcessor):
    def load_data(self, source):
        print(f"ä»CSVåŠ è½½: {source}")
        return ["æ•°æ®1", "æ•°æ®2", "æ•°æ®3"]

    def process_data(self, data):
        print("å¤„ç†CSVæ•°æ®...")
        return [item.upper() for item in data]

    def save_data(self, data, destination):
        print(f"ä¿å­˜åˆ°CSV: {destination}")
        print(f"æ•°æ®: {data}")

# ä½¿ç”¨
processor = CSVProcessor()
processor.run("input.csv", "output.csv")
```

å¯¹æ¯”Javaï¼š
```java
// Javaçš„æŠ½è±¡ç±»
public abstract class Animal {
    private String name;

    public Animal(String name) {
        this.name = name;
    }

    // æŠ½è±¡æ–¹æ³•
    public abstract String speak();

    // å…·ä½“æ–¹æ³•
    public String info() {
        return "æˆ‘æ˜¯" + name;
    }
}

public class Dog extends Animal {
    public Dog(String name) {
        super(name);
    }

    @Override
    public String speak() {
        return "æ±ªæ±ªæ±ª";
    }
}
```

**å°ç»“å¯¹æ¯”è¡¨**

| ç‰¹æ€§ | Java | Python |
|-----|------|--------|
| å•ç»§æ‰¿ | `extends` | æ‹¬å·è¯­æ³• `(Parent)` |
| å¤šç»§æ‰¿ | ä¸æ”¯æŒï¼ˆç”¨æ¥å£ï¼‰ | æ”¯æŒå¤šç»§æ‰¿ |
| è°ƒç”¨çˆ¶ç±» | `super.method()` | `super().method()` |
| æ–¹æ³•é‡å†™ | `@Override`æ³¨è§£ | ç›´æ¥é‡å†™ï¼ˆæ— éœ€æ³¨è§£ï¼‰ |
| æŠ½è±¡ç±» | `abstract class` | `ABC`+`@abstractmethod` |
| å¤šæ€ | åŸºäºç±»å‹ | é¸­å­ç±»å‹ |
| MRO | ä¸é€‚ç”¨ | C3çº¿æ€§åŒ–ç®—æ³• |

### 3ã€ç‰¹æ®Šæ–¹æ³•ï¼ˆé­”æœ¯æ–¹æ³•ï¼‰

Pythonçš„ç‰¹æ®Šæ–¹æ³•ï¼ˆä¹Ÿå«é­”æœ¯æ–¹æ³•ï¼‰æ˜¯ä»¥åŒä¸‹åˆ’çº¿å¼€å¤´å’Œç»“å°¾çš„æ–¹æ³•ï¼Œå®ƒä»¬è®©ä½ çš„ç±»èƒ½å¤Ÿä½¿ç”¨Pythonçš„å†…ç½®è¯­æ³•å’Œè¿ç®—ç¬¦ã€‚è¿™æ˜¯Pythoné¢å‘å¯¹è±¡ç¼–ç¨‹çš„ç²¾é«“ä¹‹ä¸€ã€‚

#### 3.1ã€å¯¹è±¡è¡¨ç¤ºï¼š`__str__`å’Œ`__repr__`

è¿™ä¸¤ä¸ªæ–¹æ³•æ§åˆ¶å¯¹è±¡å¦‚ä½•è¢«è½¬æ¢ä¸ºå­—ç¬¦ä¸²ã€‚

**åŸºæœ¬åŒºåˆ«**

```python
class Person:
    def __init__(self, name, age):
        self.name = name
        self.age = age

    def __str__(self):
        """ç”¨æˆ·å‹å¥½çš„å­—ç¬¦ä¸²è¡¨ç¤ºï¼ˆç»™äººçœ‹çš„ï¼‰"""
        return f"{self.name}ï¼Œ{self.age}å²"

    def __repr__(self):
        """å¼€å‘è€…å‹å¥½çš„å­—ç¬¦ä¸²è¡¨ç¤ºï¼ˆç»™ç¨‹åºå‘˜çœ‹çš„ï¼‰"""
        return f"Person('{self.name}', {self.age})"

person = Person("å¼ ä¸‰", 25)

# __str__: ç»™æœ€ç»ˆç”¨æˆ·çœ‹çš„
print(str(person))   # å¼ ä¸‰ï¼Œ25å²
print(person)        # å¼ ä¸‰ï¼Œ25å²ï¼ˆprintä¼šè°ƒç”¨__str__ï¼‰

# __repr__: ç»™å¼€å‘è€…çœ‹çš„ï¼Œåº”è¯¥æ˜¯åˆæ³•çš„Pythonè¡¨è¾¾å¼
print(repr(person))  # Person('å¼ ä¸‰', 25)
print([person])      # [Person('å¼ ä¸‰', 25)]ï¼ˆå®¹å™¨ä¼šè°ƒç”¨__repr__ï¼‰

# äº¤äº’å¼ç¯å¢ƒä¸­
>>> person
Person('å¼ ä¸‰', 25)  # æ˜¾ç¤º__repr__
```

**æœ€ä½³å®è·µ**

```python
class Point:
    def __init__(self, x, y):
        self.x = x
        self.y = y

    def __repr__(self):
        """å§‹ç»ˆå®ç°__repr__"""
        return f"Point({self.x}, {self.y})"

    def __str__(self):
        """å¯é€‰å®ç°__str__ï¼Œå¦‚æœä¸å®ç°ä¼šä½¿ç”¨__repr__"""
        return f"({self.x}, {self.y})"

# åªå®ç°__repr__çš„ç±»
class Vector:
    def __init__(self, x, y):
        self.x = x
        self.y = y

    def __repr__(self):
        return f"Vector({self.x}, {self.y})"
    # æ²¡æœ‰__str__ï¼Œprintæ—¶ä¼šä½¿ç”¨__repr__

point = Point(3, 4)
vector = Vector(1, 2)

print(point)    # (3, 4) - ä½¿ç”¨__str__
print(vector)   # Vector(1, 2) - ä½¿ç”¨__repr__
print(repr(point))  # Point(3, 4)
```

å¯¹æ¯”Javaï¼š

```java
// Javaä½¿ç”¨toString()
public class Person {
    private String name;
    private int age;

    @Override
    public String toString() {
        return name + "ï¼Œ" + age + "å²";
    }
}

// ä½¿ç”¨
Person person = new Person("å¼ ä¸‰", 25);
System.out.println(person);  // å¼ ä¸‰ï¼Œ25å²
```

#### 3.2ã€æ¯”è¾ƒæ–¹æ³•

Pythonæä¾›äº†ä¸°å¯Œçš„æ¯”è¾ƒè¿ç®—ç¬¦é‡è½½æ–¹æ³•ã€‚

**åŸºæœ¬æ¯”è¾ƒæ–¹æ³•**

```python
class Student:
    def __init__(self, name, score):
        self.name = name
        self.score = score

    def __eq__(self, other):
        """ç›¸ç­‰æ¯”è¾ƒ =="""
        if not isinstance(other, Student):
            return False
        return self.score == other.score

    def __lt__(self, other):
        """å°äºæ¯”è¾ƒ <"""
        if not isinstance(other, Student):
            return NotImplemented
        return self.score < other.score

    def __le__(self, other):
        """å°äºç­‰äº <="""
        return self.score <= other.score

    def __gt__(self, other):
        """å¤§äº >"""
        return self.score > other.score

    def __ge__(self, other):
        """å¤§äºç­‰äº >="""
        return self.score >= other.score

    def __ne__(self, other):
        """ä¸ç­‰äº !="""
        return not self.__eq__(other)

    def __repr__(self):
        return f"Student('{self.name}', {self.score})"

# ä½¿ç”¨
student1 = Student("å¼ ä¸‰", 85)
student2 = Student("æå››", 92)
student3 = Student("ç‹äº”", 85)

print(student1 == student3)  # Trueï¼ˆæˆç»©ç›¸åŒï¼‰
print(student1 < student2)   # True
print(student1 <= student3)  # True
print(student2 > student1)   # True

# å¯ä»¥ç”¨äºæ’åº
students = [student2, student1, student3]
sorted_students = sorted(students)
print(sorted_students)  # [Student('å¼ ä¸‰', 85), Student('ç‹äº”', 85), Student('æå››', 92)]
```

**ä½¿ç”¨functoolsç®€åŒ–**

```python
from functools import total_ordering

@total_ordering
class Student:
    """åªéœ€å®ç°__eq__å’Œä¸€ä¸ªæ¯”è¾ƒæ–¹æ³•ï¼Œè‡ªåŠ¨ç”Ÿæˆå…¶ä»–"""
    def __init__(self, name, score):
        self.name = name
        self.score = score

    def __eq__(self, other):
        if not isinstance(other, Student):
            return NotImplemented
        return self.score == other.score

    def __lt__(self, other):
        if not isinstance(other, Student):
            return NotImplemented
        return self.score < other.score

    def __repr__(self):
        return f"Student('{self.name}', {self.score})"

# è‡ªåŠ¨æ‹¥æœ‰æ‰€æœ‰æ¯”è¾ƒæ–¹æ³•
student1 = Student("å¼ ä¸‰", 85)
student2 = Student("æå››", 92)

print(student1 <= student2)  # Trueï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰
print(student1 >= student2)  # Falseï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰
```

#### 3.3ã€å®¹å™¨æ–¹æ³•

è®©ä½ çš„ç±»åƒåˆ—è¡¨ã€å­—å…¸ä¸€æ ·ä½¿ç”¨ã€‚

**åŸºæœ¬å®¹å™¨åè®®**

```python
class MyList:
    """è‡ªå®šä¹‰åˆ—è¡¨ç±»"""
    def __init__(self, items=None):
        self._items = items or []

    def __len__(self):
        """len()å‡½æ•°è°ƒç”¨"""
        return len(self._items)

    def __getitem__(self, index):
        """ç´¢å¼•è®¿é—® obj[index]"""
        return self._items[index]

    def __setitem__(self, index, value):
        """ç´¢å¼•èµ‹å€¼ obj[index] = value"""
        self._items[index] = value

    def __delitem__(self, index):
        """åˆ é™¤ del obj[index]"""
        del self._items[index]

    def __contains__(self, item):
        """æˆå‘˜æ£€æŸ¥ item in obj"""
        return item in self._items

    def __iter__(self):
        """è¿­ä»£ for item in obj"""
        return iter(self._items)

    def __repr__(self):
        return f"MyList({self._items})"

# ä½¿ç”¨
my_list = MyList([1, 2, 3, 4, 5])

print(len(my_list))        # 5
print(my_list[0])          # 1
my_list[0] = 10
print(my_list[0])          # 10
print(3 in my_list)        # True

for item in my_list:
    print(item, end=" ")   # 10 2 3 4 5

del my_list[0]
print(my_list)             # MyList([2, 3, 4, 5])
```

**å­—å…¸å¼è®¿é—®**

```python
class Configuration:
    """é…ç½®ç±»ï¼Œæ”¯æŒå­—å…¸å¼è®¿é—®"""
    def __init__(self):
        self._config = {}

    def __getitem__(self, key):
        """config['key']"""
        return self._config[key]

    def __setitem__(self, key, value):
        """config['key'] = value"""
        self._config[key] = value

    def __delitem__(self, key):
        """del config['key']"""
        del self._config[key]

    def __contains__(self, key):
        """'key' in config"""
        return key in self._config

    def __len__(self):
        return len(self._config)

    def __repr__(self):
        return f"Configuration({self._config})"

# ä½¿ç”¨
config = Configuration()
config['host'] = 'localhost'
config['port'] = 8080

print(config['host'])      # localhost
print('host' in config)    # True
print(len(config))         # 2
```

**åˆ‡ç‰‡æ”¯æŒ**

```python
class SmartList:
    def __init__(self, items):
        self._items = list(items)

    def __getitem__(self, key):
        """æ”¯æŒç´¢å¼•å’Œåˆ‡ç‰‡"""
        if isinstance(key, slice):
            # åˆ‡ç‰‡æ“ä½œ
            return SmartList(self._items[key])
        else:
            # å•ä¸ªç´¢å¼•
            return self._items[key]

    def __len__(self):
        return len(self._items)

    def __repr__(self):
        return f"SmartList({self._items})"

# ä½¿ç”¨
smart = SmartList([1, 2, 3, 4, 5])
print(smart[0])        # 1
print(smart[1:3])      # SmartList([2, 3])
print(smart[::2])      # SmartList([1, 3, 5])
```

#### 3.4ã€å¯è°ƒç”¨å¯¹è±¡ï¼š`__call__`

è®©å¯¹è±¡å¯ä»¥åƒå‡½æ•°ä¸€æ ·è°ƒç”¨ã€‚

**åŸºæœ¬ç”¨æ³•**

```python
class Multiplier:
    """ä¹˜æ³•å™¨ï¼Œåƒå‡½æ•°ä¸€æ ·ä½¿ç”¨"""
    def __init__(self, factor):
        self.factor = factor

    def __call__(self, x):
        """obj(x) ä¼šè°ƒç”¨è¿™ä¸ªæ–¹æ³•"""
        return x * self.factor

# ä½¿ç”¨
double = Multiplier(2)
triple = Multiplier(3)

print(double(5))    # 10
print(triple(5))    # 15

# æ£€æŸ¥æ˜¯å¦å¯è°ƒç”¨
print(callable(double))  # True
```

**å®é™…åº”ç”¨ï¼šç¼“å­˜è£…é¥°å™¨**

```python
class Memoize:
    """ç¼“å­˜å‡½æ•°ç»“æœ"""
    def __init__(self, func):
        self.func = func
        self.cache = {}

    def __call__(self, *args):
        if args not in self.cache:
            print(f"è®¡ç®— {self.func.__name__}{args}")
            self.cache[args] = self.func(*args)
        else:
            print(f"ä»ç¼“å­˜è·å– {args}")
        return self.cache[args]

@Memoize
def fibonacci(n):
    if n < 2:
        return n
    return fibonacci(n-1) + fibonacci(n-2)

# ä½¿ç”¨
print(fibonacci(5))
# è®¡ç®— fibonacci(5)
# è®¡ç®— fibonacci(4)
# ...
# 21

print(fibonacci(5))  # ä»ç¼“å­˜è·å– (5)
```

**æœ‰çŠ¶æ€çš„å‡½æ•°**

```python
class Counter:
    """è®¡æ•°å™¨å‡½æ•°"""
    def __init__(self):
        self.count = 0

    def __call__(self):
        self.count += 1
        return self.count

counter = Counter()
print(counter())  # 1
print(counter())  # 2
print(counter())  # 3
print(counter.count)  # 3
```

#### 3.5ã€ä¸Šä¸‹æ–‡ç®¡ç†å™¨ç®€ä»‹

> **æç¤º**ï¼šä¸Šä¸‹æ–‡ç®¡ç†å™¨çš„å®Œæ•´ç”¨æ³•ï¼ˆåŒ…æ‹¬`@contextmanager`è£…é¥°å™¨ã€`ExitStack`ç­‰ï¼‰å°†åœ¨ç¬¬8ç« "é«˜çº§ç‰¹æ€§"ä¸­è¯¦ç»†è®²è§£ã€‚

**åŸºæœ¬æ¦‚å¿µ**

ä¸Šä¸‹æ–‡ç®¡ç†å™¨é€šè¿‡å®ç°`__enter__`å’Œ`__exit__`æ–¹æ³•ï¼Œè®©å¯¹è±¡èƒ½å¤Ÿé…åˆ`with`è¯­å¥è‡ªåŠ¨ç®¡ç†èµ„æºã€‚

```python
class SimpleFileManager:
    """ç®€å•æ–‡ä»¶ç®¡ç†å™¨ç¤ºä¾‹"""
    def __init__(self, filename, mode):
        self.filename = filename
        self.mode = mode
        self.file = None

    def __enter__(self):
        print(f"æ‰“å¼€æ–‡ä»¶: {self.filename}")
        self.file = open(self.filename, self.mode)
        return self.file

    def __exit__(self, exc_type, exc_value, traceback):
        if self.file:
            print(f"å…³é—­æ–‡ä»¶: {self.filename}")
            self.file.close()

        # è¿”å›Falseè¡¨ç¤ºä¸æŠ‘åˆ¶å¼‚å¸¸
        return False

# ä½¿ç”¨withè¯­å¥è‡ªåŠ¨ç®¡ç†èµ„æº
with SimpleFileManager('test.txt', 'w') as f:
    f.write('Hello, World!')
# æ–‡ä»¶è‡ªåŠ¨å…³é—­
```

**æ ¸å¿ƒåè®®**
- `__enter__(self)`ï¼šè¿›å…¥`with`å—æ—¶è°ƒç”¨ï¼Œè¿”å›è¦èµ‹å€¼ç»™`as`å˜é‡çš„å¯¹è±¡
- `__exit__(self, exc_type, exc_value, traceback)`ï¼šé€€å‡º`with`å—æ—¶è°ƒç”¨ï¼Œå¤„ç†æ¸…ç†å·¥ä½œ


---

### 4ã€ç‰¹æ®Šæ–¹æ³•æ€»ç»“

ä¸‹é¢æ˜¯ä¸€ä¸ªå®ç”¨çš„ç‰¹æ®Šæ–¹æ³•é€ŸæŸ¥è¡¨ï¼š

| æ–¹æ³• | è§¦å‘æ—¶æœº | ç¤ºä¾‹ |
|-----|----------|------|
| `__str__` | `print(obj)` | å¯¹è±¡çš„å¯è¯»å­—ç¬¦ä¸²è¡¨ç¤º |
| `__repr__` | `repr(obj)` | å¯¹è±¡çš„æ˜ç¡®è¡¨ç¤º |
| `__len__` | `len(obj)` | è¿”å›å¯¹è±¡é•¿åº¦ |
| `__getitem__` | `obj[key]` | ç´¢å¼•è®¿é—® |
| `__setitem__` | `obj[key] = value` | ç´¢å¼•èµ‹å€¼ |
| `__call__` | `obj()` | å¯¹è±¡å¯è°ƒç”¨ |
| `__enter__` | `with obj as f:` | è¿›å…¥ä¸Šä¸‹æ–‡ |
| `__exit__` | é€€å‡ºwithå— | é€€å‡ºä¸Šä¸‹æ–‡ |

å¯¹æ¯”Javaï¼š

```java
// Javaä½¿ç”¨try-with-resources
public class FileManager implements AutoCloseable {
    private String filename;

    public FileManager(String filename) {
        this.filename = filename;
    }

    @Override
    public void close() {
        System.out.println("å…³é—­æ–‡ä»¶: " + filename);
    }
}

// ä½¿ç”¨
try (FileManager fm = new FileManager("test.txt")) {
    // ä½¿ç”¨èµ„æº
} // è‡ªåŠ¨å…³é—­
```

#### 4.1ã€è¿ç®—ç¬¦é‡è½½

è®©è‡ªå®šä¹‰ç±»æ”¯æŒå„ç§è¿ç®—ç¬¦ã€‚

**ç®—æœ¯è¿ç®—ç¬¦**

```python
class Vector:
    """äºŒç»´å‘é‡"""
    def __init__(self, x, y):
        self.x = x
        self.y = y

    def __add__(self, other):
        """åŠ æ³• +"""
        return Vector(self.x + other.x, self.y + other.y)

    def __sub__(self, other):
        """å‡æ³• -"""
        return Vector(self.x - other.x, self.y - other.y)

    def __mul__(self, scalar):
        """ä¹˜æ³• *"""
        return Vector(self.x * scalar, self.y * scalar)

    def __truediv__(self, scalar):
        """é™¤æ³• /"""
        return Vector(self.x / scalar, self.y / scalar)

    def __abs__(self):
        """ç»å¯¹å€¼ abs()"""
        return (self.x ** 2 + self.y ** 2) ** 0.5

    def __neg__(self):
        """å–è´Ÿ -obj"""
        return Vector(-self.x, -self.y)

    def __eq__(self, other):
        """ç›¸ç­‰ =="""
        return self.x == other.x and self.y == other.y

    def __repr__(self):
        return f"Vector({self.x}, {self.y})"

# ä½¿ç”¨
v1 = Vector(2, 3)
v2 = Vector(1, 1)

print(v1 + v2)    # Vector(3, 4)
print(v1 - v2)    # Vector(1, 2)
print(v1 * 2)     # Vector(4, 6)
print(v1 / 2)     # Vector(1.0, 1.5)
print(abs(v1))    # 3.605551275463989
print(-v1)        # Vector(-2, -3)
print(v1 == v2)   # False
```

**åå‘è¿ç®—ç¬¦**

```python
class Number:
    def __init__(self, value):
        self.value = value

    def __add__(self, other):
        """obj + other"""
        return Number(self.value + other)

    def __radd__(self, other):
        """other + objï¼ˆåå‘åŠ æ³•ï¼‰"""
        return Number(other + self.value)

    def __mul__(self, other):
        """obj * other"""
        return Number(self.value * other)

    def __rmul__(self, other):
        """other * objï¼ˆåå‘ä¹˜æ³•ï¼‰"""
        return Number(other * self.value)

    def __repr__(self):
        return f"Number({self.value})"

# ä½¿ç”¨
num = Number(5)
print(num + 3)    # Number(8) - è°ƒç”¨__add__
print(3 + num)    # Number(8) - è°ƒç”¨__radd__
print(num * 2)    # Number(10) - è°ƒç”¨__mul__
print(2 * num)    # Number(10) - è°ƒç”¨__rmul__
```

**å¢å¼ºèµ‹å€¼è¿ç®—ç¬¦**

```python
class Counter:
    def __init__(self, value=0):
        self.value = value

    def __iadd__(self, other):
        """+="""
        self.value += other
        return self

    def __isub__(self, other):
        """-="""
        self.value -= other
        return self

    def __imul__(self, other):
        """*="""
        self.value *= other
        return self

    def __repr__(self):
        return f"Counter({self.value})"

# ä½¿ç”¨
counter = Counter(10)
counter += 5
print(counter)    # Counter(15)
counter -= 3
print(counter)    # Counter(12)
counter *= 2
print(counter)    # Counter(24)
```

**å®Œæ•´è¿ç®—ç¬¦åˆ—è¡¨**

| è¿ç®—ç¬¦ | æ–¹æ³• | è¯´æ˜ |
|-------|------|------|
| `+` | `__add__` | åŠ æ³• |
| `-` | `__sub__` | å‡æ³• |
| `*` | `__mul__` | ä¹˜æ³• |
| `/` | `__truediv__` | é™¤æ³• |
| `//` | `__floordiv__` | æ•´é™¤ |
| `%` | `__mod__` | å–æ¨¡ |
| `**` | `__pow__` | å¹‚è¿ç®— |
| `&` | `__and__` | æŒ‰ä½ä¸ |
| `\|` | `__or__` | æŒ‰ä½æˆ– |
| `^` | `__xor__` | æŒ‰ä½å¼‚æˆ– |
| `<<` | `__lshift__` | å·¦ç§» |
| `>>` | `__rshift__` | å³ç§» |
| `-obj` | `__neg__` | å–è´Ÿ |
| `+obj` | `__pos__` | å–æ­£ |
| `~obj` | `__invert__` | æŒ‰ä½å–å |

**å®é™…åº”ç”¨ï¼šè´§å¸ç±»**

```python
class Money:
    """è´§å¸ç±»ï¼Œæ”¯æŒè¿ç®—"""
    def __init__(self, amount, currency="CNY"):
        self.amount = amount
        self.currency = currency

    def __add__(self, other):
        if self.currency != other.currency:
            raise ValueError("ä¸åŒå¸ç§ä¸èƒ½ç›¸åŠ ")
        return Money(self.amount + other.amount, self.currency)

    def __sub__(self, other):
        if self.currency != other.currency:
            raise ValueError("ä¸åŒå¸ç§ä¸èƒ½ç›¸å‡")
        return Money(self.amount - other.amount, self.currency)

    def __mul__(self, factor):
        """ä¹˜ä»¥æ•°å­—"""
        return Money(self.amount * factor, self.currency)

    def __truediv__(self, divisor):
        """é™¤ä»¥æ•°å­—"""
        return Money(self.amount / divisor, self.currency)

    def __eq__(self, other):
        return self.amount == other.amount and self.currency == other.currency

    def __lt__(self, other):
        if self.currency != other.currency:
            raise ValueError("ä¸åŒå¸ç§ä¸èƒ½æ¯”è¾ƒ")
        return self.amount < other.amount

    def __repr__(self):
        return f"{self.currency} {self.amount:.2f}"

# ä½¿ç”¨
price1 = Money(100.50, "CNY")
price2 = Money(50.25, "CNY")

total = price1 + price2
print(total)              # CNY 150.75

discount = price1 * 0.8
print(discount)           # CNY 80.40

print(price1 > price2)    # True
```

#### 4.2ã€å…¶ä»–å¸¸ç”¨ç‰¹æ®Šæ–¹æ³•

**`__hash__`ï¼šå¯å“ˆå¸Œå¯¹è±¡**

```python
class Person:
    def __init__(self, name, id_number):
        self.name = name
        self.id_number = id_number

    def __eq__(self, other):
        if not isinstance(other, Person):
            return False
        return self.id_number == other.id_number

    def __hash__(self):
        """ä½¿å¯¹è±¡å¯ä»¥ä½œä¸ºå­—å…¸é”®å’Œé›†åˆå…ƒç´ """
        return hash(self.id_number)

    def __repr__(self):
        return f"Person('{self.name}', '{self.id_number}')"

# ä½¿ç”¨
person1 = Person("å¼ ä¸‰", "123456")
person2 = Person("å¼ ä¸‰", "123456")
person3 = Person("æå››", "789012")

# å¯ä»¥ä½œä¸ºå­—å…¸é”®
people = {
    person1: "æ•°æ®1",
    person3: "æ•°æ®2"
}

# å¯ä»¥æ”¾å…¥é›†åˆ
person_set = {person1, person2, person3}
print(len(person_set))  # 2ï¼ˆperson1å’Œperson2è¢«è®¤ä¸ºæ˜¯åŒä¸€ä¸ªï¼‰
```

**`__bool__`ï¼šçœŸå€¼æµ‹è¯•**

```python
class Result:
    def __init__(self, data, error=None):
        self.data = data
        self.error = error

    def __bool__(self):
        """if result: æ—¶è°ƒç”¨"""
        return self.error is None

    def __repr__(self):
        if self.error:
            return f"Result(error={self.error})"
        return f"Result(data={self.data})"

# ä½¿ç”¨
success = Result({"user": "å¼ ä¸‰"})
failure = Result(None, "è¿æ¥å¤±è´¥")

if success:
    print("æˆåŠŸ!")  # è¾“å‡º

if not failure:
    print("å¤±è´¥!")  # è¾“å‡º
```

**`__format__`ï¼šæ ¼å¼åŒ–è¾“å‡º**

```python
class Point:
    def __init__(self, x, y):
        self.x = x
        self.y = y

    def __format__(self, format_spec):
        """format(obj, spec) æ—¶è°ƒç”¨"""
        if format_spec == 'p':
            return f"({self.x}, {self.y})"
        elif format_spec == 'c':
            return f"{self.x}+{self.y}i"
        else:
            return f"Point({self.x}, {self.y})"

# ä½¿ç”¨
point = Point(3, 4)
print(f"{point}")      # Point(3, 4)
print(f"{point:p}")    # (3, 4)
print(f"{point:c}")    # 3+4i
```

**å°ç»“å¯¹æ¯”è¡¨**

| ç‰¹æ®Šæ–¹æ³• | ç”¨é€” | Javaå¯¹åº” |
|---------|------|----------|
| `__str__` | å­—ç¬¦ä¸²è¡¨ç¤º | `toString()` |
| `__repr__` | å¼€å‘è€…è¡¨ç¤º | æ— ç›´æ¥å¯¹åº” |
| `__eq__` | ç›¸ç­‰æ¯”è¾ƒ | `equals()` |
| `__hash__` | å“ˆå¸Œå€¼ | `hashCode()` |
| `__len__` | é•¿åº¦ | `size()` |
| `__getitem__` | ç´¢å¼•è®¿é—® | `get()` |
| `__call__` | å¯è°ƒç”¨ | å‡½æ•°å¼æ¥å£ |
| `__enter__/__exit__` | ä¸Šä¸‹æ–‡ç®¡ç† | `AutoCloseable` |
| `__add__` | åŠ æ³• | æ— ï¼ˆä¸æ”¯æŒè¿ç®—ç¬¦é‡è½½ï¼‰ |

Pythonçš„ç‰¹æ®Šæ–¹æ³•è®©ä½ çš„ç±»èƒ½å¤Ÿæ— ç¼èå…¥Pythonçš„è¯­æ³•ä½“ç³»ï¼Œå†™å‡ºæ›´Pythonicçš„ä»£ç ï¼

### 5ã€Pythonæ•°æ®ç±»

Python 3.7å¼•å…¥çš„`dataclass`è£…é¥°å™¨å¤§å¤§ç®€åŒ–äº†æ•°æ®ç±»çš„å®šä¹‰ï¼Œç±»ä¼¼äºJava 14+çš„recordç±»ã€‚

#### 5.1ã€åŸºæœ¬ç”¨æ³•

**ä¸ä½¿ç”¨dataclassçš„ä¼ ç»Ÿå†™æ³•**

```python
# ä¼ ç»Ÿå†™æ³•ï¼šéœ€è¦å¤§é‡æ ·æ¿ä»£ç 
class Person:
    def __init__(self, name, age, city):
        self.name = name
        self.age = age
        self.city = city

    def __repr__(self):
        return f"Person(name={self.name!r}, age={self.age!r}, city={self.city!r})"

    def __eq__(self, other):
        if not isinstance(other, Person):
            return NotImplemented
        return (self.name, self.age, self.city) == (other.name, other.age, other.city)
```

**ä½¿ç”¨dataclass**

```python
from dataclasses import dataclass

@dataclass
class Person:
    name: str
    age: int
    city: str

# è‡ªåŠ¨ç”Ÿæˆ__init__ã€__repr__ã€__eq__ç­‰æ–¹æ³•
person = Person("å¼ ä¸‰", 25, "åŒ—äº¬")
print(person)  # Person(name='å¼ ä¸‰', age=25, city='åŒ—äº¬')

person2 = Person("å¼ ä¸‰", 25, "åŒ—äº¬")
print(person == person2)  # True
```

å¯¹æ¯”Java Recordï¼š

```java
// Java 14+ Record
public record Person(String name, int age, String city) {}

// ä½¿ç”¨
Person person = new Person("å¼ ä¸‰", 25, "åŒ—äº¬");
System.out.println(person);  // Person[name=å¼ ä¸‰, age=25, city=åŒ—äº¬]
```

#### 5.2ã€å­—æ®µå®šä¹‰ä¸é»˜è®¤å€¼

**é»˜è®¤å€¼**

```python
from dataclasses import dataclass

@dataclass
class User:
    username: str
    email: str
    is_active: bool = True      # é»˜è®¤å€¼
    role: str = "user"
    login_count: int = 0

# ä½¿ç”¨
user1 = User("å¼ ä¸‰", "zhang@example.com")
print(user1)
# User(username='å¼ ä¸‰', email='zhang@example.com', is_active=True, role='user', login_count=0)

user2 = User("æå››", "li@example.com", is_active=False, role="admin")
print(user2)
# User(username='æå››', email='li@example.com', is_active=False, role='admin', login_count=0)
```

**é»˜è®¤å·¥å‚å‡½æ•°**

```python
from dataclasses import dataclass, field
from typing import List
from datetime import datetime

@dataclass
class BlogPost:
    title: str
    content: str
    tags: List[str] = field(default_factory=list)  # ä½¿ç”¨å·¥å‚å‡½æ•°
    created_at: datetime = field(default_factory=datetime.now)
    view_count: int = 0

# ä½¿ç”¨
post1 = BlogPost("Pythonæ•™ç¨‹", "è¿™æ˜¯å†…å®¹")
post2 = BlogPost("Javaæ•™ç¨‹", "å¦ä¸€ä¸ªå†…å®¹", tags=["Java", "ç¼–ç¨‹"])

print(post1.tags)       # []
print(post2.tags)       # ['Java', 'ç¼–ç¨‹']
print(post1.created_at) # å½“å‰æ—¶é—´

# æ³¨æ„ï¼šä¸è¦è¿™æ ·å†™ï¼ˆé”™è¯¯ï¼‰
# tags: List[str] = []  # âŒ æ‰€æœ‰å®ä¾‹å…±äº«åŒä¸€ä¸ªåˆ—è¡¨ï¼
```

**å­—æ®µå…ƒæ•°æ®**

```python
from dataclasses import dataclass, field

@dataclass
class Product:
    name: str
    price: float
    stock: int = field(default=0, metadata={"unit": "ä»¶"})
    description: str = field(default="", repr=False)  # ä¸åœ¨reprä¸­æ˜¾ç¤º
    _internal_id: int = field(default=0, init=False, repr=False)  # ä¸åœ¨__init__ä¸­

# ä½¿ç”¨
product = Product("ç¬”è®°æœ¬ç”µè„‘", 5999.00, 10)
print(product)
# Product(name='ç¬”è®°æœ¬ç”µè„‘', price=5999.0, stock=10)

# è®¿é—®å…ƒæ•°æ®
from dataclasses import fields
for f in fields(Product):
    if f.metadata:
        print(f"{f.name}: {f.metadata}")
# stock: {'unit': 'ä»¶'}
```

#### 5.3ã€è‡ªåŠ¨ç”Ÿæˆçš„ç‰¹æ®Šæ–¹æ³•

**å¯é…ç½®çš„æ–¹æ³•ç”Ÿæˆ**

```python
from dataclasses import dataclass

# å®Œæ•´é…ç½®
@dataclass(
    init=True,        # ç”Ÿæˆ__init__ï¼ˆé»˜è®¤Trueï¼‰
    repr=True,        # ç”Ÿæˆ__repr__ï¼ˆé»˜è®¤Trueï¼‰
    eq=True,          # ç”Ÿæˆ__eq__ï¼ˆé»˜è®¤Trueï¼‰
    order=False,      # ç”Ÿæˆæ¯”è¾ƒæ–¹æ³•__lt__ç­‰ï¼ˆé»˜è®¤Falseï¼‰
    frozen=False,     # ä¸å¯å˜ï¼ˆé»˜è®¤Falseï¼‰
    unsafe_hash=False # ç”Ÿæˆ__hash__ï¼ˆé»˜è®¤Falseï¼‰
)
class Point:
    x: int
    y: int

# ä¸å¯å˜æ•°æ®ç±»
@dataclass(frozen=True)
class ImmutablePoint:
    x: int
    y: int

point = ImmutablePoint(3, 4)
# point.x = 5  # FrozenInstanceError

# å¯æ¯”è¾ƒçš„æ•°æ®ç±»
@dataclass(order=True)
class Student:
    name: str
    score: int

students = [Student("å¼ ä¸‰", 85), Student("æå››", 92), Student("ç‹äº”", 78)]
sorted_students = sorted(students)
print([s.name for s in sorted_students])  # ['å¼ ä¸‰', 'æå››', 'ç‹äº”']
```

**è‡ªå®šä¹‰`__post_init__`**

```python
from dataclasses import dataclass

@dataclass
class Rectangle:
    width: float
    height: float
    area: float = None  # è®¡ç®—å±æ€§

    def __post_init__(self):
        """åœ¨__init__ä¹‹åè‡ªåŠ¨è°ƒç”¨"""
        if self.area is None:
            self.area = self.width * self.height

        # éªŒè¯
        if self.width <= 0 or self.height <= 0:
            raise ValueError("å®½åº¦å’Œé«˜åº¦å¿…é¡»å¤§äº0")

# ä½¿ç”¨
rect = Rectangle(5, 3)
print(rect.area)  # 15.0

# rect = Rectangle(-5, 3)  # ValueError
```

**init-onlyå­—æ®µ**

```python
from dataclasses import dataclass, field, InitVar

@dataclass
class User:
    username: str
    password_hash: str = field(init=False, repr=False)
    password: InitVar[str] = None  # ä»…åœ¨__init__ä¸­ä½¿ç”¨

    def __post_init__(self, password):
        """passwordåªåœ¨åˆå§‹åŒ–æ—¶å­˜åœ¨"""
        if password:
            self.password_hash = hash(password)  # ç®€åŒ–ç¤ºä¾‹

# ä½¿ç”¨
user = User("å¼ ä¸‰", password="secret123")
print(user)  # User(username='å¼ ä¸‰')
# user.password  # AttributeErrorï¼ˆä¸å­˜åœ¨ï¼‰
print(user.password_hash)  # å“ˆå¸Œå€¼
```

#### 5.4ã€ç»§æ‰¿ä¸ç»„åˆ

**æ•°æ®ç±»ç»§æ‰¿**

```python
from dataclasses import dataclass

@dataclass
class Person:
    name: str
    age: int

@dataclass
class Employee(Person):
    employee_id: str
    department: str

# ä½¿ç”¨
emp = Employee("å¼ ä¸‰", 30, "E001", "æŠ€æœ¯éƒ¨")
print(emp)
# Employee(name='å¼ ä¸‰', age=30, employee_id='E001', department='æŠ€æœ¯éƒ¨')
```

**ç»„åˆæ¨¡å¼**

```python
from dataclasses import dataclass
from typing import List

@dataclass
class Address:
    street: str
    city: str
    country: str = "ä¸­å›½"

@dataclass
class Contact:
    email: str
    phone: str

@dataclass
class Company:
    name: str
    address: Address
    contacts: List[Contact]
    employee_count: int = 0

# ä½¿ç”¨
address = Address("ä¸­å…³æ‘å¤§è¡—1å·", "åŒ—äº¬")
contacts = [
    Contact("hr@company.com", "010-12345678"),
    Contact("sales@company.com", "010-87654321")
]

company = Company("ç§‘æŠ€å…¬å¸", address, contacts, 500)
print(company.address.city)  # åŒ—äº¬
print(company.contacts[0].email)  # hr@company.com
```

#### 5.5ã€é«˜çº§ç‰¹æ€§

**å­—æ®µè½¬æ¢**

```python
from dataclasses import dataclass, field, asdict, astuple

@dataclass
class Book:
    title: str
    author: str
    price: float
    tags: list = field(default_factory=list)

book = Book("Pythonç¼–ç¨‹", "ä½œè€…", 59.9, ["ç¼–ç¨‹", "Python"])

# è½¬æ¢ä¸ºå­—å…¸
book_dict = asdict(book)
print(book_dict)
# {'title': 'Pythonç¼–ç¨‹', 'author': 'ä½œè€…', 'price': 59.9, 'tags': ['ç¼–ç¨‹', 'Python']}

# è½¬æ¢ä¸ºå…ƒç»„
book_tuple = astuple(book)
print(book_tuple)
# ('Pythonç¼–ç¨‹', 'ä½œè€…', 59.9, ['ç¼–ç¨‹', 'Python'])
```

**æ›¿æ¢å­—æ®µå€¼**

```python
from dataclasses import dataclass, replace

@dataclass(frozen=True)
class Point:
    x: int
    y: int

point1 = Point(3, 4)
point2 = replace(point1, x=5)  # åˆ›å»ºæ–°å¯¹è±¡

print(point1)  # Point(x=3, y=4)
print(point2)  # Point(x=5, y=4)
```

**å®é™…åº”ç”¨ï¼šé…ç½®ç±»**

```python
from dataclasses import dataclass, field
from typing import Optional
import json

@dataclass
class DatabaseConfig:
    host: str = "localhost"
    port: int = 5432
    database: str = "mydb"
    username: str = "admin"
    password: str = field(default="", repr=False)  # ä¸æ˜¾ç¤ºå¯†ç 
    pool_size: int = 10
    timeout: int = 30
    ssl: bool = False

    def to_json(self) -> str:
        """å¯¼å‡ºä¸ºJSON"""
        from dataclasses import asdict
        return json.dumps(asdict(self), indent=2)

    @classmethod
    def from_json(cls, json_str: str):
        """ä»JSONåˆ›å»º"""
        data = json.loads(json_str)
        return cls(**data)

# ä½¿ç”¨
config = DatabaseConfig(
    host="prod-db.example.com",
    database="production",
    username="prod_user",
    password="secret",
    ssl=True
)

print(config)
# DatabaseConfig(host='prod-db.example.com', port=5432, database='production',
#                username='prod_user', pool_size=10, timeout=30, ssl=True)

# åºåˆ—åŒ–
json_str = config.to_json()
print(json_str)

# ååºåˆ—åŒ–
config2 = DatabaseConfig.from_json(json_str)
```

#### 5.6ã€ä¸æ™®é€šç±»å’Œnamedtupleå¯¹æ¯”

**å¯¹æ¯”è¡¨**

| ç‰¹æ€§ | æ™®é€šç±» | namedtuple | dataclass |
|-----|-------|------------|-----------|
| å®šä¹‰ç®€æ´åº¦ | âŒ å†—é•¿ | âœ… ç®€æ´ | âœ… ç®€æ´ |
| å¯å˜æ€§ | âœ… å¯å˜ | âŒ ä¸å¯å˜ | âœ… å¯é…ç½® |
| ç±»å‹æ³¨è§£ | âŒ æ‰‹åŠ¨ | âŒ æ—  | âœ… å†…ç½® |
| é»˜è®¤å€¼ | âœ… æ”¯æŒ | âŒ ä¸æ”¯æŒ | âœ… æ”¯æŒ |
| ç»§æ‰¿ | âœ… æ”¯æŒ | âš ï¸ å¤æ‚ | âœ… æ”¯æŒ |
| æ–¹æ³• | âœ… æ”¯æŒ | âœ… æ”¯æŒ | âœ… æ”¯æŒ |
| æ€§èƒ½ | âœ… å¥½ | âœ… å¥½ | âœ… å¥½ |

**ç¤ºä¾‹å¯¹æ¯”**

```python
# 1. æ™®é€šç±»ï¼ˆæœ€çµæ´»ï¼Œæœ€å†—é•¿ï¼‰
class PersonClass:
    def __init__(self, name, age):
        self.name = name
        self.age = age

    def __repr__(self):
        return f"Person(name={self.name!r}, age={self.age!r})"

    def __eq__(self, other):
        if not isinstance(other, PersonClass):
            return NotImplemented
        return (self.name, self.age) == (other.name, other.age)

# 2. namedtupleï¼ˆç®€æ´ï¼Œä¸å¯å˜ï¼‰
from collections import namedtuple
PersonTuple = namedtuple('Person', ['name', 'age'])

# 3. dataclassï¼ˆæœ€ä½³å¹³è¡¡ï¼‰
from dataclasses import dataclass

@dataclass
class PersonData:
    name: str
    age: int

# ä½¿ç”¨å¯¹æ¯”
p1 = PersonClass("å¼ ä¸‰", 25)
p2 = PersonTuple("å¼ ä¸‰", 25)
p3 = PersonData("å¼ ä¸‰", 25)

# å¯å˜æ€§
p1.age = 26  # âœ…
# p2.age = 26  # âŒ AttributeError
p3.age = 26  # âœ…

# ç±»å‹æç¤º
# PersonClass: æ— ç±»å‹ä¿¡æ¯
# PersonTuple: æ— ç±»å‹ä¿¡æ¯
# PersonData: å®Œæ•´ç±»å‹æ³¨è§£
```

**å°ç»“å¯¹æ¯”è¡¨**

| ç‰¹æ€§ | Python dataclass | Java record |
|-----|------------------|-------------|
| å¼•å…¥ç‰ˆæœ¬ | Python 3.7 | Java 14 |
| å¯å˜æ€§ | é»˜è®¤å¯å˜ï¼Œå¯é…ç½® | ä¸å¯å˜ |
| é»˜è®¤å€¼ | æ”¯æŒ | ä¸æ”¯æŒ |
| ç»§æ‰¿ | æ”¯æŒ | ä¸æ”¯æŒï¼ˆå¯å®ç°æ¥å£ï¼‰ |
| ç”Ÿæˆæ–¹æ³• | å¯é…ç½® | è‡ªåŠ¨ç”Ÿæˆå…¨éƒ¨ |
| åºåˆ—åŒ– | éœ€æ‰‹åŠ¨ | è‡ªåŠ¨æ”¯æŒ |

Pythonçš„æ•°æ®ç±»æ¯”Javaçš„recordæ›´çµæ´»ï¼Œä½†ä¸¤è€…éƒ½å¤§å¤§å‡å°‘äº†æ•°æ®æ‰¿è½½ç±»çš„æ ·æ¿ä»£ç ï¼

### 6ã€ç‰¹æ®Šå†…ç½®å˜é‡

Pythonä¸­æœ‰å¤§é‡ä»¥åŒä¸‹åˆ’çº¿å¼€å¤´å’Œç»“å°¾çš„ç‰¹æ®Šå†…ç½®å˜é‡ï¼Œå®ƒä»¬ç”±è§£é‡Šå™¨è‡ªåŠ¨è®¾ç½®ï¼Œæä¾›äº†ä¸°å¯Œçš„è¿è¡Œæ—¶å…ƒä¿¡æ¯ã€‚ç†è§£è¿™äº›å˜é‡å¯¹äºæ·±å…¥æŒæ¡Pythonè‡³å…³é‡è¦ã€‚

> **åŒºåˆ«**ï¼šç‰¹æ®Šå†…ç½®å˜é‡æ˜¯**å˜é‡**ï¼ˆå­˜å‚¨å€¼ï¼‰ï¼Œé­”æœ¯æ–¹æ³•æ˜¯**æ–¹æ³•**ï¼ˆå®šä¹‰è¡Œä¸ºï¼‰

#### 6.1ã€æ¨¡å—çº§åˆ«çš„ç‰¹æ®Šå˜é‡

**`__name__`ï¼šæ¨¡å—åç§°**

```python
# my_module.py
print(f"æ¨¡å—å: {__name__}")

def main():
    print("æ‰§è¡Œä¸»ç¨‹åº")

if __name__ == "__main__":
    # åªæœ‰ç›´æ¥è¿è¡Œæ—¶æ‰æ‰§è¡Œ
    main()
```

```bash
# ç›´æ¥è¿è¡Œ
$ python my_module.py
# è¾“å‡º: æ¨¡å—å: __main__
#       æ‰§è¡Œä¸»ç¨‹åº

# ä½œä¸ºæ¨¡å—å¯¼å…¥
>>> import my_module
# è¾“å‡º: æ¨¡å—å: my_module
# main()ä¸ä¼šæ‰§è¡Œ
```

å¯¹æ¯”Javaï¼š

```java
// Javaç”¨mainæ–¹æ³•ä½œä¸ºå…¥å£
public class MyClass {
    public static void main(String[] args) {
        System.out.println("æ‰§è¡Œä¸»ç¨‹åº");
    }
}
```

**`__file__`ï¼šæ–‡ä»¶è·¯å¾„**

```python
# utils.py
import os

print(f"æ–‡ä»¶è·¯å¾„: {__file__}")
print(f"ç»å¯¹è·¯å¾„: {os.path.abspath(__file__)}")
print(f"æ‰€åœ¨ç›®å½•: {os.path.dirname(__file__)}")

# è¾“å‡º:
# æ–‡ä»¶è·¯å¾„: /path/to/utils.py
# ç»å¯¹è·¯å¾„: /path/to/utils.py
# æ‰€åœ¨ç›®å½•: /path/to
```

**å®é™…åº”ç”¨**ï¼š

```python
# è¯»å–åŒç›®å½•ä¸‹çš„é…ç½®æ–‡ä»¶
import os
import json

# è·å–å½“å‰è„šæœ¬æ‰€åœ¨ç›®å½•
CURRENT_DIR = os.path.dirname(os.path.abspath(__file__))
CONFIG_FILE = os.path.join(CURRENT_DIR, 'config.json')

with open(CONFIG_FILE) as f:
    config = json.load(f)
```

**`__doc__`ï¼šæ–‡æ¡£å­—ç¬¦ä¸²**

```python
"""
è¿™æ˜¯æ¨¡å—çš„æ–‡æ¡£å­—ç¬¦ä¸²
ç”¨äºæè¿°æ¨¡å—åŠŸèƒ½
"""

def greet(name):
    """è¿”å›é—®å€™è¯­"""
    return f"Hello, {name}"

class Person:
    """äººç±»"""
    def __init__(self, name):
        """åˆå§‹åŒ–Personå¯¹è±¡"""
        self.name = name

# è®¿é—®æ–‡æ¡£
print(__doc__)           # æ¨¡å—æ–‡æ¡£
print(greet.__doc__)     # å‡½æ•°æ–‡æ¡£
print(Person.__doc__)    # ç±»æ–‡æ¡£
print(Person.__init__.__doc__)  # æ–¹æ³•æ–‡æ¡£
```

**`__package__`ï¼šåŒ…å**

```python
# mypackage/submodule.py
print(f"åŒ…å: {__package__}")        # mypackage
print(f"æ¨¡å—å: {__name__}")         # mypackage.submodule

# ç”¨äºç›¸å¯¹å¯¼å…¥
from . import other_module          # åŒçº§æ¨¡å—
from .. import parent_module        # ä¸Šçº§æ¨¡å—
```

**å…¶ä»–æ¨¡å—çº§å˜é‡**

```python
# æŸ¥çœ‹æ‰€æœ‰æ¨¡å—çº§ç‰¹æ®Šå˜é‡
import sys

print(f"__cached__: {__cached__}")    # .pycæ–‡ä»¶è·¯å¾„
print(f"__spec__: {__spec__}")        # æ¨¡å—è§„èŒƒå¯¹è±¡
print(f"__loader__: {__loader__}")    # æ¨¡å—åŠ è½½å™¨

# __builtins__: å†…ç½®å‡½æ•°å’Œå¼‚å¸¸
print(type(__builtins__))             # <class 'module'>
```

#### 6.2ã€ç±»çº§åˆ«çš„ç‰¹æ®Šå˜é‡

**`__class__`ï¼šå¯¹è±¡çš„ç±»**

```python
class Person:
    def __init__(self, name):
        self.name = name

person = Person("å¼ ä¸‰")

# è·å–ç±»
print(person.__class__)              # <class '__main__.Person'>
print(type(person))                  # <class '__main__.Person'>ï¼ˆç­‰ä»·ï¼‰

# åˆ¤æ–­ç±»å‹
print(person.__class__.__name__)     # Person

# é€šè¿‡ç±»åˆ›å»ºæ–°å®ä¾‹
another = person.__class__("æå››")
print(another.name)                  # æå››
```

**`__dict__`ï¼šå±æ€§å­—å…¸**

```python
class User:
    class_var = "ç±»å˜é‡"

    def __init__(self, username, age):
        self.username = username
        self.age = age

user = User("å¼ ä¸‰", 25)

# å®ä¾‹å±æ€§å­—å…¸
print(user.__dict__)
# {'username': 'å¼ ä¸‰', 'age': 25}

# ç±»å±æ€§å­—å…¸
print(User.__dict__)
# {..., 'class_var': 'ç±»å˜é‡', '__init__': <function>, ...}

# åŠ¨æ€æ·»åŠ å±æ€§
user.__dict__['email'] = 'zhang@example.com'
print(user.email)  # zhang@example.com

# æŸ¥çœ‹æ‰€æœ‰å±æ€§
for key, value in user.__dict__.items():
    print(f"{key}: {value}")
```

å¯¹æ¯”Javaï¼š

```java
// Javaä½¿ç”¨åå°„è®¿é—®å­—æ®µ
import java.lang.reflect.Field;

Field[] fields = user.getClass().getDeclaredFields();
for (Field field : fields) {
    field.setAccessible(true);
    System.out.println(field.getName() + ": " + field.get(user));
}
```

**`__module__`ï¼šç±»æ‰€åœ¨æ¨¡å—**

```python
# mypackage/models.py
class User:
    pass

user = User()
print(user.__class__.__module__)  # mypackage.models
print(User.__module__)            # mypackage.models
```

**`__bases__`ï¼šç›´æ¥çˆ¶ç±»**

```python
class Animal:
    pass

class Mammal(Animal):
    pass

class Dog(Mammal):
    pass

# æŸ¥çœ‹ç›´æ¥çˆ¶ç±»
print(Dog.__bases__)              # (<class '__main__.Mammal'>,)
print(Mammal.__bases__)           # (<class '__main__.Animal'>,)
print(Animal.__bases__)           # (<class 'object'>,)

# å¤šç»§æ‰¿
class Flyable:
    pass

class Bird(Animal, Flyable):
    pass

print(Bird.__bases__)             # (<class '__main__.Animal'>, <class '__main__.Flyable'>)
```

**`__mro__`ï¼šæ–¹æ³•è§£æé¡ºåº**

```python
class A:
    pass

class B(A):
    pass

class C(A):
    pass

class D(B, C):
    pass

# MROï¼ˆC3çº¿æ€§åŒ–ï¼‰
print(D.__mro__)
# (<class '__main__.D'>, <class '__main__.B'>, <class '__main__.C'>,
#  <class '__main__.A'>, <class 'object'>)

# ä¹Ÿå¯ä»¥ç”¨mro()æ–¹æ³•
print(D.mro())
```

**`__qualname__`ï¼šé™å®šåç§°**

```python
class Outer:
    class Inner:
        def method(self):
            pass

print(Outer.__name__)                    # Outer
print(Outer.__qualname__)                # Outer

print(Outer.Inner.__name__)              # Inner
print(Outer.Inner.__qualname__)          # Outer.Inner

print(Outer.Inner.method.__name__)       # method
print(Outer.Inner.method.__qualname__)   # Outer.Inner.method
```

#### 6.3ã€å‡½æ•°çº§åˆ«çš„ç‰¹æ®Šå˜é‡

**å‡½æ•°å±æ€§**

```python
def greet(name: str, age: int = 18) -> str:
    """è¿”å›é—®å€™è¯­"""
    return f"Hello, {name}! You are {age} years old."

# å‡½æ•°åç§°
print(greet.__name__)                    # greet

# æ–‡æ¡£å­—ç¬¦ä¸²
print(greet.__doc__)                     # è¿”å›é—®å€™è¯­

# æ‰€åœ¨æ¨¡å—
print(greet.__module__)                  # __main__

# ç±»å‹æ³¨è§£
print(greet.__annotations__)
# {'name': <class 'str'>, 'age': <class 'int'>, 'return': <class 'str'>}

# é»˜è®¤å‚æ•°å€¼
print(greet.__defaults__)                # (18,)

# ä»£ç å¯¹è±¡
print(greet.__code__)                    # <code object greet at ...>
print(greet.__code__.co_varnames)        # ('name', 'age')
print(greet.__code__.co_argcount)        # 2
```

**é—­åŒ…å˜é‡**

```python
def outer(x):
    y = 10
    def inner(z):
        return x + y + z
    return inner

closure = outer(5)

# é—­åŒ…å˜é‡
print(closure.__closure__)
# (<cell at 0x...: int object at 0x...>, <cell at 0x...: int object at 0x...>)

# æŸ¥çœ‹é—­åŒ…æ•è·çš„å˜é‡
for cell in closure.__closure__:
    print(cell.cell_contents)  # 5, 10
```

#### 6.4ã€å…¶ä»–é‡è¦ç‰¹æ®Šå˜é‡

**`__debug__`ï¼šè°ƒè¯•æ¨¡å¼**

```python
# é»˜è®¤ä¸ºTrue
print(__debug__)  # True

# ä½¿ç”¨-Oä¼˜åŒ–æ¨¡å¼è¿è¡Œæ—¶ä¸ºFalse
# python -O script.py

# ç”¨äºæ¡ä»¶è°ƒè¯•ä»£ç 
if __debug__:
    print("è°ƒè¯•ä¿¡æ¯ï¼šå˜é‡å€¼ä¸º", x)
```

**`__all__`ï¼šå…¬å¼€æ¥å£**

```python
# mymodule.py
__all__ = ['public_func', 'PublicClass']

def public_func():
    """å…¬å¼€å‡½æ•°"""
    pass

def _internal_func():
    """å†…éƒ¨å‡½æ•°"""
    pass

class PublicClass:
    """å…¬å¼€ç±»"""
    pass

class _InternalClass:
    """å†…éƒ¨ç±»"""
    pass
```

```python
# ä½¿ç”¨from import *æ—¶ï¼Œåªå¯¼å…¥__all__ä¸­çš„å†…å®¹
from mymodule import *

public_func()      # âœ… å¯ç”¨
# _internal_func() # âŒ NameError
```

**`__slots__`ï¼šé™åˆ¶å±æ€§**

```python
class Point:
    """é™åˆ¶åªèƒ½æœ‰xå’Œyå±æ€§"""
    __slots__ = ['x', 'y']

    def __init__(self, x, y):
        self.x = x
        self.y = y

point = Point(3, 4)
print(point.x, point.y)  # 3 4

# ä¸èƒ½æ·»åŠ æ–°å±æ€§
# point.z = 5  # AttributeError

# æ²¡æœ‰__dict__ï¼ˆèŠ‚çœå†…å­˜ï¼‰
# print(point.__dict__)  # AttributeError
```

**ä¼˜åŠ¿**ï¼š
- èŠ‚çœå†…å­˜ï¼ˆæ²¡æœ‰`__dict__`ï¼‰
- æ›´å¿«çš„å±æ€§è®¿é—®
- é˜²æ­¢å±æ€§æ‹¼å†™é”™è¯¯

**`__annotations__`ï¼šç±»å‹æ³¨è§£**

```python
class User:
    name: str
    age: int
    email: str = "æœªè®¾ç½®"

    def __init__(self, name: str, age: int):
        self.name = name
        self.age = age

# æŸ¥çœ‹ç±»å‹æ³¨è§£
print(User.__annotations__)
# {'name': <class 'str'>, 'age': <class 'int'>, 'email': <class 'str'>}

# å‡½æ•°çš„ç±»å‹æ³¨è§£
def process(data: list[int]) -> int:
    return sum(data)

print(process.__annotations__)
# {'data': list[int], 'return': <class 'int'>}
```

#### 6.5ã€å®ç”¨å·¥å…·å‡½æ•°

**`dir()`ï¼šåˆ—å‡ºæ‰€æœ‰å±æ€§**

```python
class Person:
    def __init__(self, name):
        self.name = name

    def greet(self):
        pass

person = Person("å¼ ä¸‰")

# åˆ—å‡ºæ‰€æœ‰å±æ€§å’Œæ–¹æ³•
print(dir(person))
# ['__class__', '__delattr__', ..., 'greet', 'name', ...]

# åªåˆ—å‡ºç‰¹æ®Šå˜é‡/æ–¹æ³•
special = [x for x in dir(person) if x.startswith('__') and x.endswith('__')]
print(special)
```

**`vars()`ï¼šè¿”å›`__dict__`**

```python
user = User("å¼ ä¸‰", 25)

# ç­‰åŒäºuser.__dict__
print(vars(user))
# {'name': 'å¼ ä¸‰', 'age': 25}

# ä¿®æ”¹å±æ€§
vars(user)['age'] = 26
print(user.age)  # 26
```

**`getattr()`ã€`setattr()`ã€`hasattr()`**

```python
class Config:
    debug = True
    port = 8080

config = Config()

# è·å–å±æ€§
debug = getattr(config, 'debug')          # True
timeout = getattr(config, 'timeout', 30)  # 30ï¼ˆé»˜è®¤å€¼ï¼‰

# è®¾ç½®å±æ€§
setattr(config, 'host', 'localhost')
print(config.host)  # localhost

# æ£€æŸ¥å±æ€§
print(hasattr(config, 'debug'))    # True
print(hasattr(config, 'timeout'))  # False

# åŠ¨æ€æ“ä½œ
attr_name = 'port'
value = getattr(config, attr_name)
print(value)  # 8080
```

#### 6.6ã€å®é™…åº”ç”¨æ¡ˆä¾‹

**æ¡ˆä¾‹1ï¼šå¯¹è±¡åºåˆ—åŒ–**

```python
class Person:
    def __init__(self, name, age, city):
        self.name = name
        self.age = age
        self.city = city

    def to_dict(self):
        """è½¬æ¢ä¸ºå­—å…¸"""
        return self.__dict__.copy()

    @classmethod
    def from_dict(cls, data):
        """ä»å­—å…¸åˆ›å»ºå¯¹è±¡"""
        return cls(**data)

# ä½¿ç”¨
person = Person("å¼ ä¸‰", 25, "åŒ—äº¬")
data = person.to_dict()
print(data)  # {'name': 'å¼ ä¸‰', 'age': 25, 'city': 'åŒ—äº¬'}

# ååºåˆ—åŒ–
person2 = Person.from_dict(data)
print(person2.name)  # å¼ ä¸‰
```

**æ¡ˆä¾‹2ï¼šæ’ä»¶ç³»ç»Ÿ**

```python
class PluginBase:
    """æ’ä»¶åŸºç±»"""
    pass

class Plugin1(PluginBase):
    pass

class Plugin2(PluginBase):
    pass

# è‡ªåŠ¨å‘ç°æ‰€æœ‰æ’ä»¶
def discover_plugins():
    """è·å–æ‰€æœ‰æ’ä»¶ç±»"""
    plugins = []
    for cls in PluginBase.__subclasses__():
        plugins.append(cls)
    return plugins

print(discover_plugins())
# [<class '__main__.Plugin1'>, <class '__main__.Plugin2'>]
```

**æ¡ˆä¾‹3ï¼šè°ƒè¯•ä¿¡æ¯**

```python
def debug_info(obj):
    """æ‰“å°å¯¹è±¡çš„è°ƒè¯•ä¿¡æ¯"""
    print(f"ç±»å‹: {obj.__class__.__name__}")
    print(f"æ¨¡å—: {obj.__class__.__module__}")
    print(f"MRO: {[c.__name__ for c in obj.__class__.__mro__]}")
    print(f"å±æ€§: {obj.__dict__}")

class User:
    def __init__(self, name):
        self.name = name

user = User("å¼ ä¸‰")
debug_info(user)
# ç±»å‹: User
# æ¨¡å—: __main__
# MRO: ['User', 'object']
# å±æ€§: {'name': 'å¼ ä¸‰'}
```

**å°ç»“å¯¹æ¯”è¡¨**

| å˜é‡ç±»å‹ | Pythonç‰¹æ®Šå˜é‡ | Javaå¯¹åº” |
|---------|---------------|----------|
| æ¨¡å—å | `__name__` | æ— ï¼ˆç”¨mainæ–¹æ³•ï¼‰ |
| æ–‡ä»¶è·¯å¾„ | `__file__` | æ— ç›´æ¥å¯¹åº” |
| ç±»ä¿¡æ¯ | `__class__`, `__bases__` | `getClass()`, `getSuperclass()` |
| å±æ€§å­—å…¸ | `__dict__` | åå°„API |
| MRO | `__mro__` | æ— ï¼ˆå•ç»§æ‰¿ï¼‰ |
| æ–‡æ¡£ | `__doc__` | JavaDocæ³¨é‡Š |
| ç±»å‹æ³¨è§£ | `__annotations__` | ç±»å‹å£°æ˜ |

**è®°å¿†æŠ€å·§**ï¼š

- **æ¨¡å—ç›¸å…³**ï¼š`__name__`ã€`__file__`ã€`__package__`
- **ç±»ç›¸å…³**ï¼š`__class__`ã€`__bases__`ã€`__mro__`ã€`__module__`
- **å±æ€§ç›¸å…³**ï¼š`__dict__`ã€`__slots__`ã€`__annotations__`
- **å…ƒä¿¡æ¯**ï¼š`__doc__`ã€`__qualname__`ã€`__all__`

---

**ğŸ“– ç³»åˆ—æ–‡ç« å¯¼èˆª**

æœ¬æ–‡æ˜¯"Javaå¼€å‘è€…è½¬æˆ˜Python"ç³»åˆ—çš„ç¬¬ä¸€ç¯‡ï¼Œå…¨é¢ä»‹ç»Pythonçš„åŸºç¡€çŸ¥è¯†ã€‚

ğŸ“š **ç³»åˆ—**ï¼š
- [è¿›é˜¶ç¯‡](/pages/python-for-java-dev-raise/) - å¼‚å¸¸å¤„ç†ã€æ–‡ä»¶æ“ä½œã€è£…é¥°å™¨ã€å¼‚æ­¥ç¼–ç¨‹
- [çƒ­é—¨åº“ä¸è´¨é‡ç®¡ç†](/pages/python-for-java-dev-package/) - Pythonç”Ÿæ€ã€è´¨é‡ç®¡ç†

**ç¥ä½ å˜å¾—æ›´å¼º!**
