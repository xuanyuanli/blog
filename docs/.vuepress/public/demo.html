<div class="content-wrapper" style="">



    <div id="content" class="fluid-block">
        <section id="introducing-thymeleaf" class="level1"><h1>1 Introducing Thymeleaf</h1>
            <section id="what-is-thymeleaf" class="level2"><h2>1.1 What is Thymeleaf?</h2>
                <p>Thymeleaf is a modern server-side Java template engine for both web and standalone environments, capable of processing HTML, XML, JavaScript,
                    CSS and even plain text.</p>
                <p>The main goal of Thymeleaf is to provide an elegant and highly-maintainable way of creating templates. To achieve this, it builds on the
                    concept of <em>Natural Templates</em> to inject its logic into template files in a way that doesn’t affect the template from being used as a
                    design prototype. This improves communication of design and bridges the gap between design and development teams.</p>
                <p>Thymeleaf has also been designed from the beginning with Web Standards in mind – especially <strong>HTML5</strong> – allowing you to create
                    fully validating templates if that is a need for you.</p></section>
            <section id="what-kind-of-templates-can-thymeleaf-process" class="level2"><h2>1.2 What kind of templates can Thymeleaf process?</h2>
                <p>Out-of-the-box, Thymeleaf allows you to process six kinds of templates, each of which is called a <strong>Template Mode</strong>:</p>
                <ul>
                    <li>HTML</li>
                    <li>XML</li>
                    <li>TEXT</li>
                    <li>JAVASCRIPT</li>
                    <li>CSS</li>
                    <li>RAW</li>
                </ul>
                <p>There are two <em>markup</em> template modes (<code>HTML</code> and <code>XML</code>), three <em>textual</em> template modes
                    (<code>TEXT</code>, <code>JAVASCRIPT</code> and <code>CSS</code>) and a <em>no-op</em> template mode (<code>RAW</code>).</p>
                <p>The <strong><code>HTML</code></strong> template mode will allow any kind of HTML input, including HTML5, HTML 4 and XHTML. No validation or
                    well-formedness check will be performed, and template code/structure will be respected to the biggest possible extent in output.</p>
                <p>The <strong><code>XML</code></strong> template mode will allow XML input. In this case, code is expected to be well-formed – no unclosed
                    tags, no unquoted attributes, etc – and the parser will throw exceptions if well-formedness violations are found. Note that no <em>validation</em>
                    (against a DTD or XML Schema) will be performed.</p>
                <p>The <strong><code>TEXT</code></strong> template mode will allow the use of a special syntax for templates of a non-markup nature. Examples of
                    such templates might be text emails or templated documentation. Note that HTML or XML templates can be also processed as <code>TEXT</code>,
                    in which case they will not be parsed as markup, and every tag, DOCTYPE, comment, etc, will be treated as mere text.</p>
                <p>The <strong><code>JAVASCRIPT</code></strong> template mode will allow the processing of JavaScript files in a Thymeleaf application. This
                    means being able to use model data inside JavaScript files in the same way it can be done in HTML files, but with JavaScript-specific
                    integrations such as specialized escaping or <em>natural scripting</em>. The <code>JAVASCRIPT</code> template mode is considered a <em>textual</em>
                    mode and therefore uses the same special syntax as the <code>TEXT</code> template mode.</p>
                <p>The <strong><code>CSS</code></strong> template mode will allow the processing of CSS files involved in a Thymeleaf application. Similar to
                    the <code>JAVASCRIPT</code> mode, the <code>CSS</code> template mode is also a <em>textual</em> mode and uses the special processing syntax
                    from the <code>TEXT</code> template mode.</p>
                <p>The <strong><code>RAW</code></strong> template mode will simply not process templates at all. It is meant to be used for inserting untouched
                    resources (files, URL responses, etc.) into the templates being processed. For example, external, uncontrolled resources in HTML format
                    could be included into application templates, safely knowing that any Thymeleaf code that these resources might include will not be
                    executed.</p></section>
            <section id="dialects-the-standard-dialect" class="level2"><h2>1.3 Dialects: The Standard Dialect</h2>
                <p>Thymeleaf is an extremely extensible template engine (in fact it could be called a <em>template engine framework</em>) that allows you to
                    define and customize the way your templates will be processed to a fine level of detail.</p>
                <p>An object that applies some logic to a markup artifact (a tag, some text, a comment, or a mere placeholder if templates are not markup) is
                    called a <em>processor</em>, and a set of these processors – plus perhaps some extra artifacts – is what a <strong>dialect</strong> is
                    normally comprised of. Out of the box, Thymeleaf’s core library provides a dialect called the <strong>Standard Dialect</strong>, which
                    should be enough for most users.</p>
                <blockquote><p>Note that dialects can actually have no processors and be entirely comprised of other kinds of artifacts, but processors are
                    definitely the most common use case.</p></blockquote>
                <p><em>This tutorial covers the Standard Dialect</em>. Every attribute and syntax feature you will learn about in the following pages is defined
                    by this dialect, even if that isn’t explicitly mentioned.</p>
                <p>Of course, users can create their own dialects (even extending the Standard one) if they want to define their own processing logic while
                    taking advantage of the library’s advanced features. Thymeleaf can also be configured to use several dialects at a time.</p>
                <blockquote><p>The official thymeleaf-spring3 and thymeleaf-spring4 integration packages both define a dialect called the “SpringStandard
                    Dialect”, which is mostly the same as the Standard Dialect, but with small adaptations to make better use of some features in the Spring
                    Framework (for example, by using Spring Expression Language or SpringEL instead of OGNL). So if you are a Spring MVC user you are not
                    wasting your time, as almost everything you learn here will be of use in your Spring applications.</p></blockquote>
                <p>Most of the processors of the Standard Dialect are <em>attribute processors</em>. This allows browsers to correctly display HTML template
                    files even before being processed because they will simply ignore the additional attributes. For example, while a JSP using tag libraries
                    could include a fragment of code not directly displayable by a browser like:</p>
                <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span
                        class="token punctuation">&lt;</span><span class="token namespace">form:</span>inputText</span> <span
                        class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span
                        class="token punctuation">"</span>userName<span class="token punctuation">"</span></span> <span
                        class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span
                        class="token punctuation">"</span>${user.name}<span class="token punctuation">"</span></span> <span
                        class="token punctuation">/&gt;</span></span></code></pre>
                <p>…the Thymeleaf Standard Dialect would allow us to achieve the same functionality with:</p>
                <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span
                        class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span
                        class="token punctuation">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span
                        class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span
                        class="token punctuation">"</span>userName<span class="token punctuation">"</span></span> <span
                        class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span
                        class="token punctuation">"</span>James Carrot<span class="token punctuation">"</span></span> <span class="token attr-name"><span
                        class="token namespace">th:</span>value</span><span class="token attr-value"><span class="token punctuation">=</span><span
                        class="token punctuation">"</span>${user.name}<span class="token punctuation">"</span></span> <span
                        class="token punctuation">/&gt;</span></span></code></pre>
                <p>Not only will this be correctly displayed by browsers, but this also allows us to (optionally) specify a value attribute in it (“James
                    Carrot”, in this case) that will be displayed when the prototype is statically opened in a browser, and that will be substituted by the
                    value resulting from the evaluation of <code>${user.name}</code> during processing of the template.</p>
                <p>This helps your designer and developer to work on the very same template file and reduce the effort required to transform a static prototype
                    into a working template file. The ability to do this is a feature called <em>Natural Templating</em>.</p></section>
        </section>
        <section id="the-good-thymes-virtual-grocery" class="level1"><h1>2 The Good Thymes Virtual Grocery</h1>
            <p>The source code for the examples shown in this, and future chapters of this guide, can be found in the <em>Good Thymes Virtual Grocery
                (GTVG)</em> example app which has two (equivalent) versions:</p>
            <ul>
                <li><code>javax.*</code> based: <a href="https://github.com/thymeleaf/thymeleaf/tree/3.1-master/examples/core/thymeleaf-examples-gtvg-javax">gtvg-javax</a>.
                </li>
                <li><code>jakarta.*</code> based: <a
                        href="https://github.com/thymeleaf/thymeleaf/tree/3.1-master/examples/core/thymeleaf-examples-gtvg-jakarta">gtvg-jakarta</a>.
                </li>
            </ul>
            <section id="a-website-for-a-grocery" class="level2"><h2>2.1 A website for a grocery</h2>
                <p>To better explain the concepts involved in processing templates with Thymeleaf, this tutorial will use a demo application which you can
                    download from the project’s web site.</p>
                <p>This application is the web site of an imaginary virtual grocery, and will provide us with many scenarios to showcase Thymeleaf’s many
                    features.</p>
                <p>To start, we need a simple set of model entities for our application: <code>Products</code> which are sold to <code>Customers</code> by
                    creating <code>Orders</code>. We will also be managing <code>Comments</code> about those <code>Products</code>:</p>
                <figure><img src="images/usingthymeleaf/gtvg-model.png" alt="Example application model">
                    <figcaption>Example application model</figcaption>
                </figure>
                <p>Our application will also have a very simple service layer, composed by <code>Service</code> objects containing methods like:</p>
                <pre class=" language-java"><code class=" language-java"><span class="token keyword">public</span> <span
                        class="token keyword">class</span> <span class="token class-name">ProductService</span> <span class="token punctuation">{</span>

<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

<span class="token keyword">public</span> List<span class="token operator">&lt;</span>Product<span class="token operator">&gt;</span> <span
                            class="token function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span
                            class="token punctuation">{</span>
    <span class="token keyword">return</span> ProductRepository<span class="token punctuation">.</span><span class="token function">getInstance</span><span
                            class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span
                            class="token function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span
                            class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> Product <span class="token function">findById</span><span class="token punctuation">(</span>Integer id<span
                            class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> ProductRepository<span class="token punctuation">.</span><span class="token function">getInstance</span><span
                            class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span
                            class="token function">findById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span
                            class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token punctuation">}</span></code></pre>
                <p>At the web layer our application will have a filter that will delegate execution to Thymeleaf-enabled commands depending on the request
                    URL:</p>
                <pre class=" language-java"><code class=" language-java">
<span class="token comment" spellcheck="true">/*
* The application object needs to be declared first (implements IWebApplication)
* In this case, the Jakarta-based version will be used.
*/</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">init</span><span
                        class="token punctuation">(</span><span class="token keyword">final</span> FilterConfig filterConfig<span
                        class="token punctuation">)</span> <span class="token keyword">throws</span> ServletException <span class="token punctuation">{</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>application <span class="token operator">=</span>
        JakartaServletWebApplication<span class="token punctuation">.</span><span class="token function">buildApplication</span><span class="token punctuation">(</span>
            filterConfig<span class="token punctuation">.</span><span class="token function">getServletContext</span><span
                        class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span
                        class="token punctuation">;</span>
<span class="token comment" spellcheck="true">// We will see later how the TemplateEngine object is built and configured</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>templateEngine <span class="token operator">=</span> <span
                        class="token function">buildTemplateEngine</span><span class="token punctuation">(</span><span class="token keyword">this</span><span
                        class="token punctuation">.</span>application<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">/*
* Each request will be processed by creating an exchange object (modeling
* the request, its response and all the data needed for this process) and
* then calling the corresponding controller.
*/</span>
<span class="token keyword">private</span> <span class="token keyword">boolean</span> <span class="token function">process</span><span
                        class="token punctuation">(</span>HttpServletRequest request<span class="token punctuation">,</span> HttpServletResponse response<span
                        class="token punctuation">)</span>
    <span class="token keyword">throws</span> ServletException <span class="token punctuation">{</span>

<span class="token keyword">try</span> <span class="token punctuation">{</span>

    <span class="token keyword">final</span> IWebExchange webExchange <span class="token operator">=</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>application<span class="token punctuation">.</span><span
                        class="token function">buildExchange</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span
                        class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">final</span> IWebRequest webRequest <span class="token operator">=</span> webExchange<span
                        class="token punctuation">.</span><span class="token function">getRequest</span><span class="token punctuation">(</span><span
                        class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">// This prevents triggering engine executions for resource URLs</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>request<span class="token punctuation">.</span><span class="token function">getRequestURI</span><span
                        class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span
                        class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">"/css"</span><span
                        class="token punctuation">)</span> <span class="token operator">||</span>
            request<span class="token punctuation">.</span><span class="token function">getRequestURI</span><span class="token punctuation">(</span><span
                        class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">startsWith</span><span
                        class="token punctuation">(</span><span class="token string">"/images"</span><span class="token punctuation">)</span> <span
                        class="token operator">||</span>
            request<span class="token punctuation">.</span><span class="token function">getRequestURI</span><span class="token punctuation">(</span><span
                        class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">startsWith</span><span
                        class="token punctuation">(</span><span class="token string">"/favicon"</span><span class="token punctuation">)</span><span
                        class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment" spellcheck="true">/*
     * Query controller/URL mapping and obtain the controller
     * that will process the request. If no controller is available,
     * return false and let other filters/servlets process the request.
     */</span>
    <span class="token keyword">final</span> IGTVGController controller <span class="token operator">=</span>
        ControllerMappings<span class="token punctuation">.</span><span class="token function">resolveControllerForRequest</span><span
                        class="token punctuation">(</span>webRequest<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>controller <span class="token operator">==</span> null<span
                        class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment" spellcheck="true">/*
     * Write the response headers
     */</span>
    response<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span
                        class="token string">"text/html;charset=UTF-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    response<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span
                        class="token string">"Pragma"</span><span class="token punctuation">,</span> <span class="token string">"no-cache"</span><span
                        class="token punctuation">)</span><span class="token punctuation">;</span>
    response<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span
                        class="token string">"Cache-Control"</span><span class="token punctuation">,</span> <span class="token string">"no-cache"</span><span
                        class="token punctuation">)</span><span class="token punctuation">;</span>
    response<span class="token punctuation">.</span><span class="token function">setDateHeader</span><span class="token punctuation">(</span><span
                        class="token string">"Expires"</span><span class="token punctuation">,</span> <span class="token number">0</span><span
                        class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">/*
     * Obtain the response writer
     */</span>
    <span class="token keyword">final</span> Writer writer <span class="token operator">=</span> response<span class="token punctuation">.</span><span
                        class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span
                        class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">/*
     * Execute the controller and process view template,
     * writing the results to the response writer.
     */</span>
    controller<span class="token punctuation">.</span><span class="token function">process</span><span class="token punctuation">(</span>webExchange<span
                        class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>templateEngine<span
                        class="token punctuation">,</span> writer<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span
                        class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        response<span class="token punctuation">.</span><span class="token function">sendError</span><span class="token punctuation">(</span>HttpServletResponse<span
                        class="token punctuation">.</span>SC_INTERNAL_SERVER_ERROR<span class="token punctuation">)</span><span
                        class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">final</span> IOException ignored<span
                        class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment" spellcheck="true">// Just ignore this</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">ServletException</span><span
                        class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token punctuation">}</span></code></pre>
                <p>This is our <code>IGTVGController</code> interface:</p>
                <pre class=" language-java"><code class=" language-java"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span
                        class="token class-name">IGTVGController</span> <span class="token punctuation">{</span>

<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">process</span><span
                            class="token punctuation">(</span>
        <span class="token keyword">final</span> IWebExchange webExchange<span class="token punctuation">,</span>
        <span class="token keyword">final</span> ITemplateEngine templateEngine<span class="token punctuation">,</span>
        <span class="token keyword">final</span> Writer writer<span class="token punctuation">)</span>
        <span class="token keyword">throws</span> Exception<span class="token punctuation">;</span>

<span class="token punctuation">}</span></code></pre>
                <p>All we have to do now is create implementations of the <code>IGTVGController</code> interface, retrieving data from the services and
                    processing templates using the <code>ITemplateEngine</code> object.</p>
                <p>In the end, it will look like this:</p>
                <figure><img src="images/usingthymeleaf/gtvg-view.png" alt="Example application home page">
                    <figcaption>Example application home page</figcaption>
                </figure>
                <p>But first let’s see how that template engine is initialized.</p></section>
            <section id="creating-and-configuring-the-template-engine" class="level2"><h2>2.2 Creating and configuring the Template Engine</h2>
                <p>The <em>init(…)</em> method in our filter contained this line:</p>
                <pre class=" language-java"><code class=" language-java"><span class="token keyword">this</span><span class="token punctuation">.</span>templateEngine <span
                        class="token operator">=</span> <span class="token function">buildTemplateEngine</span><span class="token punctuation">(</span><span
                        class="token keyword">this</span><span class="token punctuation">.</span>application<span class="token punctuation">)</span><span
                        class="token punctuation">;</span></code></pre>
                <p>Let’s see now how our <code>org.thymeleaf.TemplateEngine</code> object is initialized:</p>
                <pre class=" language-java"><code class=" language-java"><span class="token keyword">private</span> <span class="token keyword">static</span> ITemplateEngine <span
                        class="token function">buildTemplateEngine</span><span class="token punctuation">(</span><span class="token keyword">final</span> IWebApplication application<span
                        class="token punctuation">)</span> <span class="token punctuation">{</span>

<span class="token comment" spellcheck="true">// Templates will be resolved as application (ServletContext) resources</span>
<span class="token keyword">final</span> WebApplicationTemplateResolver templateResolver <span class="token operator">=</span>
        <span class="token keyword">new</span> <span class="token class-name">WebApplicationTemplateResolver</span><span class="token punctuation">(</span>application<span
                            class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">// HTML is the default mode, but we will set it anyway for better understanding of code</span>
templateResolver<span class="token punctuation">.</span><span class="token function">setTemplateMode</span><span
                            class="token punctuation">(</span>TemplateMode<span class="token punctuation">.</span>HTML<span
                            class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">// This will convert "home" to "/WEB-INF/templates/home.html"</span>
templateResolver<span class="token punctuation">.</span><span class="token function">setPrefix</span><span class="token punctuation">(</span><span
                            class="token string">"/WEB-INF/templates/"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
templateResolver<span class="token punctuation">.</span><span class="token function">setSuffix</span><span class="token punctuation">(</span><span
                            class="token string">".html"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">// Set template cache TTL to 1 hour. If not set, entries would live in cache until expelled by LRU</span>
templateResolver<span class="token punctuation">.</span><span class="token function">setCacheTTLMs</span><span class="token punctuation">(</span>Long<span
                            class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span>3600000L<span
                            class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">// Cache is set to true by default. Set to false if you want templates to</span>
<span class="token comment" spellcheck="true">// be automatically updated when modified.</span>
templateResolver<span class="token punctuation">.</span><span class="token function">setCacheable</span><span class="token punctuation">(</span><span
                            class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">final</span> TemplateEngine templateEngine <span class="token operator">=</span> <span class="token keyword">new</span> <span
                            class="token class-name">TemplateEngine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span
                            class="token punctuation">;</span>
templateEngine<span class="token punctuation">.</span><span class="token function">setTemplateResolver</span><span class="token punctuation">(</span>templateResolver<span
                            class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">return</span> templateEngine<span class="token punctuation">;</span>

<span class="token punctuation">}</span></code></pre>
                <p>There are many ways of configuring a <code>TemplateEngine</code> object, but for now these few lines of code will teach us enough about the
                    steps needed.</p>
                <section id="the-template-resolver" class="level3"><h3>The Template Resolver</h3>
                    <p>Let’s start with the Template Resolver:</p>
                    <pre class=" language-java"><code class=" language-java"><span class="token keyword">final</span> WebApplicationTemplateResolver templateResolver <span
                            class="token operator">=</span>
    <span class="token keyword">new</span> <span class="token class-name">WebApplicationTemplateResolver</span><span class="token punctuation">(</span>application<span
                                class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
                    <p>Template Resolvers are objects that implement an interface from the Thymeleaf API called <code>org.thymeleaf.templateresolver.ITemplateResolver</code>:
                    </p>
                    <pre class=" language-java"><code class=" language-java"><span class="token keyword">public</span> <span
                            class="token keyword">interface</span> <span class="token class-name">ITemplateResolver</span> <span
                            class="token punctuation">{</span>

<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

<span class="token comment" spellcheck="true">/*
 * Templates are resolved by their name (or content) and also (optionally) their
 * owner template in case we are trying to resolve a fragment for another template.
 * Will return null if template cannot be handled by this template resolver.
 */</span>
<span class="token keyword">public</span> TemplateResolution <span class="token function">resolveTemplate</span><span class="token punctuation">(</span>
        <span class="token keyword">final</span> IEngineConfiguration configuration<span class="token punctuation">,</span>
        <span class="token keyword">final</span> String ownerTemplate<span class="token punctuation">,</span> <span class="token keyword">final</span> String template<span
                                class="token punctuation">,</span>
        <span class="token keyword">final</span> Map<span class="token operator">&lt;</span>String<span class="token punctuation">,</span> Object<span
                                class="token operator">&gt;</span> templateResolutionAttributes<span class="token punctuation">)</span><span
                                class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
                    <p>These objects are in charge of determining how our templates will be accessed and, in this GTVG application, the use of <code>org.thymeleaf.templateresolver.WebApplicationTemplateResolver</code>
                        means that we are going to retrieve our template files as resources from the <em>IWebApplication</em> object: a Thymeleaf abstraction
                        that, in Servlet-based applications, basically wraps around Servlet API’s <code>[javax|jakarta].servlet.ServletContext</code> object,
                        and that resolves resources from the web application root.</p>
                    <p>But that’s not all we can say about the template resolver, because we can set some configuration parameters on it. First, the template
                        mode:</p>
                    <pre class=" language-java"><code class=" language-java">templateResolver<span class="token punctuation">.</span><span
                            class="token function">setTemplateMode</span><span class="token punctuation">(</span>TemplateMode<span
                            class="token punctuation">.</span>HTML<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
                    <p>HTML is the default template mode for <code>WebApplicationTemplateResolver</code>, but it is good practice to establish it anyway so that
                        our code documents clearly what is going on.</p>
                    <pre class=" language-java"><code class=" language-java">templateResolver<span class="token punctuation">.</span><span
                            class="token function">setPrefix</span><span class="token punctuation">(</span><span
                            class="token string">"/WEB-INF/templates/"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
templateResolver<span class="token punctuation">.</span><span class="token function">setSuffix</span><span class="token punctuation">(</span><span
                                class="token string">".html"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
                    <p>The <em>prefix</em> and <em>suffix</em> modify the template names that we will be passing to the engine for obtaining the real resource
                        names to be used.</p>
                    <p>Using this configuration, the template name <em>“product/list”</em> would correspond to:</p>
                    <pre class=" language-java"><code class=" language-java">servletContext<span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span
                            class="token punctuation">(</span><span class="token string">"/WEB-INF/templates/product/list.html"</span><span
                            class="token punctuation">)</span></code></pre>
                    <p>Optionally, the amount of time that a parsed template can live in the cache is configured at the Template Resolver by means of the <em>cacheTTLMs</em>
                        property:</p>
                    <pre class=" language-java"><code class=" language-java">templateResolver<span class="token punctuation">.</span><span
                            class="token function">setCacheTTLMs</span><span class="token punctuation">(</span>3600000L<span
                            class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
                    <p>A template can still be expelled from cache before that TTL is reached if the max cache size is reached and it is the oldest entry
                        currently cached.</p>
                    <blockquote><p>Cache behaviour and sizes can be defined by the user by implementing the <code>ICacheManager</code> interface or by modifying
                        the <code>StandardCacheManager</code> object to manage the default cache.</p></blockquote>
                    <p>There is much more to learn about template resolvers, but for now let’s have a look at the creation of our Template Engine object.</p>
                </section>
                <section id="the-template-engine" class="level3"><h3>The Template Engine</h3>
                    <p>Template Engine objects are implementations of the <code>org.thymeleaf.ITemplateEngine</code> interface. One of these implementations is
                        offered by the Thymeleaf core: <code>org.thymeleaf.TemplateEngine</code>, and we create an instance of it here:</p>
                    <pre class=" language-java"><code class=" language-java">templateEngine <span class="token operator">=</span> <span class="token keyword">new</span> <span
                            class="token class-name">TemplateEngine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span
                            class="token punctuation">;</span>
templateEngine<span class="token punctuation">.</span><span class="token function">setTemplateResolver</span><span class="token punctuation">(</span>templateResolver<span
                                class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
                    <p>Rather simple, isn’t it? All we need is to create an instance and set the Template Resolver to it.</p>
                    <p>A template resolver is the only <em>required</em> parameter a <code>TemplateEngine</code> needs, although there are many others that will
                        be covered later (message resolvers, cache sizes, etc). For now, this is all we need.</p>
                    <p>Our Template Engine is now ready and we can start creating our pages using Thymeleaf.</p></section>
            </section>
        </section>
        <section id="using-texts" class="level1"><h1>3 Using Texts</h1>
            <section id="a-multi-language-welcome" class="level2"><h2>3.1 A multi-language welcome</h2>
                <p>Our first task will be to create a home page for our grocery site.</p>
                <p>The first version of this page will be extremely simple: just a title and a welcome message. This is our
                    <code>/WEB-INF/templates/home.html</code> file:</p>
                <pre class=" language-html"><code class=" language-html"><span class="token doctype">&lt;!DOCTYPE html&gt;</span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name"><span
        class="token namespace">xmlns:</span>th</span><span class="token attr-value"><span class="token punctuation">=</span><span
        class="token punctuation">"</span>http://www.thymeleaf.org<span class="token punctuation">"</span></span><span
        class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Good Thymes Virtual Grocery<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span
        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Content-Type<span
        class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span
        class="token punctuation">=</span><span class="token punctuation">"</span>text/html; charset<span class="token punctuation">=</span>UTF-8<span
        class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span
        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>stylesheet<span
        class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span
        class="token punctuation">=</span><span class="token punctuation">"</span>text/css<span class="token punctuation">"</span></span> <span
        class="token attr-name">media</span><span class="token attr-value"><span class="token punctuation">=</span><span
        class="token punctuation">"</span>all<span class="token punctuation">"</span></span>
      <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>../../css/gtvg.css<span
            class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">th:</span>href</span><span
            class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@{/css/gtvg.css}<span
            class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span
        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>#{home.welcome}<span class="token punctuation">"</span></span><span
        class="token punctuation">&gt;</span></span>Welcome to our grocery store!<span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span></code></pre>
                <p>The first thing you will notice is that this file is HTML5 that can be correctly displayed by any browser because it does not include any
                    non-HTML tags (browsers ignore all attributes they don’t understand, like <code>th:text</code>).</p>
                <p>But you may also notice that this template is not really a <em>valid</em> HTML5 document, because these non-standard attributes we are using
                    in the <code>th:*</code> form are not allowed by the HTML5 specification. In fact, we are even adding an <code>xmlns:th</code> attribute to
                    our <code>&lt;html&gt;</code> tag, something absolutely non-HTML5-ish:</p>
                <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span
                        class="token punctuation">&lt;</span>html</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>th</span><span
                        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://www.thymeleaf.org<span
                        class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span></code></pre>
                <p>…which has no influence at all in template processing, but works as an <em>incantation</em> that prevents our IDE from complaining about the
                    lack of a namespace definition for all those <code>th:*</code> attributes.</p>
                <p>So what if we wanted to make this template <strong>HTML5-valid</strong>? Easy: switch to Thymeleaf’s data attribute syntax, using the <code>data-</code>
                    prefix for attribute names and hyphen (<code>-</code>) separators instead of semi-colons (<code>:</code>):</p>
                <pre class=" language-html"><code class=" language-html"><span class="token doctype">&lt;!DOCTYPE html&gt;</span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Good Thymes Virtual Grocery<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span
        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Content-Type<span
        class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span
        class="token punctuation">=</span><span class="token punctuation">"</span>text/html; charset<span class="token punctuation">=</span>UTF-8<span
        class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span
        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>stylesheet<span
        class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span
        class="token punctuation">=</span><span class="token punctuation">"</span>text/css<span class="token punctuation">"</span></span> <span
        class="token attr-name">media</span><span class="token attr-value"><span class="token punctuation">=</span><span
        class="token punctuation">"</span>all<span class="token punctuation">"</span></span>
      <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>../../css/gtvg.css<span
            class="token punctuation">"</span></span> <span class="token attr-name">data-th-href</span><span class="token attr-value"><span
            class="token punctuation">=</span><span class="token punctuation">"</span>@{/css/gtvg.css}<span class="token punctuation">"</span></span> <span
            class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">data-th-text</span><span
        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>#{home.welcome}<span class="token punctuation">"</span></span><span
        class="token punctuation">&gt;</span></span>Welcome to our grocery store!<span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span></code></pre>
                <p>Custom <code>data-</code> prefixed attributes are allowed by the HTML5 specification, so, with this code above, our template would be a <em>valid
                    HTML5 document</em>.</p>
                <blockquote><p>Both notations are completely equivalent and interchangeable, but for the sake of simplicity and compactness of the code samples,
                    this tutorial will use the <em>namespace notation</em> (<code>th:*</code>). Also, the <code>th:*</code> notation is more general and allowed
                    in every Thymeleaf template mode (<code>XML</code>, <code>TEXT</code>…) whereas the <code>data-</code> notation is only allowed in <code>HTML</code>
                    mode.</p></blockquote>
                <section id="using-thtext-and-externalizing-text" class="level3"><h3>Using th:text and externalizing text</h3>
                    <p>Externalizing text is extracting fragments of template code out of template files so that they can be kept in separate files (typically
                        <code>.properties</code> files) and that they can be easily replaced with equivalent texts written in other languages (a process called
                        internationalization or simply <em>i18n</em>). Externalized fragments of text are usually called <em>“messages”</em>.</p>
                    <p>Messages always have a key that identifies them, and Thymeleaf allows you to specify that a text should correspond to a specific message
                        with the <code>#{...}</code> syntax:</p>
                    <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span
                            class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span
                            class="token punctuation">=</span><span class="token punctuation">"</span>#{home.welcome}<span
                            class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Welcome to our grocery store!<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span
                            class="token punctuation">&gt;</span></span></code></pre>
                    <p>What we can see here are in fact two different features of the Thymeleaf Standard Dialect:</p>
                    <ul>
                        <li>The <code>th:text</code> attribute, which evaluates its value expression and sets the result as the body of the host tag,
                            effectively replacing the “Welcome to our grocery store!” text we see in the code.
                        </li>
                        <li>The <code>#{home.welcome}</code> expression, specified in the <em>Standard Expression Syntax</em>, instructing that the text to be
                            used by the <code>th:text</code> attribute should be the message with the <code>home.welcome</code> key corresponding to whichever
                            locale we are processing the template with.
                        </li>
                    </ul>
                    <p>Now, where is this externalized text?</p>
                    <p>The location of externalized text in Thymeleaf is fully configurable, and it will depend on the specific <code>org.thymeleaf.messageresolver.IMessageResolver</code>
                        implementation being used. Normally, an implementation based on <code>.properties</code> files will be used, but we could create our own
                        implementations if we wanted, for example, to obtain messages from a database.</p>
                    <p>However, we have not specified a message resolver for our template engine during initialization, and that means that our application is
                        using the <em>Standard Message Resolver</em>, implemented by <code>org.thymeleaf.messageresolver.StandardMessageResolver</code>.</p>
                    <p>The standard message resolver expects to find messages for <code>/WEB-INF/templates/home.html</code> in properties files in the same
                        folder and with the same name as the template, like:</p>
                    <ul>
                        <li><code>/WEB-INF/templates/home_en.properties</code> for English texts.</li>
                        <li><code>/WEB-INF/templates/home_es.properties</code> for Spanish language texts.</li>
                        <li><code>/WEB-INF/templates/home_pt_BR.properties</code> for Portuguese (Brazil) language texts.</li>
                        <li><code>/WEB-INF/templates/home.properties</code> for default texts (if the locale is not matched).</li>
                    </ul>
                    <p>Let’s have a look at our <code>home_es.properties</code> file:</p>
                    <pre><code>home.welcome=¡Bienvenido a nuestra tienda de comestibles!</code></pre>
                    <p>This is all we need for making Thymeleaf process our template. Let’s create our Home controller then.</p></section>
                <section id="contexts" class="level3"><h3>Contexts</h3>
                    <p>In order to process our template, we will create a <code>HomeController</code> class implementing the <code>IGTVGController</code>
                        interface we saw before:</p>
                    <pre class=" language-java"><code class=" language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span
                            class="token class-name">HomeController</span> <span class="token keyword">implements</span> <span class="token class-name">IGTVGController</span> <span
                            class="token punctuation">{</span>

<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">process</span><span
                                class="token punctuation">(</span>
        <span class="token keyword">final</span> IWebExchange webExchange<span class="token punctuation">,</span>
        <span class="token keyword">final</span> ITemplateEngine templateEngine<span class="token punctuation">,</span>
        <span class="token keyword">final</span> Writer writer<span class="token punctuation">)</span>
        <span class="token keyword">throws</span> Exception <span class="token punctuation">{</span>

    WebContext ctx <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WebContext</span><span
                                class="token punctuation">(</span>webExchange<span class="token punctuation">,</span> webExchange<span
                                class="token punctuation">.</span><span class="token function">getLocale</span><span class="token punctuation">(</span><span
                                class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    templateEngine<span class="token punctuation">.</span><span class="token function">process</span><span class="token punctuation">(</span><span
                                class="token string">"home"</span><span class="token punctuation">,</span> ctx<span
                                class="token punctuation">,</span> writer<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>

<span class="token punctuation">}</span></code></pre>
                    <p>The first thing we see is the creation of a <em>context</em>. A Thymeleaf context is an object implementing the <code>org.thymeleaf.context.IContext</code>
                        interface. Contexts should contain all the data required for an execution of the template engine in a variables map, and also reference
                        the locale that must be used for externalized messages.</p>
                    <pre class=" language-java"><code class=" language-java"><span class="token keyword">public</span> <span
                            class="token keyword">interface</span> <span class="token class-name">IContext</span> <span class="token punctuation">{</span>

<span class="token keyword">public</span> Locale <span class="token function">getLocale</span><span class="token punctuation">(</span><span
                                class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">containsVariable</span><span
                                class="token punctuation">(</span><span class="token keyword">final</span> String name<span
                                class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">public</span> Set<span class="token operator">&lt;</span>String<span class="token operator">&gt;</span> <span
                                class="token function">getVariableNames</span><span class="token punctuation">(</span><span
                                class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">public</span> Object <span class="token function">getVariable</span><span class="token punctuation">(</span><span
                                class="token keyword">final</span> String name<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span></code></pre>
                    <p>There is a specialized extension of this interface, <code>org.thymeleaf.context.IWebContext</code>, meant to be used in web applications.
                    </p>
                    <pre class=" language-java"><code class=" language-java"><span class="token keyword">public</span> <span
                            class="token keyword">interface</span> <span class="token class-name">IWebContext</span> <span class="token keyword">extends</span> <span
                            class="token class-name">IContext</span> <span class="token punctuation">{</span>

<span class="token keyword">public</span> IWebExchange <span class="token function">getExchange</span><span class="token punctuation">(</span><span
                                class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span></code></pre>
                    <p>The Thymeleaf core library offers an implementation of each of these interfaces:</p>
                    <ul>
                        <li><code>org.thymeleaf.context.Context</code> implements <code>IContext</code></li>
                        <li><code>org.thymeleaf.context.WebContext</code> implements <code>IWebContext</code></li>
                    </ul>
                    <p>And as you can see in the controller code, <code>WebContext</code> is the one we use. In fact we have to, because the use of a <code>WebApplicationTemplateResolver</code>
                        requires that we use a context implementing <code>IWebContext</code>.</p>
                    <pre class=" language-java"><code class=" language-java">WebContext ctx <span class="token operator">=</span> <span class="token keyword">new</span> <span
                            class="token class-name">WebContext</span><span class="token punctuation">(</span>webExchange<span
                            class="token punctuation">,</span> webExchange<span class="token punctuation">.</span><span
                            class="token function">getLocale</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span
                            class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
                    <p>The <code>WebContext</code> constructor requires information contained in the <code>IWebExchange</code> abstraction object that was
                        created at the filter representing this web-based interchange (i.e.&nbsp;request + response). The default locale of the system will be
                        used if none is specified (although you should never let this happen in real applications).</p>
                    <p>There are some specialized expressions that we will be able to use to obtain the request parameters and the request, session and
                        application attributes from the <code>WebContext</code> in our templates. For example:</p>
                    <ul>
                        <li><code>${x}</code> will return a variable <code>x</code> stored into the Thymeleaf context or as an <em>exchange attribute</em> (A
                            <em>“request attribute”</em> in Servlet jargon).
                        </li>
                        <li><code>${param.x}</code> will return a <em>request parameter</em> called <code>x</code> (which might be multivalued).</li>
                        <li><code>${session.x}</code> will return a <em>session attribute</em> called <code>x</code>.</li>
                        <li><code>${application.x}</code> will return an <em>application attribute</em> called <code>x</code> (a <em>“servlet context
                            attribute”</em> in Servlet jargon).
                        </li>
                    </ul>
                </section>
                <section id="executing-the-template-engine" class="level3"><h3>Executing the template engine</h3>
                    <p>With our context object ready, now we can tell the template engine to process the template (by its name) using the context, and passing
                        it a response writer so that the response can be written to it:</p>
                    <pre class=" language-java"><code class=" language-java">templateEngine<span class="token punctuation">.</span><span class="token function">process</span><span
                            class="token punctuation">(</span><span class="token string">"home"</span><span class="token punctuation">,</span> ctx<span
                            class="token punctuation">,</span> writer<span class="token punctuation">)</span><span
                            class="token punctuation">;</span></code></pre>
                    <p>Let’s see the results of this using the Spanish locale:</p>
                    <pre class=" language-html"><code class=" language-html"><span class="token doctype">&lt;!DOCTYPE html&gt;</span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Good Thymes Virtual Grocery<span
                                class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span
                                class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">content</span><span
        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text/html; charset<span
        class="token punctuation">=</span>UTF-8<span class="token punctuation">"</span></span> <span class="token attr-name">http-equiv</span><span
        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Content-Type<span
        class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span
        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>stylesheet<span
        class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span
        class="token punctuation">=</span><span class="token punctuation">"</span>text/css<span class="token punctuation">"</span></span> <span
        class="token attr-name">media</span><span class="token attr-value"><span class="token punctuation">=</span><span
        class="token punctuation">"</span>all<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span
        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>/gtvg/css/gtvg.css<span
        class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>¡Bienvenido a nuestra tienda de comestibles!<span
                                class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span></code></pre>
                </section>
            </section>
            <section id="more-on-texts-and-variables" class="level2"><h2>3.2 More on texts and variables</h2>
                <section id="unescaped-text" class="level3"><h3>Unescaped Text</h3>
                    <p>The simplest version of our Home page seems to be ready now, but there is something we have not thought about… what if we had a message
                        like this?</p>
                    <pre class=" language-java"><code class=" language-java">home<span class="token punctuation">.</span>welcome<span
                            class="token operator">=</span>Welcome to our <span class="token operator">&lt;</span>b<span class="token operator">&gt;</span>fantastic<span
                            class="token operator">&lt;</span><span class="token operator">/</span>b<span class="token operator">&gt;</span> grocery store<span
                            class="token operator">!</span></code></pre>
                    <p>If we execute this template like before, we will obtain:</p>
                    <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span
                            class="token punctuation">&gt;</span></span>Welcome to our <span class="token entity" title="<">&amp;lt;</span>b<span
                            class="token entity" title=">">&amp;gt;</span>fantastic<span class="token entity" title="<">&amp;lt;</span>/b<span
                            class="token entity" title=">">&amp;gt;</span> grocery store!<span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span></code></pre>
                    <p>Which is not exactly what we expected, because our <code>&lt;b&gt;</code> tag has been escaped and therefore it will be displayed in the
                        browser.</p>
                    <p>This is the default behaviour of the <code>th:text</code> attribute. If we want Thymeleaf to respect our HTML tags and not escape them,
                        we will have to use a different attribute: <code>th:utext</code> (for “unescaped text”):</p>
                    <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span
                            class="token attr-name"><span class="token namespace">th:</span>utext</span><span class="token attr-value"><span
                            class="token punctuation">=</span><span class="token punctuation">"</span>#{home.welcome}<span
                            class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Welcome to our grocery store!<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span
                            class="token punctuation">&gt;</span></span></code></pre>
                    <p>This will output our message just like we wanted it:</p>
                    <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span
                            class="token punctuation">&gt;</span></span>Welcome to our <span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;</span>b</span><span class="token punctuation">&gt;</span></span>fantastic<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b</span><span
                            class="token punctuation">&gt;</span></span> grocery store!<span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span></code></pre>
                </section>
                <section id="using-and-displaying-variables" class="level3"><h3>Using and displaying variables</h3>
                    <p>Now let’s add some more content to our home page. For example, we may want to display the date below our welcome message, like this:</p>
                    <pre><code>Welcome to our fantastic grocery store!

Today is: 12 july 2010</code></pre>
                    <p>First of all, we will have to modify our controller so that we add that date as a context variable:</p>
                    <pre class=" language-java"><code class=" language-java"><span class="token keyword">public</span> <span
                            class="token keyword">void</span> <span class="token function">process</span><span class="token punctuation">(</span>
    <span class="token keyword">final</span> IWebExchange webExchange<span class="token punctuation">,</span>
    <span class="token keyword">final</span> ITemplateEngine templateEngine<span class="token punctuation">,</span>
    <span class="token keyword">final</span> Writer writer<span class="token punctuation">)</span>
    <span class="token keyword">throws</span> Exception <span class="token punctuation">{</span>

SimpleDateFormat dateFormat <span class="token operator">=</span> <span class="token keyword">new</span> <span
                                class="token class-name">SimpleDateFormat</span><span class="token punctuation">(</span><span class="token string">"dd MMMM yyyy"</span><span
                                class="token punctuation">)</span><span class="token punctuation">;</span>
Calendar cal <span class="token operator">=</span> Calendar<span class="token punctuation">.</span><span class="token function">getInstance</span><span
                                class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

WebContext ctx <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WebContext</span><span
                                class="token punctuation">(</span>webExchange<span class="token punctuation">,</span> webExchange<span
                                class="token punctuation">.</span><span class="token function">getLocale</span><span class="token punctuation">(</span><span
                                class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ctx<span class="token punctuation">.</span><span class="token function">setVariable</span><span class="token punctuation">(</span><span class="token string">"today"</span><span
                                class="token punctuation">,</span> dateFormat<span class="token punctuation">.</span><span
                                class="token function">format</span><span class="token punctuation">(</span>cal<span class="token punctuation">.</span><span
                                class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span
                                class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

templateEngine<span class="token punctuation">.</span><span class="token function">process</span><span class="token punctuation">(</span><span
                                class="token string">"home"</span><span class="token punctuation">,</span> ctx<span
                                class="token punctuation">,</span> writer<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span></code></pre>
                    <p>We have added a <code>String</code> variable called <code>today</code> to our context, and now we can display it in our template:</p>
                    <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span
                            class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name"><span class="token namespace">th:</span>utext</span><span
        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>#{home.welcome}<span class="token punctuation">"</span></span><span
        class="token punctuation">&gt;</span></span>Welcome to our grocery store!<span class="token tag"><span class="token tag"><span
                                class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span
        class="token punctuation">&gt;</span></span>Today is: <span class="token tag"><span class="token tag"><span
                                class="token punctuation">&lt;</span>span</span> <span class="token attr-name"><span
                                class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span
                                class="token punctuation">"</span>${today}<span class="token punctuation">"</span></span><span
                                class="token punctuation">&gt;</span></span>13 February 2011<span class="token tag"><span class="token tag"><span
                                class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span
                                class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span></code></pre>
                    <p>As you can see, we are still using the <code>th:text</code> attribute for the job (and that’s correct, because we want to replace the
                        tag’s body), but the syntax is a little bit different this time and instead of a <code>#{...}</code> expression value, we are using a
                        <code>${...}</code> one. This is a <strong>variable expression</strong>, and it contains an expression in a language called <em>OGNL
                            (Object-Graph Navigation Language)</em> that will be executed on the context variables map we talked about before.</p>
                    <p>The <code>${today}</code> expression simply means “get the variable called today”, but these expressions could be more complex (like
                        <code>${user.name}</code> for “get the variable called user, and call its <code>getName()</code> method”).</p>
                    <p>There are quite a lot of possibilities in attribute values: messages, variable expressions… and quite a lot more. The next chapter will
                        show us what all these possibilities are.</p></section>
            </section>
        </section>
        <section id="standard-expression-syntax" class="level1"><h1>4 Standard Expression Syntax</h1>
            <p>We will take a small break in the development of our grocery virtual store to learn about one of the most important parts of the Thymeleaf
                Standard Dialect: the Thymeleaf Standard Expression syntax.</p>
            <p>We have already seen two types of valid attribute values expressed in this syntax: message and variable expressions:</p>
            <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span
                    class="token attr-name"><span class="token namespace">th:</span>utext</span><span class="token attr-value"><span
                    class="token punctuation">=</span><span class="token punctuation">"</span>#{home.welcome}<span
                    class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Welcome to our grocery store!<span
                    class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span
                    class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span
        class="token punctuation">&gt;</span></span>Today is: <span class="token tag"><span class="token tag"><span
                        class="token punctuation">&lt;</span>span</span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span
                        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${today}<span
                        class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>13 february 2011<span class="token tag"><span
                        class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span
                        class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span
                        class="token punctuation">&gt;</span></span></code></pre>
            <p>But there are more types of expressions, and more interesting details to learn about the ones we already know. First, let’s see a quick summary
                of the Standard Expression features:</p>
            <ul>
                <li>Simple expressions:
                    <ul>
                        <li>Variable Expressions: <code>${...}</code></li>
                        <li>Selection Variable Expressions: <code>*{...}</code></li>
                        <li>Message Expressions: <code>#{...}</code></li>
                        <li>Link URL Expressions: <code>@{...}</code></li>
                        <li>Fragment Expressions: <code>~{...}</code></li>
                    </ul>
                </li>
                <li>Literals
                    <ul>
                        <li>Text literals: <code>'one text'</code>, <code>'Another one!'</code>,…</li>
                        <li>Number literals: <code>0</code>, <code>34</code>, <code>3.0</code>, <code>12.3</code>,…</li>
                        <li>Boolean literals: <code>true</code>, <code>false</code></li>
                        <li>Null literal: <code>null</code></li>
                        <li>Literal tokens: <code>one</code>, <code>sometext</code>, <code>main</code>,…</li>
                    </ul>
                </li>
                <li>Text operations:
                    <ul>
                        <li>String concatenation: <code>+</code></li>
                        <li>Literal substitutions: <code>|The name is ${name}|</code></li>
                    </ul>
                </li>
                <li>Arithmetic operations:
                    <ul>
                        <li>Binary operators: <code>+</code>, <code>-</code>, <code>*</code>, <code>/</code>, <code>%</code></li>
                        <li>Minus sign (unary operator): <code>-</code></li>
                    </ul>
                </li>
                <li>Boolean operations:
                    <ul>
                        <li>Binary operators: <code>and</code>, <code>or</code></li>
                        <li>Boolean negation (unary operator): <code>!</code>, <code>not</code></li>
                    </ul>
                </li>
                <li>Comparisons and equality:
                    <ul>
                        <li>Comparators: <code>&gt;</code>, <code>&lt;</code>, <code>&gt;=</code>, <code>&lt;=</code> (<code>gt</code>, <code>lt</code>, <code>ge</code>,
                            <code>le</code>)
                        </li>
                        <li>Equality operators: <code>==</code>, <code>!=</code> (<code>eq</code>, <code>ne</code>)</li>
                    </ul>
                </li>
                <li>Conditional operators:
                    <ul>
                        <li>If-then: <code>(if) ? (then)</code></li>
                        <li>If-then-else: <code>(if) ? (then) : (else)</code></li>
                        <li>Default: <code>(value) ?: (defaultvalue)</code></li>
                    </ul>
                </li>
                <li>Special tokens:
                    <ul>
                        <li>No-Operation: <code>_</code></li>
                    </ul>
                </li>
            </ul>
            <p>All these features can be combined and nested:</p>
            <pre class=" language-html"><code
                    class=" language-html">'User is of type ' + (${user.isAdmin()} ? 'Administrator' : (${user.type} ?: 'Unknown'))</code></pre>
            <section id="messages" class="level2"><h2>4.1 Messages</h2>
                <p>As we already know, <code>#{...}</code> message expressions allow us to link this:</p>
                <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span
                        class="token punctuation">&lt;</span>p</span> <span class="token attr-name"><span class="token namespace">th:</span>utext</span><span
                        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>#{home.welcome}<span
                        class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Welcome to our grocery store!<span
                        class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span
                        class="token punctuation">&gt;</span></span></code></pre>
                <p>…to this:</p>
                <pre><code>home.welcome=¡Bienvenido a nuestra tienda de comestibles!</code></pre>
                <p>But there’s one aspect we still haven’t thought of: what happens if the message text is not completely static? What if, for example, our
                    application knew who is the user visiting the site at any moment and we wanted to greet them by name?</p>
                <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span
                        class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>¡Bienvenido a nuestra tienda de comestibles, John Apricot!<span
                        class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span
                        class="token punctuation">&gt;</span></span></code></pre>
                <p>This means we would need to add a parameter to our message. Just like this:</p>
                <pre><code>home.welcome=¡Bienvenido a nuestra tienda de comestibles, {0}!</code></pre>
                <p>Parameters are specified according to the <a href="https://docs.oracle.com/javase/10/docs/api/java/text/MessageFormat.html"><code>java.text.MessageFormat</code></a>
                    standard syntax, which means you can format to numbers and dates as specified in the API docs for classes in the <code>java.text.*</code>
                    package.</p>
                <p>In order to specify a value for our parameter, and given an HTTP session attribute called <code>user</code>, we could have:</p>
                <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span
                        class="token punctuation">&lt;</span>p</span> <span class="token attr-name"><span class="token namespace">th:</span>utext</span><span
                        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>#{home.welcome(${session.user.name})}<span
                        class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
Welcome to our grocery store, Sebastian Pepper!
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span
        class="token punctuation">&gt;</span></span></code></pre>
                <blockquote><p>Note that the use of <code>th:utext</code> here means that the formatted message will not be escaped. This example assumes that
                    <code>user.name</code> is already escaped.</p></blockquote>
                <p>Several parameters can be specified, separated by commas.</p>
                <p>The message key itself can come from a variable:</p>
                <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span
                        class="token punctuation">&lt;</span>p</span> <span class="token attr-name"><span class="token namespace">th:</span>utext</span><span
                        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>#{${welcomeMsgKey}(${session.user.name})}<span
                        class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
Welcome to our grocery store, Sebastian Pepper!
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span
        class="token punctuation">&gt;</span></span></code></pre>
            </section>
            <section id="variables" class="level2"><h2>4.2 Variables</h2>
                <p>We already mentioned that <code>${...}</code> expressions are in fact OGNL (Object-Graph Navigation Language) expressions executed on the map
                    of variables contained in the context.</p>
                <blockquote><p>For detailed info about OGNL syntax and features, you should read the <a href="http://commons.apache.org/ognl/">OGNL Language
                    Guide</a></p>
                    <p>In Spring MVC-enabled applications OGNL will be replaced with <strong>SpringEL</strong>, but its syntax is very similar to that of OGNL
                        (actually, exactly the same for most common cases).</p></blockquote>
                <p>From OGNL’s syntax, we know that the expression in:</p>
                <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span
                        class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>Today is: <span class="token tag"><span
                        class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name"><span
                        class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span
                        class="token punctuation">"</span>${today}<span class="token punctuation">"</span></span><span
                        class="token punctuation">&gt;</span></span>13 february 2011<span class="token tag"><span class="token tag"><span
                        class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>.<span class="token tag"><span
                        class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span></code></pre>
                <p>…is in fact equivalent to this:</p>
                <pre class=" language-java"><code class=" language-java">ctx<span class="token punctuation">.</span><span
                        class="token function">getVariable</span><span class="token punctuation">(</span><span class="token string">"today"</span><span
                        class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
                <p>But OGNL allows us to create quite more powerful expressions, and that’s how this:</p>
                <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span
                        class="token punctuation">&lt;</span>p</span> <span class="token attr-name"><span class="token namespace">th:</span>utext</span><span
                        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>#{home.welcome(${session.user.name})}<span
                        class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
Welcome to our grocery store, Sebastian Pepper!
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span
        class="token punctuation">&gt;</span></span></code></pre>
                <p>…obtains the user name by executing:</p>
                <pre class=" language-java"><code class=" language-java"><span class="token punctuation">(</span><span
                        class="token punctuation">(</span>User<span class="token punctuation">)</span> ctx<span class="token punctuation">.</span><span
                        class="token function">getVariable</span><span class="token punctuation">(</span><span class="token string">"session"</span><span
                        class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span
                        class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">)</span><span
                        class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span
                        class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
                <p>But getter method navigation is just one of OGNL’s features. Let’s see some more:</p>
                <pre class=" language-java"><code class=" language-java"><span class="token comment" spellcheck="true">/*
* Access to properties using the point (.). Equivalent to calling property getters.
*/</span>
$<span class="token punctuation">{</span>person<span class="token punctuation">.</span>father<span class="token punctuation">.</span>name<span
                            class="token punctuation">}</span>

<span class="token comment" spellcheck="true">/*
* Access to properties can also be made by using brackets ([]) and writing
* the name of the property as a variable or between single quotes.
*/</span>
$<span class="token punctuation">{</span>person<span class="token punctuation">[</span><span class="token string">'father'</span><span
                            class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'name'</span><span
                            class="token punctuation">]</span><span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">/*
* If the object is a map, both dot and bracket syntax will be equivalent to
* executing a call on its get(...) method.
*/</span>
$<span class="token punctuation">{</span>countriesByCode<span class="token punctuation">.</span>ES<span class="token punctuation">}</span>
$<span class="token punctuation">{</span>personsByName<span class="token punctuation">[</span><span class="token string">'Stephen Zucchini'</span><span
                            class="token punctuation">]</span><span class="token punctuation">.</span>age<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">/*
* Indexed access to arrays or collections is also performed with brackets,
* writing the index without quotes.
*/</span>
$<span class="token punctuation">{</span>personsArray<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span
                            class="token punctuation">.</span>name<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">/*
* Methods can be called, even with arguments.
*/</span>
$<span class="token punctuation">{</span>person<span class="token punctuation">.</span><span class="token function">createCompleteName</span><span
                            class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
$<span class="token punctuation">{</span>person<span class="token punctuation">.</span><span class="token function">createCompleteNameWithSeparator</span><span
                            class="token punctuation">(</span><span class="token string">'-'</span><span class="token punctuation">)</span><span
                            class="token punctuation">}</span></code></pre>
                <section id="expression-basic-objects" class="level3"><h3>Expression Basic Objects</h3>
                    <p>When evaluating OGNL expressions on the context variables, some objects are made available to expressions for higher flexibility. These
                        objects will be referenced (per OGNL standard) starting with the <code>#</code> symbol:</p>
                    <ul>
                        <li><code>#ctx</code>: the context object.</li>
                        <li><code>#vars:</code> the context variables.</li>
                        <li><code>#locale</code>: the context locale.</li>
                    </ul>
                    <p>So we can do this:</p>
                    <pre class=" language-html"><code class=" language-html">Established locale country: <span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;</span>span</span> <span class="token attr-name"><span
                            class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span
                            class="token punctuation">"</span>${#locale.country}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>US<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>.</code></pre>
                    <p>You can read the full reference of these objects in <a href="#appendix-a-expression-basic-objects">Appendix A</a>.</p></section>
                <section id="expression-utility-objects" class="level3"><h3>Expression Utility Objects</h3>
                    <p>Besides these basic objects, Thymeleaf will offer us a set of utility objects that will help us perform common tasks in our
                        expressions.</p>
                    <ul>
                        <li><code>#execInfo</code>: information about the template being processed.</li>
                        <li><code>#messages</code>: methods for obtaining externalized messages inside variables expressions, in the same way as they would be
                            obtained using #{…} syntax.
                        </li>
                        <li><code>#uris</code>: methods for escaping parts of URLs/URIs</li>
                        <li><code>#conversions</code>: methods for executing the configured <em>conversion service</em> (if any).</li>
                        <li><code>#dates</code>: methods for <code>java.util.Date</code> objects: formatting, component extraction, etc.</li>
                        <li><code>#calendars</code>: analogous to <code>#dates</code>, but for <code>java.util.Calendar</code> objects.</li>
                        <li><code>#temporals</code>: for dealing with dates and times using the <code>java.time</code> API in JDK8+.</li>
                        <li><code>#numbers</code>: methods for formatting numeric objects.</li>
                        <li><code>#strings</code>: methods for <code>String</code> objects: contains, startsWith, prepending/appending, etc.</li>
                        <li><code>#objects</code>: methods for objects in general.</li>
                        <li><code>#bools</code>: methods for boolean evaluation.</li>
                        <li><code>#arrays</code>: methods for arrays.</li>
                        <li><code>#lists</code>: methods for lists.</li>
                        <li><code>#sets</code>: methods for sets.</li>
                        <li><code>#maps</code>: methods for maps.</li>
                        <li><code>#aggregates</code>: methods for creating aggregates on arrays or collections.</li>
                        <li><code>#ids</code>: methods for dealing with id attributes that might be repeated (for example, as a result of an iteration).</li>
                    </ul>
                    <p>You can check what functions are offered by each of these utility objects in the <a href="#appendix-b-expression-utility-objects">Appendix
                        B</a>.</p></section>
                <section id="reformatting-dates-in-our-home-page" class="level3"><h3>Reformatting dates in our home page</h3>
                    <p>Now we know about these utility objects, we could use them to change the way in which we show the date in our home page. Instead of doing
                        this in our <code>HomeController</code>:</p>
                    <pre class=" language-java"><code class=" language-java">SimpleDateFormat dateFormat <span class="token operator">=</span> <span
                            class="token keyword">new</span> <span class="token class-name">SimpleDateFormat</span><span class="token punctuation">(</span><span
                            class="token string">"dd MMMM yyyy"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Calendar cal <span class="token operator">=</span> Calendar<span class="token punctuation">.</span><span class="token function">getInstance</span><span
                                class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

WebContext ctx <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WebContext</span><span
                                class="token punctuation">(</span>webExchange<span class="token punctuation">,</span> webExchange<span
                                class="token punctuation">.</span><span class="token function">getLocale</span><span class="token punctuation">(</span><span
                                class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ctx<span class="token punctuation">.</span><span class="token function">setVariable</span><span class="token punctuation">(</span><span class="token string">"today"</span><span
                                class="token punctuation">,</span> dateFormat<span class="token punctuation">.</span><span
                                class="token function">format</span><span class="token punctuation">(</span>cal<span class="token punctuation">.</span><span
                                class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span
                                class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

templateEngine<span class="token punctuation">.</span><span class="token function">process</span><span class="token punctuation">(</span><span
                                class="token string">"home"</span><span class="token punctuation">,</span> ctx<span
                                class="token punctuation">,</span> writer<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
                    <p>…we can do just this:</p>
                    <pre class=" language-java"><code class=" language-java">WebContext ctx <span class="token operator">=</span> <span class="token keyword">new</span> <span
                            class="token class-name">WebContext</span><span class="token punctuation">(</span>webExchange<span
                            class="token punctuation">,</span> webExchange<span class="token punctuation">.</span><span
                            class="token function">getLocale</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span
                            class="token punctuation">)</span><span class="token punctuation">;</span>
ctx<span class="token punctuation">.</span><span class="token function">setVariable</span><span class="token punctuation">(</span><span class="token string">"today"</span><span
                                class="token punctuation">,</span> Calendar<span class="token punctuation">.</span><span
                                class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span
                                class="token punctuation">)</span><span class="token punctuation">;</span>

templateEngine<span class="token punctuation">.</span><span class="token function">process</span><span class="token punctuation">(</span><span
                                class="token string">"home"</span><span class="token punctuation">,</span> ctx<span
                                class="token punctuation">,</span> writer<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
                    <p>…and then perform date formatting in the view layer itself:</p>
                    <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span
                            class="token punctuation">&gt;</span></span>
Today is: <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name"><span
                                class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span
                                class="token punctuation">"</span>${#calendars.format(today,<span class="token punctuation">'</span>dd MMMM yyyy<span
                                class="token punctuation">'</span>)}<span class="token punctuation">"</span></span><span
                                class="token punctuation">&gt;</span></span>13 May 2011<span class="token tag"><span class="token tag"><span
                                class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span
        class="token punctuation">&gt;</span></span></code></pre>
                </section>
            </section>
            <section id="expressions-on-selections-asterisk-syntax" class="level2"><h2>4.3 Expressions on selections (asterisk syntax)</h2>
                <p>Not only can variable expressions be written as <code>${...}</code>, but also as <code>*{...}</code>.</p>
                <p>There is an important difference though: the asterisk syntax evaluates expressions on <em>selected objects</em> rather than on the whole
                    context. That is, as long as there is no selected object, the dollar and the asterisk syntaxes do exactly the same.</p>
                <p>And what is a selected object? The result of an expression using the <code>th:object</code> attribute. Let’s use one in our user profile
                    (<code>userprofile.html</code>) page:</p>
                <pre class=" language-html"><code class=" language-html">  <span class="token tag"><span class="token tag"><span
                        class="token punctuation">&lt;</span>div</span> <span class="token attr-name"><span class="token namespace">th:</span>object</span><span
                        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${session.user}<span
                        class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>Name: <span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name"><span
                            class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span
                            class="token punctuation">"</span>*{firstName}<span class="token punctuation">"</span></span><span
                            class="token punctuation">&gt;</span></span>Sebastian<span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>.<span class="token tag"><span
                            class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span
        class="token punctuation">&gt;</span></span>Surname: <span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;</span>span</span> <span class="token attr-name"><span
                            class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span
                            class="token punctuation">"</span>*{lastName}<span class="token punctuation">"</span></span><span
                            class="token punctuation">&gt;</span></span>Pepper<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span
                            class="token punctuation">&gt;</span></span>.<span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>Nationality: <span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name"><span
                            class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span
                            class="token punctuation">"</span>*{nationality}<span class="token punctuation">"</span></span><span
                            class="token punctuation">&gt;</span></span>Saturn<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span
                            class="token punctuation">&gt;</span></span>.<span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></code></pre>
                <p>Which is exactly equivalent to:</p>
                <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span
                        class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>Name: <span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name"><span
                            class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span
                            class="token punctuation">"</span>${session.user.firstName}<span class="token punctuation">"</span></span><span
                            class="token punctuation">&gt;</span></span>Sebastian<span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>.<span class="token tag"><span
                            class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span
        class="token punctuation">&gt;</span></span>Surname: <span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;</span>span</span> <span class="token attr-name"><span
                            class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span
                            class="token punctuation">"</span>${session.user.lastName}<span class="token punctuation">"</span></span><span
                            class="token punctuation">&gt;</span></span>Pepper<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span
                            class="token punctuation">&gt;</span></span>.<span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>Nationality: <span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name"><span
                            class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span
                            class="token punctuation">"</span>${session.user.nationality}<span class="token punctuation">"</span></span><span
                            class="token punctuation">&gt;</span></span>Saturn<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span
                            class="token punctuation">&gt;</span></span>.<span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></code></pre>
                <p>Of course, dollar and asterisk syntax can be mixed:</p>
                <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span
                        class="token punctuation">&lt;</span>div</span> <span class="token attr-name"><span class="token namespace">th:</span>object</span><span
                        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${session.user}<span
                        class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>Name: <span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name"><span
                            class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span
                            class="token punctuation">"</span>*{firstName}<span class="token punctuation">"</span></span><span
                            class="token punctuation">&gt;</span></span>Sebastian<span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>.<span class="token tag"><span
                            class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span
        class="token punctuation">&gt;</span></span>Surname: <span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;</span>span</span> <span class="token attr-name"><span
                            class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span
                            class="token punctuation">"</span>${session.user.lastName}<span class="token punctuation">"</span></span><span
                            class="token punctuation">&gt;</span></span>Pepper<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span
                            class="token punctuation">&gt;</span></span>.<span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>Nationality: <span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name"><span
                            class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span
                            class="token punctuation">"</span>*{nationality}<span class="token punctuation">"</span></span><span
                            class="token punctuation">&gt;</span></span>Saturn<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span
                            class="token punctuation">&gt;</span></span>.<span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></code></pre>
                <p>When an object selection is in place, the selected object will also be available to dollar expressions as the <code>#object</code> expression
                    variable:</p>
                <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span
                        class="token punctuation">&lt;</span>div</span> <span class="token attr-name"><span class="token namespace">th:</span>object</span><span
                        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${session.user}<span
                        class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>Name: <span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name"><span
                            class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span
                            class="token punctuation">"</span>${#object.firstName}<span class="token punctuation">"</span></span><span
                            class="token punctuation">&gt;</span></span>Sebastian<span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>.<span class="token tag"><span
                            class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span
        class="token punctuation">&gt;</span></span>Surname: <span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;</span>span</span> <span class="token attr-name"><span
                            class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span
                            class="token punctuation">"</span>${session.user.lastName}<span class="token punctuation">"</span></span><span
                            class="token punctuation">&gt;</span></span>Pepper<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span
                            class="token punctuation">&gt;</span></span>.<span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>Nationality: <span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name"><span
                            class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span
                            class="token punctuation">"</span>*{nationality}<span class="token punctuation">"</span></span><span
                            class="token punctuation">&gt;</span></span>Saturn<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span
                            class="token punctuation">&gt;</span></span>.<span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></code></pre>
                <p>As said, if no object selection has been performed, dollar and asterisk syntaxes are equivalent.</p>
                <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span
                        class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>Name: <span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name"><span
                            class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span
                            class="token punctuation">"</span>*{session.user.name}<span class="token punctuation">"</span></span><span
                            class="token punctuation">&gt;</span></span>Sebastian<span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>.<span class="token tag"><span
                            class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span
        class="token punctuation">&gt;</span></span>Surname: <span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;</span>span</span> <span class="token attr-name"><span
                            class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span
                            class="token punctuation">"</span>*{session.user.surname}<span class="token punctuation">"</span></span><span
                            class="token punctuation">&gt;</span></span>Pepper<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span
                            class="token punctuation">&gt;</span></span>.<span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>Nationality: <span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name"><span
                            class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span
                            class="token punctuation">"</span>*{session.user.nationality}<span class="token punctuation">"</span></span><span
                            class="token punctuation">&gt;</span></span>Saturn<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span
                            class="token punctuation">&gt;</span></span>.<span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></code></pre>
            </section>
            <section id="link-urls" class="level2"><h2>4.4 Link URLs</h2>
                <p>Because of their importance, URLs are first-class citizens in web application templates, and the <em>Thymeleaf Standard Dialect</em> has a
                    special syntax for them, the <code>@</code> syntax: <code>@{...}</code></p>
                <p>There are different types of URLs:</p>
                <ul>
                    <li>Absolute URLs: <code>http://www.thymeleaf.org</code></li>
                    <li>Relative URLs, which can be:
                        <ul>
                            <li>Page-relative: <code>user/login.html</code></li>
                            <li>Context-relative: <code>/itemdetails?id=3</code> (context name in server will be added automatically)</li>
                            <li>Server-relative: <code>~/billing/processInvoice</code> (allows calling URLs in another context (= application) in the same
                                server.
                            </li>
                            <li>Protocol-relative URLs: <code>//code.jquery.com/jquery-2.0.3.min.js</code></li>
                        </ul>
                    </li>
                </ul>
                <p>The real processing of these expressions and their conversion to the URLs that will be output is done by implementations of the <code>org.thymeleaf.linkbuilder.ILinkBuilder</code>
                    interface that are registered into the <code>ITemplateEngine</code> object being used.</p>
                <p>By default, a single implementation of this interface is registered of the class <code>org.thymeleaf.linkbuilder.StandardLinkBuilder</code>,
                    which is enough for both offline (non-web) and also web scenarios based on the Servlet API. Other scenarios (like integration with
                    non-ServletAPI web frameworks) might need specific implementations of the link builder interface.</p>
                <p>Let’s use this new syntax. Meet the <code>th:href</code> attribute:</p>
                <pre class=" language-html"><code class=" language-html"><span class="token comment" spellcheck="true">&lt;!-- Will produce 'http://localhost:8080/gtvg/order/details?orderId=3' (plus rewriting) --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span
        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>details.html<span
        class="token punctuation">"</span></span>
<span class="token attr-name"><span class="token namespace">th:</span>href</span><span class="token attr-value"><span class="token punctuation">=</span><span
            class="token punctuation">"</span>@{http://localhost:8080/gtvg/order/details(orderId<span class="token punctuation">=</span>${o.id})}<span
            class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>view<span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>

<span class="token comment" spellcheck="true">&lt;!-- Will produce '/gtvg/order/details?orderId=3' (plus rewriting) --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span
        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>details.html<span
        class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">th:</span>href</span><span
        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@{/order/details(orderId<span
        class="token punctuation">=</span>${o.id})}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>view<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span
                            class="token punctuation">&gt;</span></span>

<span class="token comment" spellcheck="true">&lt;!-- Will produce '/gtvg/order/3/details' (plus rewriting) --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span
        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>details.html<span
        class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">th:</span>href</span><span
        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@{/order/{orderId}/details(orderId<span
        class="token punctuation">=</span>${o.id})}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>view<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span
                            class="token punctuation">&gt;</span></span></code></pre>
                <p>Some things to note here:</p>
                <ul>
                    <li><code>th:href</code> is a modifier attribute: once processed, it will compute the link URL to be used and set that value to the <code>href</code>
                        attribute of the <code>&lt;a&gt;</code> tag.
                    </li>
                    <li>We are allowed to use expressions for URL parameters (as you can see in <code>orderId=${o.id}</code>). The required
                        URL-parameter-encoding operations will also be automatically performed.
                    </li>
                    <li>If several parameters are needed, these will be separated by commas: <code>@{/order/process(execId=${execId},execType='FAST')}</code>
                    </li>
                    <li>Variable templates are also allowed in URL paths: <code>@{/order/{orderId}/details(orderId=${orderId})}</code></li>
                    <li>Relative URLs starting with <code>/</code> (eg: <code>/order/details</code>) will be automatically prefixed by the application context
                        name.
                    </li>
                    <li>If cookies are not enabled or this is not yet known, a <code>";jsessionid=..."</code> suffix might be added to relative URLs so that the
                        session is preserved. This is called <em>URL Rewriting</em> and Thymeleaf allows you to plug in your own rewriting filters by using the
                        <code>response.encodeURL(...)</code> mechanism from the Servlet API for every URL.
                    </li>
                    <li>The <code>th:href</code> attribute allows us to (optionally) have a working static <code>href</code> attribute in our template, so that
                        our template links remained navigable by a browser when opened directly for prototyping purposes.
                    </li>
                </ul>
                <p>As was the case with the message syntax (<code>#{...}</code>), URL bases can also be the result of evaluating another expression:</p>
                <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span
                        class="token punctuation">&lt;</span>a</span> <span class="token attr-name"><span class="token namespace">th:</span>href</span><span
                        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@{${url}(orderId<span
                        class="token punctuation">=</span>${o.id})}<span class="token punctuation">"</span></span><span
                        class="token punctuation">&gt;</span></span>view<span class="token tag"><span class="token tag"><span
                        class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name"><span class="token namespace">th:</span>href</span><span
        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@{<span class="token punctuation">'</span>/details/<span
        class="token punctuation">'</span>+${user.login}(orderId<span class="token punctuation">=</span>${o.id})}<span class="token punctuation">"</span></span><span
        class="token punctuation">&gt;</span></span>view<span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span></code></pre>
                <section id="a-menu-for-our-home-page" class="level3"><h3>A menu for our home page</h3>
                    <p>Now that we know how to create link URLs, what about adding a small menu in our home page for some of the other pages in the site?</p>
                    <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span
                            class="token punctuation">&gt;</span></span>Please select an option<span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ol</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span
                                class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span
                                class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span
                                class="token punctuation">"</span>product/list.html<span class="token punctuation">"</span></span> <span
                                class="token attr-name"><span class="token namespace">th:</span>href</span><span class="token attr-value"><span
                                class="token punctuation">=</span><span class="token punctuation">"</span>@{/product/list}<span
                                class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Product List<span
                                class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span
                                class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span
                                class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span
                                class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span
                                class="token punctuation">"</span>order/list.html<span class="token punctuation">"</span></span> <span
                                class="token attr-name"><span class="token namespace">th:</span>href</span><span class="token attr-value"><span
                                class="token punctuation">=</span><span class="token punctuation">"</span>@{/order/list}<span class="token punctuation">"</span></span><span
                                class="token punctuation">&gt;</span></span>Order List<span class="token tag"><span class="token tag"><span
                                class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span
                                class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span
                                class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span
                                class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span
                                class="token punctuation">"</span>subscribe.html<span class="token punctuation">"</span></span> <span
                                class="token attr-name"><span class="token namespace">th:</span>href</span><span class="token attr-value"><span
                                class="token punctuation">=</span><span class="token punctuation">"</span>@{/subscribe}<span class="token punctuation">"</span></span><span
                                class="token punctuation">&gt;</span></span>Subscribe to our Newsletter<span class="token tag"><span class="token tag"><span
                                class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span
                                class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span
                                class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span
                                class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span
                                class="token punctuation">"</span>userprofile.html<span class="token punctuation">"</span></span> <span class="token attr-name"><span
                                class="token namespace">th:</span>href</span><span class="token attr-value"><span class="token punctuation">=</span><span
                                class="token punctuation">"</span>@{/userprofile}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>See User Profile<span
                                class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span
                                class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ol</span><span
        class="token punctuation">&gt;</span></span></code></pre>
                </section>
                <section id="server-root-relative-urls" class="level3"><h3>Server root relative URLs</h3>
                    <p>An additional syntax can be used to create server-root-relative (instead of context-root-relative) URLs in order to link to different
                        contexts in the same server. These URLs will be specified like <code>@{~/path/to/something}</code></p></section>
            </section>
            <section id="fragments" class="level2"><h2>4.5 Fragments</h2>
                <p>Fragment expressions are an easy way to represent fragments of markup and move them around templates. This allows us to replicate them, pass
                    them to other templates as arguments, and so on.</p>
                <p>The most common use is for fragment insertion using <code>th:insert</code> or <code>th:replace</code> (more on these in a later section):</p>
                <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span
                        class="token punctuation">&lt;</span>div</span> <span class="token attr-name"><span class="token namespace">th:</span>insert</span><span
                        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>~{commons :: main}<span
                        class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>...<span class="token tag"><span
                        class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></code></pre>
                <p>But they can be used anywhere, just as any other variable:</p>
                <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span
                        class="token punctuation">&lt;</span>div</span> <span class="token attr-name"><span class="token namespace">th:</span>with</span><span
                        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>frag<span
                        class="token punctuation">=</span>~{footer :: #main/text()}<span class="token punctuation">"</span></span><span
                        class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name"><span class="token namespace">th:</span>insert</span><span
        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${frag}<span class="token punctuation">"</span></span><span
        class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></code></pre>
                <p>Later in this tutorial there is an entire section devoted to Template Layout, including deeper explanation of fragment expressions.</p>
            </section>
            <section id="literals" class="level2"><h2>4.6 Literals</h2>
                <section id="text-literals" class="level3"><h3>Text literals</h3>
                    <p>Text literals are just character strings specified between single quotes. They can include any character, but you should escape any
                        single quotes inside them using <code>\'</code>.</p>
                    <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span
                            class="token punctuation">&gt;</span></span>
Now you are looking at a <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span
                                class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span
                                class="token punctuation">=</span><span class="token punctuation">"</span><span class="token punctuation">'</span>working web application<span
                                class="token punctuation">'</span><span class="token punctuation">"</span></span><span
                                class="token punctuation">&gt;</span></span>template file<span class="token tag"><span class="token tag"><span
                                class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>.
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span
        class="token punctuation">&gt;</span></span></code></pre>
                </section>
                <section id="number-literals" class="level3"><h3>Number literals</h3>
                    <p>Numeric literals are just that: numbers.</p>
                    <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span
                            class="token punctuation">&gt;</span></span>The year is <span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;</span>span</span> <span class="token attr-name"><span
                            class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span
                            class="token punctuation">"</span>2013<span class="token punctuation">"</span></span><span
                            class="token punctuation">&gt;</span></span>1492<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span
                            class="token punctuation">&gt;</span></span>.<span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>In two years, it will be <span
                                class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span
                                class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span
                                class="token punctuation">=</span><span class="token punctuation">"</span>2013 + 2<span
                                class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>1494<span class="token tag"><span
                                class="token tag"><span class="token punctuation">&lt;/</span>span</span><span
                                class="token punctuation">&gt;</span></span>.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span
                                class="token punctuation">&gt;</span></span></code></pre>
                </section>
                <section id="boolean-literals" class="level3"><h3>Boolean literals</h3>
                    <p>The boolean literals are <code>true</code> and <code>false</code>. For example:</p>
                    <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span
                            class="token attr-name"><span class="token namespace">th:</span>if</span><span class="token attr-value"><span
                            class="token punctuation">=</span><span class="token punctuation">"</span>${user.isAdmin()} <span class="token punctuation">=</span><span
                            class="token punctuation">=</span> false<span class="token punctuation">"</span></span><span
                            class="token punctuation">&gt;</span></span> ...</code></pre>
                    <p>In this example, the <code>== false</code> is written outside the braces, and so it is Thymeleaf that takes care of it. If it were
                        written inside the braces, it would be the responsibility of the OGNL/SpringEL engines:</p>
                    <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span
                            class="token attr-name"><span class="token namespace">th:</span>if</span><span class="token attr-value"><span
                            class="token punctuation">=</span><span class="token punctuation">"</span>${user.isAdmin() <span
                            class="token punctuation">=</span><span class="token punctuation">=</span> false}<span
                            class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span> ...</code></pre>
                </section>
                <section id="the-null-literal" class="level3"><h3>The null literal</h3>
                    <p>The <code>null</code> literal can be also used:</p>
                    <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span
                            class="token attr-name"><span class="token namespace">th:</span>if</span><span class="token attr-value"><span
                            class="token punctuation">=</span><span class="token punctuation">"</span>${variable.something} <span
                            class="token punctuation">=</span><span class="token punctuation">=</span> null<span class="token punctuation">"</span></span><span
                            class="token punctuation">&gt;</span></span> ...</code></pre>
                </section>
                <section id="literal-tokens" class="level3"><h3>Literal tokens</h3>
                    <p>Numeric, boolean and null literals are in fact a particular case of <em>literal tokens</em>.</p>
                    <p>These tokens allow a little bit of simplification in Standard Expressions. They work exactly the same as text literals
                        (<code>'...'</code>), but they only allow letters (<code>A-Z</code> and <code>a-z</code>), numbers (<code>0-9</code>), brackets
                        (<code>[</code> and <code>]</code>), dots (<code>.</code>), hyphens (<code>-</code>) and underscores (<code>_</code>). So no
                        whitespaces, no commas, etc.</p>
                    <p>The nice part? Tokens don’t need any quotes surrounding them. So we can do this:</p>
                    <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span
                            class="token attr-name"><span class="token namespace">th:</span>class</span><span class="token attr-value"><span
                            class="token punctuation">=</span><span class="token punctuation">"</span>content<span
                            class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>...<span class="token tag"><span
                            class="token tag"><span class="token punctuation">&lt;/</span>div</span><span
                            class="token punctuation">&gt;</span></span></code></pre>
                    <p>instead of:</p>
                    <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span
                            class="token attr-name"><span class="token namespace">th:</span>class</span><span class="token attr-value"><span
                            class="token punctuation">=</span><span class="token punctuation">"</span><span class="token punctuation">'</span>content<span
                            class="token punctuation">'</span><span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>...<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span
                            class="token punctuation">&gt;</span></span></code></pre>
                </section>
            </section>
            <section id="appending-texts" class="level2"><h2>4.7 Appending texts</h2>
                <p>Texts, no matter whether they are literals or the result of evaluating variable or message expressions, can be easily appended using the
                    <code>+</code> operator:</p>
                <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span
                        class="token punctuation">&lt;</span>span</span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span
                        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span><span
                        class="token punctuation">'</span>The name of the user is <span class="token punctuation">'</span> + ${user.name}<span
                        class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span></code></pre>
            </section>
            <section id="literal-substitutions" class="level2"><h2>4.8 Literal substitutions</h2>
                <p>Literal substitutions allow for an easy formatting of strings containing values from variables without the need to append literals with
                    <code>'...' + '...'</code>.</p>
                <p>These substitutions must be surrounded by vertical bars (<code>|</code>), like:</p>
                <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span
                        class="token punctuation">&lt;</span>span</span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span
                        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>|Welcome to our application, ${user.name}!|<span
                        class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span></code></pre>
                <p>Which is equivalent to:</p>
                <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span
                        class="token punctuation">&lt;</span>span</span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span
                        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span><span
                        class="token punctuation">'</span>Welcome to our application, <span class="token punctuation">'</span> + ${user.name} + <span
                        class="token punctuation">'</span>!<span class="token punctuation">'</span><span class="token punctuation">"</span></span><span
                        class="token punctuation">&gt;</span></span></code></pre>
                <p>Literal substitutions can be combined with other types of expressions:</p>
                <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span
                        class="token punctuation">&lt;</span>span</span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span
                        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${onevar} + <span
                        class="token punctuation">'</span> <span class="token punctuation">'</span> + |${twovar}, ${threevar}|<span
                        class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span></code></pre>
                <blockquote><p>Only variable/message expressions (<code>${...}</code>, <code>*{...}</code>, <code>#{...}</code>) are allowed inside
                    <code>|...|</code> literal substitutions. No other literals (<code>'...'</code>), boolean/numeric tokens, conditional expressions etc. are.
                </p></blockquote>
            </section>
            <section id="arithmetic-operations" class="level2"><h2>4.9 Arithmetic operations</h2>
                <p>Some arithmetic operations are also available: <code>+</code>, <code>-</code>, <code>*</code>, <code>/</code> and <code>%</code>.</p>
                <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span
                        class="token punctuation">&lt;</span>div</span> <span class="token attr-name"><span class="token namespace">th:</span>with</span><span
                        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>isEven<span
                        class="token punctuation">=</span>(${prodStat.count} % 2 <span class="token punctuation">=</span><span
                        class="token punctuation">=</span> 0)<span class="token punctuation">"</span></span><span
                        class="token punctuation">&gt;</span></span></code></pre>
                <p>Note that these operators can also be applied inside OGNL variable expressions themselves (and in that case will be executed by OGNL instead
                    of the Thymeleaf Standard Expression engine):</p>
                <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span
                        class="token punctuation">&lt;</span>div</span> <span class="token attr-name"><span class="token namespace">th:</span>with</span><span
                        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>isEven<span
                        class="token punctuation">=</span>${prodStat.count % 2 <span class="token punctuation">=</span><span class="token punctuation">=</span> 0}<span
                        class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span></code></pre>
                <p>Note that textual aliases exist for some of these operators: <code>div</code> (<code>/</code>), <code>mod</code> (<code>%</code>).</p>
            </section>
            <section id="comparators-and-equality" class="level2"><h2>4.10 Comparators and Equality</h2>
                <p>Values in expressions can be compared with the <code>&gt;</code>, <code>&lt;</code>, <code>&gt;=</code> and <code>&lt;=</code> symbols, and
                    the <code>==</code> and <code>!=</code> operators can be used to check for equality (or the lack of it). Note that XML establishes that the
                    <code>&lt;</code> and <code>&gt;</code> symbols should not be used in attribute values, and so they should be substituted by
                    <code>&amp;lt;</code> and <code>&amp;gt;</code>.</p>
                <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span
                        class="token punctuation">&lt;</span>div</span> <span class="token attr-name"><span class="token namespace">th:</span>if</span><span
                        class="token attr-value"><span class="token punctuation">=</span><span
                        class="token punctuation">"</span>${prodStat.count} &amp;gt; 1<span class="token punctuation">"</span></span><span
                        class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name"><span
        class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span
        class="token punctuation">"</span><span class="token punctuation">'</span>Execution mode is <span
        class="token punctuation">'</span> + ( (${execMode} <span class="token punctuation">=</span><span class="token punctuation">=</span> <span
        class="token punctuation">'</span>dev<span class="token punctuation">'</span>)? <span class="token punctuation">'</span>Development<span
        class="token punctuation">'</span> : <span class="token punctuation">'</span>Production<span class="token punctuation">'</span>)<span
        class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span></code></pre>
                <p>A simpler alternative may be using textual aliases that exist for some of these operators: <code>gt</code> (<code>&gt;</code>),
                    <code>lt</code> (<code>&lt;</code>), <code>ge</code> (<code>&gt;=</code>), <code>le</code> (<code>&lt;=</code>), <code>not</code>
                    (<code>!</code>). Also <code>eq</code> (<code>==</code>), <code>neq</code>/<code>ne</code> (<code>!=</code>).</p></section>
            <section id="conditional-expressions" class="level2"><h2>4.11 Conditional expressions</h2>
                <p><em>Conditional expressions</em> are meant to evaluate only one of two expressions depending on the result of evaluating a condition (which
                    is itself another expression).</p>
                <p>Let’s have a look at an example fragment (introducing another <em>attribute modifier</em>, <code>th:class</code>):</p>
                <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span
                        class="token punctuation">&lt;</span>tr</span> <span class="token attr-name"><span class="token namespace">th:</span>class</span><span
                        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${row.even}? <span
                        class="token punctuation">'</span>even<span class="token punctuation">'</span> : <span class="token punctuation">'</span>odd<span
                        class="token punctuation">'</span><span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
...
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span
        class="token punctuation">&gt;</span></span></code></pre>
                <p>All three parts of a conditional expression (<code>condition</code>, <code>then</code> and <code>else</code>) are themselves expressions,
                    which means that they can be variables (<code>${...}</code>, <code>*{...}</code>), messages (<code>#{...}</code>), URLs (<code>@{...}</code>)
                    or literals (<code>'...'</code>).</p>
                <p>Conditional expressions can also be nested using parentheses:</p>
                <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span
                        class="token punctuation">&lt;</span>tr</span> <span class="token attr-name"><span class="token namespace">th:</span>class</span><span
                        class="token attr-value"><span class="token punctuation">=</span><span
                        class="token punctuation">"</span>${row.even}? (${row.first}? <span class="token punctuation">'</span>first<span
                        class="token punctuation">'</span> : <span class="token punctuation">'</span>even<span class="token punctuation">'</span>) : <span
                        class="token punctuation">'</span>odd<span class="token punctuation">'</span><span class="token punctuation">"</span></span><span
                        class="token punctuation">&gt;</span></span>
...
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span
        class="token punctuation">&gt;</span></span></code></pre>
                <p>Else expressions can also be omitted, in which case a null value is returned if the condition is false:</p>
                <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span
                        class="token punctuation">&lt;</span>tr</span> <span class="token attr-name"><span class="token namespace">th:</span>class</span><span
                        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${row.even}? <span
                        class="token punctuation">'</span>alt<span class="token punctuation">'</span><span class="token punctuation">"</span></span><span
                        class="token punctuation">&gt;</span></span>
...
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span
        class="token punctuation">&gt;</span></span></code></pre>
            </section>
            <section id="default-expressions-elvis-operator" class="level2"><h2>4.12 Default expressions (Elvis operator)</h2>
                <p>A <em>default expression</em> is a special kind of conditional value without a <em>then</em> part. It is equivalent to the <em>Elvis
                    operator</em> present in some languages like Groovy, lets you specify two expressions: the first one is used if it doesn’t evaluate to null,
                    but if it does then the second one is used.</p>
                <p>Let’s see it in action in our user profile page:</p>
                <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span
                        class="token punctuation">&lt;</span>div</span> <span class="token attr-name"><span class="token namespace">th:</span>object</span><span
                        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${session.user}<span
                        class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
...
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>Age: <span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name"><span
                            class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span
                            class="token punctuation">"</span>*{age}?: <span class="token punctuation">'</span>(no age specified)<span
                            class="token punctuation">'</span><span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>27<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>.<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span
                            class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></code></pre>
                <p>As you can see, the operator is <code>?:</code>, and we use it here to specify a default value for a name (a literal value, in this case)
                    only if the result of evaluating <code>*{age}</code> is null. This is therefore equivalent to:</p>
                <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span
                        class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>Age: <span class="token tag"><span
                        class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name"><span
                        class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span
                        class="token punctuation">"</span>*{age !<span class="token punctuation">=</span> null}? *{age} : <span
                        class="token punctuation">'</span>(no age specified)<span class="token punctuation">'</span><span
                        class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>27<span class="token tag"><span
                        class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>.<span
                        class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span
                        class="token punctuation">&gt;</span></span></code></pre>
                <p>As with conditional values, they can contain nested expressions between parentheses:</p>
                <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span
                        class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>
Name:
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name"><span
        class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span
        class="token punctuation">"</span>*{firstName}?: (*{admin}? <span class="token punctuation">'</span>Admin<span class="token punctuation">'</span> : #{default.username})<span
        class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Sebastian<span class="token tag"><span
                            class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span
        class="token punctuation">&gt;</span></span></code></pre>
            </section>
            <section id="the-no-operation-token" class="level2"><h2>4.13 The No-Operation token</h2>
                <p>The No-Operation token is represented by an underscore symbol (<code>_</code>).</p>
                <p>The idea behind this token is to specify that the desired result for an expression is to <em>do nothing</em>, i.e.&nbsp;do exactly as if the
                    processable attribute (e.g.&nbsp;<code>th:text</code>) was not there at all.</p>
                <p>Among other possibilities, this allows developers to use prototyping text as default values. For example, instead of:</p>
                <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span
                        class="token punctuation">&lt;</span>span</span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span
                        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${user.name} ?: <span
                        class="token punctuation">'</span>no user authenticated<span class="token punctuation">'</span><span class="token punctuation">"</span></span><span
                        class="token punctuation">&gt;</span></span>...<span class="token tag"><span class="token tag"><span
                        class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span></code></pre>
                <p>…we can directly use <em>‘no user authenticated’</em> as a prototyping text, which results in code that is both more concise and versatile
                    from a design standpoint:</p>
                <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span
                        class="token punctuation">&lt;</span>span</span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span
                        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${user.name} ?: _<span
                        class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>no user authenticated<span class="token tag"><span
                        class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span></code></pre>
            </section>
            <section id="data-conversion-formatting" class="level2"><h2>4.14 Data Conversion / Formatting</h2>
                <p>Thymeleaf defines a <em>double-brace</em> syntax for variable (<code>${...}</code>) and selection (<code>*{...}</code>) expressions that
                    allows us to apply <em>data conversion</em> by means of a configured <em>conversion service</em>.</p>
                <p>It basically goes like this:</p>
                <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span
                        class="token punctuation">&lt;</span>td</span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span
                        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${{ user.lastAccessDate }}<span
                        class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>...<span class="token tag"><span
                        class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span></code></pre>
                <p>Noticed the double brace there?: <code>${{ ... }}</code>. That instructs Thymeleaf to pass the result of the <code>user.lastAccessDate</code>
                    expression to the <em>conversion service</em> and asks it to perform a <strong>formatting operation</strong> (a conversion to
                    <code>String</code>) before writing the result.</p>
                <p>Assuming that <code>user.lastAccessDate</code> is of type <code>java.util.Calendar</code>, if a <em>conversion service</em> (implementation
                    of <code>IStandardConversionService</code>) has been registered and contains a valid conversion for <code>Calendar -&gt; String</code>, it
                    will be applied.</p>
                <p>The default implementation of <code>IStandardConversionService</code> (the <code>StandardConversionService</code> class) simply executes
                    <code>.toString()</code> on any object converted to <code>String</code>. For more information on how to register a custom <em>conversion
                        service</em> implementation, have a look at the <a href="#more-on-configuration">More on Configuration</a> section.</p>
                <blockquote><p>The official thymeleaf-spring3 and thymeleaf-spring4 integration packages transparently integrate Thymeleaf’s conversion service
                    mechanism with Spring’s own <em>Conversion Service</em> infrastructure, so that conversion services and formatters declared in the Spring
                    configuration will be made automatically available to <code>${{ ... }}</code> and <code>*{{ ... }}</code> expressions.</p></blockquote>
            </section>
            <section id="preprocessing" class="level2"><h2>4.15 Preprocessing</h2>
                <p>In addition to all these features for expression processing, Thymeleaf has the feature of <em>preprocessing</em> expressions.</p>
                <p>Preprocessing is an execution of the expressions done before the normal one that allows for modification of the expression that will
                    eventually be executed.</p>
                <p>Preprocessed expressions are exactly like normal ones, but appear surrounded by a double underscore symbol (like
                    <code>__${expression}__</code>).</p>
                <p>Let’s imagine we have an i18n <code>Messages_fr.properties</code> entry containing an OGNL expression calling a language-specific static
                    method, like:</p>
                <pre class=" language-java"><code class=" language-java">article<span class="token punctuation">.</span>text<span
                        class="token operator">=</span><span class="token annotation punctuation">@myapp</span><span class="token punctuation">.</span>translator<span
                        class="token punctuation">.</span>Translator<span class="token annotation punctuation">@translateToFrench</span><span
                        class="token punctuation">(</span><span class="token punctuation">{</span><span class="token number">0</span><span
                        class="token punctuation">}</span><span class="token punctuation">)</span></code></pre>
                <p>…and a <code>Messages_es.properties equivalent</code>:</p>
                <pre class=" language-java"><code class=" language-java">article<span class="token punctuation">.</span>text<span
                        class="token operator">=</span><span class="token annotation punctuation">@myapp</span><span class="token punctuation">.</span>translator<span
                        class="token punctuation">.</span>Translator<span class="token annotation punctuation">@translateToSpanish</span><span
                        class="token punctuation">(</span><span class="token punctuation">{</span><span class="token number">0</span><span
                        class="token punctuation">}</span><span class="token punctuation">)</span></code></pre>
                <p>We can create a fragment of markup that evaluates one expression or the other depending on the locale. For this, we will first select the
                    expression (by preprocessing) and then let Thymeleaf execute it:</p>
                <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span
                        class="token punctuation">&lt;</span>p</span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span
                        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${__#{article.text(<span
                        class="token punctuation">'</span>textVar<span class="token punctuation">'</span>)}__}<span
                        class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Some text here...<span
                        class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span
                        class="token punctuation">&gt;</span></span></code></pre>
                <p>Note that the preprocessing step for a French locale will be creating the following equivalent:</p>
                <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span
                        class="token punctuation">&lt;</span>p</span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span
                        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${@myapp.translator.Translator@translateToFrench(textVar)}<span
                        class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Some text here...<span
                        class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span
                        class="token punctuation">&gt;</span></span></code></pre>
                <p>The preprocessing String <code>__</code> can be escaped in attributes using <code>\_\_</code>.</p></section>
        </section>
        <section id="setting-attribute-values" class="level1"><h1>5 Setting Attribute Values</h1>
            <p>This chapter will explain the way in which we can set (or modify) values of attributes in our markup.</p>
            <section id="setting-the-value-of-any-attribute" class="level2"><h2>5.1 Setting the value of any attribute</h2>
                <p>Say our website publishes a newsletter, and we want our users to be able to subscribe to it, so we create a <code>/WEB-INF/templates/subscribe.html</code>
                    template with a form:</p>
                <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span
                        class="token punctuation">&lt;</span>form</span> <span class="token attr-name">action</span><span class="token attr-value"><span
                        class="token punctuation">=</span><span class="token punctuation">"</span>subscribe.html<span
                        class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>fieldset</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span
        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text<span
        class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span
        class="token punctuation">=</span><span class="token punctuation">"</span>email<span class="token punctuation">"</span></span> <span
        class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span
        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span> <span
        class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Subscribe!<span
        class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>fieldset</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span></code></pre>
                <p>As with Thymeleaf, this template starts off more like a static prototype than it does a template for a web application. First, the <code>action</code>
                    attribute in our form statically links to the template file itself, so that there is no place for useful URL rewriting. Second, the <code>value</code>
                    attribute in the submit button makes it display a text in English, but we’d like it to be internationalized.</p>
                <p>Enter then the <code>th:attr</code> attribute, and its ability to change the value of attributes of the tags it is set in:</p>
                <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span
                        class="token punctuation">&lt;</span>form</span> <span class="token attr-name">action</span><span class="token attr-value"><span
                        class="token punctuation">=</span><span class="token punctuation">"</span>subscribe.html<span class="token punctuation">"</span></span> <span
                        class="token attr-name"><span class="token namespace">th:</span>attr</span><span class="token attr-value"><span
                        class="token punctuation">=</span><span class="token punctuation">"</span>action<span
                        class="token punctuation">=</span>@{/subscribe}<span class="token punctuation">"</span></span><span
                        class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>fieldset</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span
        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text<span
        class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span
        class="token punctuation">=</span><span class="token punctuation">"</span>email<span class="token punctuation">"</span></span> <span
        class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span
        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span> <span
        class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Subscribe!<span
        class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">th:</span>attr</span><span
        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>value<span class="token punctuation">=</span>#{subscribe.submit}<span
        class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>fieldset</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span></code></pre>
                <p>The concept is quite straightforward: <code>th:attr</code> simply takes an expression that assigns a value to an attribute. Having created
                    the corresponding controller and messages files, the result of processing this file will be:</p>
                <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span
                        class="token punctuation">&lt;</span>form</span> <span class="token attr-name">action</span><span class="token attr-value"><span
                        class="token punctuation">=</span><span class="token punctuation">"</span>/gtvg/subscribe<span class="token punctuation">"</span></span><span
                        class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>fieldset</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span
        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text<span
        class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span
        class="token punctuation">=</span><span class="token punctuation">"</span>email<span class="token punctuation">"</span></span> <span
        class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span
        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span> <span
        class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>¡Suscríbe!<span
        class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>fieldset</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span></code></pre>
                <p>Besides the new attribute values, you can also see that the application context name has been automatically prefixed to the URL base in
                    <code>/gtvg/subscribe</code>, as explained in the previous chapter.</p>
                <p>But what if we wanted to set more than one attribute at a time? XML rules do not allow you to set an attribute twice in a tag, so <code>th:attr</code>
                    will take a comma-separated list of assignments, like:</p>
                <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span
                        class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span
                        class="token punctuation">=</span><span class="token punctuation">"</span>../../images/gtvglogo.png<span
                        class="token punctuation">"</span></span>
 <span class="token attr-name"><span class="token namespace">th:</span>attr</span><span class="token attr-value"><span class="token punctuation">=</span><span
                            class="token punctuation">"</span>src<span class="token punctuation">=</span>@{/images/gtvglogo.png},title<span
                            class="token punctuation">=</span>#{logo},alt<span class="token punctuation">=</span>#{logo}<span class="token punctuation">"</span></span> <span
                            class="token punctuation">/&gt;</span></span></code></pre>
                <p>Given the required messages files, this will output:</p>
                <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span
                        class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span
                        class="token punctuation">=</span><span class="token punctuation">"</span>/gtgv/images/gtvglogo.png<span
                        class="token punctuation">"</span></span> <span class="token attr-name">title</span><span class="token attr-value"><span
                        class="token punctuation">=</span><span class="token punctuation">"</span>Logo de Good Thymes<span
                        class="token punctuation">"</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span
                        class="token punctuation">=</span><span class="token punctuation">"</span>Logo de Good Thymes<span
                        class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span></code></pre>
            </section>
            <section id="setting-value-to-specific-attributes" class="level2"><h2>5.2 Setting value to specific attributes</h2>
                <p>By now, you might be thinking that something like:</p>
                <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span
                        class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span
                        class="token punctuation">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span> <span
                        class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span
                        class="token punctuation">"</span>Subscribe!<span class="token punctuation">"</span></span> <span class="token attr-name"><span
                        class="token namespace">th:</span>attr</span><span class="token attr-value"><span class="token punctuation">=</span><span
                        class="token punctuation">"</span>value<span class="token punctuation">=</span>#{subscribe.submit}<span
                        class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span></code></pre>
                <p>…is quite an ugly piece of markup. Specifying an assignment inside an attribute’s value can be very practical, but it is not the most elegant
                    way of creating templates if you have to do it all the time.</p>
                <p>Thymeleaf agrees with you, and that’s why <code>th:attr</code> is scarcely used in templates. Normally, you will be using other
                    <code>th:*</code> attributes whose task is setting specific tag attributes (and not just any attribute like <code>th:attr</code>).</p>
                <p>For example, to set the <code>value</code> attribute, use <code>th:value</code>:</p>
                <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span
                        class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span
                        class="token punctuation">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span> <span
                        class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span
                        class="token punctuation">"</span>Subscribe!<span class="token punctuation">"</span></span> <span class="token attr-name"><span
                        class="token namespace">th:</span>value</span><span class="token attr-value"><span class="token punctuation">=</span><span
                        class="token punctuation">"</span>#{subscribe.submit}<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span></code></pre>
                <p>This looks much better! Let’s try and do the same to the <code>action</code> attribute in the <code>form</code> tag:</p>
                <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span
                        class="token punctuation">&lt;</span>form</span> <span class="token attr-name">action</span><span class="token attr-value"><span
                        class="token punctuation">=</span><span class="token punctuation">"</span>subscribe.html<span class="token punctuation">"</span></span> <span
                        class="token attr-name"><span class="token namespace">th:</span>action</span><span class="token attr-value"><span
                        class="token punctuation">=</span><span class="token punctuation">"</span>@{/subscribe}<span
                        class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span></code></pre>
                <p>And do you remember those <code>th:href</code> we put in our <code>home.html</code> before? They are exactly this same kind of attributes:
                </p>
                <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span
                        class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span
                        class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span
                        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>product/list.html<span
                        class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">th:</span>href</span><span
                        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@{/product/list}<span
                        class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Product List<span class="token tag"><span
                        class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span
                        class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span
                        class="token punctuation">&gt;</span></span></code></pre>
                <p>There are quite a lot of attributes like these, each of them targeting a specific HTML5 attribute:</p>
                <div class="table-scroller">
                    <table>
                        <tbody>
                        <tr class="odd">
                            <td style="text-align: left;"><code>th:abbr</code></td>
                            <td style="text-align: left;"><code>th:accept</code></td>
                            <td style="text-align: left;"><code>th:accept-charset</code></td>
                        </tr>
                        <tr class="even">
                            <td style="text-align: left;"><code>th:accesskey</code></td>
                            <td style="text-align: left;"><code>th:action</code></td>
                            <td style="text-align: left;"><code>th:align</code></td>
                        </tr>
                        <tr class="odd">
                            <td style="text-align: left;"><code>th:alt</code></td>
                            <td style="text-align: left;"><code>th:archive</code></td>
                            <td style="text-align: left;"><code>th:audio</code></td>
                        </tr>
                        <tr class="even">
                            <td style="text-align: left;"><code>th:autocomplete</code></td>
                            <td style="text-align: left;"><code>th:axis</code></td>
                            <td style="text-align: left;"><code>th:background</code></td>
                        </tr>
                        <tr class="odd">
                            <td style="text-align: left;"><code>th:bgcolor</code></td>
                            <td style="text-align: left;"><code>th:border</code></td>
                            <td style="text-align: left;"><code>th:cellpadding</code></td>
                        </tr>
                        <tr class="even">
                            <td style="text-align: left;"><code>th:cellspacing</code></td>
                            <td style="text-align: left;"><code>th:challenge</code></td>
                            <td style="text-align: left;"><code>th:charset</code></td>
                        </tr>
                        <tr class="odd">
                            <td style="text-align: left;"><code>th:cite</code></td>
                            <td style="text-align: left;"><code>th:class</code></td>
                            <td style="text-align: left;"><code>th:classid</code></td>
                        </tr>
                        <tr class="even">
                            <td style="text-align: left;"><code>th:codebase</code></td>
                            <td style="text-align: left;"><code>th:codetype</code></td>
                            <td style="text-align: left;"><code>th:cols</code></td>
                        </tr>
                        <tr class="odd">
                            <td style="text-align: left;"><code>th:colspan</code></td>
                            <td style="text-align: left;"><code>th:compact</code></td>
                            <td style="text-align: left;"><code>th:content</code></td>
                        </tr>
                        <tr class="even">
                            <td style="text-align: left;"><code>th:contenteditable</code></td>
                            <td style="text-align: left;"><code>th:contextmenu</code></td>
                            <td style="text-align: left;"><code>th:data</code></td>
                        </tr>
                        <tr class="odd">
                            <td style="text-align: left;"><code>th:datetime</code></td>
                            <td style="text-align: left;"><code>th:dir</code></td>
                            <td style="text-align: left;"><code>th:draggable</code></td>
                        </tr>
                        <tr class="even">
                            <td style="text-align: left;"><code>th:dropzone</code></td>
                            <td style="text-align: left;"><code>th:enctype</code></td>
                            <td style="text-align: left;"><code>th:for</code></td>
                        </tr>
                        <tr class="odd">
                            <td style="text-align: left;"><code>th:form</code></td>
                            <td style="text-align: left;"><code>th:formaction</code></td>
                            <td style="text-align: left;"><code>th:formenctype</code></td>
                        </tr>
                        <tr class="even">
                            <td style="text-align: left;"><code>th:formmethod</code></td>
                            <td style="text-align: left;"><code>th:formtarget</code></td>
                            <td style="text-align: left;"><code>th:fragment</code></td>
                        </tr>
                        <tr class="odd">
                            <td style="text-align: left;"><code>th:frame</code></td>
                            <td style="text-align: left;"><code>th:frameborder</code></td>
                            <td style="text-align: left;"><code>th:headers</code></td>
                        </tr>
                        <tr class="even">
                            <td style="text-align: left;"><code>th:height</code></td>
                            <td style="text-align: left;"><code>th:high</code></td>
                            <td style="text-align: left;"><code>th:href</code></td>
                        </tr>
                        <tr class="odd">
                            <td style="text-align: left;"><code>th:hreflang</code></td>
                            <td style="text-align: left;"><code>th:hspace</code></td>
                            <td style="text-align: left;"><code>th:http-equiv</code></td>
                        </tr>
                        <tr class="even">
                            <td style="text-align: left;"><code>th:icon</code></td>
                            <td style="text-align: left;"><code>th:id</code></td>
                            <td style="text-align: left;"><code>th:inline</code></td>
                        </tr>
                        <tr class="odd">
                            <td style="text-align: left;"><code>th:keytype</code></td>
                            <td style="text-align: left;"><code>th:kind</code></td>
                            <td style="text-align: left;"><code>th:label</code></td>
                        </tr>
                        <tr class="even">
                            <td style="text-align: left;"><code>th:lang</code></td>
                            <td style="text-align: left;"><code>th:list</code></td>
                            <td style="text-align: left;"><code>th:longdesc</code></td>
                        </tr>
                        <tr class="odd">
                            <td style="text-align: left;"><code>th:low</code></td>
                            <td style="text-align: left;"><code>th:manifest</code></td>
                            <td style="text-align: left;"><code>th:marginheight</code></td>
                        </tr>
                        <tr class="even">
                            <td style="text-align: left;"><code>th:marginwidth</code></td>
                            <td style="text-align: left;"><code>th:max</code></td>
                            <td style="text-align: left;"><code>th:maxlength</code></td>
                        </tr>
                        <tr class="odd">
                            <td style="text-align: left;"><code>th:media</code></td>
                            <td style="text-align: left;"><code>th:method</code></td>
                            <td style="text-align: left;"><code>th:min</code></td>
                        </tr>
                        <tr class="even">
                            <td style="text-align: left;"><code>th:name</code></td>
                            <td style="text-align: left;"><code>th:onabort</code></td>
                            <td style="text-align: left;"><code>th:onafterprint</code></td>
                        </tr>
                        <tr class="odd">
                            <td style="text-align: left;"><code>th:onbeforeprint</code></td>
                            <td style="text-align: left;"><code>th:onbeforeunload</code></td>
                            <td style="text-align: left;"><code>th:onblur</code></td>
                        </tr>
                        <tr class="even">
                            <td style="text-align: left;"><code>th:oncanplay</code></td>
                            <td style="text-align: left;"><code>th:oncanplaythrough</code></td>
                            <td style="text-align: left;"><code>th:onchange</code></td>
                        </tr>
                        <tr class="odd">
                            <td style="text-align: left;"><code>th:onclick</code></td>
                            <td style="text-align: left;"><code>th:oncontextmenu</code></td>
                            <td style="text-align: left;"><code>th:ondblclick</code></td>
                        </tr>
                        <tr class="even">
                            <td style="text-align: left;"><code>th:ondrag</code></td>
                            <td style="text-align: left;"><code>th:ondragend</code></td>
                            <td style="text-align: left;"><code>th:ondragenter</code></td>
                        </tr>
                        <tr class="odd">
                            <td style="text-align: left;"><code>th:ondragleave</code></td>
                            <td style="text-align: left;"><code>th:ondragover</code></td>
                            <td style="text-align: left;"><code>th:ondragstart</code></td>
                        </tr>
                        <tr class="even">
                            <td style="text-align: left;"><code>th:ondrop</code></td>
                            <td style="text-align: left;"><code>th:ondurationchange</code></td>
                            <td style="text-align: left;"><code>th:onemptied</code></td>
                        </tr>
                        <tr class="odd">
                            <td style="text-align: left;"><code>th:onended</code></td>
                            <td style="text-align: left;"><code>th:onerror</code></td>
                            <td style="text-align: left;"><code>th:onfocus</code></td>
                        </tr>
                        <tr class="even">
                            <td style="text-align: left;"><code>th:onformchange</code></td>
                            <td style="text-align: left;"><code>th:onforminput</code></td>
                            <td style="text-align: left;"><code>th:onhashchange</code></td>
                        </tr>
                        <tr class="odd">
                            <td style="text-align: left;"><code>th:oninput</code></td>
                            <td style="text-align: left;"><code>th:oninvalid</code></td>
                            <td style="text-align: left;"><code>th:onkeydown</code></td>
                        </tr>
                        <tr class="even">
                            <td style="text-align: left;"><code>th:onkeypress</code></td>
                            <td style="text-align: left;"><code>th:onkeyup</code></td>
                            <td style="text-align: left;"><code>th:onload</code></td>
                        </tr>
                        <tr class="odd">
                            <td style="text-align: left;"><code>th:onloadeddata</code></td>
                            <td style="text-align: left;"><code>th:onloadedmetadata</code></td>
                            <td style="text-align: left;"><code>th:onloadstart</code></td>
                        </tr>
                        <tr class="even">
                            <td style="text-align: left;"><code>th:onmessage</code></td>
                            <td style="text-align: left;"><code>th:onmousedown</code></td>
                            <td style="text-align: left;"><code>th:onmousemove</code></td>
                        </tr>
                        <tr class="odd">
                            <td style="text-align: left;"><code>th:onmouseout</code></td>
                            <td style="text-align: left;"><code>th:onmouseover</code></td>
                            <td style="text-align: left;"><code>th:onmouseup</code></td>
                        </tr>
                        <tr class="even">
                            <td style="text-align: left;"><code>th:onmousewheel</code></td>
                            <td style="text-align: left;"><code>th:onoffline</code></td>
                            <td style="text-align: left;"><code>th:ononline</code></td>
                        </tr>
                        <tr class="odd">
                            <td style="text-align: left;"><code>th:onpause</code></td>
                            <td style="text-align: left;"><code>th:onplay</code></td>
                            <td style="text-align: left;"><code>th:onplaying</code></td>
                        </tr>
                        <tr class="even">
                            <td style="text-align: left;"><code>th:onpopstate</code></td>
                            <td style="text-align: left;"><code>th:onprogress</code></td>
                            <td style="text-align: left;"><code>th:onratechange</code></td>
                        </tr>
                        <tr class="odd">
                            <td style="text-align: left;"><code>th:onreadystatechange</code></td>
                            <td style="text-align: left;"><code>th:onredo</code></td>
                            <td style="text-align: left;"><code>th:onreset</code></td>
                        </tr>
                        <tr class="even">
                            <td style="text-align: left;"><code>th:onresize</code></td>
                            <td style="text-align: left;"><code>th:onscroll</code></td>
                            <td style="text-align: left;"><code>th:onseeked</code></td>
                        </tr>
                        <tr class="odd">
                            <td style="text-align: left;"><code>th:onseeking</code></td>
                            <td style="text-align: left;"><code>th:onselect</code></td>
                            <td style="text-align: left;"><code>th:onshow</code></td>
                        </tr>
                        <tr class="even">
                            <td style="text-align: left;"><code>th:onstalled</code></td>
                            <td style="text-align: left;"><code>th:onstorage</code></td>
                            <td style="text-align: left;"><code>th:onsubmit</code></td>
                        </tr>
                        <tr class="odd">
                            <td style="text-align: left;"><code>th:onsuspend</code></td>
                            <td style="text-align: left;"><code>th:ontimeupdate</code></td>
                            <td style="text-align: left;"><code>th:onundo</code></td>
                        </tr>
                        <tr class="even">
                            <td style="text-align: left;"><code>th:onunload</code></td>
                            <td style="text-align: left;"><code>th:onvolumechange</code></td>
                            <td style="text-align: left;"><code>th:onwaiting</code></td>
                        </tr>
                        <tr class="odd">
                            <td style="text-align: left;"><code>th:optimum</code></td>
                            <td style="text-align: left;"><code>th:pattern</code></td>
                            <td style="text-align: left;"><code>th:placeholder</code></td>
                        </tr>
                        <tr class="even">
                            <td style="text-align: left;"><code>th:poster</code></td>
                            <td style="text-align: left;"><code>th:preload</code></td>
                            <td style="text-align: left;"><code>th:radiogroup</code></td>
                        </tr>
                        <tr class="odd">
                            <td style="text-align: left;"><code>th:rel</code></td>
                            <td style="text-align: left;"><code>th:rev</code></td>
                            <td style="text-align: left;"><code>th:rows</code></td>
                        </tr>
                        <tr class="even">
                            <td style="text-align: left;"><code>th:rowspan</code></td>
                            <td style="text-align: left;"><code>th:rules</code></td>
                            <td style="text-align: left;"><code>th:sandbox</code></td>
                        </tr>
                        <tr class="odd">
                            <td style="text-align: left;"><code>th:scheme</code></td>
                            <td style="text-align: left;"><code>th:scope</code></td>
                            <td style="text-align: left;"><code>th:scrolling</code></td>
                        </tr>
                        <tr class="even">
                            <td style="text-align: left;"><code>th:size</code></td>
                            <td style="text-align: left;"><code>th:sizes</code></td>
                            <td style="text-align: left;"><code>th:span</code></td>
                        </tr>
                        <tr class="odd">
                            <td style="text-align: left;"><code>th:spellcheck</code></td>
                            <td style="text-align: left;"><code>th:src</code></td>
                            <td style="text-align: left;"><code>th:srclang</code></td>
                        </tr>
                        <tr class="even">
                            <td style="text-align: left;"><code>th:standby</code></td>
                            <td style="text-align: left;"><code>th:start</code></td>
                            <td style="text-align: left;"><code>th:step</code></td>
                        </tr>
                        <tr class="odd">
                            <td style="text-align: left;"><code>th:style</code></td>
                            <td style="text-align: left;"><code>th:summary</code></td>
                            <td style="text-align: left;"><code>th:tabindex</code></td>
                        </tr>
                        <tr class="even">
                            <td style="text-align: left;"><code>th:target</code></td>
                            <td style="text-align: left;"><code>th:title</code></td>
                            <td style="text-align: left;"><code>th:type</code></td>
                        </tr>
                        <tr class="odd">
                            <td style="text-align: left;"><code>th:usemap</code></td>
                            <td style="text-align: left;"><code>th:value</code></td>
                            <td style="text-align: left;"><code>th:valuetype</code></td>
                        </tr>
                        <tr class="even">
                            <td style="text-align: left;"><code>th:vspace</code></td>
                            <td style="text-align: left;"><code>th:width</code></td>
                            <td style="text-align: left;"><code>th:wrap</code></td>
                        </tr>
                        <tr class="odd">
                            <td style="text-align: left;"><code>th:xmlbase</code></td>
                            <td style="text-align: left;"><code>th:xmllang</code></td>
                            <td style="text-align: left;"><code>th:xmlspace</code></td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </section>
            <section id="setting-more-than-one-value-at-a-time" class="level2"><h2>5.3 Setting more than one value at a time</h2>
                <p>There are two rather special attributes called <code>th:alt-title</code> and <code>th:lang-xmllang</code> which can be used for setting two
                    attributes to the same value at the same time. Specifically:</p>
                <ul>
                    <li><code>th:alt-title</code> will set <code>alt</code> and <code>title</code>.</li>
                    <li><code>th:lang-xmllang</code> will set <code>lang</code> and <code>xml:lang</code>.</li>
                </ul>
                <p>For our GTVG home page, this will allow us to substitute this:</p>
                <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span
                        class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span
                        class="token punctuation">=</span><span class="token punctuation">"</span>../../images/gtvglogo.png<span
                        class="token punctuation">"</span></span>
 <span class="token attr-name"><span class="token namespace">th:</span>attr</span><span class="token attr-value"><span class="token punctuation">=</span><span
                            class="token punctuation">"</span>src<span class="token punctuation">=</span>@{/images/gtvglogo.png},title<span
                            class="token punctuation">=</span>#{logo},alt<span class="token punctuation">=</span>#{logo}<span class="token punctuation">"</span></span> <span
                            class="token punctuation">/&gt;</span></span></code></pre>
                <p>…or this, which is equivalent:</p>
                <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span
                        class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span
                        class="token punctuation">=</span><span class="token punctuation">"</span>../../images/gtvglogo.png<span
                        class="token punctuation">"</span></span>
 <span class="token attr-name"><span class="token namespace">th:</span>src</span><span class="token attr-value"><span class="token punctuation">=</span><span
                            class="token punctuation">"</span>@{/images/gtvglogo.png}<span class="token punctuation">"</span></span> <span
                            class="token attr-name"><span class="token namespace">th:</span>title</span><span class="token attr-value"><span
                            class="token punctuation">=</span><span class="token punctuation">"</span>#{logo}<span
                            class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">th:</span>alt</span><span
                            class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>#{logo}<span
                            class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span></code></pre>
                <p>…with this:</p>
                <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span
                        class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span
                        class="token punctuation">=</span><span class="token punctuation">"</span>../../images/gtvglogo.png<span
                        class="token punctuation">"</span></span>
 <span class="token attr-name"><span class="token namespace">th:</span>src</span><span class="token attr-value"><span class="token punctuation">=</span><span
                            class="token punctuation">"</span>@{/images/gtvglogo.png}<span class="token punctuation">"</span></span> <span
                            class="token attr-name"><span class="token namespace">th:</span>alt-title</span><span class="token attr-value"><span
                            class="token punctuation">=</span><span class="token punctuation">"</span>#{logo}<span
                            class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span></code></pre>
            </section>
            <section id="appending-and-prepending" class="level2"><h2>5.4 Appending and prepending</h2>
                <p>Thymeleaf also offers the <code>th:attrappend</code> and <code>th:attrprepend</code> attributes, which append (suffix) or prepend (prefix)
                    the result of their evaluation to the existing attribute values.</p>
                <p>For example, you might want to store the name of a CSS class to be added (not set, just added) to one of your buttons in a context variable,
                    because the specific CSS class to be used would depend on something that the user did before:</p>
                <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span
                        class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span
                        class="token punctuation">=</span><span class="token punctuation">"</span>button<span class="token punctuation">"</span></span> <span
                        class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span
                        class="token punctuation">"</span>Do it!<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span
                        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>btn<span
                        class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">th:</span>attrappend</span><span
                        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>class<span
                        class="token punctuation">=</span>${<span class="token punctuation">'</span> <span class="token punctuation">'</span> + cssStyle}<span
                        class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span></code></pre>
                <p>If you process this template with the <code>cssStyle</code> variable set to <code>"warning"</code>, you will get:</p>
                <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span
                        class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span
                        class="token punctuation">=</span><span class="token punctuation">"</span>button<span class="token punctuation">"</span></span> <span
                        class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span
                        class="token punctuation">"</span>Do it!<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span
                        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>btn warning<span
                        class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span></code></pre>
                <p>There are also two specific <em>appending attributes</em> in the Standard Dialect: the <code>th:classappend</code> and
                    <code>th:styleappend</code> attributes, which are used for adding a CSS class or a fragment of <em>style</em> to an element without
                    overwriting the existing ones:</p>
                <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span
                        class="token punctuation">&lt;</span>tr</span> <span class="token attr-name"><span class="token namespace">th:</span>each</span><span
                        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>prod : ${prods}<span
                        class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span
                        class="token punctuation">=</span><span class="token punctuation">"</span>row<span class="token punctuation">"</span></span> <span
                        class="token attr-name"><span class="token namespace">th:</span>classappend</span><span class="token attr-value"><span
                        class="token punctuation">=</span><span class="token punctuation">"</span>${prodStat.odd}? <span
                        class="token punctuation">'</span>odd<span class="token punctuation">'</span><span class="token punctuation">"</span></span><span
                        class="token punctuation">&gt;</span></span></code></pre>
                <p>(Don’t worry about that <code>th:each</code> attribute. It is an <em>iterating attribute</em> and we will talk about it later.)</p></section>
            <section id="fixed-value-boolean-attributes" class="level2"><h2>5.5 Fixed-value boolean attributes</h2>
                <p>HTML has the concept of <em>boolean attributes</em>, attributes that have no value and the presence of one means that value is “true”. In
                    XHTML, these attributes take just 1 value, which is itself.</p>
                <p>For example, <code>checked</code>:</p>
                <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span
                        class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span
                        class="token punctuation">=</span><span class="token punctuation">"</span>checkbox<span class="token punctuation">"</span></span> <span
                        class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span
                        class="token punctuation">"</span>option2<span class="token punctuation">"</span></span> <span
                        class="token attr-name">checked</span> <span class="token punctuation">/&gt;</span></span> <span class="token comment"
                                                                                                                         spellcheck="true">&lt;!-- HTML --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span
        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>checkbox<span
        class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span
        class="token punctuation">=</span><span class="token punctuation">"</span>option1<span class="token punctuation">"</span></span> <span
        class="token attr-name">checked</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>checked<span
        class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span> <span class="token comment" spellcheck="true">&lt;!-- XHTML --&gt;</span></code></pre>
                <p>The Standard Dialect includes attributes that allow you to set these attributes by evaluating a condition, so that if evaluated to true, the
                    attribute will be set to its fixed value, and if evaluated to false, the attribute will not be set:</p>
                <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span
                        class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span
                        class="token punctuation">=</span><span class="token punctuation">"</span>checkbox<span class="token punctuation">"</span></span> <span
                        class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span
                        class="token punctuation">"</span>active<span class="token punctuation">"</span></span> <span class="token attr-name"><span
                        class="token namespace">th:</span>checked</span><span class="token attr-value"><span class="token punctuation">=</span><span
                        class="token punctuation">"</span>${user.active}<span class="token punctuation">"</span></span> <span
                        class="token punctuation">/&gt;</span></span></code></pre>
                <p>The following fixed-value boolean attributes exist in the Standard Dialect:</p>
                <div class="table-scroller">
                    <table>
                        <tbody>
                        <tr class="odd">
                            <td style="text-align: left;"><code>th:async</code></td>
                            <td style="text-align: left;"><code>th:autofocus</code></td>
                            <td style="text-align: left;"><code>th:autoplay</code></td>
                        </tr>
                        <tr class="even">
                            <td style="text-align: left;"><code>th:checked</code></td>
                            <td style="text-align: left;"><code>th:controls</code></td>
                            <td style="text-align: left;"><code>th:declare</code></td>
                        </tr>
                        <tr class="odd">
                            <td style="text-align: left;"><code>th:default</code></td>
                            <td style="text-align: left;"><code>th:defer</code></td>
                            <td style="text-align: left;"><code>th:disabled</code></td>
                        </tr>
                        <tr class="even">
                            <td style="text-align: left;"><code>th:formnovalidate</code></td>
                            <td style="text-align: left;"><code>th:hidden</code></td>
                            <td style="text-align: left;"><code>th:ismap</code></td>
                        </tr>
                        <tr class="odd">
                            <td style="text-align: left;"><code>th:loop</code></td>
                            <td style="text-align: left;"><code>th:multiple</code></td>
                            <td style="text-align: left;"><code>th:novalidate</code></td>
                        </tr>
                        <tr class="even">
                            <td style="text-align: left;"><code>th:nowrap</code></td>
                            <td style="text-align: left;"><code>th:open</code></td>
                            <td style="text-align: left;"><code>th:pubdate</code></td>
                        </tr>
                        <tr class="odd">
                            <td style="text-align: left;"><code>th:readonly</code></td>
                            <td style="text-align: left;"><code>th:required</code></td>
                            <td style="text-align: left;"><code>th:reversed</code></td>
                        </tr>
                        <tr class="even">
                            <td style="text-align: left;"><code>th:scoped</code></td>
                            <td style="text-align: left;"><code>th:seamless</code></td>
                            <td style="text-align: left;"><code>th:selected</code></td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </section>
            <section id="setting-the-value-of-any-attribute-default-attribute-processor" class="level2"><h2>5.6 Setting the value of any attribute (default
                attribute processor)</h2>
                <p>Thymeleaf offers a <em>default attribute processor</em> that allows us to set the value of <em>any</em> attribute, even if no specific <code>th:*</code>
                    processor has been defined for it at the Standard Dialect.</p>
                <p>So something like:</p>
                <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span
                        class="token punctuation">&lt;</span>span</span> <span class="token attr-name"><span
                        class="token namespace">th:</span>whatever</span><span class="token attr-value"><span class="token punctuation">=</span><span
                        class="token punctuation">"</span>${user.name}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>...<span
                        class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span
                        class="token punctuation">&gt;</span></span></code></pre>
                <p>Will result in:</p>
                <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span
                        class="token punctuation">&lt;</span>span</span> <span class="token attr-name">whatever</span><span class="token attr-value"><span
                        class="token punctuation">=</span><span class="token punctuation">"</span>John Apricot<span
                        class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>...<span class="token tag"><span
                        class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span></code></pre>
            </section>
            <section id="support-for-html5-friendly-attribute-and-element-names" class="level2"><h2>5.7 Support for HTML5-friendly attribute and element
                names</h2>
                <p>It is also possible to use a completely different syntax to apply processors to your templates in a more HTML5-friendly manner.</p>
                <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span
                        class="token punctuation">&lt;</span>table</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span> <span class="token attr-name">data-th-each</span><span
        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>user : ${users}<span class="token punctuation">"</span></span><span
        class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name">data-th-text</span><span
            class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${user.login}<span
            class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>...<span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name">data-th-text</span><span
            class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${user.name}<span
            class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>...<span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>table</span><span
        class="token punctuation">&gt;</span></span></code></pre>
                <p>The <code>data-{prefix}-{name}</code> syntax is the standard way to write custom attributes in HTML5, without requiring developers to use any
                    namespaced names like <code>th:*</code>. Thymeleaf makes this syntax automatically available to all your dialects (not only the Standard
                    ones).</p>
                <p>There is also a syntax to specify custom tags: <code>{prefix}-{name}</code>, which follows the <em>W3C Custom Elements specification</em> (a
                    part of the larger <em>W3C Web Components spec</em>). This can be used, for example, for the <code>th:block</code> element (or also <code>th-block</code>),
                    which will be explained in a later section.</p>
                <p><strong>Important:</strong> this syntax is an addition to the namespaced <code>th:*</code> one, it does not replace it. There is no intention
                    at all to deprecate the namespaced syntax in the future.</p></section>
        </section>
        <section id="iteration" class="level1"><h1>6 Iteration</h1>
            <p>So far we have created a home page, a user profile page and also a page for letting users subscribe to our newsletter… but what about our
                products? For that, we will need a way to iterate over items in a collection to build out our product page.</p>
            <section id="iteration-basics" class="level2"><h2>6.1 Iteration basics</h2>
                <p>To display products in our <code>/WEB-INF/templates/product/list.html</code> page we will use a table. Each of our products will be displayed
                    in a row (a <code>&lt;tr&gt;</code> element), and so for our template we will need to create a <em>template row</em> – one that will
                    exemplify how we want each product to be displayed – and then instruct Thymeleaf to repeat it, once for each product.</p>
                <p>The Standard Dialect offers us an attribute for exactly that: <code>th:each</code>.</p>
                <section id="using-theach" class="level3"><h3>Using th:each</h3>
                    <p>For our product list page, we will need a controller method that retrieves the list of products from the service layer and adds it to the
                        template context:</p>
                    <pre class=" language-java"><code class=" language-java"><span class="token keyword">public</span> <span
                            class="token keyword">void</span> <span class="token function">process</span><span class="token punctuation">(</span>
    <span class="token keyword">final</span> IWebExchange webExchange<span class="token punctuation">,</span>
    <span class="token keyword">final</span> ITemplateEngine templateEngine<span class="token punctuation">,</span>
    <span class="token keyword">final</span> Writer writer<span class="token punctuation">)</span>
    <span class="token keyword">throws</span> Exception <span class="token punctuation">{</span>

<span class="token keyword">final</span> ProductService productService <span class="token operator">=</span> <span class="token keyword">new</span> <span
                                class="token class-name">ProductService</span><span class="token punctuation">(</span><span
                                class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">final</span> List<span class="token operator">&lt;</span>Product<span class="token operator">&gt;</span> allProducts <span
                                class="token operator">=</span> productService<span class="token punctuation">.</span><span
                                class="token function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span
                                class="token punctuation">;</span>

<span class="token keyword">final</span> WebContext ctx <span class="token operator">=</span> <span class="token keyword">new</span> <span
                                class="token class-name">WebContext</span><span class="token punctuation">(</span>webExchange<span
                                class="token punctuation">,</span> webExchange<span class="token punctuation">.</span><span
                                class="token function">getLocale</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span
                                class="token punctuation">)</span><span class="token punctuation">;</span>
ctx<span class="token punctuation">.</span><span class="token function">setVariable</span><span class="token punctuation">(</span><span class="token string">"prods"</span><span
                                class="token punctuation">,</span> allProducts<span class="token punctuation">)</span><span class="token punctuation">;</span>

templateEngine<span class="token punctuation">.</span><span class="token function">process</span><span class="token punctuation">(</span><span
                                class="token string">"product/list"</span><span class="token punctuation">,</span> ctx<span class="token punctuation">,</span> writer<span
                                class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span></code></pre>
                    <p>And then we will use <code>th:each</code> in our template to iterate over the list of products:</p>
                    <pre class=" language-html"><code class=" language-html"><span class="token doctype">&lt;!DOCTYPE html&gt;</span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name"><span
        class="token namespace">xmlns:</span>th</span><span class="token attr-value"><span class="token punctuation">=</span><span
        class="token punctuation">"</span>http://www.thymeleaf.org<span class="token punctuation">"</span></span><span
        class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Good Thymes Virtual Grocery<span
                                class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span
                                class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span
        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Content-Type<span
        class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span
        class="token punctuation">=</span><span class="token punctuation">"</span>text/html; charset<span class="token punctuation">=</span>UTF-8<span
        class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span
        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>stylesheet<span
        class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span
        class="token punctuation">=</span><span class="token punctuation">"</span>text/css<span class="token punctuation">"</span></span> <span
        class="token attr-name">media</span><span class="token attr-value"><span class="token punctuation">=</span><span
        class="token punctuation">"</span>all<span class="token punctuation">"</span></span>
      <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>../../../css/gtvg.css<span
            class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">th:</span>href</span><span
            class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@{/css/gtvg.css}<span
            class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>Product list<span
                                class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>table</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span><span
            class="token punctuation">&gt;</span></span>NAME<span class="token tag"><span class="token tag"><span
                                class="token punctuation">&lt;/</span>th</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span><span
            class="token punctuation">&gt;</span></span>PRICE<span class="token tag"><span class="token tag"><span
                                class="token punctuation">&lt;/</span>th</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span><span class="token punctuation">&gt;</span></span>IN STOCK<span
                                class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span> <span class="token attr-name"><span
          class="token namespace">th:</span>each</span><span class="token attr-value"><span class="token punctuation">=</span><span
          class="token punctuation">"</span>prod : ${prods}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name"><span
            class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${prod.name}<span
            class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Onions<span class="token tag"><span
                                class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name"><span
            class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${prod.price}<span
            class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>2.41<span class="token tag"><span class="token tag"><span
                                class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name"><span
            class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${prod.inStock}? #{true} : #{false}<span
            class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>yes<span class="token tag"><span class="token tag"><span
                                class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>table</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span
          class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>../home.html<span
          class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">th:</span>href</span><span
          class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@{/}<span class="token punctuation">"</span></span><span
          class="token punctuation">&gt;</span></span>Return to home<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span
                                class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span></code></pre>
                    <p>That <code>prod : ${prods}</code> attribute value you see above means “for each element in the result of evaluating <code>${prods}</code>,
                        repeat this fragment of template, using the current element in a variable called prod”. Let’s give a name each of the things we see:</p>
                    <ul>
                        <li>We will call <code>${prods}</code> the <em>iterated expression</em> or <em>iterated variable</em>.</li>
                        <li>We will call <code>prod</code> the <em>iteration variable</em> or simply <em>iter variable</em>.</li>
                    </ul>
                    <p>Note that the <code>prod</code> iter variable is scoped to the <code>&lt;tr&gt;</code> element, which means it is available to inner tags
                        like <code>&lt;td&gt;</code>.</p></section>
                <section id="iterable-values" class="level3"><h3>Iterable values</h3>
                    <p>The <code>java.util.List</code> class isn’t the only value that can be used for iteration in Thymeleaf. There is a quite complete set of
                        objects that are considered <em>iterable</em> by a <code>th:each</code> attribute:</p>
                    <ul>
                        <li>Any object implementing <code>java.util.Iterable</code></li>
                        <li>Any object implementing <code>java.util.Enumeration</code>.</li>
                        <li>Any object implementing <code>java.util.Iterator</code>, whose values will be used as they are returned by the iterator, without the
                            need to cache all values in memory.
                        </li>
                        <li>Any object implementing <code>java.util.Map</code>. When iterating maps, iter variables will be of class
                            <code>java.util.Map.Entry</code>.
                        </li>
                        <li>Any object implementing <code>java.util.stream.Stream</code>.</li>
                        <li>Any array.</li>
                        <li>Any other object will be treated as if it were a single-valued list containing the object itself.</li>
                    </ul>
                </section>
            </section>
            <section id="keeping-iteration-status" class="level2"><h2>6.2 Keeping iteration status</h2>
                <p>When using <code>th:each</code>, Thymeleaf offers a mechanism useful for keeping track of the status of your iteration: the <em>status
                    variable</em>.</p>
                <p>Status variables are defined within a <code>th:each</code> attribute and contain the following data:</p>
                <ul>
                    <li>The current <em>iteration index</em>, starting with 0. This is the <code>index</code> property.</li>
                    <li>The current <em>iteration index</em>, starting with 1. This is the <code>count</code> property.</li>
                    <li>The total amount of elements in the iterated variable. This is the <code>size</code> property.</li>
                    <li>The <em>iter variable</em> for each iteration. This is the <code>current</code> property.</li>
                    <li>Whether the current iteration is even or odd. These are the <code>even/odd</code> boolean properties.</li>
                    <li>Whether the current iteration is the first one. This is the <code>first</code> boolean property.</li>
                    <li>Whether the current iteration is the last one. This is the <code>last</code> boolean property.</li>
                </ul>
                <p>Let’s see how we could use it with the previous example:</p>
                <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span
                        class="token punctuation">&lt;</span>table</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span><span class="token punctuation">&gt;</span></span>NAME<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span
                            class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span><span class="token punctuation">&gt;</span></span>PRICE<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span
                            class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span><span
        class="token punctuation">&gt;</span></span>IN STOCK<span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;/</span>th</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span> <span class="token attr-name"><span
        class="token namespace">th:</span>each</span><span class="token attr-value"><span class="token punctuation">=</span><span
        class="token punctuation">"</span>prod,iterStat : ${prods}<span class="token punctuation">"</span></span> <span class="token attr-name"><span
        class="token namespace">th:</span>class</span><span class="token attr-value"><span class="token punctuation">=</span><span
        class="token punctuation">"</span>${iterStat.odd}? <span class="token punctuation">'</span>odd<span class="token punctuation">'</span><span
        class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name"><span
        class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span
        class="token punctuation">"</span>${prod.name}<span class="token punctuation">"</span></span><span
        class="token punctuation">&gt;</span></span>Onions<span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name"><span
        class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span
        class="token punctuation">"</span>${prod.price}<span class="token punctuation">"</span></span><span
        class="token punctuation">&gt;</span></span>2.41<span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name"><span
        class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span
        class="token punctuation">"</span>${prod.inStock}? #{true} : #{false}<span class="token punctuation">"</span></span><span
        class="token punctuation">&gt;</span></span>yes<span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>table</span><span
        class="token punctuation">&gt;</span></span></code></pre>
                <p>The status variable (<code>iterStat</code> in this example) is defined in the <code>th:each</code> attribute by writing its name after the
                    iter variable itself, separated by a comma. Just like the iter variable, the status variable is also scoped to the fragment of code defined
                    by the tag holding the <code>th:each</code> attribute.</p>
                <p>Let’s have a look at the result of processing our template:</p>
                <pre class=" language-html"><code class=" language-html"><span class="token doctype">&lt;!DOCTYPE html&gt;</span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Good Thymes Virtual Grocery<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">content</span><span
        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text/html; charset<span
        class="token punctuation">=</span>UTF-8<span class="token punctuation">"</span></span> <span class="token attr-name">http-equiv</span><span
        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Content-Type<span
        class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span
        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>stylesheet<span
        class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span
        class="token punctuation">=</span><span class="token punctuation">"</span>text/css<span class="token punctuation">"</span></span> <span
        class="token attr-name">media</span><span class="token attr-value"><span class="token punctuation">=</span><span
        class="token punctuation">"</span>all<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span
        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>/gtvg/css/gtvg.css<span
        class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>Product list<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span
                            class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>table</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span><span
            class="token punctuation">&gt;</span></span>NAME<span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;/</span>th</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span><span
            class="token punctuation">&gt;</span></span>PRICE<span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;/</span>th</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span><span class="token punctuation">&gt;</span></span>IN STOCK<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span
                            class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span> <span class="token attr-name">class</span><span
          class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>odd<span
          class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>Fresh Sweet Basil<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span
                            class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span
            class="token punctuation">&gt;</span></span>4.99<span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span
            class="token punctuation">&gt;</span></span>yes<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span
                            class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>Italian Tomato<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span
                            class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span
            class="token punctuation">&gt;</span></span>1.25<span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span
            class="token punctuation">&gt;</span></span>no<span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span> <span class="token attr-name">class</span><span
          class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>odd<span
          class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>Yellow Bell Pepper<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span
                            class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span
            class="token punctuation">&gt;</span></span>2.50<span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span
            class="token punctuation">&gt;</span></span>yes<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span
                            class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>Old Cheddar<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span
                            class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span
            class="token punctuation">&gt;</span></span>18.75<span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span
            class="token punctuation">&gt;</span></span>yes<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span
                            class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>table</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span
          class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>/gtvg/<span
          class="token punctuation">"</span></span> <span class="token attr-name">shape</span><span class="token attr-value"><span
          class="token punctuation">=</span><span class="token punctuation">"</span>rect<span class="token punctuation">"</span></span><span
          class="token punctuation">&gt;</span></span>Return to home<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span
                            class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span></code></pre>
                <p>Note that our iteration status variable has worked perfectly, establishing the <code>odd</code> CSS class only to odd rows.</p>
                <p>If you don’t explicitly set a status variable, Thymeleaf will always create one for you by suffixing <code>Stat</code> to the name of the
                    iteration variable:</p>
                <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span
                        class="token punctuation">&lt;</span>table</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span><span class="token punctuation">&gt;</span></span>NAME<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span
                            class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span><span class="token punctuation">&gt;</span></span>PRICE<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span
                            class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span><span
        class="token punctuation">&gt;</span></span>IN STOCK<span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;/</span>th</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span> <span class="token attr-name"><span
        class="token namespace">th:</span>each</span><span class="token attr-value"><span class="token punctuation">=</span><span
        class="token punctuation">"</span>prod : ${prods}<span class="token punctuation">"</span></span> <span class="token attr-name"><span
        class="token namespace">th:</span>class</span><span class="token attr-value"><span class="token punctuation">=</span><span
        class="token punctuation">"</span>${prodStat.odd}? <span class="token punctuation">'</span>odd<span class="token punctuation">'</span><span
        class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name"><span
        class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span
        class="token punctuation">"</span>${prod.name}<span class="token punctuation">"</span></span><span
        class="token punctuation">&gt;</span></span>Onions<span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name"><span
        class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span
        class="token punctuation">"</span>${prod.price}<span class="token punctuation">"</span></span><span
        class="token punctuation">&gt;</span></span>2.41<span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name"><span
        class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span
        class="token punctuation">"</span>${prod.inStock}? #{true} : #{false}<span class="token punctuation">"</span></span><span
        class="token punctuation">&gt;</span></span>yes<span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>table</span><span
        class="token punctuation">&gt;</span></span></code></pre>
            </section>
            <section id="optimizing-through-lazy-retrieval-of-data" class="level2"><h2>6.3 Optimizing through lazy retrieval of data</h2>
                <p>Sometimes we might want to optimize the retrieval of collections of data (e.g. from a database) so that these collections are only retrieved
                    if they are really going to be used.</p>
                <blockquote><p>Actually, this is something that can be applied to <em>any</em> piece of data, but given the size that in-memory collections
                    might have, retrieving collections that are meant to be iterated is the most common case for this scenario.</p></blockquote>
                <p>In order to support this, Thymeleaf offers a mechanism to <em>lazily load context variables</em>. Context variables that implement the <code>ILazyContextVariable</code>
                    interface – most probably by extending its <code>LazyContextVariable</code> default implementation – will be resolved in the moment of being
                    executed. For example:</p>
                <pre class=" language-java"><code class=" language-java">context<span class="token punctuation">.</span><span
                        class="token function">setVariable</span><span class="token punctuation">(</span>
 <span class="token string">"users"</span><span class="token punctuation">,</span>
 <span class="token keyword">new</span> <span class="token class-name">LazyContextVariable</span><span class="token operator">&lt;</span>List<span
                            class="token operator">&lt;</span>User<span class="token operator">&gt;&gt;</span><span class="token punctuation">(</span><span
                            class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token annotation punctuation">@Override</span>
     <span class="token keyword">protected</span> List<span class="token operator">&lt;</span>User<span class="token operator">&gt;</span> <span
                            class="token function">loadValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span
                            class="token punctuation">{</span>
         <span class="token keyword">return</span> databaseRepository<span class="token punctuation">.</span><span
                            class="token function">findAllUsers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span
                            class="token punctuation">;</span>
     <span class="token punctuation">}</span>
 <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
                <p>This variable can be used without knowledge of its <em>laziness</em>, in code such as:</p>
                <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span
                        class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name"><span
        class="token namespace">th:</span>each</span><span class="token attr-value"><span class="token punctuation">=</span><span
        class="token punctuation">"</span>u : ${users}<span class="token punctuation">"</span></span> <span class="token attr-name"><span
        class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span
        class="token punctuation">"</span>${u.name}<span class="token punctuation">"</span></span><span
        class="token punctuation">&gt;</span></span>user name<span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span
        class="token punctuation">&gt;</span></span></code></pre>
                <p>But at the same time, will never be initialized (its <code>loadValue()</code> method will never be called) if <code>condition</code>
                    evaluates to <code>false</code> in code such as:</p>
                <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span
                        class="token punctuation">&lt;</span>ul</span> <span class="token attr-name"><span class="token namespace">th:</span>if</span><span
                        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${condition}<span
                        class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name"><span
        class="token namespace">th:</span>each</span><span class="token attr-value"><span class="token punctuation">=</span><span
        class="token punctuation">"</span>u : ${users}<span class="token punctuation">"</span></span> <span class="token attr-name"><span
        class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span
        class="token punctuation">"</span>${u.name}<span class="token punctuation">"</span></span><span
        class="token punctuation">&gt;</span></span>user name<span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span
        class="token punctuation">&gt;</span></span></code></pre>
            </section>
        </section>
        <section id="conditional-evaluation" class="level1"><h1>7 Conditional Evaluation</h1>
            <section id="simple-conditionals-if-and-unless" class="level2"><h2>7.1 Simple conditionals: “if” and “unless”</h2>
                <p>Sometimes you will need a fragment of your template to only appear in the result if a certain condition is met.</p>
                <p>For example, imagine we want to show in our product table a column with the number of comments that exist for each product and, if there are
                    any comments, a link to the comment detail page for that product.</p>
                <p>In order to do this, we would use the <code>th:if</code> attribute:</p>
                <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span
                        class="token punctuation">&lt;</span>table</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span><span class="token punctuation">&gt;</span></span>NAME<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span
                            class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span><span class="token punctuation">&gt;</span></span>PRICE<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span
                            class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span><span
        class="token punctuation">&gt;</span></span>IN STOCK<span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;/</span>th</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span><span
        class="token punctuation">&gt;</span></span>COMMENTS<span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;/</span>th</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span> <span class="token attr-name"><span
        class="token namespace">th:</span>each</span><span class="token attr-value"><span class="token punctuation">=</span><span
        class="token punctuation">"</span>prod : ${prods}<span class="token punctuation">"</span></span> <span class="token attr-name"><span
        class="token namespace">th:</span>class</span><span class="token attr-value"><span class="token punctuation">=</span><span
        class="token punctuation">"</span>${prodStat.odd}? <span class="token punctuation">'</span>odd<span class="token punctuation">'</span><span
        class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name"><span
        class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span
        class="token punctuation">"</span>${prod.name}<span class="token punctuation">"</span></span><span
        class="token punctuation">&gt;</span></span>Onions<span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name"><span
        class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span
        class="token punctuation">"</span>${prod.price}<span class="token punctuation">"</span></span><span
        class="token punctuation">&gt;</span></span>2.41<span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name"><span
        class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span
        class="token punctuation">"</span>${prod.inStock}? #{true} : #{false}<span class="token punctuation">"</span></span><span
        class="token punctuation">&gt;</span></span>yes<span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name"><span
          class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span
          class="token punctuation">"</span>${#lists.size(prod.comments)}<span class="token punctuation">"</span></span><span
          class="token punctuation">&gt;</span></span>2<span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span> comment/s
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span
          class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>comments.html<span class="token punctuation">"</span></span>
     <span class="token attr-name"><span class="token namespace">th:</span>href</span><span class="token attr-value"><span
              class="token punctuation">=</span><span class="token punctuation">"</span>@{/product/comments(prodId<span class="token punctuation">=</span>${prod.id})}<span
              class="token punctuation">"</span></span>
     <span class="token attr-name"><span class="token namespace">th:</span>if</span><span class="token attr-value"><span class="token punctuation">=</span><span
              class="token punctuation">"</span>${not #lists.isEmpty(prod.comments)}<span class="token punctuation">"</span></span><span
              class="token punctuation">&gt;</span></span>view<span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>table</span><span
        class="token punctuation">&gt;</span></span></code></pre>
                <p>Quite a lot of things to see here, so let’s focus on the important line:</p>
                <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span
                        class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span
                        class="token punctuation">=</span><span class="token punctuation">"</span>comments.html<span class="token punctuation">"</span></span>
<span class="token attr-name"><span class="token namespace">th:</span>href</span><span class="token attr-value"><span class="token punctuation">=</span><span
                            class="token punctuation">"</span>@{/product/comments(prodId<span class="token punctuation">=</span>${prod.id})}<span
                            class="token punctuation">"</span></span>
<span class="token attr-name"><span class="token namespace">th:</span>if</span><span class="token attr-value"><span class="token punctuation">=</span><span
                            class="token punctuation">"</span>${not #lists.isEmpty(prod.comments)}<span class="token punctuation">"</span></span><span
                            class="token punctuation">&gt;</span></span>view<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span
                        class="token punctuation">&gt;</span></span></code></pre>
                <p>This will create a link to the comments page (with URL <code>/product/comments</code>) with a <code>prodId</code> parameter set to the <code>id</code>
                    of the product, but only if the product has any comments.</p>
                <p>Let’s have a look at the resulting markup:</p>
                <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span
                        class="token punctuation">&lt;</span>table</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span><span class="token punctuation">&gt;</span></span>NAME<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span
                            class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span><span class="token punctuation">&gt;</span></span>PRICE<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span
                            class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span><span
        class="token punctuation">&gt;</span></span>IN STOCK<span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;/</span>th</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span><span
        class="token punctuation">&gt;</span></span>COMMENTS<span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;/</span>th</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>Fresh Sweet Basil<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span
                            class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>4.99<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span
                            class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>yes<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span
                            class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>0<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span> comment/s
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span> <span class="token attr-name">class</span><span
        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>odd<span
        class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>Italian Tomato<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span
                            class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>1.25<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span
                            class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>no<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span
                            class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>2<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span> comment/s
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span
          class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>/gtvg/product/comments?prodId<span
          class="token punctuation">=</span>2<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>view<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span
                            class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>Yellow Bell Pepper<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span
                            class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>2.50<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span
                            class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>yes<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span
                            class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>0<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span> comment/s
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span> <span class="token attr-name">class</span><span
        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>odd<span
        class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>Old Cheddar<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span
                            class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>18.75<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span
                            class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>yes<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span
                            class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>1<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span> comment/s
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span
          class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>/gtvg/product/comments?prodId<span
          class="token punctuation">=</span>4<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>view<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span
                            class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>table</span><span
        class="token punctuation">&gt;</span></span></code></pre>
                <p>Perfect! That’s exactly what we wanted.</p>
                <p>Note that the <code>th:if</code> attribute will not only evaluate <em>boolean</em> conditions. Its capabilities go a little beyond that, and
                    it will evaluate the specified expression as <code>true</code> following these rules:</p>
                <ul>
                    <li>If value is not null:
                        <ul>
                            <li>If value is a boolean and is <code>true</code>.</li>
                            <li>If value is a number and is non-zero</li>
                            <li>If value is a character and is non-zero</li>
                            <li>If value is a String and is not “false”, “off” or “no”</li>
                            <li>If value is not a boolean, a number, a character or a String.</li>
                        </ul>
                    </li>
                    <li>(If value is null, th:if will evaluate to false).</li>
                </ul>
                <p>Also, <code>th:if</code> has an inverse attribute, <code>th:unless</code>, which we could have used in the previous example instead of using
                    a <code>not</code> inside the OGNL expression:</p>
                <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span
                        class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span
                        class="token punctuation">=</span><span class="token punctuation">"</span>comments.html<span class="token punctuation">"</span></span>
<span class="token attr-name"><span class="token namespace">th:</span>href</span><span class="token attr-value"><span class="token punctuation">=</span><span
                            class="token punctuation">"</span>@{/comments(prodId<span class="token punctuation">=</span>${prod.id})}<span
                            class="token punctuation">"</span></span>
<span class="token attr-name"><span class="token namespace">th:</span>unless</span><span class="token attr-value"><span class="token punctuation">=</span><span
                            class="token punctuation">"</span>${#lists.isEmpty(prod.comments)}<span class="token punctuation">"</span></span><span
                            class="token punctuation">&gt;</span></span>view<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span
                        class="token punctuation">&gt;</span></span></code></pre>
            </section>
            <section id="switch-statements" class="level2"><h2>7.2 Switch statements</h2>
                <p>There is also a way to display content conditionally using the equivalent of a <em>switch</em> structure in Java: the <code>th:switch</code>
                    / <code>th:case</code> attribute set.</p>
                <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span
                        class="token punctuation">&lt;</span>div</span> <span class="token attr-name"><span class="token namespace">th:</span>switch</span><span
                        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${user.role}<span
                        class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name"><span class="token namespace">th:</span>case</span><span
        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span><span
        class="token punctuation">'</span>admin<span class="token punctuation">'</span><span class="token punctuation">"</span></span><span
        class="token punctuation">&gt;</span></span>User is an administrator<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span
                            class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name"><span class="token namespace">th:</span>case</span><span
        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>#{roles.manager}<span
        class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>User is a manager<span class="token tag"><span
                            class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></code></pre>
                <p>Note that as soon as one <code>th:case</code> attribute is evaluated as <code>true</code>, every other <code>th:case</code> attribute in the
                    same switch context is evaluated as <code>false</code>.</p>
                <p>The default option is specified as <code>th:case="*"</code>:</p>
                <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span
                        class="token punctuation">&lt;</span>div</span> <span class="token attr-name"><span class="token namespace">th:</span>switch</span><span
                        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${user.role}<span
                        class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name"><span class="token namespace">th:</span>case</span><span
        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span><span
        class="token punctuation">'</span>admin<span class="token punctuation">'</span><span class="token punctuation">"</span></span><span
        class="token punctuation">&gt;</span></span>User is an administrator<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span
                            class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name"><span class="token namespace">th:</span>case</span><span
        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>#{roles.manager}<span
        class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>User is a manager<span class="token tag"><span
                            class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name"><span class="token namespace">th:</span>case</span><span
        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>*<span
        class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>User is some other thing<span class="token tag"><span
                            class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></code></pre>
            </section>
        </section>
        <section id="template-layout" class="level1"><h1>8 Template Layout</h1>
            <section id="including-template-fragments" class="level2"><h2>8.1 Including template fragments</h2>
                <section id="defining-and-referencing-fragments" class="level3"><h3>Defining and referencing fragments</h3>
                    <p>In our templates, we will often want to include parts from other templates, parts like footers, headers, menus…</p>
                    <p>In order to do this, Thymeleaf needs us to define these parts, “fragments”, for inclusion, which can be done using the
                        <code>th:fragment</code> attribute.</p>
                    <p>Say we want to add a standard copyright footer to all our grocery pages, so we create a <code>/WEB-INF/templates/footer.html</code> file
                        containing this code:</p>
                    <pre class=" language-html"><code class=" language-html"><span class="token doctype">&lt;!DOCTYPE html&gt;</span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name"><span
        class="token namespace">xmlns:</span>th</span><span class="token attr-value"><span class="token punctuation">=</span><span
        class="token punctuation">"</span>http://www.thymeleaf.org<span class="token punctuation">"</span></span><span
        class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name"><span
        class="token namespace">th:</span>fragment</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>copy<span
        class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token entity" title="©">&amp;copy;</span> 2011 The Good Thymes Virtual Grocery
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span></code></pre>
                    <p>The code above defines a fragment called <code>copy</code> that we can easily include in our home page using one of the
                        <code>th:insert</code> or <code>th:replace</code> attributes:</p>
                    <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span
                            class="token punctuation">&gt;</span></span>

...

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name"><span
        class="token namespace">th:</span>insert</span><span class="token attr-value"><span class="token punctuation">=</span><span
        class="token punctuation">"</span>~{footer :: copy}<span class="token punctuation">"</span></span><span
        class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span
                                class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span></code></pre>
                    <p>Note that <code>th:insert</code> expects a <em>fragment expression</em> (<code>~{...}</code>), which is <em>an expression that results in
                        a fragment</em>.</p></section>
                <section id="fragment-specification-syntax" class="level3"><h3>Fragment specification syntax</h3>
                    <p>The syntax of <em>fragment expressions</em> is quite straightforward. There are three different formats:</p>
                    <ul>
                        <li><p><code>"~{templatename::selector}"</code> Includes the fragment resulting from applying the specified Markup Selector on the
                            template named <code>templatename</code>. Note that <code>selector</code> can be a mere fragment name, so you could specify
                            something as simple as <code>~{templatename::fragmentname}</code> like in the <code>~{footer :: copy}</code> above.</p>
                            <blockquote><p>Markup Selector syntax is defined by the underlying AttoParser parsing library, and is similar to XPath expressions
                                or CSS selectors. See <a href="#appendix-c-markup-selector-syntax">Appendix C</a> for more info.</p></blockquote>
                        </li>
                        <li><p><code>"~{templatename}"</code> Includes the complete template named <code>templatename</code>.</p>
                            <blockquote><p>Note that the template name you use in <code>th:insert</code>/<code>th:replace</code> tags will have to be resolvable
                                by the Template Resolver currently being used by the Template Engine.</p></blockquote>
                        </li>
                        <li><p><code>~{::selector}"</code> or <code>"~{this::selector}"</code> Inserts a fragment from the same template, matching <code>selector</code>.
                            If not found on the template where the expression appears, the stack of template calls (insertions) is traversed towards the
                            originally processed template (the <em>root</em>), until <code>selector</code> matches at some level.</p></li>
                    </ul>
                    <p>Both <code>templatename</code> and <code>selector</code> in the above examples can be fully-featured expressions (even conditionals!)
                        like:</p>
                    <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span
                            class="token attr-name"><span class="token namespace">th:</span>insert</span><span class="token attr-value"><span
                            class="token punctuation">=</span><span class="token punctuation">"</span>~{ footer :: (${user.isAdmin}? #{footer.admin} : #{footer.normaluser}) }<span
                            class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span
                            class="token tag"><span class="token punctuation">&lt;/</span>div</span><span
                            class="token punctuation">&gt;</span></span></code></pre>
                    <p>Fragments can include any <code>th:*</code> attributes. These attributes will be evaluated once the fragment is included into the target
                        template (the one with the <code>th:insert</code>/<code>th:replace</code> attribute), and they will be able to reference any context
                        variables defined in this target template.</p>
                    <blockquote><p>A big advantage of this approach to fragments is that you can write your fragments in pages that are perfectly displayable by
                        a browser, with a complete and even <em>valid</em> markup structure, while still retaining the ability to make Thymeleaf include them
                        into other templates.</p></blockquote>
                </section>
                <section id="referencing-fragments-without-thfragment" class="level3"><h3>Referencing fragments without <code>th:fragment</code></h3>
                    <p>Thanks to the power of Markup Selectors, we can include fragments that do not use any <code>th:fragment</code> attributes. It can even be
                        markup code coming from a different application with no knowledge of Thymeleaf at all:</p>
                    <pre class=" language-html"><code class=" language-html">...
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span
        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>copy-section<span
        class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
<span class="token entity" title="©">&amp;copy;</span> 2011 The Good Thymes Virtual Grocery
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
...</code></pre>
                    <p>We can use the fragment above simply referencing it by its <code>id</code> attribute, in a similar way to a CSS selector:</p>
                    <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span
                            class="token punctuation">&gt;</span></span>

...

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name"><span
        class="token namespace">th:</span>insert</span><span class="token attr-value"><span class="token punctuation">=</span><span
        class="token punctuation">"</span>~{footer :: #copy-section}<span class="token punctuation">"</span></span><span
        class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span
                                class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span></code></pre>
                </section>
                <section id="difference-between-thinsert-and-threplace" class="level3"><h3>Difference between <code>th:insert</code> and <code>th:replace</code>
                </h3>
                    <p>And what is the difference between <code>th:insert</code> and <code>th:replace</code>?</p>
                    <ul>
                        <li><p><code>th:insert</code> will simply insert the specified fragment as the body of its host tag.</p></li>
                        <li><p><code>th:replace</code> actually <em>replaces</em> its host tag with the specified fragment.</p></li>
                    </ul>
                    <p>So an HTML fragment like this:</p>
                    <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>footer</span> <span
                            class="token attr-name"><span class="token namespace">th:</span>fragment</span><span class="token attr-value"><span
                            class="token punctuation">=</span><span class="token punctuation">"</span>copy<span class="token punctuation">"</span></span><span
                            class="token punctuation">&gt;</span></span>
<span class="token entity" title="©">&amp;copy;</span> 2011 The Good Thymes Virtual Grocery
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>footer</span><span
        class="token punctuation">&gt;</span></span></code></pre>
                    <p>…included twice in host <code>&lt;div&gt;</code> tags, like this:</p>
                    <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span
                            class="token punctuation">&gt;</span></span>

...

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name"><span
        class="token namespace">th:</span>insert</span><span class="token attr-value"><span class="token punctuation">=</span><span
        class="token punctuation">"</span>~{footer :: copy}<span class="token punctuation">"</span></span><span
        class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span
                                class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name"><span
        class="token namespace">th:</span>replace</span><span class="token attr-value"><span class="token punctuation">=</span><span
        class="token punctuation">"</span>~{footer :: copy}<span class="token punctuation">"</span></span><span
        class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span
                                class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span></code></pre>
                    <p>…will result in:</p>
                    <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span
                            class="token punctuation">&gt;</span></span>

...

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>footer</span><span class="token punctuation">&gt;</span></span>
  <span class="token entity" title="©">&amp;copy;</span> 2011 The Good Thymes Virtual Grocery
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>footer</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>footer</span><span class="token punctuation">&gt;</span></span>
<span class="token entity" title="©">&amp;copy;</span> 2011 The Good Thymes Virtual Grocery
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>footer</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span></code></pre>
                </section>
            </section>
            <section id="parameterizable-fragment-signatures" class="level2"><h2>8.2 Parameterizable fragment signatures</h2>
                <p>In order to create a more <em>function-like</em> mechanism for template fragments, fragments defined with <code>th:fragment</code> can
                    specify a set of parameters:</p>
                <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span
                        class="token punctuation">&lt;</span>div</span> <span class="token attr-name"><span
                        class="token namespace">th:</span>fragment</span><span class="token attr-value"><span class="token punctuation">=</span><span
                        class="token punctuation">"</span>frag (onevar,twovar)<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span
        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${onevar} + <span
        class="token punctuation">'</span> - <span class="token punctuation">'</span> + ${twovar}<span class="token punctuation">"</span></span><span
        class="token punctuation">&gt;</span></span>...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span
                            class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></code></pre>
                <p>This requires the use of one of these two syntaxes to call the fragment from <code>th:insert</code> or <code>th:replace</code>:</p>
                <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span
                        class="token punctuation">&lt;</span>div</span> <span class="token attr-name"><span
                        class="token namespace">th:</span>replace</span><span class="token attr-value"><span class="token punctuation">=</span><span
                        class="token punctuation">"</span>~{ ::frag (${value1},${value2}) }<span class="token punctuation">"</span></span><span
                        class="token punctuation">&gt;</span></span>...<span class="token tag"><span class="token tag"><span
                        class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name"><span
        class="token namespace">th:</span>replace</span><span class="token attr-value"><span class="token punctuation">=</span><span
        class="token punctuation">"</span>~{ ::frag (onevar<span class="token punctuation">=</span>${value1},twovar<span class="token punctuation">=</span>${value2}) }<span
        class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>...<span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></code></pre>
                <p>Note that order is not important in the last option:</p>
                <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span
                        class="token punctuation">&lt;</span>div</span> <span class="token attr-name"><span
                        class="token namespace">th:</span>replace</span><span class="token attr-value"><span class="token punctuation">=</span><span
                        class="token punctuation">"</span>~{ ::frag (twovar<span class="token punctuation">=</span>${value2},onevar<span
                        class="token punctuation">=</span>${value1}) }<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>...<span
                        class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span
                        class="token punctuation">&gt;</span></span></code></pre>
                <section id="fragment-local-variables-without-fragment-arguments" class="level3"><h3>Fragment local variables without fragment arguments</h3>
                    <p>Even if fragments are defined without arguments like this:</p>
                    <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span
                            class="token attr-name"><span class="token namespace">th:</span>fragment</span><span class="token attr-value"><span
                            class="token punctuation">=</span><span class="token punctuation">"</span>frag<span class="token punctuation">"</span></span><span
                            class="token punctuation">&gt;</span></span>
...
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></code></pre>
                    <p>We could use the second syntax specified above to call them (and only the second one):</p>
                    <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span
                            class="token attr-name"><span class="token namespace">th:</span>replace</span><span class="token attr-value"><span
                            class="token punctuation">=</span><span class="token punctuation">"</span>~{::frag (onevar<span class="token punctuation">=</span>${value1},twovar<span
                            class="token punctuation">=</span>${value2})}<span class="token punctuation">"</span></span><span
                            class="token punctuation">&gt;</span></span></code></pre>
                    <p>This would be equivalent to a combination of <code>th:replace</code> and <code>th:with</code>:</p>
                    <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span
                            class="token attr-name"><span class="token namespace">th:</span>replace</span><span class="token attr-value"><span
                            class="token punctuation">=</span><span class="token punctuation">"</span>~{::frag}<span
                            class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">th:</span>with</span><span
                            class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>onevar<span
                            class="token punctuation">=</span>${value1},twovar<span class="token punctuation">=</span>${value2}<span
                            class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span></code></pre>
                    <p><strong>Note</strong> that this specification of local variables for a fragment – no matter whether it has an argument signature or not –
                        does not cause the context to be emptied prior to its execution. Fragments will still be able to access every context variable being
                        used at the calling template like they currently are.</p></section>
                <section id="thassert-for-in-template-assertions" class="level3"><h3>th:assert for in-template assertions</h3>
                    <p>The <code>th:assert</code> attribute can specify a comma-separated list of expressions which should be evaluated and produce true for
                        every evaluation, raising an exception if not.</p>
                    <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span
                            class="token attr-name"><span class="token namespace">th:</span>assert</span><span class="token attr-value"><span
                            class="token punctuation">=</span><span class="token punctuation">"</span>${onevar},(${twovar} !<span
                            class="token punctuation">=</span> 43)<span class="token punctuation">"</span></span><span
                            class="token punctuation">&gt;</span></span>...<span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></code></pre>
                    <p>This comes in handy for validating parameters at a fragment signature:</p>
                    <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>header</span> <span
                            class="token attr-name"><span class="token namespace">th:</span>fragment</span><span class="token attr-value"><span
                            class="token punctuation">=</span><span class="token punctuation">"</span>contentheader(title)<span
                            class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">th:</span>assert</span><span
                            class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${!#strings.isEmpty(title)}<span
                            class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>...<span class="token tag"><span
                            class="token tag"><span class="token punctuation">&lt;/</span>header</span><span class="token punctuation">&gt;</span></span></code></pre>
                </section>
            </section>
            <section id="flexible-layouts-beyond-mere-fragment-insertion" class="level2"><h2>8.3 Flexible layouts: beyond mere fragment insertion</h2>
                <p>Thanks to <em>fragment expressions</em>, we can specify parameters for fragments that are not texts, numbers, bean objects… but instead
                    fragments of markup.</p>
                <p>This allows us to create our fragments in a way such that they can be <em>enriched</em> with markup coming from the calling templates,
                    resulting in a very flexible <strong>template layout mechanism</strong>.</p>
                <p>Note the use of the <code>title</code> and <code>links</code> variables in the fragment below:</p>
                <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span
                        class="token punctuation">&lt;</span>head</span> <span class="token attr-name"><span
                        class="token namespace">th:</span>fragment</span><span class="token attr-value"><span class="token punctuation">=</span><span
                        class="token punctuation">"</span>common_header(title,links)<span class="token punctuation">"</span></span><span
                        class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span> <span class="token attr-name"><span
        class="token namespace">th:</span>replace</span><span class="token attr-value"><span class="token punctuation">=</span><span
        class="token punctuation">"</span>${title}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>The awesome application<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>

<span class="token comment" spellcheck="true">&lt;!-- Common styles and scripts --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span
        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>stylesheet<span
        class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span
        class="token punctuation">=</span><span class="token punctuation">"</span>text/css<span class="token punctuation">"</span></span> <span
        class="token attr-name">media</span><span class="token attr-value"><span class="token punctuation">=</span><span
        class="token punctuation">"</span>all<span class="token punctuation">"</span></span> <span class="token attr-name"><span
        class="token namespace">th:</span>href</span><span class="token attr-value"><span class="token punctuation">=</span><span
        class="token punctuation">"</span>@{/css/awesomeapp.css}<span class="token punctuation">"</span></span><span
        class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span
        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>shortcut icon<span
        class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">th:</span>href</span><span
        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@{/images/favicon.ico}<span
        class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span
        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text/javascript<span class="token punctuation">"</span></span> <span
        class="token attr-name"><span class="token namespace">th:</span>src</span><span class="token attr-value"><span class="token punctuation">=</span><span
        class="token punctuation">"</span>@{/sh/scripts/codebase.js}<span class="token punctuation">"</span></span><span
        class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token comment" spellcheck="true">&lt;!--/* Per-page placeholder for additional links */--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">th:</span>block</span> <span
        class="token attr-name"><span class="token namespace">th:</span>replace</span><span class="token attr-value"><span
        class="token punctuation">=</span><span class="token punctuation">"</span>${links}<span class="token punctuation">"</span></span> <span
        class="token punctuation">/&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span></code></pre>
                <p>We can now call this fragment like:</p>
                <pre class=" language-html"><code class=" language-html">...
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span> <span class="token attr-name"><span
        class="token namespace">th:</span>replace</span><span class="token attr-value"><span class="token punctuation">=</span><span
        class="token punctuation">"</span>~{ base :: common_header(~{::title},~{::link}) }<span class="token punctuation">"</span></span><span
        class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Awesome - Main<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span
        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>stylesheet<span
        class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">th:</span>href</span><span
        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@{/css/bootstrap.min.css}<span
        class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span
        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>stylesheet<span
        class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">th:</span>href</span><span
        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@{/themes/smoothness/jquery-ui.css}<span
        class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
...</code></pre>
                <p>…and the result will use the actual <code>&lt;title&gt;</code> and <code>&lt;link&gt;</code> tags from our calling template as the values of
                    the <code>title</code> and <code>links</code> variables, resulting in our fragment being customized during insertion:</p>
                <pre class=" language-html"><code class=" language-html">...
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Awesome - Main<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>

<span class="token comment" spellcheck="true">&lt;!-- Common styles and scripts --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span
        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>stylesheet<span
        class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span
        class="token punctuation">=</span><span class="token punctuation">"</span>text/css<span class="token punctuation">"</span></span> <span
        class="token attr-name">media</span><span class="token attr-value"><span class="token punctuation">=</span><span
        class="token punctuation">"</span>all<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span
        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>/awe/css/awesomeapp.css<span
        class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span
        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>shortcut icon<span
        class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span
        class="token punctuation">=</span><span class="token punctuation">"</span>/awe/images/favicon.ico<span class="token punctuation">"</span></span><span
        class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span
        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text/javascript<span class="token punctuation">"</span></span> <span
        class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>/awe/sh/scripts/codebase.js<span
        class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span
        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>stylesheet<span
        class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span
        class="token punctuation">=</span><span class="token punctuation">"</span>/awe/css/bootstrap.min.css<span class="token punctuation">"</span></span><span
        class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span
        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>stylesheet<span
        class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span
        class="token punctuation">=</span><span class="token punctuation">"</span>/awe/themes/smoothness/jquery-ui.css<span
        class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
...</code></pre>
                <section id="using-the-empty-fragment" class="level3"><h3>Using the empty fragment</h3>
                    <p>A special fragment expression, the <em>empty fragment</em> (<code>~{}</code>), can be used for specifying <em>no markup</em>. Using the
                        previous example:</p>
                    <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span> <span
                            class="token attr-name"><span class="token namespace">th:</span>replace</span><span class="token attr-value"><span
                            class="token punctuation">=</span><span class="token punctuation">"</span>~{ base :: common_header(~{::title},~{}) }<span
                            class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Awesome - Main<span
                                class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span
                                class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
...</code></pre>
                    <p>Note how the second parameter of the fragment (<code>links</code>) is set to the <em>empty fragment</em> and therefore nothing is written
                        for the <code>&lt;th:block th:replace="${links}" /&gt;</code> block:</p>
                    <pre class=" language-html"><code class=" language-html">...
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Awesome - Main<span
                                class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span
                                class="token punctuation">&gt;</span></span>

<span class="token comment" spellcheck="true">&lt;!-- Common styles and scripts --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span
        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>stylesheet<span
        class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span
        class="token punctuation">=</span><span class="token punctuation">"</span>text/css<span class="token punctuation">"</span></span> <span
        class="token attr-name">media</span><span class="token attr-value"><span class="token punctuation">=</span><span
        class="token punctuation">"</span>all<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span
        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>/awe/css/awesomeapp.css<span
        class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span
        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>shortcut icon<span
        class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span
        class="token punctuation">=</span><span class="token punctuation">"</span>/awe/images/favicon.ico<span class="token punctuation">"</span></span><span
        class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span
        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text/javascript<span class="token punctuation">"</span></span> <span
        class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>/awe/sh/scripts/codebase.js<span
        class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span
                                class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
...</code></pre>
                </section>
                <section id="using-the-no-operation-token" class="level3"><h3>Using the no-operation token</h3>
                    <p>The no-op can be also used as a parameter to a fragment if we just want to let our fragment use its current markup as a default value.
                        Again, using the <code>common_header</code> example:</p>
                    <pre class=" language-html"><code class=" language-html">...
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span> <span class="token attr-name"><span
        class="token namespace">th:</span>replace</span><span class="token attr-value"><span class="token punctuation">=</span><span
        class="token punctuation">"</span>~{base :: common_header(_,~{::link})}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Awesome - Main<span
                                class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span
                                class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span
        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>stylesheet<span
        class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">th:</span>href</span><span
        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@{/css/bootstrap.min.css}<span
        class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span
        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>stylesheet<span
        class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">th:</span>href</span><span
        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@{/themes/smoothness/jquery-ui.css}<span
        class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
...</code></pre>
                    <p>See how the <code>title</code> argument (first argument of the <code>common_header</code> fragment) is set to <em>no-op</em>
                        (<code>_</code>), which results in this part of the fragment not being executed at all (<code>title</code> = <em>no-operation</em>):</p>
                    <pre class=" language-html"><code class=" language-html">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span> <span
                            class="token attr-name"><span class="token namespace">th:</span>replace</span><span class="token attr-value"><span
                            class="token punctuation">=</span><span class="token punctuation">"</span>${title}<span
                            class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>The awesome application<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span></code></pre>
                    <p>So the result is:</p>
                    <pre class=" language-html"><code class=" language-html">...
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>The awesome application<span
                                class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span
                                class="token punctuation">&gt;</span></span>

<span class="token comment" spellcheck="true">&lt;!-- Common styles and scripts --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span
        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>stylesheet<span
        class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span
        class="token punctuation">=</span><span class="token punctuation">"</span>text/css<span class="token punctuation">"</span></span> <span
        class="token attr-name">media</span><span class="token attr-value"><span class="token punctuation">=</span><span
        class="token punctuation">"</span>all<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span
        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>/awe/css/awesomeapp.css<span
        class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span
        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>shortcut icon<span
        class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span
        class="token punctuation">=</span><span class="token punctuation">"</span>/awe/images/favicon.ico<span class="token punctuation">"</span></span><span
        class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span
        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text/javascript<span class="token punctuation">"</span></span> <span
        class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>/awe/sh/scripts/codebase.js<span
        class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span
                                class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span
        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>stylesheet<span
        class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span
        class="token punctuation">=</span><span class="token punctuation">"</span>/awe/css/bootstrap.min.css<span class="token punctuation">"</span></span><span
        class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span
        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>stylesheet<span
        class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span
        class="token punctuation">=</span><span class="token punctuation">"</span>/awe/themes/smoothness/jquery-ui.css<span
        class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
...</code></pre>
                </section>
                <section id="advanced-conditional-insertion-of-fragments" class="level3"><h3>Advanced conditional insertion of fragments</h3>
                    <p>The availability of both the <em>empty fragment</em> and <em>no-operation token</em> allows us to perform conditional insertion of
                        fragments in a very easy and elegant way.</p>
                    <p>For example, we could do this in order to insert our <code>common :: adminhead</code> fragment <em>only</em> if the user is an
                        administrator, and insert nothing (empty fragment) if not:</p>
                    <pre class=" language-html"><code class=" language-html">...
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name"><span
        class="token namespace">th:</span>insert</span><span class="token attr-value"><span class="token punctuation">=</span><span
        class="token punctuation">"</span>${user.isAdmin()} ? ~{common :: adminhead} : ~{}<span class="token punctuation">"</span></span><span
        class="token punctuation">&gt;</span></span>...<span class="token tag"><span class="token tag"><span
                                class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
...</code></pre>
                    <p>Also, we can use the <em>no-operation token</em> in order to insert a fragment only if the specified condition is met, but leave the
                        markup without modifications if the condition is not met:</p>
                    <pre class=" language-html"><code class=" language-html">...
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name"><span
        class="token namespace">th:</span>insert</span><span class="token attr-value"><span class="token punctuation">=</span><span
        class="token punctuation">"</span>${user.isAdmin()} ? ~{common :: adminhead} : _<span class="token punctuation">"</span></span><span
        class="token punctuation">&gt;</span></span>
Welcome [[${user.name}]], click <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span
                                class="token attr-name"><span class="token namespace">th:</span>href</span><span class="token attr-value"><span
                                class="token punctuation">=</span><span class="token punctuation">"</span>@{/support}<span
                                class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>here<span class="token tag"><span
                                class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span> for help-desk support.
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
...</code></pre>
                    <p>Additionally, if we have configured our template resolvers to <em>check for existence</em> of the template resources –- by means of their
                        <code>checkExistence</code> flag -– we can use the existence of the fragment itself as the condition in a <em>default</em> operation:
                    </p>
                    <pre class=" language-html"><code class=" language-html">...
<span class="token comment" spellcheck="true">&lt;!-- The body of the &lt;div&gt; will be used if the "common :: salutation" fragment  --&gt;</span>
<span class="token comment" spellcheck="true">&lt;!-- does not exist (or is empty).                                              --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name"><span
        class="token namespace">th:</span>insert</span><span class="token attr-value"><span class="token punctuation">=</span><span
        class="token punctuation">"</span>~{common :: salutation} ?: _<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
Welcome [[${user.name}]], click <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span
                                class="token attr-name"><span class="token namespace">th:</span>href</span><span class="token attr-value"><span
                                class="token punctuation">=</span><span class="token punctuation">"</span>@{/support}<span
                                class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>here<span class="token tag"><span
                                class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span> for help-desk support.
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
...</code></pre>
                </section>
            </section>
            <section id="removing-template-fragments" class="level2"><h2>8.4 Removing template fragments</h2>
                <p>Back to the example application, let’s revisit the last version of our product list template:</p>
                <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span
                        class="token punctuation">&lt;</span>table</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span><span class="token punctuation">&gt;</span></span>NAME<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span
                            class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span><span class="token punctuation">&gt;</span></span>PRICE<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span
                            class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span><span
        class="token punctuation">&gt;</span></span>IN STOCK<span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;/</span>th</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span><span
        class="token punctuation">&gt;</span></span>COMMENTS<span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;/</span>th</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span> <span class="token attr-name"><span
        class="token namespace">th:</span>each</span><span class="token attr-value"><span class="token punctuation">=</span><span
        class="token punctuation">"</span>prod : ${prods}<span class="token punctuation">"</span></span> <span class="token attr-name"><span
        class="token namespace">th:</span>class</span><span class="token attr-value"><span class="token punctuation">=</span><span
        class="token punctuation">"</span>${prodStat.odd}? <span class="token punctuation">'</span>odd<span class="token punctuation">'</span><span
        class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name"><span
        class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span
        class="token punctuation">"</span>${prod.name}<span class="token punctuation">"</span></span><span
        class="token punctuation">&gt;</span></span>Onions<span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name"><span
        class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span
        class="token punctuation">"</span>${prod.price}<span class="token punctuation">"</span></span><span
        class="token punctuation">&gt;</span></span>2.41<span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name"><span
        class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span
        class="token punctuation">"</span>${prod.inStock}? #{true} : #{false}<span class="token punctuation">"</span></span><span
        class="token punctuation">&gt;</span></span>yes<span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name"><span
          class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span
          class="token punctuation">"</span>${#lists.size(prod.comments)}<span class="token punctuation">"</span></span><span
          class="token punctuation">&gt;</span></span>2<span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span> comment/s
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span
          class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>comments.html<span class="token punctuation">"</span></span>
     <span class="token attr-name"><span class="token namespace">th:</span>href</span><span class="token attr-value"><span
              class="token punctuation">=</span><span class="token punctuation">"</span>@{/product/comments(prodId<span class="token punctuation">=</span>${prod.id})}<span
              class="token punctuation">"</span></span>
     <span class="token attr-name"><span class="token namespace">th:</span>unless</span><span class="token attr-value"><span
              class="token punctuation">=</span><span class="token punctuation">"</span>${#lists.isEmpty(prod.comments)}<span class="token punctuation">"</span></span><span
              class="token punctuation">&gt;</span></span>view<span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>table</span><span
        class="token punctuation">&gt;</span></span></code></pre>
                <p>This code is just fine as a template, but as a static page (when directly open by a browser without Thymeleaf processing it) it would not
                    make a nice prototype.</p>
                <p>Why? Because, although perfectly displayable by browsers, that table only has a row, and this row has mock data. As a prototype, it simply
                    wouldn’t look realistic enough… we should have more than one product, <em>we need more rows</em>.</p>
                <p>So let’s add some:</p>
                <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span
                        class="token punctuation">&lt;</span>table</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span><span class="token punctuation">&gt;</span></span>NAME<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span
                            class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span><span class="token punctuation">&gt;</span></span>PRICE<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span
                            class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span><span
        class="token punctuation">&gt;</span></span>IN STOCK<span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;/</span>th</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span><span
        class="token punctuation">&gt;</span></span>COMMENTS<span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;/</span>th</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span> <span class="token attr-name"><span
        class="token namespace">th:</span>each</span><span class="token attr-value"><span class="token punctuation">=</span><span
        class="token punctuation">"</span>prod : ${prods}<span class="token punctuation">"</span></span> <span class="token attr-name"><span
        class="token namespace">th:</span>class</span><span class="token attr-value"><span class="token punctuation">=</span><span
        class="token punctuation">"</span>${prodStat.odd}? <span class="token punctuation">'</span>odd<span class="token punctuation">'</span><span
        class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name"><span
        class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span
        class="token punctuation">"</span>${prod.name}<span class="token punctuation">"</span></span><span
        class="token punctuation">&gt;</span></span>Onions<span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name"><span
        class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span
        class="token punctuation">"</span>${prod.price}<span class="token punctuation">"</span></span><span
        class="token punctuation">&gt;</span></span>2.41<span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name"><span
        class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span
        class="token punctuation">"</span>${prod.inStock}? #{true} : #{false}<span class="token punctuation">"</span></span><span
        class="token punctuation">&gt;</span></span>yes<span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name"><span
          class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span
          class="token punctuation">"</span>${#lists.size(prod.comments)}<span class="token punctuation">"</span></span><span
          class="token punctuation">&gt;</span></span>2<span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span> comment/s
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span
          class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>comments.html<span class="token punctuation">"</span></span>
     <span class="token attr-name"><span class="token namespace">th:</span>href</span><span class="token attr-value"><span
              class="token punctuation">=</span><span class="token punctuation">"</span>@{/product/comments(prodId<span class="token punctuation">=</span>${prod.id})}<span
              class="token punctuation">"</span></span>
     <span class="token attr-name"><span class="token namespace">th:</span>unless</span><span class="token attr-value"><span
              class="token punctuation">=</span><span class="token punctuation">"</span>${#lists.isEmpty(prod.comments)}<span class="token punctuation">"</span></span><span
              class="token punctuation">&gt;</span></span>view<span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span> <span class="token attr-name">class</span><span
        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>odd<span
        class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>Blue Lettuce<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span
                            class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>9.55<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span
                            class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>no<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span
                            class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>0<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span> comment/s
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>Mild Cinnamon<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span
                            class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>1.99<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span
                            class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>yes<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span
                            class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>3<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span> comment/s
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span
          class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>comments.html<span class="token punctuation">"</span></span><span
          class="token punctuation">&gt;</span></span>view<span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>table</span><span
        class="token punctuation">&gt;</span></span></code></pre>
                <p>Ok, now we have three, definitely better for a prototype. But… what will happen when we process it with Thymeleaf?:</p>
                <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span
                        class="token punctuation">&lt;</span>table</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span><span class="token punctuation">&gt;</span></span>NAME<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span
                            class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span><span class="token punctuation">&gt;</span></span>PRICE<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span
                            class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span><span
        class="token punctuation">&gt;</span></span>IN STOCK<span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;/</span>th</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span><span
        class="token punctuation">&gt;</span></span>COMMENTS<span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;/</span>th</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>Fresh Sweet Basil<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span
                            class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>4.99<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span
                            class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>yes<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span
                            class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>0<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span> comment/s
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span> <span class="token attr-name">class</span><span
        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>odd<span
        class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>Italian Tomato<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span
                            class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>1.25<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span
                            class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>no<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span
                            class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>2<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span> comment/s
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span
          class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>/gtvg/product/comments?prodId<span
          class="token punctuation">=</span>2<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>view<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span
                            class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>Yellow Bell Pepper<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span
                            class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>2.50<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span
                            class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>yes<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span
                            class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>0<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span> comment/s
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span> <span class="token attr-name">class</span><span
        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>odd<span
        class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>Old Cheddar<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span
                            class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>18.75<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span
                            class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>yes<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span
                            class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>1<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span> comment/s
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span
          class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>/gtvg/product/comments?prodId<span
          class="token punctuation">=</span>4<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>view<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span
                            class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span> <span class="token attr-name">class</span><span
        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>odd<span
        class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>Blue Lettuce<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span
                            class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>9.55<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span
                            class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>no<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span
                            class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>0<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span> comment/s
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>Mild Cinnamon<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span
                            class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>1.99<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span
                            class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>yes<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span
                            class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>3<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span> comment/s
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span
          class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>comments.html<span class="token punctuation">"</span></span><span
          class="token punctuation">&gt;</span></span>view<span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>table</span><span
        class="token punctuation">&gt;</span></span></code></pre>
                <p>The last two rows are mock rows! Well, of course they are: iteration was only applied to the first row, so there is no reason why Thymeleaf
                    should have removed the other two.</p>
                <p>We need a way to remove those two rows during template processing. Let’s use the <code>th:remove</code> attribute on the second and third
                    <code>&lt;tr&gt;</code> tags:</p>
                <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span
                        class="token punctuation">&lt;</span>table</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span><span class="token punctuation">&gt;</span></span>NAME<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span
                            class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span><span class="token punctuation">&gt;</span></span>PRICE<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span
                            class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span><span
        class="token punctuation">&gt;</span></span>IN STOCK<span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;/</span>th</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span><span
        class="token punctuation">&gt;</span></span>COMMENTS<span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;/</span>th</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span> <span class="token attr-name"><span
        class="token namespace">th:</span>each</span><span class="token attr-value"><span class="token punctuation">=</span><span
        class="token punctuation">"</span>prod : ${prods}<span class="token punctuation">"</span></span> <span class="token attr-name"><span
        class="token namespace">th:</span>class</span><span class="token attr-value"><span class="token punctuation">=</span><span
        class="token punctuation">"</span>${prodStat.odd}? <span class="token punctuation">'</span>odd<span class="token punctuation">'</span><span
        class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name"><span
        class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span
        class="token punctuation">"</span>${prod.name}<span class="token punctuation">"</span></span><span
        class="token punctuation">&gt;</span></span>Onions<span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name"><span
        class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span
        class="token punctuation">"</span>${prod.price}<span class="token punctuation">"</span></span><span
        class="token punctuation">&gt;</span></span>2.41<span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name"><span
        class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span
        class="token punctuation">"</span>${prod.inStock}? #{true} : #{false}<span class="token punctuation">"</span></span><span
        class="token punctuation">&gt;</span></span>yes<span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name"><span
          class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span
          class="token punctuation">"</span>${#lists.size(prod.comments)}<span class="token punctuation">"</span></span><span
          class="token punctuation">&gt;</span></span>2<span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span> comment/s
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span
          class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>comments.html<span class="token punctuation">"</span></span>
     <span class="token attr-name"><span class="token namespace">th:</span>href</span><span class="token attr-value"><span
              class="token punctuation">=</span><span class="token punctuation">"</span>@{/product/comments(prodId<span class="token punctuation">=</span>${prod.id})}<span
              class="token punctuation">"</span></span>
     <span class="token attr-name"><span class="token namespace">th:</span>unless</span><span class="token attr-value"><span
              class="token punctuation">=</span><span class="token punctuation">"</span>${#lists.isEmpty(prod.comments)}<span class="token punctuation">"</span></span><span
              class="token punctuation">&gt;</span></span>view<span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span> <span class="token attr-name">class</span><span
        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>odd<span
        class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">th:</span>remove</span><span
        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>all<span
        class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>Blue Lettuce<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span
                            class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>9.55<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span
                            class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>no<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span
                            class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>0<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span> comment/s
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span> <span class="token attr-name"><span
        class="token namespace">th:</span>remove</span><span class="token attr-value"><span class="token punctuation">=</span><span
        class="token punctuation">"</span>all<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>Mild Cinnamon<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span
                            class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>1.99<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span
                            class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>yes<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span
                            class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>3<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span> comment/s
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span
          class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>comments.html<span class="token punctuation">"</span></span><span
          class="token punctuation">&gt;</span></span>view<span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>table</span><span
        class="token punctuation">&gt;</span></span></code></pre>
                <p>Once processed, everything will look again as it should:</p>
                <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span
                        class="token punctuation">&lt;</span>table</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span><span class="token punctuation">&gt;</span></span>NAME<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span
                            class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span><span class="token punctuation">&gt;</span></span>PRICE<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span
                            class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span><span
        class="token punctuation">&gt;</span></span>IN STOCK<span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;/</span>th</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span><span
        class="token punctuation">&gt;</span></span>COMMENTS<span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;/</span>th</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>Fresh Sweet Basil<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span
                            class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>4.99<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span
                            class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>yes<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span
                            class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>0<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span> comment/s
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span> <span class="token attr-name">class</span><span
        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>odd<span
        class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>Italian Tomato<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span
                            class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>1.25<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span
                            class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>no<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span
                            class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>2<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span> comment/s
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span
          class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>/gtvg/product/comments?prodId<span
          class="token punctuation">=</span>2<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>view<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span
                            class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>Yellow Bell Pepper<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span
                            class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>2.50<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span
                            class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>yes<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span
                            class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>0<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span> comment/s
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span> <span class="token attr-name">class</span><span
        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>odd<span
        class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>Old Cheddar<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span
                            class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>18.75<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span
                            class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>yes<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span
                            class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>1<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span> comment/s
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span
          class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>/gtvg/product/comments?prodId<span
          class="token punctuation">=</span>4<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>view<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span
                            class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>table</span><span
        class="token punctuation">&gt;</span></span></code></pre>
                <p>And what does that <code>all</code> value in the attribute, mean? <code>th:remove</code> can behave in five different ways, depending on its
                    value:</p>
                <ul>
                    <li><code>all</code>: Remove both the containing tag and all its children.</li>
                    <li><code>body</code>: Do not remove the containing tag, but remove all its children.</li>
                    <li><code>tag</code>: Remove the containing tag, but do not remove its children.</li>
                    <li><code>all-but-first</code>: Remove all children of the containing tag except the first one.</li>
                    <li><code>none</code> : Do nothing. This value is useful for dynamic evaluation.</li>
                </ul>
                <p>What can that <code>all-but-first</code> value be useful for? It will let us save some <code>th:remove="all"</code> when prototyping:</p>
                <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span
                        class="token punctuation">&lt;</span>table</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>thead</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span><span
          class="token punctuation">&gt;</span></span>NAME<span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;/</span>th</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span><span
          class="token punctuation">&gt;</span></span>PRICE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span
                            class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span><span class="token punctuation">&gt;</span></span>IN STOCK<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span
                            class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span><span class="token punctuation">&gt;</span></span>COMMENTS<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span
                            class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>thead</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tbody</span> <span class="token attr-name"><span
        class="token namespace">th:</span>remove</span><span class="token attr-value"><span class="token punctuation">=</span><span
        class="token punctuation">"</span>all-but-first<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span> <span class="token attr-name"><span
        class="token namespace">th:</span>each</span><span class="token attr-value"><span class="token punctuation">=</span><span
        class="token punctuation">"</span>prod : ${prods}<span class="token punctuation">"</span></span> <span class="token attr-name"><span
        class="token namespace">th:</span>class</span><span class="token attr-value"><span class="token punctuation">=</span><span
        class="token punctuation">"</span>${prodStat.odd}? <span class="token punctuation">'</span>odd<span class="token punctuation">'</span><span
        class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name"><span
          class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span
          class="token punctuation">"</span>${prod.name}<span class="token punctuation">"</span></span><span
          class="token punctuation">&gt;</span></span>Onions<span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name"><span
          class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span
          class="token punctuation">"</span>${prod.price}<span class="token punctuation">"</span></span><span
          class="token punctuation">&gt;</span></span>2.41<span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name"><span
          class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span
          class="token punctuation">"</span>${prod.inStock}? #{true} : #{false}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>yes<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span
                            class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name"><span
            class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${#lists.size(prod.comments)}<span
            class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>2<span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span> comment/s
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span
            class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>comments.html<span
            class="token punctuation">"</span></span>
       <span class="token attr-name"><span class="token namespace">th:</span>href</span><span class="token attr-value"><span
                class="token punctuation">=</span><span class="token punctuation">"</span>@{/product/comments(prodId<span class="token punctuation">=</span>${prod.id})}<span
                class="token punctuation">"</span></span>
       <span class="token attr-name"><span class="token namespace">th:</span>unless</span><span class="token attr-value"><span
                class="token punctuation">=</span><span class="token punctuation">"</span>${#lists.isEmpty(prod.comments)}<span
                class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>view<span class="token tag"><span
                            class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span> <span class="token attr-name">class</span><span
        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>odd<span
        class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>Blue Lettuce<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span
                            class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span
          class="token punctuation">&gt;</span></span>9.55<span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>no<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span
                            class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span
            class="token punctuation">&gt;</span></span>0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span
                            class="token punctuation">&gt;</span></span> comment/s
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>Mild Cinnamon<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span
                            class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span
          class="token punctuation">&gt;</span></span>1.99<span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>yes<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span
                            class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span
            class="token punctuation">&gt;</span></span>3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span
                            class="token punctuation">&gt;</span></span> comment/s
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span
            class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>comments.html<span
            class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>view<span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tbody</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>table</span><span
        class="token punctuation">&gt;</span></span></code></pre>
                <p>The <code>th:remove</code> attribute can take any <em>Thymeleaf Standard Expression</em>, as long as it returns one of the allowed String
                    values (<code>all</code>, <code>tag</code>, <code>body</code>, <code>all-but-first</code> or <code>none</code>).</p>
                <p>This means removals could be conditional, like:</p>
                <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span
                        class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span
                        class="token punctuation">=</span><span class="token punctuation">"</span>/something<span
                        class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">th:</span>remove</span><span
                        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${condition}? tag : none<span
                        class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Link text not to be removed<span
                        class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span
                        class="token punctuation">&gt;</span></span></code></pre>
                <p>Also note that <code>th:remove</code> considers <code>null</code> a synonym to <code>none</code>, so the following works the same as the
                    example above:</p>
                <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span
                        class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span
                        class="token punctuation">=</span><span class="token punctuation">"</span>/something<span
                        class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">th:</span>remove</span><span
                        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${condition}? tag<span
                        class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Link text not to be removed<span
                        class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span
                        class="token punctuation">&gt;</span></span></code></pre>
                <p>In this case, if <code>${condition}</code> is false, <code>null</code> will be returned, and thus no removal will be performed.</p></section>
            <section id="layout-inheritance" class="level2"><h2>8.5 Layout Inheritance</h2>
                <p>To be able to have a single file as layout, fragments can be used. An example of a simple layout having <code>title</code> and
                    <code>content</code> using <code>th:fragment</code> and <code>th:replace</code>:</p>
                <pre class=" language-html"><code class=" language-html"><span class="token doctype">&lt;!DOCTYPE html&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name"><span
        class="token namespace">th:</span>fragment</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>layout (title, content)<span
        class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">xmlns:</span>th</span><span
        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://www.thymeleaf.org<span
        class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span> <span class="token attr-name"><span
        class="token namespace">th:</span>replace</span><span class="token attr-value"><span class="token punctuation">=</span><span
        class="token punctuation">"</span>${title}<span class="token punctuation">"</span></span><span
        class="token punctuation">&gt;</span></span>Layout Title<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span
                            class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span
        class="token punctuation">&gt;</span></span>Layout H1<span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name"><span
        class="token namespace">th:</span>replace</span><span class="token attr-value"><span class="token punctuation">=</span><span
        class="token punctuation">"</span>${content}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>Layout content<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span
                            class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>footer</span><span class="token punctuation">&gt;</span></span>
    Layout footer
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>footer</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span></code></pre>
                <p>This example declares a fragment called <strong>layout</strong> having <em>title</em> and <em>content</em> as parameters. Both will be
                    replaced on page inheriting it by provided fragment expressions in the example below.</p>
                <pre class=" language-html"><code class=" language-html"><span class="token doctype">&lt;!DOCTYPE html&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name"><span
        class="token namespace">th:</span>replace</span><span class="token attr-value"><span class="token punctuation">=</span><span
        class="token punctuation">"</span>~{layoutFile :: layout(~{::title}, ~{::section})}<span class="token punctuation">"</span></span><span
        class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Page Title<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>Page content<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span
                            class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>Included on page<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span
                            class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span></code></pre>
                <p>In this file, the <code>html</code> tag will be replaced by <em>layout</em>, but in the layout <code>title</code> and <code>content</code>
                    will have been replaced by <code>title</code> and <code>section</code> blocks respectively.</p>
                <p>If desired, the layout can be composed by several fragments as <em>header</em> and <em>footer</em>.</p></section>
        </section>
        <section id="local-variables" class="level1"><h1>9 Local Variables</h1>
            <p>Thymeleaf calls <em>local variables</em> the variables that are defined for a specific fragment of a template, and are only available for
                evaluation inside that fragment.</p>
            <p>An example we have already seen is the <code>prod</code> iter variable in our product list page:</p>
            <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span> <span
                    class="token attr-name"><span class="token namespace">th:</span>each</span><span class="token attr-value"><span
                    class="token punctuation">=</span><span class="token punctuation">"</span>prod : ${prods}<span
                    class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
...
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span
        class="token punctuation">&gt;</span></span></code></pre>
            <p>That <code>prod</code> variable will be available only within the bounds of the <code>&lt;tr&gt;</code> tag. Specifically:</p>
            <ul>
                <li>It will be available for any other <code>th:*</code> attributes executing in that tag with less <em>precedence</em> than
                    <code>th:each</code> (which means they will execute after <code>th:each</code>).
                </li>
                <li>It will be available for any child element of the <code>&lt;tr&gt;</code> tag, such as any <code>&lt;td&gt;</code> elements.</li>
            </ul>
            <p>Thymeleaf offers you a way to declare local variables without iteration, using the <code>th:with</code> attribute, and its syntax is like that of
                attribute value assignments:</p>
            <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span
                    class="token attr-name"><span class="token namespace">th:</span>with</span><span class="token attr-value"><span
                    class="token punctuation">=</span><span class="token punctuation">"</span>firstPer<span class="token punctuation">=</span>${persons[0]}<span
                    class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>
The name of the first person is <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span
                        class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span
                        class="token punctuation">=</span><span class="token punctuation">"</span>${firstPer.name}<span
                        class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Julius Caesar<span class="token tag"><span
                        class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>.
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></code></pre>
            <p>When <code>th:with</code> is processed, that <code>firstPer</code> variable is created as a local variable and added to the variables map coming
                from the context, so that it is available for evaluation along with any other variables declared in the context, but only within the bounds of
                the containing <code>&lt;div&gt;</code> tag.</p>
            <p>You can define several variables at the same time using the usual multiple assignment syntax:</p>
            <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span
                    class="token attr-name"><span class="token namespace">th:</span>with</span><span class="token attr-value"><span
                    class="token punctuation">=</span><span class="token punctuation">"</span>firstPer<span class="token punctuation">=</span>${persons[0]},secondPer<span
                    class="token punctuation">=</span>${persons[1]}<span class="token punctuation">"</span></span><span
                    class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>
The name of the first person is <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span
                        class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span
                        class="token punctuation">=</span><span class="token punctuation">"</span>${firstPer.name}<span
                        class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Julius Caesar<span class="token tag"><span
                        class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>.
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>
But the name of the second person is
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name"><span
        class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span
        class="token punctuation">"</span>${secondPer.name}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Marcus Antonius<span
                        class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span
                        class="token punctuation">&gt;</span></span>.
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></code></pre>
            <p>The <code>th:with</code> attribute allows reusing variables defined in the same attribute:</p>
            <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span
                    class="token attr-name"><span class="token namespace">th:</span>with</span><span class="token attr-value"><span
                    class="token punctuation">=</span><span class="token punctuation">"</span>company<span
                    class="token punctuation">=</span>${user.company + <span class="token punctuation">'</span> Co.<span class="token punctuation">'</span>},account<span
                    class="token punctuation">=</span>${accounts[company]}<span class="token punctuation">"</span></span><span
                    class="token punctuation">&gt;</span></span>...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span
                    class="token punctuation">&gt;</span></span></code></pre>
            <p>Let’s use this in our Grocery’s home page! Remember the code we wrote for outputting a formatted date?</p>
            <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span
                    class="token punctuation">&gt;</span></span>
Today is:
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name"><span
        class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span
        class="token punctuation">"</span>${#calendars.format(today,<span class="token punctuation">'</span>dd MMMM yyyy<span class="token punctuation">'</span>)}<span
        class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>13 february 2011<span class="token tag"><span
                        class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span
        class="token punctuation">&gt;</span></span></code></pre>
            <p>Well, what if we wanted that <code>"dd MMMM yyyy"</code> to actually depend on the locale? For example, we might want to add the following
                message to our <code>home_en.properties</code>:</p>
            <pre><code>date.format=MMMM dd'','' yyyy</code></pre>
            <p>…and an equivalent one to our <code>home_es.properties</code>:</p>
            <pre><code>date.format=dd ''de'' MMMM'','' yyyy</code></pre>
            <p>Now, let’s use <code>th:with</code> to get the localized date format into a variable, and then use it in our <code>th:text</code> expression:</p>
            <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span
                    class="token attr-name"><span class="token namespace">th:</span>with</span><span class="token attr-value"><span
                    class="token punctuation">=</span><span class="token punctuation">"</span>df<span class="token punctuation">=</span>#{date.format}<span
                    class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
Today is: <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name"><span
                        class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span
                        class="token punctuation">"</span>${#calendars.format(today,df)}<span class="token punctuation">"</span></span><span
                        class="token punctuation">&gt;</span></span>13 February 2011<span class="token tag"><span class="token tag"><span
                        class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span
        class="token punctuation">&gt;</span></span></code></pre>
            <p>That was clean and easy. In fact, given the fact that <code>th:with</code> has a higher <code>precedence</code> than <code>th:text</code>, we
                could have solved this all in the <code>span</code> tag:</p>
            <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span
                    class="token punctuation">&gt;</span></span>
Today is:
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name"><span
        class="token namespace">th:</span>with</span><span class="token attr-value"><span class="token punctuation">=</span><span
        class="token punctuation">"</span>df<span class="token punctuation">=</span>#{date.format}<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span
            class="token punctuation">=</span><span class="token punctuation">"</span>${#calendars.format(today,df)}<span
            class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>13 February 2011<span class="token tag"><span
                        class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span
        class="token punctuation">&gt;</span></span></code></pre>
            <p>You might be thinking: Precedence? We haven’t talked about that yet! Well, don’t worry because that is exactly what the next chapter is
                about.</p></section>
        <section id="attribute-precedence" class="level1"><h1>10 Attribute Precedence</h1>
            <p>What happens when you write more than one <code>th:*</code> attribute in the same tag? For example:</p>
            <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span
                    class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name"><span
        class="token namespace">th:</span>each</span><span class="token attr-value"><span class="token punctuation">=</span><span
        class="token punctuation">"</span>item : ${items}<span class="token punctuation">"</span></span> <span class="token attr-name"><span
        class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span
        class="token punctuation">"</span>${item.description}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Item description here...<span
                        class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span
                        class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span
        class="token punctuation">&gt;</span></span></code></pre>
            <p>We would expect that <code>th:each</code> attribute to execute before the <code>th:text</code> so that we get the results we want, but given the
                fact that the HTML/XML standards do not give any kind of meaning to the order in which the attributes in a tag are written, a
                <em>precedence</em> mechanism had to be established in the attributes themselves in order to be sure that this will work as expected.</p>
            <p>So, all Thymeleaf attributes define a numeric precedence, which establishes the order in which they are executed in the tag. This order is:</p>
            <div class="table-scroller">
                <table style="width:92%;">
                    <colgroup>
                        <col style="width: 11%">
                        <col style="width: 48%">
                        <col style="width: 31%">
                    </colgroup>
                    <thead>
                    <tr class="header">
                        <th style="text-align: left;">Order</th>
                        <th style="text-align: left;">Feature</th>
                        <th style="text-align: left;">Attributes</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr class="odd">
                        <td style="text-align: left;">1</td>
                        <td style="text-align: left;">Fragment inclusion</td>
                        <td style="text-align: left;"><code>th:insert</code><br>
                            <code>th:replace</code></td>
                    </tr>
                    <tr class="even">
                        <td style="text-align: left;">2</td>
                        <td style="text-align: left;">Fragment iteration</td>
                        <td style="text-align: left;"><code>th:each</code></td>
                    </tr>
                    <tr class="odd">
                        <td style="text-align: left;">3</td>
                        <td style="text-align: left;">Conditional evaluation</td>
                        <td style="text-align: left;"><code>th:if</code><br>
                            <code>th:unless</code><br>
                            <code>th:switch</code><br>
                            <code>th:case</code></td>
                    </tr>
                    <tr class="even">
                        <td style="text-align: left;">4</td>
                        <td style="text-align: left;">Local variable definition</td>
                        <td style="text-align: left;"><code>th:object</code><br>
                            <code>th:with</code></td>
                    </tr>
                    <tr class="odd">
                        <td style="text-align: left;">5</td>
                        <td style="text-align: left;">General attribute modification</td>
                        <td style="text-align: left;"><code>th:attr</code><br>
                            <code>th:attrprepend</code><br>
                            <code>th:attrappend</code></td>
                    </tr>
                    <tr class="even">
                        <td style="text-align: left;">6</td>
                        <td style="text-align: left;">Specific attribute modification</td>
                        <td style="text-align: left;"><code>th:value</code><br>
                            <code>th:href</code><br>
                            <code>th:src</code><br>
                            <code>...</code></td>
                    </tr>
                    <tr class="odd">
                        <td style="text-align: left;">7</td>
                        <td style="text-align: left;">Text (tag body modification)</td>
                        <td style="text-align: left;"><code>th:text</code><br>
                            <code>th:utext</code></td>
                    </tr>
                    <tr class="even">
                        <td style="text-align: left;">8</td>
                        <td style="text-align: left;">Fragment specification</td>
                        <td style="text-align: left;"><code>th:fragment</code></td>
                    </tr>
                    <tr class="odd">
                        <td style="text-align: left;">9</td>
                        <td style="text-align: left;">Fragment removal</td>
                        <td style="text-align: left;"><code>th:remove</code></td>
                    </tr>
                    </tbody>
                </table>
            </div>
            <p>This precedence mechanism means that the above iteration fragment will give exactly the same results if the attribute position is inverted
                (although it would be slightly less readable):</p>
            <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span
                    class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name"><span
        class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span
        class="token punctuation">"</span>${item.description}<span class="token punctuation">"</span></span> <span class="token attr-name"><span
        class="token namespace">th:</span>each</span><span class="token attr-value"><span class="token punctuation">=</span><span
        class="token punctuation">"</span>item : ${items}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Item description here...<span
                        class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span
                        class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span
        class="token punctuation">&gt;</span></span></code></pre>
        </section>
        <section id="comments-and-blocks" class="level1"><h1>11 Comments and Blocks</h1>
            <section id="standard-htmlxml-comments" class="level2"><h2>11.1. Standard HTML/XML comments</h2>
                <p>Standard HTML/XML comments <code>&lt;!-- ... --&gt;</code> can be used anywhere in Thymeleaf templates. Anything inside these comments won’t
                    be processed by Thymeleaf, and will be copied verbatim to the result:</p>
                <pre class=" language-html"><code class=" language-html"><span class="token comment" spellcheck="true">&lt;!-- User info follows --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name"><span
        class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span
        class="token punctuation">"</span>${...}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
...
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></code></pre>
            </section>
            <section id="thymeleaf-parser-level-comment-blocks" class="level2"><h2>11.2. Thymeleaf parser-level comment blocks</h2>
                <p>Parser-level comment blocks are code that will be simply removed from the template when Thymeleaf parses it. They look like this:</p>
                <pre class=" language-html"><code class=" language-html"><span class="token comment" spellcheck="true">&lt;!--/* This code will be removed at Thymeleaf parsing time! */--&gt;</span></code></pre>
                <p>Thymeleaf will remove everything between <code>&lt;!--/*</code> and <code>*/--&gt;</code>, so these comment blocks can also be used for
                    displaying code when a template is statically open, knowing that it will be removed when Thymeleaf processes it:</p>
                <pre class=" language-html"><code class=" language-html"><span class="token comment" spellcheck="true">&lt;!--/*--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
 you can see me only before Thymeleaf processes me!
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token comment" spellcheck="true">&lt;!--*/--&gt;</span></code></pre>
                <p>This might come very handy for prototyping tables with a lot of <code>&lt;tr&gt;</code>’s, for example:</p>
                <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span
                        class="token punctuation">&lt;</span>table</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span> <span class="token attr-name"><span
        class="token namespace">th:</span>each</span><span class="token attr-value"><span class="token punctuation">=</span><span
        class="token punctuation">"</span>x : ${xs}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
 ...
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
<span class="token comment" spellcheck="true">&lt;!--/*--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">&gt;</span></span>
 ...
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">&gt;</span></span>
 ...
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
<span class="token comment" spellcheck="true">&lt;!--*/--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>table</span><span
        class="token punctuation">&gt;</span></span></code></pre>
            </section>
            <section id="thymeleaf-prototype-only-comment-blocks" class="level2"><h2>11.3. Thymeleaf prototype-only comment blocks</h2>
                <p>Thymeleaf allows the definition of special comment blocks marked to be comments when the template is open statically (i.e.&nbsp;as a
                    prototype), but considered normal markup by Thymeleaf when executing the template.</p>
                <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span
                        class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>hello!<span class="token tag"><span
                        class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
<span class="token comment" spellcheck="true">&lt;!--/*/
&lt;div th:text="${...}"&gt;
...
&lt;/div&gt;
/*/--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>goodbye!<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span></code></pre>
                <p>Thymeleaf’s parsing system will simply remove the <code>&lt;!--/*/</code> and <code>/*/--&gt;</code> markers, but not its contents, which
                    will be left therefore uncommented. So when executing the template, Thymeleaf will actually see this:</p>
                <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span
                        class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>hello!<span class="token tag"><span
                        class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name"><span
        class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span
        class="token punctuation">"</span>${...}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
...
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>goodbye!<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span></code></pre>
                <p>As with parser-level comment blocks, this feature is dialect-independent.</p></section>
            <section id="synthetic-thblock-tag" class="level2"><h2>11.4. Synthetic <code>th:block</code> tag</h2>
                <p>Thymeleaf’s only element processor (not an attribute) included in the Standard Dialects is <code>th:block</code>.</p>
                <p><code>th:block</code> is a mere attribute container that allows template developers to specify whichever attributes they want. Thymeleaf will
                    execute these attributes and then simply make the block, but not its contents, disappear.</p>
                <p>So it could be useful, for example, when creating iterated tables that require more than one <code>&lt;tr&gt;</code> for each element:</p>
                <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span
                        class="token punctuation">&lt;</span>table</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">th:</span>block</span> <span
        class="token attr-name"><span class="token namespace">th:</span>each</span><span class="token attr-value"><span class="token punctuation">=</span><span
        class="token punctuation">"</span>user : ${users}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name"><span
            class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${user.login}<span
            class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>...<span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name"><span
            class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${user.name}<span
            class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>...<span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name">colspan</span><span
            class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>2<span
            class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span
            class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${user.address}<span
            class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>...<span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">th:</span>block</span><span
        class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>table</span><span
        class="token punctuation">&gt;</span></span></code></pre>
                <p>And especially useful when used in combination with prototype-only comment blocks:</p>
                <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span
                        class="token punctuation">&lt;</span>table</span><span class="token punctuation">&gt;</span></span>
<span class="token comment" spellcheck="true">&lt;!--/*/ &lt;th:block th:each="user : ${users}"&gt; /*/--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name"><span
            class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${user.login}<span
            class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>...<span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name"><span
            class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${user.name}<span
            class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>...<span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name">colspan</span><span
            class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>2<span
            class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span
            class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${user.address}<span
            class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>...<span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
<span class="token comment" spellcheck="true">&lt;!--/*/ &lt;/th:block&gt; /*/--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>table</span><span
        class="token punctuation">&gt;</span></span></code></pre>
                <p>Note how this solution allows templates to be valid HTML (no need to add forbidden <code>&lt;div&gt;</code> blocks inside
                    <code>&lt;table&gt;</code>), and still works OK when open statically in browsers as prototypes!</p></section>
        </section>
        <section id="inlining" class="level1"><h1>12 Inlining</h1>
            <section id="expression-inlining" class="level2"><h2>12.1 Expression inlining</h2>
                <p>Although the Standard Dialect allows us to do almost everything using tag attributes, there are situations in which we could prefer writing
                    expressions directly into our HTML texts. For example, we could prefer writing this:</p>
                <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span
                        class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>Hello, [[${session.user.name}]]!<span
                        class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span
                        class="token punctuation">&gt;</span></span></code></pre>
                <p>…instead of this:</p>
                <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span
                        class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>Hello, <span class="token tag"><span
                        class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name"><span
                        class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span
                        class="token punctuation">"</span>${session.user.name}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Sebastian<span
                        class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span
                        class="token punctuation">&gt;</span></span>!<span class="token tag"><span class="token tag"><span
                        class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span></code></pre>
                <p>Expressions between <code>[[...]]</code> or <code>[(...)]</code> are considered <strong>inlined expressions</strong> in Thymeleaf, and inside
                    them we can use any kind of expression that would also be valid in a <code>th:text</code> or <code>th:utext</code> attribute.</p>
                <p>Note that, while <code>[[...]]</code> corresponds to <code>th:text</code> (i.e.&nbsp;result will be <em>HTML-escaped</em>),
                    <code>[(...)]</code> corresponds to <code>th:utext</code> and will not perform any HTML-escaping. So with a variable such as <code>msg =
                        'This is &lt;b&gt;great!&lt;/b&gt;'</code>, given this fragment:</p>
                <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span
                        class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>The message is "[(${msg})]"<span
                        class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span
                        class="token punctuation">&gt;</span></span></code></pre>
                <p>The result will have those <code>&lt;b&gt;</code> tags unescaped, so:</p>
                <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span
                        class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>The message is "This is <span
                        class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b</span><span class="token punctuation">&gt;</span></span>great!<span
                        class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b</span><span
                        class="token punctuation">&gt;</span></span>"<span class="token tag"><span class="token tag"><span
                        class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span></code></pre>
                <p>Whereas if escaped like:</p>
                <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span
                        class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>The message is "[[${msg}]]"<span
                        class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span
                        class="token punctuation">&gt;</span></span></code></pre>
                <p>The result will be HTML-escaped:</p>
                <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span
                        class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>The message is "This is <span
                        class="token entity" title="<">&amp;lt;</span>b<span class="token entity" title=">">&amp;gt;</span>great!<span class="token entity"
                                                                                                                                       title="<">&amp;lt;</span>/b<span
                        class="token entity" title=">">&amp;gt;</span>"<span class="token tag"><span class="token tag"><span
                        class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span></code></pre>
                <p>Note that <strong>text inlining is active by default</strong> in the body of every tag in our markup –- not the tags themselves -–, so there
                    is nothing we need to do to enable it.</p>
                <section id="inlining-vs-natural-templates" class="level3"><h3>Inlining vs natural templates</h3>
                    <p>If you come from other template engines in which this way of outputting text is the norm, you might be asking: <em>Why aren’t we doing
                        this from the beginning? It’s less code than all those</em> <code>th:text</code> <em>attributes!</em></p>
                    <p>Well, be careful there, because although you might find inlining quite interesting, you should always remember that inlined expressions
                        will be displayed verbatim in your HTML files when you open them statically, so you probably won’t be able to use them as design
                        prototypes anymore!</p>
                    <p>The difference between how a browser would statically display our fragment of code without using inlining…</p>
                    <pre><code>Hello, Sebastian!</code></pre>
                    <p>…and using it…</p>
                    <pre><code>Hello, [[${session.user.name}]]!</code></pre>
                    <p>…is quite clear in terms of design usefulness.</p></section>
                <section id="disabling-inlining" class="level3"><h3>Disabling inlining</h3>
                    <p>This mechanism can be disabled though, because there might actually be occasions in which we do want to output the <code>[[...]]</code>
                        or <code>[(...)]</code> sequences without its contents being processed as an expression. For that, we will use
                        <code>th:inline="none"</code>:</p>
                    <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span
                            class="token attr-name"><span class="token namespace">th:</span>inline</span><span class="token attr-value"><span
                            class="token punctuation">=</span><span class="token punctuation">"</span>none<span class="token punctuation">"</span></span><span
                            class="token punctuation">&gt;</span></span>A double array looks like this: [[1, 2, 3], [4, 5]]!<span class="token tag"><span
                            class="token tag"><span class="token punctuation">&lt;/</span>p</span><span
                            class="token punctuation">&gt;</span></span></code></pre>
                    <p>This will result in:</p>
                    <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span
                            class="token punctuation">&gt;</span></span>A double array looks like this: [[1, 2, 3], [4, 5]]!<span class="token tag"><span
                            class="token tag"><span class="token punctuation">&lt;/</span>p</span><span
                            class="token punctuation">&gt;</span></span></code></pre>
                </section>
            </section>
            <section id="text-inlining" class="level2"><h2>12.2 Text inlining</h2>
                <p><em>Text inlining</em> is very similar to the <em>expression inlining</em> capability we have just seen, but it actually adds more power. It
                    has to be enabled explicitly with <code>th:inline="text"</code>.</p>
                <p>Text inlining not only allows us to use the same <em>inlined expressions</em> we just saw, but in fact processes <em>tag bodies</em> as if
                    they were templates processed in the <code>TEXT</code> template mode, which allows us to perform text-based template logic (not only output
                    expressions).</p>
                <p>We will see more about this in the next chapter about the <em>textual template modes</em>.</p></section>
            <section id="javascript-inlining" class="level2"><h2>12.3 JavaScript inlining</h2>
                <p>JavaScript inlining allows for a better integration of JavaScript <code>&lt;script&gt;</code> blocks in templates being processed in the
                    <code>HTML</code> template mode.</p>
                <p>As with <em>text inlining</em>, this is actually equivalent to processing the scripts contents as if they were templates in the <code>JAVASCRIPT</code>
                    template mode, and therefore all the power of the <em>textual template modes</em> (see next chapter) will be at hand. However, in this
                    section we will focus on how we can use it for adding the output of our Thymeleaf expressions into our JavaScript blocks.</p>
                <p>This mode has to be explicitly enabled using <code>th:inline="javascript"</code>:</p>
                <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span
                        class="token punctuation">&lt;</span>script</span> <span class="token attr-name"><span
                        class="token namespace">th:</span>inline</span><span class="token attr-value"><span class="token punctuation">=</span><span
                        class="token punctuation">"</span>javascript<span class="token punctuation">"</span></span><span
                        class="token punctuation">&gt;</span></span>
...
var username = [[${session.user.name}]];
...
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span
        class="token punctuation">&gt;</span></span></code></pre>
                <p>This will result in:</p>
                <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span
                        class="token punctuation">&lt;</span>script</span> <span class="token attr-name"><span
                        class="token namespace">th:</span>inline</span><span class="token attr-value"><span class="token punctuation">=</span><span
                        class="token punctuation">"</span>javascript<span class="token punctuation">"</span></span><span
                        class="token punctuation">&gt;</span></span>
...
var username = "Sebastian \"Fruity\" Applejuice";
...
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span
        class="token punctuation">&gt;</span></span></code></pre>
                <p>Two important things to note in the code above:</p>
                <p><em>First</em>, that JavaScript inlining will not only output the required text, but also enclose it with quotes and JavaScript-escape its
                    contents, so that the expression results are output as a <strong>well-formed JavaScript literal</strong>.</p>
                <p><em>Second</em>, that this is happening because we are outputting the <code>${session.user.name}</code> expression as
                    <strong>escaped</strong>, i.e.&nbsp;using a double-bracket expression: <code>[[${session.user.name}]]</code>. If instead we used <em>unescaped</em>
                    like:</p>
                <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span
                        class="token punctuation">&lt;</span>script</span> <span class="token attr-name"><span
                        class="token namespace">th:</span>inline</span><span class="token attr-value"><span class="token punctuation">=</span><span
                        class="token punctuation">"</span>javascript<span class="token punctuation">"</span></span><span
                        class="token punctuation">&gt;</span></span>
...
var username = [(${session.user.name})];
...
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span
        class="token punctuation">&gt;</span></span></code></pre>
                <p>The result would look like:</p>
                <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span
                        class="token punctuation">&lt;</span>script</span> <span class="token attr-name"><span
                        class="token namespace">th:</span>inline</span><span class="token attr-value"><span class="token punctuation">=</span><span
                        class="token punctuation">"</span>javascript<span class="token punctuation">"</span></span><span
                        class="token punctuation">&gt;</span></span>
...
var username = Sebastian "Fruity" Applejuice;
...
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span
        class="token punctuation">&gt;</span></span></code></pre>
                <p>…which is malformed JavaScript code. But outputting something unescaped might be what we need if we are building parts of our script by means
                    of appending inlined expressions, so it’s good to have this tool at hand.</p>
                <section id="javascript-natural-templates" class="level3"><h3>JavaScript natural templates</h3>
                    <p>The mentioned <em>intelligence</em> of the JavaScript inlining mechanism goes much further than just applying JavaScript-specific
                        escaping and outputting expression results as valid literals.</p>
                    <p>For example, we can wrap our (escaped) inlined expressions in JavaScript comments like:</p>
                    <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span
                            class="token attr-name"><span class="token namespace">th:</span>inline</span><span class="token attr-value"><span
                            class="token punctuation">=</span><span class="token punctuation">"</span>javascript<span
                            class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
...
var username = /*[[${session.user.name}]]*/ "Gertrud Kiwifruit";
...
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span
        class="token punctuation">&gt;</span></span></code></pre>
                    <p>And Thymeleaf will ignore everything we have written <em>after the comment and before the semicolon</em> (in this case <code>'Gertrud
                        Kiwifruit'</code>), so the result of executing this will look exactly like when we were not using the wrapping comments:</p>
                    <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span
                            class="token attr-name"><span class="token namespace">th:</span>inline</span><span class="token attr-value"><span
                            class="token punctuation">=</span><span class="token punctuation">"</span>javascript<span
                            class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
...
var username = "Sebastian \"Fruity\" Applejuice";
...
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span
        class="token punctuation">&gt;</span></span></code></pre>
                    <p>But have another careful look at the original template code:</p>
                    <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span
                            class="token attr-name"><span class="token namespace">th:</span>inline</span><span class="token attr-value"><span
                            class="token punctuation">=</span><span class="token punctuation">"</span>javascript<span
                            class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
...
var username = /*[[${session.user.name}]]*/ "Gertrud Kiwifruit";
...
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span
        class="token punctuation">&gt;</span></span></code></pre>
                    <p>Note how this is <strong>valid JavaScript</strong> code. And it will perfectly execute when you open your template file in a static
                        manner (without executing it at a server).</p>
                    <p>So what we have here is a way to do <strong>JavaScript natural templates</strong>!</p></section>
                <section id="advanced-inlined-evaluation-and-javascript-serialization" class="level3"><h3>Advanced inlined evaluation and JavaScript
                    serialization</h3>
                    <p>An important thing to note regarding JavaScript inlining is that this expression evaluation is intelligent and not limited to Strings.
                        Thymeleaf will correctly write in JavaScript syntax the following kinds of objects:</p>
                    <ul>
                        <li>Strings</li>
                        <li>Numbers</li>
                        <li>Booleans</li>
                        <li>Arrays</li>
                        <li>Collections</li>
                        <li>Maps</li>
                        <li>Beans (objects with <em>getter</em> and <em>setter</em> methods)</li>
                    </ul>
                    <p>For example, if we had the following code:</p>
                    <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span
                            class="token attr-name"><span class="token namespace">th:</span>inline</span><span class="token attr-value"><span
                            class="token punctuation">=</span><span class="token punctuation">"</span>javascript<span
                            class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
...
var user = /*[[${session.user}]]*/ null;
...
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span
        class="token punctuation">&gt;</span></span></code></pre>
                    <p>That <code>${session.user}</code> expression will evaluate to a <code>User</code> object, and Thymeleaf will correctly convert it to
                        Javascript syntax:</p>
                    <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span
                            class="token attr-name"><span class="token namespace">th:</span>inline</span><span class="token attr-value"><span
                            class="token punctuation">=</span><span class="token punctuation">"</span>javascript<span
                            class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
...
var user = {"age":null,"firstName":"John","lastName":"Apricot",
            "name":"John Apricot","nationality":"Antarctica"};
...
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span
        class="token punctuation">&gt;</span></span></code></pre>
                    <p>The way this JavaScript serialization is done is by means of an implementation of the <code>org.thymeleaf.standard.serializer.IStandardJavaScriptSerializer</code>
                        interface, which can be configured at the instance of the <code>StandardDialect</code> being used at the template engine.</p>
                    <p>The default implementation of this JS serialization mechanism will look for the <a href="https://github.com/FasterXML/jackson">Jackson
                        library</a> in the classpath and, if present, will use it. If not, it will apply a built-in serialization mechanism that covers the
                        needs of most scenarios and produces similar results (but is less flexible).</p></section>
            </section>
            <section id="css-inlining" class="level2"><h2>12.4 CSS inlining</h2>
                <p>Thymeleaf also allows the use of inlining in CSS <code>&lt;style&gt;</code> tags, such as:</p>
                <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span
                        class="token punctuation">&lt;</span>style</span> <span class="token attr-name"><span
                        class="token namespace">th:</span>inline</span><span class="token attr-value"><span class="token punctuation">=</span><span
                        class="token punctuation">"</span>css<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
...
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span
        class="token punctuation">&gt;</span></span></code></pre>
                <p>For example, say we have two variables set to two different <code>String</code> values:</p>
                <pre><code>classname = 'main elems'
align = 'center'</code></pre>
                <p>We could use them just like:</p>
                <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span
                        class="token punctuation">&lt;</span>style</span> <span class="token attr-name"><span
                        class="token namespace">th:</span>inline</span><span class="token attr-value"><span class="token punctuation">=</span><span
                        class="token punctuation">"</span>css<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
.[[${classname}]] {
  text-align: [[${align}]];
}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span
        class="token punctuation">&gt;</span></span></code></pre>
                <p>And the result would be:</p>
                <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span
                        class="token punctuation">&lt;</span>style</span> <span class="token attr-name"><span
                        class="token namespace">th:</span>inline</span><span class="token attr-value"><span class="token punctuation">=</span><span
                        class="token punctuation">"</span>css<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
.main\ elems {
  text-align: center;
}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span
        class="token punctuation">&gt;</span></span></code></pre>
                <p>Note how CSS inlining also bears some <em>intelligence</em>, just like JavaScript’s. Specifically, expressions output via <em>escaped</em>
                    expressions like <code>[[${classname}]]</code> will be escaped as <strong>CSS identifiers</strong>. That is why our <code>classname = 'main
                        elems'</code> has turned into <code>main\ elems</code> in the fragment of code above.</p>
                <section id="advanced-features-css-natural-templates-etc." class="level3"><h3>Advanced features: CSS natural templates, etc.</h3>
                    <p>In an equivalent way to what was explained before for JavaScript, CSS inlining also allows for our <code>&lt;style&gt;</code> tags to
                        work both statically and dynamically, i.e. as <strong>CSS natural templates</strong> by means of wrapping inlined expressions in
                        comments. See:</p>
                    <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span
                            class="token attr-name"><span class="token namespace">th:</span>inline</span><span class="token attr-value"><span
                            class="token punctuation">=</span><span class="token punctuation">"</span>css<span class="token punctuation">"</span></span><span
                            class="token punctuation">&gt;</span></span>
.main\ elems {
  text-align: /*[[${align}]]*/ left;
}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span
        class="token punctuation">&gt;</span></span></code></pre>
                </section>
            </section>
        </section>
        <section id="textual-template-modes" class="level1"><h1>13 Textual template modes</h1>
            <section id="textual-syntax" class="level2"><h2>13.1 Textual syntax</h2>
                <p>Three of the Thymeleaf <em>template modes</em> are considered <strong>textual</strong>: <code>TEXT</code>, <code>JAVASCRIPT</code> and <code>CSS</code>.
                    This differentiates them from the markup template modes: <code>HTML</code> and <code>XML</code>.</p>
                <p>The key difference between <em>textual</em> template modes and the markup ones is that in a textual template there are no tags into which to
                    insert logic in the form of attributes, so we have to rely on other mechanisms.</p>
                <p>The first and most basic of these mechanisms is <strong>inlining</strong>, which we have already detailed in the previous chapter. Inlining
                    syntax is the most simple way to output results of expressions in textual template mode, so this is a perfectly valid template for a text
                    email.</p>
                <pre><code>  Dear [(${name})],

Please find attached the results of the report you requested
with name "[(${report.name})]".

Sincerely,
The Reporter.</code></pre>
                <p>Even without tags, the example above is a complete and valid Thymeleaf template that can be executed in the <code>TEXT</code> template mode.
                </p>
                <p>But in order to include more complex logic than mere <em>output expressions</em>, we need a new non-tag-based syntax:</p>
                <pre><code>[# th:each="item : ${items}"]
- [(${item})]
[/]</code></pre>
                <p>Which is actually the <em>condensed</em> version of the more verbose:</p>
                <pre><code>[#th:block th:each="item : ${items}"]
- [#th:block th:utext="${item}" /]
[/th:block]</code></pre>
                <p>Note how this new syntax is based on elements (i.e.&nbsp;processable tags) that are declared as <code>[#element ...]</code> instead of <code>&lt;element
                    ...&gt;</code>. Elements are open like <code>[#element ...]</code> and closed like <code>[/element]</code>, and standalone tags can be
                    declared by minimizing the open element with a <code>/</code> in a way almost equivalent to XML tags: <code>[#element ... /]</code>.</p>
                <p>The Standard Dialect only contains a processor for one of these elements: the already-known <code>th:block</code>, though we could extend
                    this in our dialects and create new elements in the usual way. Also, the <code>th:block</code> element (<code>[#th:block ...] ...
                        [/th:block]</code>) is allowed to be abbreviated as the empty string (<code>[# ...] ... [/]</code>), so the above block is actually
                    equivalent to:</p>
                <pre><code>[# th:each="item : ${items}"]
- [# th:utext="${item}" /]
[/]</code></pre>
                <p>And given <code>[# th:utext="${item}" /]</code> is equivalent to an <em>inlined unescaped expression</em>, we could just use it in order to
                    have less code. Thus we end up with the first fragment of code we saw above:</p>
                <pre><code>[# th:each="item : ${items}"]
- [(${item})]
[/]</code></pre>
                <p>Note that the <em>textual syntax requires full element balance (no unclosed tags) and quoted attributes</em> – it’s more XML-style than
                    HTML-style.</p>
                <p>Let’s have a look at a more complete example of a <code>TEXT</code> template, a <em>plain text</em> email template:</p>
                <pre><code>Dear [(${customer.name})],

This is the list of our products:

[# th:each="prod : ${products}"]
- [(${prod.name})]. Price: [(${prod.price})] EUR/kg
[/]

Thanks,
The Thymeleaf Shop</code></pre>
                <p>After executing, the result of this could be something like:</p>
                <pre><code>Dear Mary Ann Blueberry,

This is the list of our products:

- Apricots. Price: 1.12 EUR/kg
- Bananas. Price: 1.78 EUR/kg
- Apples. Price: 0.85 EUR/kg
- Watermelon. Price: 1.91 EUR/kg

Thanks,
The Thymeleaf Shop</code></pre>
                <p>And another example in <code>JAVASCRIPT</code> template mode, a <code>greeter.js</code> file, we process as a textual template and which
                    result we call from our HTML pages. Note this is <em>not</em> a <code>&lt;script&gt;</code> block in an HTML template, but a
                    <code>.js</code> file being processed as a template on its own:</p>
                <pre class=" language-javascript"><code class=" language-javascript">var greeter = function() {

var username = [[${session.user.name}]];

[# th:each="salut : ${salutations}"]
  alert([[${salut}]] + " " + username);
[/]

};</code></pre>
                <p>After executing, the result of this could be something like:</p>
                <pre class=" language-javascript"><code class=" language-javascript">var greeter = function() {

var username = "Bertrand \"Crunchy\" Pear";

  alert("Hello" + " " + username);
  alert("Ol\u00E1" + " " + username);
  alert("Hola" + " " + username);

};</code></pre>
                <section id="escaped-element-attributes" class="level3"><h3>Escaped element attributes</h3>
                    <p>In order to avoid interactions with parts of the template that might be processed in other modes (e.g.&nbsp;<code>text</code>-mode
                        inlining inside an <code>HTML</code> template), Thymeleaf 3.0 allows the attributes in elements in its <em>textual syntax</em> to be
                        escaped. So:</p>
                    <ul>
                        <li>Attributes in <code>TEXT</code> template mode will be <em>HTML-unescaped</em>.</li>
                        <li>Attributes in <code>JAVASCRIPT</code> template mode will be <em>JavaScript-unescaped</em>.</li>
                        <li>Attributes in <code>CSS</code> template mode will be <em>CSS-unescaped</em>.</li>
                    </ul>
                    <p>So this would be perfectly OK in a <code>TEXT</code>-mode template (note the <code>&amp;gt;</code>):</p>
                    <pre><code>  [# th:if="${120&amp;lt;user.age}"]
 Congratulations!
[/]</code></pre>
                    <p>Of course that <code>&amp;lt;</code> would make no sense in a <em>real text</em> template, but it is a good idea if we are processing an
                        HTML template with a <code>th:inline="text"</code> block containing the code above and we want to make sure our browser doesn’t take
                        that <code>&lt;user.age</code> for the name of an open tag when statically opening the file as a prototype.</p></section>
            </section>
            <section id="extensibility" class="level2"><h2>13.2 Extensibility</h2>
                <p>One of the advantages of this syntax is that it is just as extensible as the <em>markup</em> one. Developers can still define their own
                    dialects with custom elements and attributes, apply a prefix to them (optionally), and then use them in textual template modes:</p>
                <pre><code>  [#myorg:dosomething myorg:importantattr="211"]some text[/myorg:dosomething]</code></pre>
            </section>
            <section id="textual-prototype-only-comment-blocks-adding-code" class="level2"><h2>13.3 Textual prototype-only comment blocks: adding code</h2>
                <p>The <code>JAVASCRIPT</code> and <code>CSS</code> template modes (not available for <code>TEXT</code>) allow including code between a special
                    comment syntax <code>/*[+...+]*/</code> so that Thymeleaf will automatically uncomment such code when processing the template:</p>
                <pre class=" language-javascript"><code class=" language-javascript">var x = 23;

/*[+

var msg  = "This is a working application";

+]*/

var f = function() {
...</code></pre>
                <p>Will be executed as:</p>
                <pre class=" language-javascript"><code class=" language-javascript">var x = 23;

var msg  = "This is a working application";

var f = function() {
...</code></pre>
                <p>You can include expressions inside these comments, and they will be evaluated:</p>
                <pre class=" language-javascript"><code class=" language-javascript">var x = 23;

/*[+

var msg  = "Hello, " + [[${session.user.name}]];

+]*/

var f = function() {
...</code></pre>
            </section>
            <section id="textual-parser-level-comment-blocks-removing-code" class="level2"><h2>13.4 Textual parser-level comment blocks: removing code</h2>
                <p>In a way similar to that of prototype-only comment blocks, all the three textual template modes (<code>TEXT</code>, <code>JAVASCRIPT</code>
                    and <code>CSS</code>) make it possible to instruct Thymeleaf to remove code between special <code>/*[- */</code> and <code>/* -]*/</code>
                    marks, like this:</p>
                <pre class=" language-javascript"><code class=" language-javascript">var x = 23;

/*[- */

var msg  = "This is shown only when executed statically!";

/* -]*/

var f = function() {
...</code></pre>
                <p>Or this, in <code>TEXT</code> mode:</p>
                <pre><code>...
/*[- Note the user is obtained from the session, which must exist -]*/
Welcome [(${session.user.name})]!
...</code></pre>
            </section>
            <section id="natural-javascript-and-css-templates" class="level2"><h2>13.5 Natural JavaScript and CSS templates</h2>
                <p>As seen in the previous chapter, JavaScript and CSS inlining offer the possibility to include inlined expressions inside JavaScript/CSS
                    comments, like:</p>
                <pre class=" language-javascript"><code class=" language-javascript">...
var username = /*[[${session.user.name}]]*/ "Sebastian Lychee";
...</code></pre>
                <p>…which is valid JavaScript, and once executed could look like:</p>
                <pre class=" language-html"><code class=" language-html">...
var username = "John Apricot";
...</code></pre>
                <p>This same <em>trick</em> of enclosing inlined expressions inside comments can in fact be used for the entire textual mode syntax:</p>
                <pre><code>  /*[# th:if="${user.admin}"]*/
 alert('Welcome admin');
/*[/]*/</code></pre>
                <p>That alert in the code above will be shown when the template is open statically – because it is 100% valid JavaScript –, and also when the
                    template is run if the user is an admin. It is equivalent to:</p>
                <pre><code>  [# th:if="${user.admin}"]
 alert('Welcome admin');
[/]</code></pre>
                <p>…which is actually the code to which the initial version is converted during template parsing.</p>
                <p>Note however that wrapping elements in comments does not clean the lines they live in (to the right until a <code>;</code> is found) as
                    inlined output expressions do. That behaviour is reserved for inlined output expressions only.</p>
                <p>So Thymeleaf 3.0 allows the development of <strong>complex JavaScript scripts and CSS style sheets in the form of natural templates</strong>,
                    valid both as a <em>prototype</em> and as a <em>working template</em>.</p></section>
        </section>
        <section id="some-more-pages-for-our-grocery" class="level1"><h1>14 Some more pages for our grocery</h1>
            <p>Now we know a lot about using Thymeleaf, we can add some new pages to our website for order management.</p>
            <p>Note that we will focus on HTML code, but you can have a look at the bundled source code if you want to see the corresponding controllers.</p>
            <section id="order-list" class="level2"><h2>14.1 Order List</h2>
                <p>Let’s start by creating an order list page, <code>/WEB-INF/templates/order/list.html</code>:</p>
                <pre class=" language-html"><code class=" language-html"><span class="token doctype">&lt;!DOCTYPE html&gt;</span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name"><span
        class="token namespace">xmlns:</span>th</span><span class="token attr-value"><span class="token punctuation">=</span><span
        class="token punctuation">"</span>http://www.thymeleaf.org<span class="token punctuation">"</span></span><span
        class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Good Thymes Virtual Grocery<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span
        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Content-Type<span
        class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span
        class="token punctuation">=</span><span class="token punctuation">"</span>text/html; charset<span class="token punctuation">=</span>UTF-8<span
        class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span
        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>stylesheet<span
        class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span
        class="token punctuation">=</span><span class="token punctuation">"</span>text/css<span class="token punctuation">"</span></span> <span
        class="token attr-name">media</span><span class="token attr-value"><span class="token punctuation">=</span><span
        class="token punctuation">"</span>all<span class="token punctuation">"</span></span>
      <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>../../../css/gtvg.css<span
            class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">th:</span>href</span><span
            class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@{/css/gtvg.css}<span
            class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>Order list<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span
                            class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>table</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span><span
            class="token punctuation">&gt;</span></span>DATE<span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;/</span>th</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span><span class="token punctuation">&gt;</span></span>CUSTOMER<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span
                            class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span><span
            class="token punctuation">&gt;</span></span>TOTAL<span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;/</span>th</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span><span class="token punctuation">&gt;</span></span><span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span
                            class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span> <span class="token attr-name"><span
          class="token namespace">th:</span>each</span><span class="token attr-value"><span class="token punctuation">=</span><span
          class="token punctuation">"</span>o : ${orders}<span class="token punctuation">"</span></span> <span class="token attr-name"><span
          class="token namespace">th:</span>class</span><span class="token attr-value"><span class="token punctuation">=</span><span
          class="token punctuation">"</span>${oStat.odd}? <span class="token punctuation">'</span>odd<span class="token punctuation">'</span><span
          class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name"><span
            class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${#calendars.format(o.date,<span
            class="token punctuation">'</span>dd/MMM/yyyy<span class="token punctuation">'</span>)}<span class="token punctuation">"</span></span><span
            class="token punctuation">&gt;</span></span>13 jan 2011<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span
                            class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name"><span
            class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${o.customer.name}<span
            class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Frederic Tomato<span class="token tag"><span
                            class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name"><span
            class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${#aggregates.sum(o.orderLines.{purchasePrice * amount})}<span
            class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>23.32<span class="token tag"><span
                            class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span
              class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>details.html<span
              class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">th:</span>href</span><span
              class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@{/order/details(orderId<span
              class="token punctuation">=</span>${o.id})}<span class="token punctuation">"</span></span><span
              class="token punctuation">&gt;</span></span>view<span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>table</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span
          class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>../home.html<span
          class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">th:</span>href</span><span
          class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@{/}<span class="token punctuation">"</span></span><span
          class="token punctuation">&gt;</span></span>Return to home<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span
                            class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span></code></pre>
                <p>There’s nothing here that should surprise us, except for this little bit of OGNL magic:</p>
                <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span
                        class="token punctuation">&lt;</span>td</span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span
                        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${#aggregates.sum(o.orderLines.{purchasePrice * amount})}<span
                        class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>23.32<span class="token tag"><span
                        class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span></code></pre>
                <p>What that does is, for each order line (<code>OrderLine</code> object) in the order, multiply its <code>purchasePrice</code> and
                    <code>amount</code> properties (by calling the corresponding <code>getPurchasePrice()</code> and <code>getAmount()</code> methods) and
                    return the result into a list of numbers, later aggregated by the <code>#aggregates.sum(...)</code> function in order to obtain the order
                    total price.</p>
                <p>You’ve got to love the power of OGNL.</p></section>
            <section id="order-details" class="level2"><h2>14.2 Order Details</h2>
                <p>Now for the order details page, in which we will make a heavy use of asterisk syntax:</p>
                <pre class=" language-html"><code class=" language-html"><span class="token doctype">&lt;!DOCTYPE html&gt;</span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name"><span
        class="token namespace">xmlns:</span>th</span><span class="token attr-value"><span class="token punctuation">=</span><span
        class="token punctuation">"</span>http://www.thymeleaf.org<span class="token punctuation">"</span></span><span
        class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Good Thymes Virtual Grocery<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span
        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Content-Type<span
        class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span
        class="token punctuation">=</span><span class="token punctuation">"</span>text/html; charset<span class="token punctuation">=</span>UTF-8<span
        class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span
        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>stylesheet<span
        class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span
        class="token punctuation">=</span><span class="token punctuation">"</span>text/css<span class="token punctuation">"</span></span> <span
        class="token attr-name">media</span><span class="token attr-value"><span class="token punctuation">=</span><span
        class="token punctuation">"</span>all<span class="token punctuation">"</span></span>
      <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>../../../css/gtvg.css<span
            class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">th:</span>href</span><span
            class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@{/css/gtvg.css}<span
            class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span> <span class="token attr-name"><span
        class="token namespace">th:</span>object</span><span class="token attr-value"><span class="token punctuation">=</span><span
        class="token punctuation">"</span>${order}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>Order details<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span
                            class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b</span><span
                            class="token punctuation">&gt;</span></span>Code:<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b</span><span
                            class="token punctuation">&gt;</span></span> <span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;</span>span</span> <span class="token attr-name"><span
                            class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span
                            class="token punctuation">"</span>*{id}<span class="token punctuation">"</span></span><span
                            class="token punctuation">&gt;</span></span>99<span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span
                            class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b</span><span
            class="token punctuation">&gt;</span></span>Date:<span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;/</span>b</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name"><span
            class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>*{#calendars.format(date,<span
            class="token punctuation">'</span>dd MMM yyyy<span class="token punctuation">'</span>)}<span class="token punctuation">"</span></span><span
            class="token punctuation">&gt;</span></span>13 jan 2011<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span
                            class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span
        class="token punctuation">&gt;</span></span>Customer<span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name"><span
        class="token namespace">th:</span>object</span><span class="token attr-value"><span class="token punctuation">=</span><span
        class="token punctuation">"</span>*{customer}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b</span><span
                            class="token punctuation">&gt;</span></span>Name:<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b</span><span
                            class="token punctuation">&gt;</span></span> <span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;</span>span</span> <span class="token attr-name"><span
                            class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span
                            class="token punctuation">"</span>*{name}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Frederic Tomato<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span
                            class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b</span><span
            class="token punctuation">&gt;</span></span>Since:<span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;/</span>b</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name"><span
            class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>*{#calendars.format(customerSince,<span
            class="token punctuation">'</span>dd MMM yyyy<span class="token punctuation">'</span>)}<span class="token punctuation">"</span></span><span
            class="token punctuation">&gt;</span></span>1 jan 2011<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span
                            class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span
        class="token punctuation">&gt;</span></span>Products<span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>table</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span><span class="token punctuation">&gt;</span></span>PRODUCT<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span
                            class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span><span class="token punctuation">&gt;</span></span>AMOUNT<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span
                            class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span><span class="token punctuation">&gt;</span></span>PURCHASE PRICE<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span
                            class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span> <span class="token attr-name"><span
          class="token namespace">th:</span>each</span><span class="token attr-value"><span class="token punctuation">=</span><span
          class="token punctuation">"</span>ol,row : *{orderLines}<span class="token punctuation">"</span></span> <span class="token attr-name"><span
          class="token namespace">th:</span>class</span><span class="token attr-value"><span class="token punctuation">=</span><span
          class="token punctuation">"</span>${row.odd}? <span class="token punctuation">'</span>odd<span class="token punctuation">'</span><span
          class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name"><span
            class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${ol.product.name}<span
            class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Strawberries<span class="token tag"><span
                            class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name"><span
            class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${ol.amount}<span
            class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span
            class="token punctuation">=</span><span class="token punctuation">"</span>number<span class="token punctuation">"</span></span><span
            class="token punctuation">&gt;</span></span>3<span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name"><span
            class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${ol.purchasePrice}<span
            class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span
            class="token punctuation">=</span><span class="token punctuation">"</span>number<span class="token punctuation">"</span></span><span
            class="token punctuation">&gt;</span></span>23.32<span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>table</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b</span><span
          class="token punctuation">&gt;</span></span>TOTAL:<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b</span><span
                            class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name"><span
          class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span
          class="token punctuation">"</span>*{#aggregates.sum(orderLines.{purchasePrice * amount})}<span class="token punctuation">"</span></span><span
          class="token punctuation">&gt;</span></span>35.23<span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span
          class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>list.html<span
          class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">th:</span>href</span><span
          class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@{/order/list}<span
          class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Return to order list<span class="token tag"><span
                            class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span></code></pre>
                <p>Not much really new here, except for this nested object selection:</p>
                <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span
                        class="token punctuation">&lt;</span>body</span> <span class="token attr-name"><span
                        class="token namespace">th:</span>object</span><span class="token attr-value"><span class="token punctuation">=</span><span
                        class="token punctuation">"</span>${order}<span class="token punctuation">"</span></span><span
                        class="token punctuation">&gt;</span></span>

...

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name"><span
        class="token namespace">th:</span>object</span><span class="token attr-value"><span class="token punctuation">=</span><span
        class="token punctuation">"</span>*{customer}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b</span><span
                            class="token punctuation">&gt;</span></span>Name:<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b</span><span
                            class="token punctuation">&gt;</span></span> <span class="token tag"><span class="token tag"><span
                            class="token punctuation">&lt;</span>span</span> <span class="token attr-name"><span
                            class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span
                            class="token punctuation">"</span>*{name}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Frederic Tomato<span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span
                            class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span
                            class="token punctuation">&gt;</span></span>
...
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

...
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span></code></pre>
                <p>…which makes that <code>*{name}</code> equivalent to:</p>
                <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span
                        class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span
                        class="token tag"><span class="token punctuation">&lt;</span>b</span><span class="token punctuation">&gt;</span></span>Name:<span
                        class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b</span><span
                        class="token punctuation">&gt;</span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span
                        class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span
                        class="token punctuation">=</span><span class="token punctuation">"</span>${order.customer.name}<span class="token punctuation">"</span></span><span
                        class="token punctuation">&gt;</span></span>Frederic Tomato<span class="token tag"><span class="token tag"><span
                        class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span
                        class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span></code></pre>
            </section>
        </section>
        <section id="more-on-configuration" class="level1"><h1>15 More on Configuration</h1>
            <section id="template-resolvers" class="level2"><h2>15.1 Template Resolvers</h2>
                <p>For our Good Thymes Virtual Grocery, we chose an <code>ITemplateResolver</code> implementation called
                    <code>WebApplicationTemplateResolver</code> that allowed us to obtain templates as resources from the application resources (the <em>Servlet
                        Context</em> in a Servlet-based webapp).</p>
                <p>Besides giving us the ability to create our own template resolver by implementing <code>ITemplateResolver,</code> Thymeleaf includes four
                    implementations out of the box:</p>
                <ul>
                    <li><p><code>org.thymeleaf.templateresolver.ClassLoaderTemplateResolver</code>, which resolves templates as classloader resources, like:</p>
                        <pre class=" language-java"><code class=" language-java"><span class="token keyword">return</span> Thread<span
                                class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span
                                class="token punctuation">)</span><span class="token punctuation">.</span><span
                                class="token function">getContextClassLoader</span><span class="token punctuation">(</span><span
                                class="token punctuation">)</span><span class="token punctuation">.</span><span
                                class="token function">getResourceAsStream</span><span class="token punctuation">(</span>template<span
                                class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
                    </li>
                    <li><p><code>org.thymeleaf.templateresolver.FileTemplateResolver</code>, which resolves templates as files from the file system, like:</p>
                        <pre class=" language-java"><code class=" language-java"><span class="token keyword">return</span> <span
                                class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span
                                class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">File</span><span
                                class="token punctuation">(</span>template<span class="token punctuation">)</span><span class="token punctuation">)</span><span
                                class="token punctuation">;</span></code></pre>
                    </li>
                    <li><p><code>org.thymeleaf.templateresolver.UrlTemplateResolver</code>, which resolves templates as URLs (even non-local ones), like:</p>
                        <pre class=" language-java"><code class=" language-java"><span class="token keyword">return</span> <span
                                class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">URL</span><span
                                class="token punctuation">(</span>template<span class="token punctuation">)</span><span class="token punctuation">)</span><span
                                class="token punctuation">.</span><span class="token function">openStream</span><span class="token punctuation">(</span><span
                                class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
                    </li>
                    <li><p><code>org.thymeleaf.templateresolver.StringTemplateResolver</code>, which resolves templates directly as the <code>String</code>
                        being specified as <code>template</code> (or <em>template name</em>, which in this case is obviously much more than a mere name):</p>
                        <pre class=" language-java"><code class=" language-java"><span class="token keyword">return</span> <span
                                class="token keyword">new</span> <span class="token class-name">StringReader</span><span class="token punctuation">(</span>templateName<span
                                class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
                    </li>
                </ul>
                <p>All of the pre-bundled implementations of <code>ITemplateResolver</code> allow the same set of configuration parameters, which include:</p>
                <ul>
                    <li><p>Prefix and suffix (as already seen):</p>
                        <pre class=" language-java"><code class=" language-java">templateResolver<span class="token punctuation">.</span><span
                                class="token function">setPrefix</span><span class="token punctuation">(</span><span
                                class="token string">"/WEB-INF/templates/"</span><span class="token punctuation">)</span><span
                                class="token punctuation">;</span>
templateResolver<span class="token punctuation">.</span><span class="token function">setSuffix</span><span class="token punctuation">(</span><span
                                    class="token string">".html"</span><span class="token punctuation">)</span><span
                                    class="token punctuation">;</span></code></pre>
                    </li>
                    <li><p>Template aliases that allow the use of template names that do not directly correspond to file names. If both suffix/prefix and alias
                        exist, alias will be applied before prefix/suffix:</p>
                        <pre class=" language-java"><code class=" language-java">templateResolver<span class="token punctuation">.</span><span
                                class="token function">addTemplateAlias</span><span class="token punctuation">(</span><span
                                class="token string">"adminHome"</span><span class="token punctuation">,</span><span
                                class="token string">"profiles/admin/home"</span><span class="token punctuation">)</span><span
                                class="token punctuation">;</span>
templateResolver<span class="token punctuation">.</span><span class="token function">setTemplateAliases</span><span class="token punctuation">(</span>aliasesMap<span
                                    class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
                    </li>
                    <li><p>Encoding to be applied when reading templates:</p>
                        <pre class=" language-java"><code class=" language-java">templateResolver<span class="token punctuation">.</span><span
                                class="token function">setCharacterEncoding</span><span class="token punctuation">(</span><span
                                class="token string">"UTF-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
                    </li>
                    <li><p>Template mode to be used:</p>
                        <pre class=" language-java"><code class=" language-java"><span class="token comment" spellcheck="true">// Default is HTML</span>
templateResolver<span class="token punctuation">.</span><span class="token function">setTemplateMode</span><span class="token punctuation">(</span><span
                                    class="token string">"XML"</span><span class="token punctuation">)</span><span
                                    class="token punctuation">;</span></code></pre>
                    </li>
                    <li><p>Default mode for template cache, and patterns for defining whether specific templates are cacheable or not:</p>
                        <pre class=" language-java"><code class=" language-java"><span class="token comment" spellcheck="true">// Default is true</span>
templateResolver<span class="token punctuation">.</span><span class="token function">setCacheable</span><span class="token punctuation">(</span><span
                                    class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
templateResolver<span class="token punctuation">.</span><span class="token function">getCacheablePatternSpec</span><span class="token punctuation">(</span><span
                                    class="token punctuation">)</span><span class="token punctuation">.</span><span
                                    class="token function">addPattern</span><span class="token punctuation">(</span><span class="token string">"/users/*"</span><span
                                    class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
                    </li>
                    <li><p>TTL in milliseconds for parsed template cache entries originated in this template resolver. If not set, the only way to remove an
                        entry from the cache will be to exceed the cache max size (oldest entry will be removed).</p>
                        <pre class=" language-java"><code class=" language-java"><span class="token comment" spellcheck="true">// Default is no TTL (only cache size exceeded would remove entries)</span>
templateResolver<span class="token punctuation">.</span><span class="token function">setCacheTTLMs</span><span class="token punctuation">(</span>60000L<span
                                    class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
                    </li>
                </ul>
                <blockquote><p>The Thymeleaf + Spring integration packages offer a <code>SpringResourceTemplateResolver</code> implementation which uses all the
                    Spring infrastructure for accessing and reading resources in applications, and which is the recommended implementation in Spring-enabled
                    applications.</p></blockquote>
                <section id="chaining-template-resolvers" class="level3"><h3>Chaining Template Resolvers</h3>
                    <p>Also, a Template Engine can specify several template resolvers, in which case an order can be established between them for template
                        resolution so that, if the first one is not able to resolve the template, the second one is asked, and so on:</p>
                    <pre class=" language-java"><code class=" language-java">ClassLoaderTemplateResolver classLoaderTemplateResolver <span
                            class="token operator">=</span> <span class="token keyword">new</span> <span
                            class="token class-name">ClassLoaderTemplateResolver</span><span class="token punctuation">(</span><span
                            class="token punctuation">)</span><span class="token punctuation">;</span>
classLoaderTemplateResolver<span class="token punctuation">.</span><span class="token function">setOrder</span><span
                                class="token punctuation">(</span>Integer<span class="token punctuation">.</span><span
                                class="token function">valueOf</span><span class="token punctuation">(</span><span class="token number">1</span><span
                                class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

WebApplicationTemplateResolver webApplicationTemplateResolver <span class="token operator">=</span>
    <span class="token keyword">new</span> <span class="token class-name">WebApplicationTemplateResolver</span><span class="token punctuation">(</span>application<span
                                class="token punctuation">)</span><span class="token punctuation">;</span>
webApplicationTemplateResolver<span class="token punctuation">.</span><span class="token function">setOrder</span><span class="token punctuation">(</span>Integer<span
                                class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span
                                class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span
                                class="token punctuation">;</span>

templateEngine<span class="token punctuation">.</span><span class="token function">addTemplateResolver</span><span class="token punctuation">(</span>classLoaderTemplateResolver<span
                                class="token punctuation">)</span><span class="token punctuation">;</span>
templateEngine<span class="token punctuation">.</span><span class="token function">addTemplateResolver</span><span class="token punctuation">(</span>webApplicationTemplateResolver<span
                                class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
                    <p>When several template resolvers are applied, it is recommended to specify patterns for each template resolver so that Thymeleaf can
                        quickly discard those template resolvers that are not meant to resolve the template, enhancing performance. Doing this is not a
                        requirement, but a recommendation:</p>
                    <pre class=" language-java"><code class=" language-java">ClassLoaderTemplateResolver classLoaderTemplateResolver <span
                            class="token operator">=</span> <span class="token keyword">new</span> <span
                            class="token class-name">ClassLoaderTemplateResolver</span><span class="token punctuation">(</span><span
                            class="token punctuation">)</span><span class="token punctuation">;</span>
classLoaderTemplateResolver<span class="token punctuation">.</span><span class="token function">setOrder</span><span
                                class="token punctuation">(</span>Integer<span class="token punctuation">.</span><span
                                class="token function">valueOf</span><span class="token punctuation">(</span><span class="token number">1</span><span
                                class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">// This classloader will not be even asked for any templates not matching these patterns </span>
classLoaderTemplateResolver<span class="token punctuation">.</span><span class="token function">getResolvablePatternSpec</span><span
                                class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span
                                class="token function">addPattern</span><span class="token punctuation">(</span><span
                                class="token string">"/layout/*.html"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
classLoaderTemplateResolver<span class="token punctuation">.</span><span class="token function">getResolvablePatternSpec</span><span
                                class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span
                                class="token function">addPattern</span><span class="token punctuation">(</span><span class="token string">"/menu/*.html"</span><span
                                class="token punctuation">)</span><span class="token punctuation">;</span>

WebApplicationTemplateResolver webApplicationTemplateResolver <span class="token operator">=</span>
    <span class="token keyword">new</span> <span class="token class-name">WebApplicationTemplateResolver</span><span class="token punctuation">(</span>application<span
                                class="token punctuation">)</span><span class="token punctuation">;</span>
webApplicationTemplateResolver<span class="token punctuation">.</span><span class="token function">setOrder</span><span class="token punctuation">(</span>Integer<span
                                class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span
                                class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span
                                class="token punctuation">;</span></code></pre>
                    <p>If these <em>resolvable patterns</em> are not specified, we will be relying on the specific capabilities of each of the <code>ITemplateResolver</code>
                        implementations we are using. Note that not all implementations might be able to determine the existence of a template before resolving,
                        and thus could always consider a template as <em>resolvable</em> and break the resolution chain (not allowing other resolvers to check
                        for the same template), but then be unable to read the real resource.</p>
                    <p>All the <code>ITemplateResolver</code> implementations that are included with core Thymeleaf include a mechanism that will allow us to
                        make the resolvers <em>really check</em> if a resource exists before considering it <em>resolvable</em>. It is the
                        <code>checkExistence</code> flag, which works like:</p>
                    <pre class=" language-java"><code class=" language-java">ClassLoaderTemplateResolver classLoaderTemplateResolver <span
                            class="token operator">=</span> <span class="token keyword">new</span> <span
                            class="token class-name">ClassLoaderTemplateResolver</span><span class="token punctuation">(</span><span
                            class="token punctuation">)</span><span class="token punctuation">;</span>
classLoaderTemplateResolver<span class="token punctuation">.</span><span class="token function">setOrder</span><span
                                class="token punctuation">(</span>Integer<span class="token punctuation">.</span><span
                                class="token function">valueOf</span><span class="token punctuation">(</span><span class="token number">1</span><span
                                class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
classLoaderTempalteResolver<span class="token punctuation">.</span><span class="token function">setCheckExistence</span><span class="token punctuation">(</span><span
                                class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
                    <p>This <code>checkExistence</code> flag forces the resolver perform a <em>real check</em> for resource existence during the resolution
                        phase (and let the following resolver in the chain be called if existence check returns false). While this might sound good in every
                        case, in most cases this will mean a double access to the resource itself (once for checking existence, another time for reading it),
                        and could be a performance issue in some scenarios, e.g.&nbsp;remote URL-based template resources – a potential performance issue that
                        might anyway get largely mitigated by the use of the template cache (in which case templates will only be <em>resolved</em> the first
                        time they are accessed).</p></section>
            </section>
            <section id="message-resolvers" class="level2"><h2>15.2 Message Resolvers</h2>
                <p>We did not explicitly specify a Message Resolver implementation for our Grocery application, and as it was explained before, this meant that
                    the implementation being used was an <code>org.thymeleaf.messageresolver.StandardMessageResolver</code> object.</p>
                <p><code>StandardMessageResolver</code> is the standard implementation of the <code>IMessageResolver</code> interface, but we could create our
                    own if we wanted, adapted to the specific needs of our application.</p>
                <blockquote><p>The Thymeleaf + Spring integration packages offer by default an <code>IMessageResolver</code> implementation which uses the
                    standard Spring way of retrieving externalized messages, by using <code>MessageSource</code> beans declared at the Spring Application
                    Context.</p></blockquote>
                <section id="standard-message-resolver" class="level3"><h3>Standard Message Resolver</h3>
                    <p>So how does <code>StandardMessageResolver</code> look for the messages requested at a specific template?</p>
                    <p>If the template name is <code>home</code> and it is located in <code>/WEB-INF/templates/home.html</code>, and the requested locale is
                        <code>gl_ES</code> then this resolver will look for messages in the following files, in this order:</p>
                    <ul>
                        <li><code>/WEB-INF/templates/home_gl_ES.properties</code></li>
                        <li><code>/WEB-INF/templates/home_gl.properties</code></li>
                        <li><code>/WEB-INF/templates/home.properties</code></li>
                    </ul>
                    <p>Refer to the JavaDoc documentation of the <code>StandardMessageResolver</code> class for more detail on how the complete message
                        resolution mechanism works.</p></section>
                <section id="configuring-message-resolvers" class="level3"><h3>Configuring message resolvers</h3>
                    <p>What if we wanted to add a message resolver (or more) to the Template Engine? Easy:</p>
                    <pre class=" language-java"><code class=" language-java"><span class="token comment" spellcheck="true">// For setting only one</span>
templateEngine<span class="token punctuation">.</span><span class="token function">setMessageResolver</span><span class="token punctuation">(</span>messageResolver<span
                                class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">// For setting more than one</span>
templateEngine<span class="token punctuation">.</span><span class="token function">addMessageResolver</span><span class="token punctuation">(</span>messageResolver<span
                                class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
                    <p>And why would we want to have more than one message resolver? For the same reason as template resolvers: message resolvers are ordered
                        and if the first one cannot resolve a specific message, the second one will be asked, then the third, etc.</p></section>
            </section>
            <section id="conversion-services" class="level2"><h2>15.3 Conversion Services</h2>
                <p>The <em>conversion service</em> that enables us to perform data conversion and formatting operations by means of the <em>double-brace</em>
                    syntax (<code>${{ ... }}</code>) is actually a feature of the Standard Dialect, not of the Thymeleaf Template Engine itself.</p>
                <p>As such, the way to configure it is by setting our custom implementation of the <code>IStandardConversionService</code> interface directly
                    into the instance of <code>StandardDialect</code> that is being configured into the template engine. Like:</p>
                <pre class=" language-java"><code class=" language-java">IStandardConversionService customConversionService <span
                        class="token operator">=</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span
                        class="token punctuation">.</span>

StandardDialect dialect <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StandardDialect</span><span
                            class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
dialect<span class="token punctuation">.</span><span class="token function">setConversionService</span><span class="token punctuation">(</span>customConversionService<span
                            class="token punctuation">)</span><span class="token punctuation">;</span>

templateEngine<span class="token punctuation">.</span><span class="token function">setDialect</span><span class="token punctuation">(</span>dialect<span
                            class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
                <blockquote><p>Note that the thymeleaf-spring3 and thymeleaf-spring4 packages contain the <code>SpringStandardDialect</code>, and this dialect
                    already comes pre-configured with an implementation of <code>IStandardConversionService</code> that integrates Spring’s own <em>Conversion
                        Service</em> infrastructure into Thymeleaf.</p></blockquote>
            </section>
            <section id="logging" class="level2"><h2>15.4 Logging</h2>
                <p>Thymeleaf pays quite a lot of attention to logging, and always tries to offer the maximum amount of useful information through its logging
                    interface.</p>
                <p>The logging library used is <code>slf4j,</code> which in fact acts as a bridge to whichever logging implementation we might want to use in
                    our application (for example, <code>log4j</code>).</p>
                <p>Thymeleaf classes will log <code>TRACE</code>, <code>DEBUG</code> and <code>INFO</code>-level information, depending on the level of detail
                    we desire, and besides general logging it will use three special loggers associated with the TemplateEngine class which we can configure
                    separately for different purposes:</p>
                <ul>
                    <li><code>org.thymeleaf.TemplateEngine.CONFIG</code> will output detailed configuration of the library during initialization.</li>
                    <li><code>org.thymeleaf.TemplateEngine.TIMER</code> will output information about the amount of time taken to process each template (useful
                        for benchmarking!)
                    </li>
                    <li><code>org.thymeleaf.TemplateEngine.cache</code> is the prefix for a set of loggers that output specific information about the caches.
                        Although the names of the cache loggers are configurable by the user and thus could change, by default they are:
                        <ul>
                            <li><code>org.thymeleaf.TemplateEngine.cache.TEMPLATE_CACHE</code></li>
                            <li><code>org.thymeleaf.TemplateEngine.cache.EXPRESSION_CACHE</code></li>
                        </ul>
                    </li>
                </ul>
                <p>An example configuration for Thymeleaf’s logging infrastructure, using <code>log4j</code>, could be:</p>
                <pre><code>log4j.logger.org.thymeleaf=DEBUG
log4j.logger.org.thymeleaf.TemplateEngine.CONFIG=TRACE
log4j.logger.org.thymeleaf.TemplateEngine.TIMER=TRACE
log4j.logger.org.thymeleaf.TemplateEngine.cache.TEMPLATE_CACHE=TRACE</code></pre>
            </section>
        </section>
        <section id="template-cache" class="level1"><h1>16 Template Cache</h1>
            <p>Thymeleaf works thanks to a set of parsers – for markup and text – that parse templates into sequences of events (open tag, text, close tag,
                comment, etc.) and a series of processors – one for each type of behaviour that needs to be applied – that modify the template parsed event
                sequence in order to create the results we expect by combining the original template with our data.</p>
            <p>It also includes – by default – a cache that stores parsed templates; the sequence of events resulting from reading and parsing template files
                before processing them. This is especially useful when working in a web application, and builds on the following concepts:</p>
            <ul>
                <li>Input/Output is almost always the slowest part of any application. In-memory processing is extremely quick by comparison.</li>
                <li>Cloning an existing in-memory event sequence is always much quicker than reading a template file, parsing it and creating a new event
                    sequence for it.
                </li>
                <li>Web applications usually have only a few dozen templates.</li>
                <li>Template files are small-to-medium size, and they are not modified while the application is running.</li>
            </ul>
            <p>This all leads to the idea that caching the most used templates in a web application is feasible without wasting large amounts of memory, and
                also that it will save a lot of time that would be spent on input/output operations on a small set of files that, in fact, never change.</p>
            <p>And how can we take control of this cache? First, we’ve learned before that we can enable or disable it at the Template Resolver, even acting
                only on specific templates:</p>
            <pre class=" language-java"><code class=" language-java"><span class="token comment" spellcheck="true">// Default is true</span>
templateResolver<span class="token punctuation">.</span><span class="token function">setCacheable</span><span class="token punctuation">(</span><span
                        class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
templateResolver<span class="token punctuation">.</span><span class="token function">getCacheablePatternSpec</span><span class="token punctuation">(</span><span
                        class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addPattern</span><span
                        class="token punctuation">(</span><span class="token string">"/users/*"</span><span class="token punctuation">)</span><span
                        class="token punctuation">;</span></code></pre>
            <p>Also, we could modify its configuration by establishing our own <em>Cache Manager</em> object, which could be an instance of the default <code>StandardCacheManager</code>
                implementation:</p>
            <pre class=" language-java"><code class=" language-java"><span class="token comment" spellcheck="true">// Default is 200</span>
StandardCacheManager cacheManager <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StandardCacheManager</span><span
                        class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
cacheManager<span class="token punctuation">.</span><span class="token function">setTemplateCacheMaxSize</span><span class="token punctuation">(</span><span
                        class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
templateEngine<span class="token punctuation">.</span><span class="token function">setCacheManager</span><span
                        class="token punctuation">(</span>cacheManager<span class="token punctuation">)</span><span
                        class="token punctuation">;</span></code></pre>
            <p>Refer to the javadoc API of <code>org.thymeleaf.cache.StandardCacheManager</code> for more info on configuring the caches.</p>
            <p>Entries can be manually removed from the template cache:</p>
            <pre class=" language-java"><code class=" language-java"><span class="token comment" spellcheck="true">// Clear the cache completely</span>
templateEngine<span class="token punctuation">.</span><span class="token function">clearTemplateCache</span><span class="token punctuation">(</span><span
                        class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">// Clear a specific template from the cache</span>
templateEngine<span class="token punctuation">.</span><span class="token function">clearTemplateCacheFor</span><span class="token punctuation">(</span><span
                        class="token string">"/users/userList"</span><span class="token punctuation">)</span><span
                        class="token punctuation">;</span></code></pre>
        </section>
        <section id="decoupled-template-logic" class="level1"><h1>17 Decoupled Template Logic</h1>
            <section id="decoupled-logic-the-concept" class="level2"><h2>17.1 Decoupled logic: The concept</h2>
                <p>So far we have worked for our Grocery Store with templates done the <em>usual way</em>, with logic being inserted into our templates in the
                    form of attributes.</p>
                <p>But Thymeleaf also allows us to completely <em>decouple</em> the template markup from its logic, allowing the creation of <strong>completely
                    logic-less markup templates</strong> in the <code>HTML</code> and <code>XML</code> template modes.</p>
                <p>The main idea is that template logic will be defined in a separate <em>logic file</em> (more exactly a <em>logic resource</em>, as it doesn’t
                    need to be a <em>file</em>). By default, that logic resource will be an additional file living in the same place (e.g. folder) as the
                    template file, with the same name but with <code>.th.xml</code> extension:</p>
                <pre><code>/templates
+-&gt;/home.html
+-&gt;/home.th.xml</code></pre>
                <p>So the <code>home.html</code> file can be completely logic-less. It might look like this:</p>
                <pre class=" language-html"><code class=" language-html"><span class="token doctype">&lt;!DOCTYPE html&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>table</span> <span class="token attr-name">id</span><span
        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>usersTable<span
        class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name">class</span><span
            class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>username<span
            class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Jeremy Grapefruit<span class="token tag"><span
                            class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name">class</span><span
            class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>usertype<span
            class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Normal User<span class="token tag"><span
                            class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name">class</span><span
            class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>username<span
            class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Alice Watermelon<span class="token tag"><span
                            class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name">class</span><span
            class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>usertype<span
            class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Administrator<span class="token tag"><span
                            class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>table</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span></code></pre>
                <p>Absolutely no Thymeleaf code there. This is a template file that a designer with no Thymeleaf or templating knowledge could have created,
                    edited and/or understood. Or a fragment of HTML provided by some external system with no Thymeleaf hooks at all.</p>
                <p>Let’s now turn that <code>home.html</code> template into a Thymeleaf template by creating our additional <code>home.th.xml</code> file like
                    this:</p>
                <pre class=" language-xml"><code class=" language-xml"><span class="token prolog">&lt;?xml version="1.0"?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>thlogic</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>attr</span> <span class="token attr-name">sel</span><span
        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>#usersTable<span
        class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">th:</span>remove</span><span
        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>all-but-first<span
        class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>attr</span> <span class="token attr-name">sel</span><span
        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>/tr[0]<span class="token punctuation">"</span></span> <span
        class="token attr-name"><span class="token namespace">th:</span>each</span><span class="token attr-value"><span class="token punctuation">=</span><span
        class="token punctuation">"</span>user : ${users}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>attr</span> <span class="token attr-name">sel</span><span
          class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>td.username<span
          class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span
          class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${user.name}<span
          class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>attr</span> <span class="token attr-name">sel</span><span
          class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>td.usertype<span
          class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span
          class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>#{|user.type.${user.type}|}<span
          class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>attr</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>attr</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>thlogic</span><span
        class="token punctuation">&gt;</span></span></code></pre>
                <p>Here we can see a lot of <code>&lt;attr&gt;</code> tags inside a <code>thlogic</code> block. Those <code>&lt;attr&gt;</code> tags perform
                    <em>attribute injection</em> on nodes of the original template selected by means of their <code>sel</code> attributes, which contain
                    Thymeleaf <em>markup selectors</em> (actually <em>AttoParser markup selectors</em>).</p>
                <p>Also note that <code>&lt;attr&gt;</code> tags can be nested so that their selectors are <em>appended</em>. That <code>sel="/tr[0]"</code>
                    above, for example, will be processed as <code>sel="#usersTable/tr[0]"</code>. And the selector for the user name <code>&lt;td&gt;</code>
                    will be processed as <code>sel="#usersTable/tr[0]//td.username"</code>.</p>
                <p>So once merged, both files seen above will be the same as:</p>
                <pre class=" language-html"><code class=" language-html"><span class="token doctype">&lt;!DOCTYPE html&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>table</span> <span class="token attr-name">id</span><span
        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>usersTable<span
        class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">th:</span>remove</span><span
        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>all-but-first<span
        class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span> <span class="token attr-name"><span
          class="token namespace">th:</span>each</span><span class="token attr-value"><span class="token punctuation">=</span><span
          class="token punctuation">"</span>user : ${users}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name">class</span><span
            class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>username<span
            class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span
            class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${user.name}<span
            class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Jeremy Grapefruit<span class="token tag"><span
                            class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name">class</span><span
            class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>usertype<span
            class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span
            class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>#{|user.type.${user.type}|}<span
            class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Normal User<span class="token tag"><span
                            class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name">class</span><span
            class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>username<span
            class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Alice Watermelon<span class="token tag"><span
                            class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name">class</span><span
            class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>usertype<span
            class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Administrator<span class="token tag"><span
                            class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>table</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span></code></pre>
                <p>This looks more familiar, and is indeed less <em>verbose</em> than creating two separate files. But the advantage of <em>decoupled
                    templates</em> is that we can give for our templates total independence from Thymeleaf, and therefore better maintainability from the design
                    standpoint.</p>
                <p>Of course some <em>contracts</em> between designers or developers will still be needed – e.g.&nbsp;the fact that the users <code>&lt;table&gt;</code>
                    will need an <code>id="usersTable"</code> –, but in many scenarios a pure-HTML template will be a much better communication artifact between
                    design and development teams.</p></section>
            <section id="configuring-decoupled-templates" class="level2"><h2>17.2 Configuring decoupled templates</h2>
                <section id="enabling-decoupled-templates" class="level3"><h3>Enabling decoupled templates</h3>
                    <p>Decoupled logic will not be expected for every template by default. Instead, the configured template resolvers (implementations of <code>ITemplateResolver</code>)
                        will need to specifically mark the templates they resolve as <em>using decoupled logic</em>.</p>
                    <p>Except for <code>StringTemplateResolver</code> (which does not allow decoupled logic), all other out-of-the-box implementations of <code>ITemplateResolver</code>
                        will provide a flag called <code>useDecoupledLogic</code> that will mark all templates resolved by that resolver as potentially having
                        all or part of its logic living in a separate resource:</p>
                    <pre class=" language-java"><code class=" language-java"><span class="token keyword">final</span> WebApplicationTemplateResolver templateResolver <span
                            class="token operator">=</span>
    <span class="token keyword">new</span> <span class="token class-name">WebApplicationTemplateResolver</span><span class="token punctuation">(</span>application<span
                                class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
templateResolver<span class="token punctuation">.</span><span class="token function">setUseDecoupledLogic</span><span class="token punctuation">(</span><span
                                class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
                </section>
                <section id="mixing-coupled-and-decoupled-logic" class="level3"><h3>Mixing coupled and decoupled logic</h3>
                    <p>Decoupled template logic, when enabled, is not a requirement. When enabled, it means that the engine will <em>look for</em> a resource
                        containing decoupled logic, parsing and merging it with the original template if it exists. No error will be thrown if the decoupled
                        logic resource does not exist.</p>
                    <p>Also, in the same template we can mix both <em>coupled</em> and <em>decoupled</em> logic, for example by adding some Thymeleaf attributes
                        at the original template file but leaving others for the separate decoupled logic file. The most common case for this is using the new
                        (in v3.0) <code>th:ref</code> attribute.</p></section>
            </section>
            <section id="the-thref-attribute" class="level2"><h2>17.3 The th:ref attribute</h2>
                <p><code>th:ref</code> is only a marker attribute. It does nothing from the processing standpoint and simply disappears when the template is
                    processed, but its usefulness lies in the fact that it acts as a <em>markup reference</em>, i.e.&nbsp;it can be resolved by name from a <em>markup
                        selector</em> just like a <em>tag name</em> or a <em>fragment</em> (<code>th:fragment</code>).</p>
                <p>So if we have a selector like:</p>
                <pre class=" language-xml"><code class=" language-xml">  <span class="token tag"><span class="token tag"><span
                        class="token punctuation">&lt;</span>attr</span> <span class="token attr-name">sel</span><span class="token attr-value"><span
                        class="token punctuation">=</span><span class="token punctuation">"</span>whatever<span class="token punctuation">"</span></span> <span
                        class="token attr-name">...</span><span class="token punctuation">/&gt;</span></span></code></pre>
                <p>This will match:</p>
                <ul>
                    <li>Any <code>&lt;whatever&gt;</code> tags.</li>
                    <li>Any tags with a <code>th:fragment="whatever"</code> attribute.</li>
                    <li>Any tags with a <code>th:ref="whatever"</code> attribute.</li>
                </ul>
                <p>What is the advantage of <code>th:ref</code> against, for example, using a pure-HTML <code>id</code> attribute? Merely the fact that we might
                    not want to add so many <code>id</code> and <code>class</code> attributes to our tags to act as <em>logic anchors</em>, which might end up
                    <em>polluting</em> our output.</p>
                <p>And in the same sense, what is the disadvantage of <code>th:ref</code>? Well, obviously that we’d be adding a bit of Thymeleaf logic (<em>“logic”</em>)
                    to our templates.</p>
                <p>Note this applicability of the <code>th:ref</code> attribute <strong>does not only apply to decoupled logic template files</strong>: it works
                    the same in other types of scenarios, like in fragment expressions (<code>~{...}</code>).</p></section>
            <section id="performance-impact-of-decoupled-templates" class="level2"><h2>17.4 Performance impact of decoupled templates</h2>
                <p>The impact is extremely small. When a resolved template is marked to use decoupled logic and it is not cached, the template logic resource
                    will be resolved first, parsed and processed into a sequence of instructions in-memory: basically a list of attributes to be injected to
                    each markup selector.</p>
                <p>But this is the only <em>additional step</em> required because, after this, the real template will be parsed, and while it is parsed these
                    attributes will be injected <em>on-the-fly</em> by the parser itself, thanks to the advanced capabilities for node selection in AttoParser.
                    So parsed nodes will come out of the parser as if they had their injected attributes written in the original template file.</p>
                <p>The biggest advantage of this? When a template is configured to be cached, it will be cached already containing the injected attributes. So
                    the overhead of using <em>decoupled templates</em> for cacheable templates, once they are cached, will be absolutely <em>zero</em>.</p>
            </section>
            <section id="resolution-of-decoupled-logic" class="level2"><h2>17.5 Resolution of decoupled logic</h2>
                <p>The way Thymeleaf resolves the decoupled logic resources corresponding to each template is configurable by the user. It is determined by an
                    extension point, the <code>org.thymeleaf.templateparser.markup.decoupled.IDecoupledTemplateLogicResolver</code>, for which a <em>default
                        implementation</em> is provided: <code>StandardDecoupledTemplateLogicResolver</code>.</p>
                <p>What does this standard implementation do?</p>
                <ul>
                    <li>First, it applies a <code>prefix</code> and a <code>suffix</code> to the <em>base name</em> of the template resource (obtained by means
                        of its <code>ITemplateResource#getBaseName()</code> method). Both prefix and suffix can be configured and, by default, the prefix will
                        be empty and the suffix will be <code>.th.xml</code>.
                    </li>
                    <li>Second, it asks the template resource to resolve a <em>relative resource</em> with the computed name by means of its <code>ITemplateResource#relative(String
                        relativeLocation)</code> method.
                    </li>
                </ul>
                <p>The specific implementation of <code>IDecoupledTemplateLogicResolver</code> to be used can be configured at the <code>TemplateEngine</code>
                    easily:</p>
                <pre class=" language-java"><code class=" language-java"><span class="token keyword">final</span> StandardDecoupledTemplateLogicResolver decoupledresolver <span
                        class="token operator">=</span>
    <span class="token keyword">new</span> <span class="token class-name">StandardDecoupledTemplateLogicResolver</span><span
                            class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
decoupledResolver<span class="token punctuation">.</span><span class="token function">setPrefix</span><span class="token punctuation">(</span><span
                            class="token string">"../viewlogic/"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
templateEngine<span class="token punctuation">.</span><span class="token function">setDecoupledTemplateLogicResolver</span><span
                            class="token punctuation">(</span>decoupledResolver<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
            </section>
        </section>
        <section id="appendix-a-expression-basic-objects" class="level1"><h1>18 Appendix A: Expression Basic Objects</h1>
            <p>Some objects and variable maps are always available to be invoked. Let’s see them:</p>
            <section id="base-objects" class="level3"><h3>Base objects</h3>
                <ul>
                    <li><p><strong>#ctx</strong> : the context object. An implementation of <code>org.thymeleaf.context.IContext</code> or <code>org.thymeleaf.context.IWebContext</code>
                        depending on our environment (standalone or web).</p>
                        <p>Note <code>#vars</code> and <code>#root</code> are synomyns for the same object, but using <code>#ctx</code> is recommended.</p></li>
                </ul>
                <pre class=" language-java"><code class=" language-java"><span class="token comment" spellcheck="true">/*
* ======================================================================
* See javadoc API for class org.thymeleaf.context.IContext
* ======================================================================
*/</span>

$<span class="token punctuation">{</span>#ctx<span class="token punctuation">.</span>locale<span class="token punctuation">}</span>
$<span class="token punctuation">{</span>#ctx<span class="token punctuation">.</span>variableNames<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">/*
* ======================================================================
* See javadoc API for class org.thymeleaf.context.IWebContext
* ======================================================================
*/</span>

$<span class="token punctuation">{</span>#ctx<span class="token punctuation">.</span>request<span class="token punctuation">}</span>
$<span class="token punctuation">{</span>#ctx<span class="token punctuation">.</span>response<span class="token punctuation">}</span>
$<span class="token punctuation">{</span>#ctx<span class="token punctuation">.</span>session<span class="token punctuation">}</span>
$<span class="token punctuation">{</span>#ctx<span class="token punctuation">.</span>servletContext<span class="token punctuation">}</span></code></pre>
                <ul>
                    <li><strong>#locale</strong> : direct access to the <code>java.util.Locale</code> associated with current request.</li>
                </ul>
                <pre class=" language-java"><code class=" language-java">$<span class="token punctuation">{</span>#locale<span
                        class="token punctuation">}</span></code></pre>
            </section>
            <section id="web-context-namespaces-for-requestsession-attributes-etc." class="level3"><h3>Web context namespaces for request/session attributes,
                etc.</h3>
                <p>When using Thymeleaf in a web environment, we can use a series of shortcuts for accessing request parameters, session attributes and
                    application attributes:</p>
                <blockquote><p>Note these are not <em>context objects</em>, but maps added to the context as variables, so we access them without <code>#</code>.
                    In some way, they act as <em>namespaces</em>.</p></blockquote>
                <ul>
                    <li><strong>param</strong> : for retrieving request parameters. <code>${param.foo}</code> is a <code>String[]</code> with the values of the
                        <code>foo</code> request parameter, so <code>${param.foo[0]}</code> will normally be used for getting the first value.
                    </li>
                </ul>
                <pre class=" language-java"><code class=" language-java"><span class="token comment" spellcheck="true">/*
* ============================================================================
* See javadoc API for class org.thymeleaf.context.WebRequestParamsVariablesMap
* ============================================================================
*/</span>

$<span class="token punctuation">{</span>param<span class="token punctuation">.</span>foo<span class="token punctuation">}</span>              <span
                            class="token comment" spellcheck="true">// Retrieves a String[] with the values of request parameter 'foo'</span>
$<span class="token punctuation">{</span>param<span class="token punctuation">.</span><span class="token function">size</span><span
                            class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
$<span class="token punctuation">{</span>param<span class="token punctuation">.</span><span class="token function">isEmpty</span><span
                            class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
$<span class="token punctuation">{</span>param<span class="token punctuation">.</span><span class="token function">containsKey</span><span
                            class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">)</span><span
                            class="token punctuation">}</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span></code></pre>
                <ul>
                    <li><strong>session</strong> : for retrieving session attributes.</li>
                </ul>
                <pre class=" language-java"><code class=" language-java"><span class="token comment" spellcheck="true">/*
* ======================================================================
* See javadoc API for class org.thymeleaf.context.WebSessionVariablesMap
* ======================================================================
*/</span>

$<span class="token punctuation">{</span>session<span class="token punctuation">.</span>foo<span class="token punctuation">}</span>                 <span
                            class="token comment" spellcheck="true">// Retrieves the session atttribute 'foo'</span>
$<span class="token punctuation">{</span>session<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span
                            class="token punctuation">)</span><span class="token punctuation">}</span>
$<span class="token punctuation">{</span>session<span class="token punctuation">.</span><span class="token function">isEmpty</span><span
                            class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
$<span class="token punctuation">{</span>session<span class="token punctuation">.</span><span class="token function">containsKey</span><span
                            class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">)</span><span
                            class="token punctuation">}</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span></code></pre>
                <ul>
                    <li><strong>application</strong> : for retrieving application/servlet context attributes.</li>
                </ul>
                <pre class=" language-java"><code class=" language-java"><span class="token comment" spellcheck="true">/*
* =============================================================================
* See javadoc API for class org.thymeleaf.context.WebServletContextVariablesMap
* =============================================================================
*/</span>

$<span class="token punctuation">{</span>application<span class="token punctuation">.</span>foo<span class="token punctuation">}</span>              <span
                            class="token comment" spellcheck="true">// Retrieves the ServletContext atttribute 'foo'</span>
$<span class="token punctuation">{</span>application<span class="token punctuation">.</span><span class="token function">size</span><span
                            class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
$<span class="token punctuation">{</span>application<span class="token punctuation">.</span><span class="token function">isEmpty</span><span
                            class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
$<span class="token punctuation">{</span>application<span class="token punctuation">.</span><span class="token function">containsKey</span><span
                            class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">)</span><span
                            class="token punctuation">}</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span></code></pre>
                <p>Note there is <strong>no need to specify a namespace for accessing request attributes</strong> (as opposed to <em>request parameters</em>)
                    because all request attributes are automatically added to the context as variables in the context root:</p>
                <pre class=" language-java"><code class=" language-java">$<span class="token punctuation">{</span>myRequestAttribute<span
                        class="token punctuation">}</span></code></pre>
            </section>
        </section>


        <section id="appendix-b-expression-utility-objects" class="level1"><h1>19 Appendix B: Expression Utility Objects</h1>
            <section id="execution-info" class="level3"><h3>Execution Info</h3>
                <ul>
                    <li><strong>#execInfo</strong> : expression object providing useful information about the template being processed inside Thymeleaf Standard
                        Expressions.
                    </li>
                </ul>
                <pre class=" language-java"><code class=" language-java"><span class="token comment" spellcheck="true">/*
* ======================================================================
* See javadoc API for class org.thymeleaf.expression.ExecutionInfo
* ======================================================================
*/</span>

<span class="token comment" spellcheck="true">/*
* Return the name and mode of the 'leaf' template. This means the template
* from where the events being processed were parsed. So if this piece of
* code is not in the root template "A" but on a fragment being inserted
* into "A" from another template called "B", this will return "B" as a
* name, and B's mode as template mode.
*/</span>
$<span class="token punctuation">{</span>#execInfo<span class="token punctuation">.</span>templateName<span class="token punctuation">}</span>
$<span class="token punctuation">{</span>#execInfo<span class="token punctuation">.</span>templateMode<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">/*
* Return the name and mode of the 'root' template. This means the template
* that the template engine was originally asked to process. So if this
* piece of code is not in the root template "A" but on a fragment being
* inserted into "A" from another template called "B", this will still
* return "A" and A's template mode.
*/</span>
$<span class="token punctuation">{</span>#execInfo<span class="token punctuation">.</span>processedTemplateName<span class="token punctuation">}</span>
$<span class="token punctuation">{</span>#execInfo<span class="token punctuation">.</span>processedTemplateMode<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">/*
* Return the stacks (actually, List&lt;String&gt; or List&lt;TemplateMode&gt;) of
* templates being processed. The first element will be the
* 'processedTemplate' (the root one), the last one will be the 'leaf'
* template, and in the middle all the fragments inserted in nested
* manner to reach the leaf from the root will appear.
*/</span>
$<span class="token punctuation">{</span>#execInfo<span class="token punctuation">.</span>templateNames<span class="token punctuation">}</span>
$<span class="token punctuation">{</span>#execInfo<span class="token punctuation">.</span>templateModes<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">/*
* Return the stack of templates being processed similarly (and in the
* same order) to 'templateNames' and 'templateModes', but returning
* a List&lt;TemplateData&gt; with the full template metadata.
*/</span>
$<span class="token punctuation">{</span>#execInfo<span class="token punctuation">.</span>templateStack<span class="token punctuation">}</span></code></pre>
            </section>
            <section id="messages-1" class="level3"><h3>Messages</h3>
                <ul>
                    <li><strong>#messages</strong> : utility methods for obtaining externalized messages inside variables expressions, in the same way as they
                        would be obtained using <code>#{...}</code> syntax.
                    </li>
                </ul>
                <pre class=" language-java"><code class=" language-java"><span class="token comment" spellcheck="true">/*
* ======================================================================
* See javadoc API for class org.thymeleaf.expression.Messages
* ======================================================================
*/</span>

<span class="token comment" spellcheck="true">/*
* Obtain externalized messages. Can receive a single key, a key plus arguments,
* or an array/list/set of keys (in which case it will return an array/list/set of
* externalized messages).
* If a message is not found, a default message (like '??msgKey??') is returned.
*/</span>
$<span class="token punctuation">{</span>#messages<span class="token punctuation">.</span><span class="token function">msg</span><span
                            class="token punctuation">(</span><span class="token string">'msgKey'</span><span class="token punctuation">)</span><span
                            class="token punctuation">}</span>
$<span class="token punctuation">{</span>#messages<span class="token punctuation">.</span><span class="token function">msg</span><span
                            class="token punctuation">(</span><span class="token string">'msgKey'</span><span class="token punctuation">,</span> param1<span
                            class="token punctuation">)</span><span class="token punctuation">}</span>
$<span class="token punctuation">{</span>#messages<span class="token punctuation">.</span><span class="token function">msg</span><span
                            class="token punctuation">(</span><span class="token string">'msgKey'</span><span class="token punctuation">,</span> param1<span
                            class="token punctuation">,</span> param2<span class="token punctuation">)</span><span class="token punctuation">}</span>
$<span class="token punctuation">{</span>#messages<span class="token punctuation">.</span><span class="token function">msg</span><span
                            class="token punctuation">(</span><span class="token string">'msgKey'</span><span class="token punctuation">,</span> param1<span
                            class="token punctuation">,</span> param2<span class="token punctuation">,</span> param3<span
                            class="token punctuation">)</span><span class="token punctuation">}</span>
$<span class="token punctuation">{</span>#messages<span class="token punctuation">.</span><span class="token function">msgWithParams</span><span
                            class="token punctuation">(</span><span class="token string">'msgKey'</span><span class="token punctuation">,</span> <span
                            class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span
                            class="token punctuation">]</span> <span class="token punctuation">{</span>param1<span
                            class="token punctuation">,</span> param2<span class="token punctuation">,</span> param3<span class="token punctuation">,</span> param4<span
                            class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
$<span class="token punctuation">{</span>#messages<span class="token punctuation">.</span><span class="token function">arrayMsg</span><span
                            class="token punctuation">(</span>messageKeyArray<span class="token punctuation">)</span><span class="token punctuation">}</span>
$<span class="token punctuation">{</span>#messages<span class="token punctuation">.</span><span class="token function">listMsg</span><span
                            class="token punctuation">(</span>messageKeyList<span class="token punctuation">)</span><span class="token punctuation">}</span>
$<span class="token punctuation">{</span>#messages<span class="token punctuation">.</span><span class="token function">setMsg</span><span
                            class="token punctuation">(</span>messageKeySet<span class="token punctuation">)</span><span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">/*
* Obtain externalized messages or null. Null is returned instead of a default
* message if a message for the specified key is not found.
*/</span>
$<span class="token punctuation">{</span>#messages<span class="token punctuation">.</span><span class="token function">msgOrNull</span><span
                            class="token punctuation">(</span><span class="token string">'msgKey'</span><span class="token punctuation">)</span><span
                            class="token punctuation">}</span>
$<span class="token punctuation">{</span>#messages<span class="token punctuation">.</span><span class="token function">msgOrNull</span><span
                            class="token punctuation">(</span><span class="token string">'msgKey'</span><span class="token punctuation">,</span> param1<span
                            class="token punctuation">)</span><span class="token punctuation">}</span>
$<span class="token punctuation">{</span>#messages<span class="token punctuation">.</span><span class="token function">msgOrNull</span><span
                            class="token punctuation">(</span><span class="token string">'msgKey'</span><span class="token punctuation">,</span> param1<span
                            class="token punctuation">,</span> param2<span class="token punctuation">)</span><span class="token punctuation">}</span>
$<span class="token punctuation">{</span>#messages<span class="token punctuation">.</span><span class="token function">msgOrNull</span><span
                            class="token punctuation">(</span><span class="token string">'msgKey'</span><span class="token punctuation">,</span> param1<span
                            class="token punctuation">,</span> param2<span class="token punctuation">,</span> param3<span
                            class="token punctuation">)</span><span class="token punctuation">}</span>
$<span class="token punctuation">{</span>#messages<span class="token punctuation">.</span><span class="token function">msgOrNullWithParams</span><span
                            class="token punctuation">(</span><span class="token string">'msgKey'</span><span class="token punctuation">,</span> <span
                            class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span
                            class="token punctuation">]</span> <span class="token punctuation">{</span>param1<span
                            class="token punctuation">,</span> param2<span class="token punctuation">,</span> param3<span class="token punctuation">,</span> param4<span
                            class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
$<span class="token punctuation">{</span>#messages<span class="token punctuation">.</span><span class="token function">arrayMsgOrNull</span><span
                            class="token punctuation">(</span>messageKeyArray<span class="token punctuation">)</span><span class="token punctuation">}</span>
$<span class="token punctuation">{</span>#messages<span class="token punctuation">.</span><span class="token function">listMsgOrNull</span><span
                            class="token punctuation">(</span>messageKeyList<span class="token punctuation">)</span><span class="token punctuation">}</span>
$<span class="token punctuation">{</span>#messages<span class="token punctuation">.</span><span class="token function">setMsgOrNull</span><span
                            class="token punctuation">(</span>messageKeySet<span class="token punctuation">)</span><span
                            class="token punctuation">}</span></code></pre>
            </section>
            <section id="urisurls" class="level3"><h3>URIs/URLs</h3>
                <ul>
                    <li><strong>#uris</strong> : utility object for performing URI/URL operations (esp. escaping/unescaping) inside Thymeleaf Standard
                        Expressions.
                    </li>
                </ul>
                <pre class=" language-java"><code class=" language-java"><span class="token comment" spellcheck="true">/*
* ======================================================================
* See javadoc API for class org.thymeleaf.expression.Uris
* ======================================================================
*/</span>

<span class="token comment" spellcheck="true">/*
* Escape/Unescape as a URI/URL path
*/</span>
$<span class="token punctuation">{</span>#uris<span class="token punctuation">.</span><span class="token function">escapePath</span><span
                            class="token punctuation">(</span>uri<span class="token punctuation">)</span><span class="token punctuation">}</span>
$<span class="token punctuation">{</span>#uris<span class="token punctuation">.</span><span class="token function">escapePath</span><span
                            class="token punctuation">(</span>uri<span class="token punctuation">,</span> encoding<span class="token punctuation">)</span><span
                            class="token punctuation">}</span>
$<span class="token punctuation">{</span>#uris<span class="token punctuation">.</span><span class="token function">unescapePath</span><span
                            class="token punctuation">(</span>uri<span class="token punctuation">)</span><span class="token punctuation">}</span>
$<span class="token punctuation">{</span>#uris<span class="token punctuation">.</span><span class="token function">unescapePath</span><span
                            class="token punctuation">(</span>uri<span class="token punctuation">,</span> encoding<span class="token punctuation">)</span><span
                            class="token punctuation">}</span>

<span class="token comment" spellcheck="true">/*
* Escape/Unescape as a URI/URL path segment (between '/' symbols)
*/</span>
$<span class="token punctuation">{</span>#uris<span class="token punctuation">.</span><span class="token function">escapePathSegment</span><span
                            class="token punctuation">(</span>uri<span class="token punctuation">)</span><span class="token punctuation">}</span>
$<span class="token punctuation">{</span>#uris<span class="token punctuation">.</span><span class="token function">escapePathSegment</span><span
                            class="token punctuation">(</span>uri<span class="token punctuation">,</span> encoding<span class="token punctuation">)</span><span
                            class="token punctuation">}</span>
$<span class="token punctuation">{</span>#uris<span class="token punctuation">.</span><span class="token function">unescapePathSegment</span><span
                            class="token punctuation">(</span>uri<span class="token punctuation">)</span><span class="token punctuation">}</span>
$<span class="token punctuation">{</span>#uris<span class="token punctuation">.</span><span class="token function">unescapePathSegment</span><span
                            class="token punctuation">(</span>uri<span class="token punctuation">,</span> encoding<span class="token punctuation">)</span><span
                            class="token punctuation">}</span>

<span class="token comment" spellcheck="true">/*
* Escape/Unescape as a Fragment Identifier (#frag)
*/</span>
$<span class="token punctuation">{</span>#uris<span class="token punctuation">.</span><span class="token function">escapeFragmentId</span><span
                            class="token punctuation">(</span>uri<span class="token punctuation">)</span><span class="token punctuation">}</span>
$<span class="token punctuation">{</span>#uris<span class="token punctuation">.</span><span class="token function">escapeFragmentId</span><span
                            class="token punctuation">(</span>uri<span class="token punctuation">,</span> encoding<span class="token punctuation">)</span><span
                            class="token punctuation">}</span>
$<span class="token punctuation">{</span>#uris<span class="token punctuation">.</span><span class="token function">unescapeFragmentId</span><span
                            class="token punctuation">(</span>uri<span class="token punctuation">)</span><span class="token punctuation">}</span>
$<span class="token punctuation">{</span>#uris<span class="token punctuation">.</span><span class="token function">unescapeFragmentId</span><span
                            class="token punctuation">(</span>uri<span class="token punctuation">,</span> encoding<span class="token punctuation">)</span><span
                            class="token punctuation">}</span>

<span class="token comment" spellcheck="true">/*
* Escape/Unescape as a Query Parameter (?var=value)
*/</span>
$<span class="token punctuation">{</span>#uris<span class="token punctuation">.</span><span class="token function">escapeQueryParam</span><span
                            class="token punctuation">(</span>uri<span class="token punctuation">)</span><span class="token punctuation">}</span>
$<span class="token punctuation">{</span>#uris<span class="token punctuation">.</span><span class="token function">escapeQueryParam</span><span
                            class="token punctuation">(</span>uri<span class="token punctuation">,</span> encoding<span class="token punctuation">)</span><span
                            class="token punctuation">}</span>
$<span class="token punctuation">{</span>#uris<span class="token punctuation">.</span><span class="token function">unescapeQueryParam</span><span
                            class="token punctuation">(</span>uri<span class="token punctuation">)</span><span class="token punctuation">}</span>
$<span class="token punctuation">{</span>#uris<span class="token punctuation">.</span><span class="token function">unescapeQueryParam</span><span
                            class="token punctuation">(</span>uri<span class="token punctuation">,</span> encoding<span class="token punctuation">)</span><span
                            class="token punctuation">}</span></code></pre>
            </section>
            <section id="conversions" class="level3"><h3>Conversions</h3>
                <ul>
                    <li><strong>#conversions</strong> : utility object that allows the execution of the <em>Conversion Service</em> at any point of a template:
                    </li>
                </ul>
                <pre class=" language-java"><code class=" language-java"><span class="token comment" spellcheck="true">/*
* ======================================================================
* See javadoc API for class org.thymeleaf.expression.Conversions
* ======================================================================
*/</span>

<span class="token comment" spellcheck="true">/*
* Execute the desired conversion of the 'object' value into the
* specified class.
*/</span>
$<span class="token punctuation">{</span>#conversions<span class="token punctuation">.</span><span class="token function">convert</span><span
                            class="token punctuation">(</span>object<span class="token punctuation">,</span> <span
                            class="token string">'java.util.TimeZone'</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
$<span class="token punctuation">{</span>#conversions<span class="token punctuation">.</span><span class="token function">convert</span><span
                            class="token punctuation">(</span>object<span class="token punctuation">,</span> targetClass<span class="token punctuation">)</span><span
                            class="token punctuation">}</span></code></pre>
            </section>
            <section id="dates" class="level3"><h3>Dates</h3>
                <ul>
                    <li><strong>#dates</strong> : utility methods for <code>java.util.Date</code> objects:</li>
                </ul>
                <pre class=" language-java"><code class=" language-java"><span class="token comment" spellcheck="true">/*
* ======================================================================
* See javadoc API for class org.thymeleaf.expression.Dates
* ======================================================================
*/</span>

<span class="token comment" spellcheck="true">/*
* Format date with the standard locale format
* Also works with arrays, lists or sets
*/</span>
$<span class="token punctuation">{</span>#dates<span class="token punctuation">.</span><span class="token function">format</span><span
                            class="token punctuation">(</span>date<span class="token punctuation">)</span><span class="token punctuation">}</span>
$<span class="token punctuation">{</span>#dates<span class="token punctuation">.</span><span class="token function">arrayFormat</span><span
                            class="token punctuation">(</span>datesArray<span class="token punctuation">)</span><span class="token punctuation">}</span>
$<span class="token punctuation">{</span>#dates<span class="token punctuation">.</span><span class="token function">listFormat</span><span
                            class="token punctuation">(</span>datesList<span class="token punctuation">)</span><span class="token punctuation">}</span>
$<span class="token punctuation">{</span>#dates<span class="token punctuation">.</span><span class="token function">setFormat</span><span
                            class="token punctuation">(</span>datesSet<span class="token punctuation">)</span><span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">/*
* Format date with the ISO8601 format
* Also works with arrays, lists or sets
*/</span>
$<span class="token punctuation">{</span>#dates<span class="token punctuation">.</span><span class="token function">formatISO</span><span
                            class="token punctuation">(</span>date<span class="token punctuation">)</span><span class="token punctuation">}</span>
$<span class="token punctuation">{</span>#dates<span class="token punctuation">.</span><span class="token function">arrayFormatISO</span><span
                            class="token punctuation">(</span>datesArray<span class="token punctuation">)</span><span class="token punctuation">}</span>
$<span class="token punctuation">{</span>#dates<span class="token punctuation">.</span><span class="token function">listFormatISO</span><span
                            class="token punctuation">(</span>datesList<span class="token punctuation">)</span><span class="token punctuation">}</span>
$<span class="token punctuation">{</span>#dates<span class="token punctuation">.</span><span class="token function">setFormatISO</span><span
                            class="token punctuation">(</span>datesSet<span class="token punctuation">)</span><span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">/*
* Format date with the specified pattern
* Also works with arrays, lists or sets
*/</span>
$<span class="token punctuation">{</span>#dates<span class="token punctuation">.</span><span class="token function">format</span><span
                            class="token punctuation">(</span>date<span class="token punctuation">,</span> <span class="token string">'dd/MMM/yyyy HH:mm'</span><span
                            class="token punctuation">)</span><span class="token punctuation">}</span>
$<span class="token punctuation">{</span>#dates<span class="token punctuation">.</span><span class="token function">arrayFormat</span><span
                            class="token punctuation">(</span>datesArray<span class="token punctuation">,</span> <span
                            class="token string">'dd/MMM/yyyy HH:mm'</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
$<span class="token punctuation">{</span>#dates<span class="token punctuation">.</span><span class="token function">listFormat</span><span
                            class="token punctuation">(</span>datesList<span class="token punctuation">,</span> <span
                            class="token string">'dd/MMM/yyyy HH:mm'</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
$<span class="token punctuation">{</span>#dates<span class="token punctuation">.</span><span class="token function">setFormat</span><span
                            class="token punctuation">(</span>datesSet<span class="token punctuation">,</span> <span
                            class="token string">'dd/MMM/yyyy HH:mm'</span><span class="token punctuation">)</span><span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">/*
* Obtain date properties
* Also works with arrays, lists or sets
*/</span>
$<span class="token punctuation">{</span>#dates<span class="token punctuation">.</span><span class="token function">day</span><span
                            class="token punctuation">(</span>date<span class="token punctuation">)</span><span class="token punctuation">}</span>                    <span
                            class="token comment" spellcheck="true">// also arrayDay(...), listDay(...), etc.</span>
$<span class="token punctuation">{</span>#dates<span class="token punctuation">.</span><span class="token function">month</span><span class="token punctuation">(</span>date<span
                            class="token punctuation">)</span><span class="token punctuation">}</span>                  <span class="token comment"
                                                                                                                              spellcheck="true">// also arrayMonth(...), listMonth(...), etc.</span>
$<span class="token punctuation">{</span>#dates<span class="token punctuation">.</span><span class="token function">monthName</span><span
                            class="token punctuation">(</span>date<span class="token punctuation">)</span><span class="token punctuation">}</span>              <span
                            class="token comment" spellcheck="true">// also arrayMonthName(...), listMonthName(...), etc.</span>
$<span class="token punctuation">{</span>#dates<span class="token punctuation">.</span><span class="token function">monthNameShort</span><span
                            class="token punctuation">(</span>date<span class="token punctuation">)</span><span class="token punctuation">}</span>         <span
                            class="token comment" spellcheck="true">// also arrayMonthNameShort(...), listMonthNameShort(...), etc.</span>
$<span class="token punctuation">{</span>#dates<span class="token punctuation">.</span><span class="token function">year</span><span
                            class="token punctuation">(</span>date<span class="token punctuation">)</span><span class="token punctuation">}</span>                   <span
                            class="token comment" spellcheck="true">// also arrayYear(...), listYear(...), etc.</span>
$<span class="token punctuation">{</span>#dates<span class="token punctuation">.</span><span class="token function">dayOfWeek</span><span
                            class="token punctuation">(</span>date<span class="token punctuation">)</span><span class="token punctuation">}</span>              <span
                            class="token comment" spellcheck="true">// also arrayDayOfWeek(...), listDayOfWeek(...), etc.</span>
$<span class="token punctuation">{</span>#dates<span class="token punctuation">.</span><span class="token function">dayOfWeekName</span><span
                            class="token punctuation">(</span>date<span class="token punctuation">)</span><span
                            class="token punctuation">}</span>          <span class="token comment" spellcheck="true">// also arrayDayOfWeekName(...), listDayOfWeekName(...), etc.</span>
$<span class="token punctuation">{</span>#dates<span class="token punctuation">.</span><span class="token function">dayOfWeekNameShort</span><span
                            class="token punctuation">(</span>date<span class="token punctuation">)</span><span class="token punctuation">}</span>     <span
                            class="token comment" spellcheck="true">// also arrayDayOfWeekNameShort(...), listDayOfWeekNameShort(...), etc.</span>
$<span class="token punctuation">{</span>#dates<span class="token punctuation">.</span><span class="token function">hour</span><span
                            class="token punctuation">(</span>date<span class="token punctuation">)</span><span class="token punctuation">}</span>                   <span
                            class="token comment" spellcheck="true">// also arrayHour(...), listHour(...), etc.</span>
$<span class="token punctuation">{</span>#dates<span class="token punctuation">.</span><span class="token function">minute</span><span
                            class="token punctuation">(</span>date<span class="token punctuation">)</span><span class="token punctuation">}</span>                 <span
                            class="token comment" spellcheck="true">// also arrayMinute(...), listMinute(...), etc.</span>
$<span class="token punctuation">{</span>#dates<span class="token punctuation">.</span><span class="token function">second</span><span
                            class="token punctuation">(</span>date<span class="token punctuation">)</span><span class="token punctuation">}</span>                 <span
                            class="token comment" spellcheck="true">// also arraySecond(...), listSecond(...), etc.</span>
$<span class="token punctuation">{</span>#dates<span class="token punctuation">.</span><span class="token function">millisecond</span><span
                            class="token punctuation">(</span>date<span class="token punctuation">)</span><span
                            class="token punctuation">}</span>            <span class="token comment" spellcheck="true">// also arrayMillisecond(...), listMillisecond(...), etc.</span>

<span class="token comment" spellcheck="true">/*
* Create date (java.util.Date) objects from its components
*/</span>
$<span class="token punctuation">{</span>#dates<span class="token punctuation">.</span><span class="token function">create</span><span
                            class="token punctuation">(</span>year<span class="token punctuation">,</span>month<span class="token punctuation">,</span>day<span
                            class="token punctuation">)</span><span class="token punctuation">}</span>
$<span class="token punctuation">{</span>#dates<span class="token punctuation">.</span><span class="token function">create</span><span
                            class="token punctuation">(</span>year<span class="token punctuation">,</span>month<span class="token punctuation">,</span>day<span
                            class="token punctuation">,</span>hour<span class="token punctuation">,</span>minute<span class="token punctuation">)</span><span
                            class="token punctuation">}</span>
$<span class="token punctuation">{</span>#dates<span class="token punctuation">.</span><span class="token function">create</span><span
                            class="token punctuation">(</span>year<span class="token punctuation">,</span>month<span class="token punctuation">,</span>day<span
                            class="token punctuation">,</span>hour<span class="token punctuation">,</span>minute<span
                            class="token punctuation">,</span>second<span class="token punctuation">)</span><span class="token punctuation">}</span>
$<span class="token punctuation">{</span>#dates<span class="token punctuation">.</span><span class="token function">create</span><span
                            class="token punctuation">(</span>year<span class="token punctuation">,</span>month<span class="token punctuation">,</span>day<span
                            class="token punctuation">,</span>hour<span class="token punctuation">,</span>minute<span
                            class="token punctuation">,</span>second<span class="token punctuation">,</span>millisecond<span
                            class="token punctuation">)</span><span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">/*
* Create a date (java.util.Date) object for the current date and time
*/</span>
$<span class="token punctuation">{</span>#dates<span class="token punctuation">.</span><span class="token function">createNow</span><span
                            class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span>

$<span class="token punctuation">{</span>#dates<span class="token punctuation">.</span><span class="token function">createNowForTimeZone</span><span
                            class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">/*
* Create a date (java.util.Date) object for the current date (time set to 00:00)
*/</span>
$<span class="token punctuation">{</span>#dates<span class="token punctuation">.</span><span class="token function">createToday</span><span
                            class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span>

$<span class="token punctuation">{</span>#dates<span class="token punctuation">.</span><span class="token function">createTodayForTimeZone</span><span
                            class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span></code></pre>
            </section>
            <section id="calendars" class="level3"><h3>Calendars</h3>
                <ul>
                    <li><strong>#calendars</strong> : analogous to <code>#dates</code>, but for <code>java.util.Calendar</code> objects:</li>
                </ul>
                <pre class=" language-java"><code class=" language-java"><span class="token comment" spellcheck="true">/*
* ======================================================================
* See javadoc API for class org.thymeleaf.expression.Calendars
* ======================================================================
*/</span>

<span class="token comment" spellcheck="true">/*
* Format calendar with the standard locale format
* Also works with arrays, lists or sets
*/</span>
$<span class="token punctuation">{</span>#calendars<span class="token punctuation">.</span><span class="token function">format</span><span
                            class="token punctuation">(</span>cal<span class="token punctuation">)</span><span class="token punctuation">}</span>
$<span class="token punctuation">{</span>#calendars<span class="token punctuation">.</span><span class="token function">arrayFormat</span><span
                            class="token punctuation">(</span>calArray<span class="token punctuation">)</span><span class="token punctuation">}</span>
$<span class="token punctuation">{</span>#calendars<span class="token punctuation">.</span><span class="token function">listFormat</span><span
                            class="token punctuation">(</span>calList<span class="token punctuation">)</span><span class="token punctuation">}</span>
$<span class="token punctuation">{</span>#calendars<span class="token punctuation">.</span><span class="token function">setFormat</span><span
                            class="token punctuation">(</span>calSet<span class="token punctuation">)</span><span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">/*
* Format calendar with the ISO8601 format
* Also works with arrays, lists or sets
*/</span>
$<span class="token punctuation">{</span>#calendars<span class="token punctuation">.</span><span class="token function">formatISO</span><span
                            class="token punctuation">(</span>cal<span class="token punctuation">)</span><span class="token punctuation">}</span>
$<span class="token punctuation">{</span>#calendars<span class="token punctuation">.</span><span class="token function">arrayFormatISO</span><span
                            class="token punctuation">(</span>calArray<span class="token punctuation">)</span><span class="token punctuation">}</span>
$<span class="token punctuation">{</span>#calendars<span class="token punctuation">.</span><span class="token function">listFormatISO</span><span
                            class="token punctuation">(</span>calList<span class="token punctuation">)</span><span class="token punctuation">}</span>
$<span class="token punctuation">{</span>#calendars<span class="token punctuation">.</span><span class="token function">setFormatISO</span><span
                            class="token punctuation">(</span>calSet<span class="token punctuation">)</span><span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">/*
* Format calendar with the specified pattern
* Also works with arrays, lists or sets
*/</span>
$<span class="token punctuation">{</span>#calendars<span class="token punctuation">.</span><span class="token function">format</span><span
                            class="token punctuation">(</span>cal<span class="token punctuation">,</span> <span
                            class="token string">'dd/MMM/yyyy HH:mm'</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
$<span class="token punctuation">{</span>#calendars<span class="token punctuation">.</span><span class="token function">arrayFormat</span><span
                            class="token punctuation">(</span>calArray<span class="token punctuation">,</span> <span
                            class="token string">'dd/MMM/yyyy HH:mm'</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
$<span class="token punctuation">{</span>#calendars<span class="token punctuation">.</span><span class="token function">listFormat</span><span
                            class="token punctuation">(</span>calList<span class="token punctuation">,</span> <span
                            class="token string">'dd/MMM/yyyy HH:mm'</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
$<span class="token punctuation">{</span>#calendars<span class="token punctuation">.</span><span class="token function">setFormat</span><span
                            class="token punctuation">(</span>calSet<span class="token punctuation">,</span> <span
                            class="token string">'dd/MMM/yyyy HH:mm'</span><span class="token punctuation">)</span><span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">/*
* Obtain calendar properties
* Also works with arrays, lists or sets
*/</span>
$<span class="token punctuation">{</span>#calendars<span class="token punctuation">.</span><span class="token function">day</span><span
                            class="token punctuation">(</span>date<span class="token punctuation">)</span><span class="token punctuation">}</span>                <span
                            class="token comment" spellcheck="true">// also arrayDay(...), listDay(...), etc.</span>
$<span class="token punctuation">{</span>#calendars<span class="token punctuation">.</span><span class="token function">month</span><span
                            class="token punctuation">(</span>date<span class="token punctuation">)</span><span class="token punctuation">}</span>              <span
                            class="token comment" spellcheck="true">// also arrayMonth(...), listMonth(...), etc.</span>
$<span class="token punctuation">{</span>#calendars<span class="token punctuation">.</span><span class="token function">monthName</span><span
                            class="token punctuation">(</span>date<span class="token punctuation">)</span><span
                            class="token punctuation">}</span>          <span class="token comment" spellcheck="true">// also arrayMonthName(...), listMonthName(...), etc.</span>
$<span class="token punctuation">{</span>#calendars<span class="token punctuation">.</span><span class="token function">monthNameShort</span><span
                            class="token punctuation">(</span>date<span class="token punctuation">)</span><span class="token punctuation">}</span>     <span
                            class="token comment" spellcheck="true">// also arrayMonthNameShort(...), listMonthNameShort(...), etc.</span>
$<span class="token punctuation">{</span>#calendars<span class="token punctuation">.</span><span class="token function">year</span><span
                            class="token punctuation">(</span>date<span class="token punctuation">)</span><span class="token punctuation">}</span>               <span
                            class="token comment" spellcheck="true">// also arrayYear(...), listYear(...), etc.</span>
$<span class="token punctuation">{</span>#calendars<span class="token punctuation">.</span><span class="token function">dayOfWeek</span><span
                            class="token punctuation">(</span>date<span class="token punctuation">)</span><span
                            class="token punctuation">}</span>          <span class="token comment" spellcheck="true">// also arrayDayOfWeek(...), listDayOfWeek(...), etc.</span>
$<span class="token punctuation">{</span>#calendars<span class="token punctuation">.</span><span class="token function">dayOfWeekName</span><span
                            class="token punctuation">(</span>date<span class="token punctuation">)</span><span class="token punctuation">}</span>      <span
                            class="token comment" spellcheck="true">// also arrayDayOfWeekName(...), listDayOfWeekName(...), etc.</span>
$<span class="token punctuation">{</span>#calendars<span class="token punctuation">.</span><span class="token function">dayOfWeekNameShort</span><span
                            class="token punctuation">(</span>date<span class="token punctuation">)</span><span class="token punctuation">}</span> <span
                            class="token comment" spellcheck="true">// also arrayDayOfWeekNameShort(...), listDayOfWeekNameShort(...), etc.</span>
$<span class="token punctuation">{</span>#calendars<span class="token punctuation">.</span><span class="token function">hour</span><span
                            class="token punctuation">(</span>date<span class="token punctuation">)</span><span class="token punctuation">}</span>               <span
                            class="token comment" spellcheck="true">// also arrayHour(...), listHour(...), etc.</span>
$<span class="token punctuation">{</span>#calendars<span class="token punctuation">.</span><span class="token function">minute</span><span
                            class="token punctuation">(</span>date<span class="token punctuation">)</span><span
                            class="token punctuation">}</span>             <span class="token comment" spellcheck="true">// also arrayMinute(...), listMinute(...), etc.</span>
$<span class="token punctuation">{</span>#calendars<span class="token punctuation">.</span><span class="token function">second</span><span
                            class="token punctuation">(</span>date<span class="token punctuation">)</span><span
                            class="token punctuation">}</span>             <span class="token comment" spellcheck="true">// also arraySecond(...), listSecond(...), etc.</span>
$<span class="token punctuation">{</span>#calendars<span class="token punctuation">.</span><span class="token function">millisecond</span><span
                            class="token punctuation">(</span>date<span class="token punctuation">)</span><span class="token punctuation">}</span>        <span
                            class="token comment" spellcheck="true">// also arrayMillisecond(...), listMillisecond(...), etc.</span>

<span class="token comment" spellcheck="true">/*
* Create calendar (java.util.Calendar) objects from its components
*/</span>
$<span class="token punctuation">{</span>#calendars<span class="token punctuation">.</span><span class="token function">create</span><span
                            class="token punctuation">(</span>year<span class="token punctuation">,</span>month<span class="token punctuation">,</span>day<span
                            class="token punctuation">)</span><span class="token punctuation">}</span>
$<span class="token punctuation">{</span>#calendars<span class="token punctuation">.</span><span class="token function">create</span><span
                            class="token punctuation">(</span>year<span class="token punctuation">,</span>month<span class="token punctuation">,</span>day<span
                            class="token punctuation">,</span>hour<span class="token punctuation">,</span>minute<span class="token punctuation">)</span><span
                            class="token punctuation">}</span>
$<span class="token punctuation">{</span>#calendars<span class="token punctuation">.</span><span class="token function">create</span><span
                            class="token punctuation">(</span>year<span class="token punctuation">,</span>month<span class="token punctuation">,</span>day<span
                            class="token punctuation">,</span>hour<span class="token punctuation">,</span>minute<span
                            class="token punctuation">,</span>second<span class="token punctuation">)</span><span class="token punctuation">}</span>
$<span class="token punctuation">{</span>#calendars<span class="token punctuation">.</span><span class="token function">create</span><span
                            class="token punctuation">(</span>year<span class="token punctuation">,</span>month<span class="token punctuation">,</span>day<span
                            class="token punctuation">,</span>hour<span class="token punctuation">,</span>minute<span
                            class="token punctuation">,</span>second<span class="token punctuation">,</span>millisecond<span
                            class="token punctuation">)</span><span class="token punctuation">}</span>

$<span class="token punctuation">{</span>#calendars<span class="token punctuation">.</span><span class="token function">createForTimeZone</span><span
                            class="token punctuation">(</span>year<span class="token punctuation">,</span>month<span class="token punctuation">,</span>day<span
                            class="token punctuation">,</span>timeZone<span class="token punctuation">)</span><span class="token punctuation">}</span>
$<span class="token punctuation">{</span>#calendars<span class="token punctuation">.</span><span class="token function">createForTimeZone</span><span
                            class="token punctuation">(</span>year<span class="token punctuation">,</span>month<span class="token punctuation">,</span>day<span
                            class="token punctuation">,</span>hour<span class="token punctuation">,</span>minute<span class="token punctuation">,</span>timeZone<span
                            class="token punctuation">)</span><span class="token punctuation">}</span>
$<span class="token punctuation">{</span>#calendars<span class="token punctuation">.</span><span class="token function">createForTimeZone</span><span
                            class="token punctuation">(</span>year<span class="token punctuation">,</span>month<span class="token punctuation">,</span>day<span
                            class="token punctuation">,</span>hour<span class="token punctuation">,</span>minute<span
                            class="token punctuation">,</span>second<span class="token punctuation">,</span>timeZone<span
                            class="token punctuation">)</span><span class="token punctuation">}</span>
$<span class="token punctuation">{</span>#calendars<span class="token punctuation">.</span><span class="token function">createForTimeZone</span><span
                            class="token punctuation">(</span>year<span class="token punctuation">,</span>month<span class="token punctuation">,</span>day<span
                            class="token punctuation">,</span>hour<span class="token punctuation">,</span>minute<span
                            class="token punctuation">,</span>second<span class="token punctuation">,</span>millisecond<span class="token punctuation">,</span>timeZone<span
                            class="token punctuation">)</span><span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">/*
* Create a calendar (java.util.Calendar) object for the current date and time
*/</span>
$<span class="token punctuation">{</span>#calendars<span class="token punctuation">.</span><span class="token function">createNow</span><span
                            class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span>

$<span class="token punctuation">{</span>#calendars<span class="token punctuation">.</span><span class="token function">createNowForTimeZone</span><span
                            class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">/*
* Create a calendar (java.util.Calendar) object for the current date (time set to 00:00)
*/</span>
$<span class="token punctuation">{</span>#calendars<span class="token punctuation">.</span><span class="token function">createToday</span><span
                            class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span>

$<span class="token punctuation">{</span>#calendars<span class="token punctuation">.</span><span class="token function">createTodayForTimeZone</span><span
                            class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span></code></pre>
            </section>
            <section id="temporals-java.time" class="level3"><h3>Temporals (java.time)</h3>
                <ul>
                    <li><strong>#temporals</strong> : deal with date/time objects from the JDK8+ <code>java.time</code> API:</li>
                </ul>
                <pre class=" language-java"><code class=" language-java"><span class="token comment" spellcheck="true">/*
* ======================================================================
* See javadoc API for class org.thymeleaf.expression.Temporals
* ======================================================================
*/</span>

<span class="token comment" spellcheck="true">/*
*
* Format date with the standard locale format
* Also works with arrays, lists or sets
*/</span>
$<span class="token punctuation">{</span>#temporals<span class="token punctuation">.</span><span class="token function">format</span><span
                            class="token punctuation">(</span>temporal<span class="token punctuation">)</span><span class="token punctuation">}</span>
$<span class="token punctuation">{</span>#temporals<span class="token punctuation">.</span><span class="token function">arrayFormat</span><span
                            class="token punctuation">(</span>temporalsArray<span class="token punctuation">)</span><span class="token punctuation">}</span>
$<span class="token punctuation">{</span>#temporals<span class="token punctuation">.</span><span class="token function">listFormat</span><span
                            class="token punctuation">(</span>temporalsList<span class="token punctuation">)</span><span class="token punctuation">}</span>
$<span class="token punctuation">{</span>#temporals<span class="token punctuation">.</span><span class="token function">setFormat</span><span
                            class="token punctuation">(</span>temporalsSet<span class="token punctuation">)</span><span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">/*
* Format date with the standard format for the provided locale
* Also works with arrays, lists or sets
*/</span>
$<span class="token punctuation">{</span>#temporals<span class="token punctuation">.</span><span class="token function">format</span><span
                            class="token punctuation">(</span>temporal<span class="token punctuation">,</span> locale<span
                            class="token punctuation">)</span><span class="token punctuation">}</span>
$<span class="token punctuation">{</span>#temporals<span class="token punctuation">.</span><span class="token function">arrayFormat</span><span
                            class="token punctuation">(</span>temporalsArray<span class="token punctuation">,</span> locale<span
                            class="token punctuation">)</span><span class="token punctuation">}</span>
$<span class="token punctuation">{</span>#temporals<span class="token punctuation">.</span><span class="token function">listFormat</span><span
                            class="token punctuation">(</span>temporalsList<span class="token punctuation">,</span> locale<span
                            class="token punctuation">)</span><span class="token punctuation">}</span>
$<span class="token punctuation">{</span>#temporals<span class="token punctuation">.</span><span class="token function">setFormat</span><span
                            class="token punctuation">(</span>temporalsSet<span class="token punctuation">,</span> locale<span
                            class="token punctuation">)</span><span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">/*
* Format date with the specified pattern
* SHORT, MEDIUM, LONG and FULL can also be specified to used the default java.time.format.FormatStyle patterns
* Also works with arrays, lists or sets
*/</span>
$<span class="token punctuation">{</span>#temporals<span class="token punctuation">.</span><span class="token function">format</span><span
                            class="token punctuation">(</span>temporal<span class="token punctuation">,</span> <span
                            class="token string">'dd/MMM/yyyy HH:mm'</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
$<span class="token punctuation">{</span>#temporals<span class="token punctuation">.</span><span class="token function">format</span><span
                            class="token punctuation">(</span>temporal<span class="token punctuation">,</span> <span
                            class="token string">'dd/MMM/yyyy HH:mm'</span><span class="token punctuation">,</span> <span
                            class="token string">'Europe/Paris'</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
$<span class="token punctuation">{</span>#temporals<span class="token punctuation">.</span><span class="token function">arrayFormat</span><span
                            class="token punctuation">(</span>temporalsArray<span class="token punctuation">,</span> <span class="token string">'dd/MMM/yyyy HH:mm'</span><span
                            class="token punctuation">)</span><span class="token punctuation">}</span>
$<span class="token punctuation">{</span>#temporals<span class="token punctuation">.</span><span class="token function">listFormat</span><span
                            class="token punctuation">(</span>temporalsList<span class="token punctuation">,</span> <span class="token string">'dd/MMM/yyyy HH:mm'</span><span
                            class="token punctuation">)</span><span class="token punctuation">}</span>
$<span class="token punctuation">{</span>#temporals<span class="token punctuation">.</span><span class="token function">setFormat</span><span
                            class="token punctuation">(</span>temporalsSet<span class="token punctuation">,</span> <span class="token string">'dd/MMM/yyyy HH:mm'</span><span
                            class="token punctuation">)</span><span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">/*
* Format date with the specified pattern and locale
* Also works with arrays, lists or sets
*/</span>
$<span class="token punctuation">{</span>#temporals<span class="token punctuation">.</span><span class="token function">format</span><span
                            class="token punctuation">(</span>temporal<span class="token punctuation">,</span> <span
                            class="token string">'dd/MMM/yyyy HH:mm'</span><span class="token punctuation">,</span> locale<span
                            class="token punctuation">)</span><span class="token punctuation">}</span>
$<span class="token punctuation">{</span>#temporals<span class="token punctuation">.</span><span class="token function">arrayFormat</span><span
                            class="token punctuation">(</span>temporalsArray<span class="token punctuation">,</span> <span class="token string">'dd/MMM/yyyy HH:mm'</span><span
                            class="token punctuation">,</span> locale<span class="token punctuation">)</span><span class="token punctuation">}</span>
$<span class="token punctuation">{</span>#temporals<span class="token punctuation">.</span><span class="token function">listFormat</span><span
                            class="token punctuation">(</span>temporalsList<span class="token punctuation">,</span> <span class="token string">'dd/MMM/yyyy HH:mm'</span><span
                            class="token punctuation">,</span> locale<span class="token punctuation">)</span><span class="token punctuation">}</span>
$<span class="token punctuation">{</span>#temporals<span class="token punctuation">.</span><span class="token function">setFormat</span><span
                            class="token punctuation">(</span>temporalsSet<span class="token punctuation">,</span> <span class="token string">'dd/MMM/yyyy HH:mm'</span><span
                            class="token punctuation">,</span> locale<span class="token punctuation">)</span><span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">/*
* Format date with ISO-8601 format
* Also works with arrays, lists or sets
*/</span>
$<span class="token punctuation">{</span>#temporals<span class="token punctuation">.</span><span class="token function">formatISO</span><span
                            class="token punctuation">(</span>temporal<span class="token punctuation">)</span><span class="token punctuation">}</span>
$<span class="token punctuation">{</span>#temporals<span class="token punctuation">.</span><span class="token function">arrayFormatISO</span><span
                            class="token punctuation">(</span>temporalsArray<span class="token punctuation">)</span><span class="token punctuation">}</span>
$<span class="token punctuation">{</span>#temporals<span class="token punctuation">.</span><span class="token function">listFormatISO</span><span
                            class="token punctuation">(</span>temporalsList<span class="token punctuation">)</span><span class="token punctuation">}</span>
$<span class="token punctuation">{</span>#temporals<span class="token punctuation">.</span><span class="token function">setFormatISO</span><span
                            class="token punctuation">(</span>temporalsSet<span class="token punctuation">)</span><span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">/*
* Obtain date properties
* Also works with arrays, lists or sets
*/</span>
$<span class="token punctuation">{</span>#temporals<span class="token punctuation">.</span><span class="token function">day</span><span
                            class="token punctuation">(</span>temporal<span class="token punctuation">)</span><span class="token punctuation">}</span>                    <span
                            class="token comment" spellcheck="true">// also arrayDay(...), listDay(...), etc.</span>
$<span class="token punctuation">{</span>#temporals<span class="token punctuation">.</span><span class="token function">month</span><span
                            class="token punctuation">(</span>temporal<span class="token punctuation">)</span><span class="token punctuation">}</span>                  <span
                            class="token comment" spellcheck="true">// also arrayMonth(...), listMonth(...), etc.</span>
$<span class="token punctuation">{</span>#temporals<span class="token punctuation">.</span><span class="token function">monthName</span><span
                            class="token punctuation">(</span>temporal<span class="token punctuation">)</span><span class="token punctuation">}</span>              <span
                            class="token comment" spellcheck="true">// also arrayMonthName(...), listMonthName(...), etc.</span>
$<span class="token punctuation">{</span>#temporals<span class="token punctuation">.</span><span class="token function">monthNameShort</span><span
                            class="token punctuation">(</span>temporal<span class="token punctuation">)</span><span
                            class="token punctuation">}</span>         <span class="token comment" spellcheck="true">// also arrayMonthNameShort(...), listMonthNameShort(...), etc.</span>
$<span class="token punctuation">{</span>#temporals<span class="token punctuation">.</span><span class="token function">year</span><span
                            class="token punctuation">(</span>temporal<span class="token punctuation">)</span><span class="token punctuation">}</span>                   <span
                            class="token comment" spellcheck="true">// also arrayYear(...), listYear(...), etc.</span>
$<span class="token punctuation">{</span>#temporals<span class="token punctuation">.</span><span class="token function">dayOfWeek</span><span
                            class="token punctuation">(</span>temporal<span class="token punctuation">)</span><span class="token punctuation">}</span>              <span
                            class="token comment" spellcheck="true">// also arrayDayOfWeek(...), listDayOfWeek(...), etc.</span>
$<span class="token punctuation">{</span>#temporals<span class="token punctuation">.</span><span class="token function">dayOfWeekName</span><span
                            class="token punctuation">(</span>temporal<span class="token punctuation">)</span><span class="token punctuation">}</span>          <span
                            class="token comment" spellcheck="true">// also arrayDayOfWeekName(...), listDayOfWeekName(...), etc.</span>
$<span class="token punctuation">{</span>#temporals<span class="token punctuation">.</span><span class="token function">dayOfWeekNameShort</span><span
                            class="token punctuation">(</span>temporal<span class="token punctuation">)</span><span class="token punctuation">}</span>     <span
                            class="token comment" spellcheck="true">// also arrayDayOfWeekNameShort(...), listDayOfWeekNameShort(...), etc.</span>
$<span class="token punctuation">{</span>#temporals<span class="token punctuation">.</span><span class="token function">hour</span><span
                            class="token punctuation">(</span>temporal<span class="token punctuation">)</span><span class="token punctuation">}</span>                   <span
                            class="token comment" spellcheck="true">// also arrayHour(...), listHour(...), etc.</span>
$<span class="token punctuation">{</span>#temporals<span class="token punctuation">.</span><span class="token function">minute</span><span
                            class="token punctuation">(</span>temporal<span class="token punctuation">)</span><span class="token punctuation">}</span>                 <span
                            class="token comment" spellcheck="true">// also arrayMinute(...), listMinute(...), etc.</span>
$<span class="token punctuation">{</span>#temporals<span class="token punctuation">.</span><span class="token function">second</span><span
                            class="token punctuation">(</span>temporal<span class="token punctuation">)</span><span class="token punctuation">}</span>                 <span
                            class="token comment" spellcheck="true">// also arraySecond(...), listSecond(...), etc.</span>
$<span class="token punctuation">{</span>#temporals<span class="token punctuation">.</span><span class="token function">nanosecond</span><span
                            class="token punctuation">(</span>temporal<span class="token punctuation">)</span><span class="token punctuation">}</span>             <span
                            class="token comment" spellcheck="true">// also arrayNanosecond(...), listNanosecond(...), etc.</span>

<span class="token comment" spellcheck="true">/*
* Create temporal (java.time.Temporal) objects from its components
*/</span>
$<span class="token punctuation">{</span>#temporals<span class="token punctuation">.</span><span class="token function">create</span><span
                            class="token punctuation">(</span>year<span class="token punctuation">,</span>month<span class="token punctuation">,</span>day<span
                            class="token punctuation">)</span><span class="token punctuation">}</span>                                <span
                            class="token comment" spellcheck="true">// return a instance of java.time.LocalDate</span>
$<span class="token punctuation">{</span>#temporals<span class="token punctuation">.</span><span class="token function">create</span><span
                            class="token punctuation">(</span>year<span class="token punctuation">,</span>month<span class="token punctuation">,</span>day<span
                            class="token punctuation">,</span>hour<span class="token punctuation">,</span>minute<span class="token punctuation">)</span><span
                            class="token punctuation">}</span>                    <span class="token comment" spellcheck="true">// return a instance of java.time.LocalDateTime</span>
$<span class="token punctuation">{</span>#temporals<span class="token punctuation">.</span><span class="token function">create</span><span
                            class="token punctuation">(</span>year<span class="token punctuation">,</span>month<span class="token punctuation">,</span>day<span
                            class="token punctuation">,</span>hour<span class="token punctuation">,</span>minute<span
                            class="token punctuation">,</span>second<span class="token punctuation">)</span><span class="token punctuation">}</span>             <span
                            class="token comment" spellcheck="true">// return a instance of java.time.LocalDateTime</span>
$<span class="token punctuation">{</span>#temporals<span class="token punctuation">.</span><span class="token function">create</span><span
                            class="token punctuation">(</span>year<span class="token punctuation">,</span>month<span class="token punctuation">,</span>day<span
                            class="token punctuation">,</span>hour<span class="token punctuation">,</span>minute<span
                            class="token punctuation">,</span>second<span class="token punctuation">,</span>nanosecond<span
                            class="token punctuation">)</span><span class="token punctuation">}</span>  <span class="token comment" spellcheck="true">// return a instance of java.time.LocalDateTime</span>

<span class="token comment" spellcheck="true">/*
* Create a temporal (java.time.Temporal) object for the current date and time
*/</span>
$<span class="token punctuation">{</span>#temporals<span class="token punctuation">.</span><span class="token function">createNow</span><span
                            class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span>                      <span
                            class="token comment" spellcheck="true">// return a instance of java.time.LocalDateTime</span>
$<span class="token punctuation">{</span>#temporals<span class="token punctuation">.</span><span class="token function">createNowForTimeZone</span><span
                            class="token punctuation">(</span>zoneId<span class="token punctuation">)</span><span class="token punctuation">}</span>     <span
                            class="token comment" spellcheck="true">// return a instance of java.time.ZonedDateTime</span>
$<span class="token punctuation">{</span>#temporals<span class="token punctuation">.</span><span class="token function">createToday</span><span
                            class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span>                    <span
                            class="token comment" spellcheck="true">// return a instance of java.time.LocalDate</span>
$<span class="token punctuation">{</span>#temporals<span class="token punctuation">.</span><span class="token function">createTodayForTimeZone</span><span
                            class="token punctuation">(</span>zoneId<span class="token punctuation">)</span><span class="token punctuation">}</span>   <span
                            class="token comment" spellcheck="true">// return a instance of java.time.LocalDate</span>

<span class="token comment" spellcheck="true">/*
* Create a temporal (java.time.Temporal) object for the provided date
*/</span>
$<span class="token punctuation">{</span>#temporals<span class="token punctuation">.</span><span class="token function">createDate</span><span
                            class="token punctuation">(</span>isoDate<span class="token punctuation">)</span><span class="token punctuation">}</span>              <span
                            class="token comment" spellcheck="true">// return a instance of java.time.LocalDate</span>
$<span class="token punctuation">{</span>#temporals<span class="token punctuation">.</span><span class="token function">createDateTime</span><span
                            class="token punctuation">(</span>isoDate<span class="token punctuation">)</span><span
                            class="token punctuation">}</span>          <span class="token comment" spellcheck="true">// return a instance of java.time.LocalDateTime</span>
$<span class="token punctuation">{</span>#temporals<span class="token punctuation">.</span><span class="token function">createDate</span><span
                            class="token punctuation">(</span>isoDate<span class="token punctuation">,</span> pattern<span
                            class="token punctuation">)</span><span class="token punctuation">}</span>     <span class="token comment" spellcheck="true">// return a instance of java.time.LocalDate</span>
$<span class="token punctuation">{</span>#temporals<span class="token punctuation">.</span><span class="token function">createDateTime</span><span
                            class="token punctuation">(</span>isoDate<span class="token punctuation">,</span> pattern<span
                            class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token comment" spellcheck="true">// return a instance of java.time.LocalDateTime</span></code></pre>
            </section>
            <section id="numbers" class="level3"><h3>Numbers</h3>
                <ul>
                    <li><strong>#numbers</strong> : utility methods for number objects:</li>
                </ul>
                <pre class=" language-java"><code class=" language-java"><span class="token comment" spellcheck="true">/*
* ======================================================================
* See javadoc API for class org.thymeleaf.expression.Numbers
* ======================================================================
*/</span>

<span class="token comment" spellcheck="true">/*
* ==========================
* Formatting integer numbers
* ==========================
*/</span>

<span class="token comment" spellcheck="true">/*
* Set minimum integer digits.
* Also works with arrays, lists or sets
*/</span>
$<span class="token punctuation">{</span>#numbers<span class="token punctuation">.</span><span class="token function">formatInteger</span><span
                            class="token punctuation">(</span>num<span class="token punctuation">,</span><span class="token number">3</span><span
                            class="token punctuation">)</span><span class="token punctuation">}</span>
$<span class="token punctuation">{</span>#numbers<span class="token punctuation">.</span><span class="token function">arrayFormatInteger</span><span
                            class="token punctuation">(</span>numArray<span class="token punctuation">,</span><span class="token number">3</span><span
                            class="token punctuation">)</span><span class="token punctuation">}</span>
$<span class="token punctuation">{</span>#numbers<span class="token punctuation">.</span><span class="token function">listFormatInteger</span><span
                            class="token punctuation">(</span>numList<span class="token punctuation">,</span><span class="token number">3</span><span
                            class="token punctuation">)</span><span class="token punctuation">}</span>
$<span class="token punctuation">{</span>#numbers<span class="token punctuation">.</span><span class="token function">setFormatInteger</span><span
                            class="token punctuation">(</span>numSet<span class="token punctuation">,</span><span class="token number">3</span><span
                            class="token punctuation">)</span><span class="token punctuation">}</span>


<span class="token comment" spellcheck="true">/*
* Set minimum integer digits and thousands separator:
* 'POINT', 'COMMA', 'WHITESPACE', 'NONE' or 'DEFAULT' (by locale).
* Also works with arrays, lists or sets
*/</span>
$<span class="token punctuation">{</span>#numbers<span class="token punctuation">.</span><span class="token function">formatInteger</span><span
                            class="token punctuation">(</span>num<span class="token punctuation">,</span><span class="token number">3</span><span
                            class="token punctuation">,</span><span class="token string">'POINT'</span><span class="token punctuation">)</span><span
                            class="token punctuation">}</span>
$<span class="token punctuation">{</span>#numbers<span class="token punctuation">.</span><span class="token function">arrayFormatInteger</span><span
                            class="token punctuation">(</span>numArray<span class="token punctuation">,</span><span class="token number">3</span><span
                            class="token punctuation">,</span><span class="token string">'POINT'</span><span class="token punctuation">)</span><span
                            class="token punctuation">}</span>
$<span class="token punctuation">{</span>#numbers<span class="token punctuation">.</span><span class="token function">listFormatInteger</span><span
                            class="token punctuation">(</span>numList<span class="token punctuation">,</span><span class="token number">3</span><span
                            class="token punctuation">,</span><span class="token string">'POINT'</span><span class="token punctuation">)</span><span
                            class="token punctuation">}</span>
$<span class="token punctuation">{</span>#numbers<span class="token punctuation">.</span><span class="token function">setFormatInteger</span><span
                            class="token punctuation">(</span>numSet<span class="token punctuation">,</span><span class="token number">3</span><span
                            class="token punctuation">,</span><span class="token string">'POINT'</span><span class="token punctuation">)</span><span
                            class="token punctuation">}</span>


<span class="token comment" spellcheck="true">/*
* ==========================
* Formatting decimal numbers
* ==========================
*/</span>

<span class="token comment" spellcheck="true">/*
* Set minimum integer digits and (exact) decimal digits.
* Also works with arrays, lists or sets
*/</span>
$<span class="token punctuation">{</span>#numbers<span class="token punctuation">.</span><span class="token function">formatDecimal</span><span
                            class="token punctuation">(</span>num<span class="token punctuation">,</span><span class="token number">3</span><span
                            class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span
                            class="token punctuation">}</span>
$<span class="token punctuation">{</span>#numbers<span class="token punctuation">.</span><span class="token function">arrayFormatDecimal</span><span
                            class="token punctuation">(</span>numArray<span class="token punctuation">,</span><span class="token number">3</span><span
                            class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span
                            class="token punctuation">}</span>
$<span class="token punctuation">{</span>#numbers<span class="token punctuation">.</span><span class="token function">listFormatDecimal</span><span
                            class="token punctuation">(</span>numList<span class="token punctuation">,</span><span class="token number">3</span><span
                            class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span
                            class="token punctuation">}</span>
$<span class="token punctuation">{</span>#numbers<span class="token punctuation">.</span><span class="token function">setFormatDecimal</span><span
                            class="token punctuation">(</span>numSet<span class="token punctuation">,</span><span class="token number">3</span><span
                            class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span
                            class="token punctuation">}</span>

<span class="token comment" spellcheck="true">/*
* Set minimum integer digits and (exact) decimal digits, and also decimal separator.
* Also works with arrays, lists or sets
*/</span>
$<span class="token punctuation">{</span>#numbers<span class="token punctuation">.</span><span class="token function">formatDecimal</span><span
                            class="token punctuation">(</span>num<span class="token punctuation">,</span><span class="token number">3</span><span
                            class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span
                            class="token string">'COMMA'</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
$<span class="token punctuation">{</span>#numbers<span class="token punctuation">.</span><span class="token function">arrayFormatDecimal</span><span
                            class="token punctuation">(</span>numArray<span class="token punctuation">,</span><span class="token number">3</span><span
                            class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span
                            class="token string">'COMMA'</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
$<span class="token punctuation">{</span>#numbers<span class="token punctuation">.</span><span class="token function">listFormatDecimal</span><span
                            class="token punctuation">(</span>numList<span class="token punctuation">,</span><span class="token number">3</span><span
                            class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span
                            class="token string">'COMMA'</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
$<span class="token punctuation">{</span>#numbers<span class="token punctuation">.</span><span class="token function">setFormatDecimal</span><span
                            class="token punctuation">(</span>numSet<span class="token punctuation">,</span><span class="token number">3</span><span
                            class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span
                            class="token string">'COMMA'</span><span class="token punctuation">)</span><span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">/*
* Set minimum integer digits and (exact) decimal digits, and also thousands and
* decimal separator.
* Also works with arrays, lists or sets
*/</span>
$<span class="token punctuation">{</span>#numbers<span class="token punctuation">.</span><span class="token function">formatDecimal</span><span
                            class="token punctuation">(</span>num<span class="token punctuation">,</span><span class="token number">3</span><span
                            class="token punctuation">,</span><span class="token string">'POINT'</span><span class="token punctuation">,</span><span
                            class="token number">2</span><span class="token punctuation">,</span><span class="token string">'COMMA'</span><span
                            class="token punctuation">)</span><span class="token punctuation">}</span>
$<span class="token punctuation">{</span>#numbers<span class="token punctuation">.</span><span class="token function">arrayFormatDecimal</span><span
                            class="token punctuation">(</span>numArray<span class="token punctuation">,</span><span class="token number">3</span><span
                            class="token punctuation">,</span><span class="token string">'POINT'</span><span class="token punctuation">,</span><span
                            class="token number">2</span><span class="token punctuation">,</span><span class="token string">'COMMA'</span><span
                            class="token punctuation">)</span><span class="token punctuation">}</span>
$<span class="token punctuation">{</span>#numbers<span class="token punctuation">.</span><span class="token function">listFormatDecimal</span><span
                            class="token punctuation">(</span>numList<span class="token punctuation">,</span><span class="token number">3</span><span
                            class="token punctuation">,</span><span class="token string">'POINT'</span><span class="token punctuation">,</span><span
                            class="token number">2</span><span class="token punctuation">,</span><span class="token string">'COMMA'</span><span
                            class="token punctuation">)</span><span class="token punctuation">}</span>
$<span class="token punctuation">{</span>#numbers<span class="token punctuation">.</span><span class="token function">setFormatDecimal</span><span
                            class="token punctuation">(</span>numSet<span class="token punctuation">,</span><span class="token number">3</span><span
                            class="token punctuation">,</span><span class="token string">'POINT'</span><span class="token punctuation">,</span><span
                            class="token number">2</span><span class="token punctuation">,</span><span class="token string">'COMMA'</span><span
                            class="token punctuation">)</span><span class="token punctuation">}</span>


<span class="token comment" spellcheck="true">/*
* =====================
* Formatting currencies
* =====================
*/</span>

$<span class="token punctuation">{</span>#numbers<span class="token punctuation">.</span><span class="token function">formatCurrency</span><span
                            class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">}</span>
$<span class="token punctuation">{</span>#numbers<span class="token punctuation">.</span><span class="token function">arrayFormatCurrency</span><span
                            class="token punctuation">(</span>numArray<span class="token punctuation">)</span><span class="token punctuation">}</span>
$<span class="token punctuation">{</span>#numbers<span class="token punctuation">.</span><span class="token function">listFormatCurrency</span><span
                            class="token punctuation">(</span>numList<span class="token punctuation">)</span><span class="token punctuation">}</span>
$<span class="token punctuation">{</span>#numbers<span class="token punctuation">.</span><span class="token function">setFormatCurrency</span><span
                            class="token punctuation">(</span>numSet<span class="token punctuation">)</span><span class="token punctuation">}</span>


<span class="token comment" spellcheck="true">/*
* ======================
* Formatting percentages
* ======================
*/</span>

$<span class="token punctuation">{</span>#numbers<span class="token punctuation">.</span><span class="token function">formatPercent</span><span
                            class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">}</span>
$<span class="token punctuation">{</span>#numbers<span class="token punctuation">.</span><span class="token function">arrayFormatPercent</span><span
                            class="token punctuation">(</span>numArray<span class="token punctuation">)</span><span class="token punctuation">}</span>
$<span class="token punctuation">{</span>#numbers<span class="token punctuation">.</span><span class="token function">listFormatPercent</span><span
                            class="token punctuation">(</span>numList<span class="token punctuation">)</span><span class="token punctuation">}</span>
$<span class="token punctuation">{</span>#numbers<span class="token punctuation">.</span><span class="token function">setFormatPercent</span><span
                            class="token punctuation">(</span>numSet<span class="token punctuation">)</span><span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">/*
* Set minimum integer digits and (exact) decimal digits.
*/</span>
$<span class="token punctuation">{</span>#numbers<span class="token punctuation">.</span><span class="token function">formatPercent</span><span
                            class="token punctuation">(</span>num<span class="token punctuation">,</span> <span class="token number">3</span><span
                            class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span
                            class="token punctuation">}</span>
$<span class="token punctuation">{</span>#numbers<span class="token punctuation">.</span><span class="token function">arrayFormatPercent</span><span
                            class="token punctuation">(</span>numArray<span class="token punctuation">,</span> <span class="token number">3</span><span
                            class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span
                            class="token punctuation">}</span>
$<span class="token punctuation">{</span>#numbers<span class="token punctuation">.</span><span class="token function">listFormatPercent</span><span
                            class="token punctuation">(</span>numList<span class="token punctuation">,</span> <span class="token number">3</span><span
                            class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span
                            class="token punctuation">}</span>
$<span class="token punctuation">{</span>#numbers<span class="token punctuation">.</span><span class="token function">setFormatPercent</span><span
                            class="token punctuation">(</span>numSet<span class="token punctuation">,</span> <span class="token number">3</span><span
                            class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span
                            class="token punctuation">}</span>


<span class="token comment" spellcheck="true">/*
* ===============
* Utility methods
* ===============
*/</span>

<span class="token comment" spellcheck="true">/*
* Create a sequence (array) of integer numbers going
* from x to y
*/</span>
$<span class="token punctuation">{</span>#numbers<span class="token punctuation">.</span><span class="token function">sequence</span><span
                            class="token punctuation">(</span>from<span class="token punctuation">,</span>to<span class="token punctuation">)</span><span
                            class="token punctuation">}</span>
$<span class="token punctuation">{</span>#numbers<span class="token punctuation">.</span><span class="token function">sequence</span><span
                            class="token punctuation">(</span>from<span class="token punctuation">,</span>to<span class="token punctuation">,</span>step<span
                            class="token punctuation">)</span><span class="token punctuation">}</span></code></pre>
            </section>
            <section id="strings" class="level3"><h3>Strings</h3>
                <ul>
                    <li><strong>#strings</strong> : utility methods for <code>String</code> objects:</li>
                </ul>
                <pre class=" language-java"><code class=" language-java"><span class="token comment" spellcheck="true">/*
* ======================================================================
* See javadoc API for class org.thymeleaf.expression.Strings
* ======================================================================
*/</span>

<span class="token comment" spellcheck="true">/*
* Null-safe toString()
*/</span>
$<span class="token punctuation">{</span>#strings<span class="token punctuation">.</span><span class="token function">toString</span><span
                            class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">}</span>                           <span
                            class="token comment" spellcheck="true">// also array*, list* and set*</span>

<span class="token comment" spellcheck="true">/*
* Check whether a String is empty (or null). Performs a trim() operation before check
* Also works with arrays, lists or sets
*/</span>
$<span class="token punctuation">{</span>#strings<span class="token punctuation">.</span><span class="token function">isEmpty</span><span
                            class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">}</span>
$<span class="token punctuation">{</span>#strings<span class="token punctuation">.</span><span class="token function">arrayIsEmpty</span><span
                            class="token punctuation">(</span>nameArr<span class="token punctuation">)</span><span class="token punctuation">}</span>
$<span class="token punctuation">{</span>#strings<span class="token punctuation">.</span><span class="token function">listIsEmpty</span><span
                            class="token punctuation">(</span>nameList<span class="token punctuation">)</span><span class="token punctuation">}</span>
$<span class="token punctuation">{</span>#strings<span class="token punctuation">.</span><span class="token function">setIsEmpty</span><span
                            class="token punctuation">(</span>nameSet<span class="token punctuation">)</span><span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">/*
* Perform an 'isEmpty()' check on a string and return it if false, defaulting to
* another specified string if true.
* Also works with arrays, lists or sets
*/</span>
$<span class="token punctuation">{</span>#strings<span class="token punctuation">.</span><span class="token function">defaultString</span><span
                            class="token punctuation">(</span>text<span class="token punctuation">,</span><span class="token keyword">default</span><span
                            class="token punctuation">)</span><span class="token punctuation">}</span>
$<span class="token punctuation">{</span>#strings<span class="token punctuation">.</span><span class="token function">arrayDefaultString</span><span
                            class="token punctuation">(</span>textArr<span class="token punctuation">,</span><span class="token keyword">default</span><span
                            class="token punctuation">)</span><span class="token punctuation">}</span>
$<span class="token punctuation">{</span>#strings<span class="token punctuation">.</span><span class="token function">listDefaultString</span><span
                            class="token punctuation">(</span>textList<span class="token punctuation">,</span><span class="token keyword">default</span><span
                            class="token punctuation">)</span><span class="token punctuation">}</span>
$<span class="token punctuation">{</span>#strings<span class="token punctuation">.</span><span class="token function">setDefaultString</span><span
                            class="token punctuation">(</span>textSet<span class="token punctuation">,</span><span class="token keyword">default</span><span
                            class="token punctuation">)</span><span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">/*
* Check whether a fragment is contained in a String
* Also works with arrays, lists or sets
*/</span>
$<span class="token punctuation">{</span>#strings<span class="token punctuation">.</span><span class="token function">contains</span><span
                            class="token punctuation">(</span>name<span class="token punctuation">,</span><span class="token string">'ez'</span><span
                            class="token punctuation">)</span><span class="token punctuation">}</span>                     <span class="token comment"
                                                                                                                                 spellcheck="true">// also array*, list* and set*</span>
$<span class="token punctuation">{</span>#strings<span class="token punctuation">.</span><span class="token function">containsIgnoreCase</span><span
                            class="token punctuation">(</span>name<span class="token punctuation">,</span><span class="token string">'ez'</span><span
                            class="token punctuation">)</span><span class="token punctuation">}</span>           <span class="token comment" spellcheck="true">// also array*, list* and set*</span>

<span class="token comment" spellcheck="true">/*
* Check whether a String starts or ends with a fragment
* Also works with arrays, lists or sets
*/</span>
$<span class="token punctuation">{</span>#strings<span class="token punctuation">.</span><span class="token function">startsWith</span><span
                            class="token punctuation">(</span>name<span class="token punctuation">,</span><span class="token string">'Don'</span><span
                            class="token punctuation">)</span><span class="token punctuation">}</span>                  <span class="token comment"
                                                                                                                              spellcheck="true">// also array*, list* and set*</span>
$<span class="token punctuation">{</span>#strings<span class="token punctuation">.</span><span class="token function">endsWith</span><span
                            class="token punctuation">(</span>name<span class="token punctuation">,</span>endingFragment<span class="token punctuation">)</span><span
                            class="token punctuation">}</span>           <span class="token comment" spellcheck="true">// also array*, list* and set*</span>

<span class="token comment" spellcheck="true">/*
* Substring-related operations
* Also works with arrays, lists or sets
*/</span>
$<span class="token punctuation">{</span>#strings<span class="token punctuation">.</span><span class="token function">indexOf</span><span
                            class="token punctuation">(</span>name<span class="token punctuation">,</span>frag<span class="token punctuation">)</span><span
                            class="token punctuation">}</span>                      <span class="token comment"
                                                                                          spellcheck="true">// also array*, list* and set*</span>
$<span class="token punctuation">{</span>#strings<span class="token punctuation">.</span><span class="token function">substring</span><span
                            class="token punctuation">(</span>name<span class="token punctuation">,</span><span class="token number">3</span><span
                            class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span><span
                            class="token punctuation">}</span>                     <span class="token comment"
                                                                                         spellcheck="true">// also array*, list* and set*</span>
$<span class="token punctuation">{</span>#strings<span class="token punctuation">.</span><span class="token function">substringAfter</span><span
                            class="token punctuation">(</span>name<span class="token punctuation">,</span>prefix<span class="token punctuation">)</span><span
                            class="token punctuation">}</span>             <span class="token comment" spellcheck="true">// also array*, list* and set*</span>
$<span class="token punctuation">{</span>#strings<span class="token punctuation">.</span><span class="token function">substringBefore</span><span
                            class="token punctuation">(</span>name<span class="token punctuation">,</span>suffix<span class="token punctuation">)</span><span
                            class="token punctuation">}</span>            <span class="token comment" spellcheck="true">// also array*, list* and set*</span>
$<span class="token punctuation">{</span>#strings<span class="token punctuation">.</span><span class="token function">replace</span><span
                            class="token punctuation">(</span>name<span class="token punctuation">,</span><span class="token string">'las'</span><span
                            class="token punctuation">,</span><span class="token string">'ler'</span><span class="token punctuation">)</span><span
                            class="token punctuation">}</span>               <span class="token comment" spellcheck="true">// also array*, list* and set*</span>

<span class="token comment" spellcheck="true">/*
* Append and prepend
* Also works with arrays, lists or sets
*/</span>
$<span class="token punctuation">{</span>#strings<span class="token punctuation">.</span><span class="token function">prepend</span><span
                            class="token punctuation">(</span>str<span class="token punctuation">,</span>prefix<span class="token punctuation">)</span><span
                            class="token punctuation">}</span>                     <span class="token comment"
                                                                                         spellcheck="true">// also array*, list* and set*</span>
$<span class="token punctuation">{</span>#strings<span class="token punctuation">.</span><span class="token function">append</span><span
                            class="token punctuation">(</span>str<span class="token punctuation">,</span>suffix<span class="token punctuation">)</span><span
                            class="token punctuation">}</span>                      <span class="token comment"
                                                                                          spellcheck="true">// also array*, list* and set*</span>

<span class="token comment" spellcheck="true">/*
* Change case
* Also works with arrays, lists or sets
*/</span>
$<span class="token punctuation">{</span>#strings<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span
                            class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">}</span>                       <span
                            class="token comment" spellcheck="true">// also array*, list* and set*</span>
$<span class="token punctuation">{</span>#strings<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span
                            class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">}</span>                       <span
                            class="token comment" spellcheck="true">// also array*, list* and set*</span>

<span class="token comment" spellcheck="true">/*
* Split and join
*/</span>
$<span class="token punctuation">{</span>#strings<span class="token punctuation">.</span><span class="token function">arrayJoin</span><span
                            class="token punctuation">(</span>namesArray<span class="token punctuation">,</span><span class="token string">','</span><span
                            class="token punctuation">)</span><span class="token punctuation">}</span>
$<span class="token punctuation">{</span>#strings<span class="token punctuation">.</span><span class="token function">listJoin</span><span
                            class="token punctuation">(</span>namesList<span class="token punctuation">,</span><span class="token string">','</span><span
                            class="token punctuation">)</span><span class="token punctuation">}</span>
$<span class="token punctuation">{</span>#strings<span class="token punctuation">.</span><span class="token function">setJoin</span><span
                            class="token punctuation">(</span>namesSet<span class="token punctuation">,</span><span class="token string">','</span><span
                            class="token punctuation">)</span><span class="token punctuation">}</span>
$<span class="token punctuation">{</span>#strings<span class="token punctuation">.</span><span class="token function">arraySplit</span><span
                            class="token punctuation">(</span>namesStr<span class="token punctuation">,</span><span class="token string">','</span><span
                            class="token punctuation">)</span><span class="token punctuation">}</span>                <span class="token comment"
                                                                                                                            spellcheck="true">// returns String[]</span>
$<span class="token punctuation">{</span>#strings<span class="token punctuation">.</span><span class="token function">listSplit</span><span
                            class="token punctuation">(</span>namesStr<span class="token punctuation">,</span><span class="token string">','</span><span
                            class="token punctuation">)</span><span class="token punctuation">}</span>                 <span class="token comment"
                                                                                                                             spellcheck="true">// returns List&lt;String&gt;</span>
$<span class="token punctuation">{</span>#strings<span class="token punctuation">.</span><span class="token function">setSplit</span><span
                            class="token punctuation">(</span>namesStr<span class="token punctuation">,</span><span class="token string">','</span><span
                            class="token punctuation">)</span><span class="token punctuation">}</span>                  <span class="token comment"
                                                                                                                              spellcheck="true">// returns Set&lt;String&gt;</span>

<span class="token comment" spellcheck="true">/*
* Trim
* Also works with arrays, lists or sets
*/</span>
$<span class="token punctuation">{</span>#strings<span class="token punctuation">.</span><span class="token function">trim</span><span
                            class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">}</span>                               <span
                            class="token comment" spellcheck="true">// also array*, list* and set*</span>

<span class="token comment" spellcheck="true">/*
* Compute length
* Also works with arrays, lists or sets
*/</span>
$<span class="token punctuation">{</span>#strings<span class="token punctuation">.</span><span class="token function">length</span><span
                            class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">}</span>                             <span
                            class="token comment" spellcheck="true">// also array*, list* and set*</span>

<span class="token comment" spellcheck="true">/*
* Abbreviate text making it have a maximum size of n. If text is bigger, it
* will be clipped and finished in "..."
* Also works with arrays, lists or sets
*/</span>
$<span class="token punctuation">{</span>#strings<span class="token punctuation">.</span><span class="token function">abbreviate</span><span
                            class="token punctuation">(</span>str<span class="token punctuation">,</span><span class="token number">10</span><span
                            class="token punctuation">)</span><span class="token punctuation">}</span>                      <span class="token comment"
                                                                                                                                  spellcheck="true">// also array*, list* and set*</span>

<span class="token comment" spellcheck="true">/*
* Convert the first character to upper-case (and vice-versa)
*/</span>
$<span class="token punctuation">{</span>#strings<span class="token punctuation">.</span><span class="token function">capitalize</span><span
                            class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">}</span>                         <span
                            class="token comment" spellcheck="true">// also array*, list* and set*</span>
$<span class="token punctuation">{</span>#strings<span class="token punctuation">.</span><span class="token function">unCapitalize</span><span
                            class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">}</span>                       <span
                            class="token comment" spellcheck="true">// also array*, list* and set*</span>

<span class="token comment" spellcheck="true">/*
* Convert the first character of every word to upper-case
*/</span>
$<span class="token punctuation">{</span>#strings<span class="token punctuation">.</span><span class="token function">capitalizeWords</span><span
                            class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">}</span>                    <span
                            class="token comment" spellcheck="true">// also array*, list* and set*</span>
$<span class="token punctuation">{</span>#strings<span class="token punctuation">.</span><span class="token function">capitalizeWords</span><span
                            class="token punctuation">(</span>str<span class="token punctuation">,</span>delimiters<span class="token punctuation">)</span><span
                            class="token punctuation">}</span>         <span class="token comment" spellcheck="true">// also array*, list* and set*</span>

<span class="token comment" spellcheck="true">/*
* Escape the string
*/</span>
$<span class="token punctuation">{</span>#strings<span class="token punctuation">.</span><span class="token function">escapeXml</span><span
                            class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">}</span>                          <span
                            class="token comment" spellcheck="true">// also array*, list* and set*</span>
$<span class="token punctuation">{</span>#strings<span class="token punctuation">.</span><span class="token function">escapeJava</span><span
                            class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">}</span>                         <span
                            class="token comment" spellcheck="true">// also array*, list* and set*</span>
$<span class="token punctuation">{</span>#strings<span class="token punctuation">.</span><span class="token function">escapeJavaScript</span><span
                            class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">}</span>                   <span
                            class="token comment" spellcheck="true">// also array*, list* and set*</span>
$<span class="token punctuation">{</span>#strings<span class="token punctuation">.</span><span class="token function">unescapeJava</span><span
                            class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">}</span>                       <span
                            class="token comment" spellcheck="true">// also array*, list* and set*</span>
$<span class="token punctuation">{</span>#strings<span class="token punctuation">.</span><span class="token function">unescapeJavaScript</span><span
                            class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">}</span>                 <span
                            class="token comment" spellcheck="true">// also array*, list* and set*</span>

<span class="token comment" spellcheck="true">/*
* Null-safe comparison and concatenation
*/</span>
$<span class="token punctuation">{</span>#strings<span class="token punctuation">.</span><span class="token function">equals</span><span
                            class="token punctuation">(</span>first<span class="token punctuation">,</span> second<span class="token punctuation">)</span><span
                            class="token punctuation">}</span>
$<span class="token punctuation">{</span>#strings<span class="token punctuation">.</span><span class="token function">equalsIgnoreCase</span><span
                            class="token punctuation">(</span>first<span class="token punctuation">,</span> second<span class="token punctuation">)</span><span
                            class="token punctuation">}</span>
$<span class="token punctuation">{</span>#strings<span class="token punctuation">.</span><span class="token function">concat</span><span
                            class="token punctuation">(</span>values<span class="token punctuation">.</span><span class="token punctuation">.</span><span
                            class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
$<span class="token punctuation">{</span>#strings<span class="token punctuation">.</span><span class="token function">concatReplaceNulls</span><span
                            class="token punctuation">(</span>nullValue<span class="token punctuation">,</span> values<span
                            class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span
                            class="token punctuation">)</span><span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">/*
* Random
*/</span>
$<span class="token punctuation">{</span>#strings<span class="token punctuation">.</span><span class="token function">randomAlphanumeric</span><span
                            class="token punctuation">(</span>count<span class="token punctuation">)</span><span class="token punctuation">}</span></code></pre>
            </section>
            <section id="objects" class="level3"><h3>Objects</h3>
                <ul>
                    <li><strong>#objects</strong> : utility methods for objects in general</li>
                </ul>
                <pre class=" language-java"><code class=" language-java"><span class="token comment" spellcheck="true">/*
* ======================================================================
* See javadoc API for class org.thymeleaf.expression.Objects
* ======================================================================
*/</span>

<span class="token comment" spellcheck="true">/*
* Return obj if it is not null, and default otherwise
* Also works with arrays, lists or sets
*/</span>
$<span class="token punctuation">{</span>#objects<span class="token punctuation">.</span><span class="token function">nullSafe</span><span
                            class="token punctuation">(</span>obj<span class="token punctuation">,</span><span class="token keyword">default</span><span
                            class="token punctuation">)</span><span class="token punctuation">}</span>
$<span class="token punctuation">{</span>#objects<span class="token punctuation">.</span><span class="token function">arrayNullSafe</span><span
                            class="token punctuation">(</span>objArray<span class="token punctuation">,</span><span class="token keyword">default</span><span
                            class="token punctuation">)</span><span class="token punctuation">}</span>
$<span class="token punctuation">{</span>#objects<span class="token punctuation">.</span><span class="token function">listNullSafe</span><span
                            class="token punctuation">(</span>objList<span class="token punctuation">,</span><span class="token keyword">default</span><span
                            class="token punctuation">)</span><span class="token punctuation">}</span>
$<span class="token punctuation">{</span>#objects<span class="token punctuation">.</span><span class="token function">setNullSafe</span><span
                            class="token punctuation">(</span>objSet<span class="token punctuation">,</span><span class="token keyword">default</span><span
                            class="token punctuation">)</span><span class="token punctuation">}</span></code></pre>
            </section>
            <section id="booleans" class="level3"><h3>Booleans</h3>
                <ul>
                    <li><strong>#bools</strong> : utility methods for boolean evaluation</li>
                </ul>
                <pre class=" language-java"><code class=" language-java"><span class="token comment" spellcheck="true">/*
* ======================================================================
* See javadoc API for class org.thymeleaf.expression.Bools
* ======================================================================
*/</span>

<span class="token comment" spellcheck="true">/*
* Evaluate a condition in the same way that it would be evaluated in a th:if tag
* (see conditional evaluation chapter afterwards).
* Also works with arrays, lists or sets
*/</span>
$<span class="token punctuation">{</span>#bools<span class="token punctuation">.</span><span class="token function">isTrue</span><span
                            class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">}</span>
$<span class="token punctuation">{</span>#bools<span class="token punctuation">.</span><span class="token function">arrayIsTrue</span><span
                            class="token punctuation">(</span>objArray<span class="token punctuation">)</span><span class="token punctuation">}</span>
$<span class="token punctuation">{</span>#bools<span class="token punctuation">.</span><span class="token function">listIsTrue</span><span
                            class="token punctuation">(</span>objList<span class="token punctuation">)</span><span class="token punctuation">}</span>
$<span class="token punctuation">{</span>#bools<span class="token punctuation">.</span><span class="token function">setIsTrue</span><span
                            class="token punctuation">(</span>objSet<span class="token punctuation">)</span><span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">/*
* Evaluate with negation
* Also works with arrays, lists or sets
*/</span>
$<span class="token punctuation">{</span>#bools<span class="token punctuation">.</span><span class="token function">isFalse</span><span
                            class="token punctuation">(</span>cond<span class="token punctuation">)</span><span class="token punctuation">}</span>
$<span class="token punctuation">{</span>#bools<span class="token punctuation">.</span><span class="token function">arrayIsFalse</span><span
                            class="token punctuation">(</span>condArray<span class="token punctuation">)</span><span class="token punctuation">}</span>
$<span class="token punctuation">{</span>#bools<span class="token punctuation">.</span><span class="token function">listIsFalse</span><span
                            class="token punctuation">(</span>condList<span class="token punctuation">)</span><span class="token punctuation">}</span>
$<span class="token punctuation">{</span>#bools<span class="token punctuation">.</span><span class="token function">setIsFalse</span><span
                            class="token punctuation">(</span>condSet<span class="token punctuation">)</span><span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">/*
* Evaluate and apply AND operator
* Receive an array, a list or a set as parameter
*/</span>
$<span class="token punctuation">{</span>#bools<span class="token punctuation">.</span><span class="token function">arrayAnd</span><span
                            class="token punctuation">(</span>condArray<span class="token punctuation">)</span><span class="token punctuation">}</span>
$<span class="token punctuation">{</span>#bools<span class="token punctuation">.</span><span class="token function">listAnd</span><span
                            class="token punctuation">(</span>condList<span class="token punctuation">)</span><span class="token punctuation">}</span>
$<span class="token punctuation">{</span>#bools<span class="token punctuation">.</span><span class="token function">setAnd</span><span
                            class="token punctuation">(</span>condSet<span class="token punctuation">)</span><span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">/*
* Evaluate and apply OR operator
* Receive an array, a list or a set as parameter
*/</span>
$<span class="token punctuation">{</span>#bools<span class="token punctuation">.</span><span class="token function">arrayOr</span><span
                            class="token punctuation">(</span>condArray<span class="token punctuation">)</span><span class="token punctuation">}</span>
$<span class="token punctuation">{</span>#bools<span class="token punctuation">.</span><span class="token function">listOr</span><span
                            class="token punctuation">(</span>condList<span class="token punctuation">)</span><span class="token punctuation">}</span>
$<span class="token punctuation">{</span>#bools<span class="token punctuation">.</span><span class="token function">setOr</span><span class="token punctuation">(</span>condSet<span
                            class="token punctuation">)</span><span class="token punctuation">}</span></code></pre>
            </section>
            <section id="arrays" class="level3"><h3>Arrays</h3>
                <ul>
                    <li><strong>#arrays</strong> : utility methods for arrays</li>
                </ul>
                <pre class=" language-java"><code class=" language-java"><span class="token comment" spellcheck="true">/*
* ======================================================================
* See javadoc API for class org.thymeleaf.expression.Arrays
* ======================================================================
*/</span>

<span class="token comment" spellcheck="true">/*
* Converts to array, trying to infer array component class.
* Note that if resulting array is empty, or if the elements
* of the target object are not all of the same class,
* this method will return Object[].
*/</span>
$<span class="token punctuation">{</span>#arrays<span class="token punctuation">.</span><span class="token function">toArray</span><span
                            class="token punctuation">(</span>object<span class="token punctuation">)</span><span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">/*
* Convert to arrays of the specified component class.
*/</span>
$<span class="token punctuation">{</span>#arrays<span class="token punctuation">.</span><span class="token function">toStringArray</span><span
                            class="token punctuation">(</span>object<span class="token punctuation">)</span><span class="token punctuation">}</span>
$<span class="token punctuation">{</span>#arrays<span class="token punctuation">.</span><span class="token function">toIntegerArray</span><span
                            class="token punctuation">(</span>object<span class="token punctuation">)</span><span class="token punctuation">}</span>
$<span class="token punctuation">{</span>#arrays<span class="token punctuation">.</span><span class="token function">toLongArray</span><span
                            class="token punctuation">(</span>object<span class="token punctuation">)</span><span class="token punctuation">}</span>
$<span class="token punctuation">{</span>#arrays<span class="token punctuation">.</span><span class="token function">toDoubleArray</span><span
                            class="token punctuation">(</span>object<span class="token punctuation">)</span><span class="token punctuation">}</span>
$<span class="token punctuation">{</span>#arrays<span class="token punctuation">.</span><span class="token function">toFloatArray</span><span
                            class="token punctuation">(</span>object<span class="token punctuation">)</span><span class="token punctuation">}</span>
$<span class="token punctuation">{</span>#arrays<span class="token punctuation">.</span><span class="token function">toBooleanArray</span><span
                            class="token punctuation">(</span>object<span class="token punctuation">)</span><span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">/*
* Compute length
*/</span>
$<span class="token punctuation">{</span>#arrays<span class="token punctuation">.</span><span class="token function">length</span><span
                            class="token punctuation">(</span>array<span class="token punctuation">)</span><span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">/*
* Check whether array is empty
*/</span>
$<span class="token punctuation">{</span>#arrays<span class="token punctuation">.</span><span class="token function">isEmpty</span><span
                            class="token punctuation">(</span>array<span class="token punctuation">)</span><span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">/*
* Check if element or elements are contained in array
*/</span>
$<span class="token punctuation">{</span>#arrays<span class="token punctuation">.</span><span class="token function">contains</span><span
                            class="token punctuation">(</span>array<span class="token punctuation">,</span> element<span class="token punctuation">)</span><span
                            class="token punctuation">}</span>
$<span class="token punctuation">{</span>#arrays<span class="token punctuation">.</span><span class="token function">containsAll</span><span
                            class="token punctuation">(</span>array<span class="token punctuation">,</span> elements<span
                            class="token punctuation">)</span><span class="token punctuation">}</span></code></pre>
            </section>
            <section id="lists" class="level3"><h3>Lists</h3>
                <ul>
                    <li><strong>#lists</strong> : utility methods for lists</li>
                </ul>
                <pre class=" language-java"><code class=" language-java"><span class="token comment" spellcheck="true">/*
* ======================================================================
* See javadoc API for class org.thymeleaf.expression.Lists
* ======================================================================
*/</span>

<span class="token comment" spellcheck="true">/*
* Converts to list
*/</span>
$<span class="token punctuation">{</span>#lists<span class="token punctuation">.</span><span class="token function">toList</span><span
                            class="token punctuation">(</span>object<span class="token punctuation">)</span><span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">/*
* Compute size
*/</span>
$<span class="token punctuation">{</span>#lists<span class="token punctuation">.</span><span class="token function">size</span><span
                            class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">/*
* Check whether list is empty
*/</span>
$<span class="token punctuation">{</span>#lists<span class="token punctuation">.</span><span class="token function">isEmpty</span><span
                            class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">/*
* Check if element or elements are contained in list
*/</span>
$<span class="token punctuation">{</span>#lists<span class="token punctuation">.</span><span class="token function">contains</span><span
                            class="token punctuation">(</span>list<span class="token punctuation">,</span> element<span class="token punctuation">)</span><span
                            class="token punctuation">}</span>
$<span class="token punctuation">{</span>#lists<span class="token punctuation">.</span><span class="token function">containsAll</span><span
                            class="token punctuation">(</span>list<span class="token punctuation">,</span> elements<span class="token punctuation">)</span><span
                            class="token punctuation">}</span>

<span class="token comment" spellcheck="true">/*
* Sort a copy of the given list. The members of the list must implement
* comparable or you must define a comparator.
*/</span>
$<span class="token punctuation">{</span>#lists<span class="token punctuation">.</span><span class="token function">sort</span><span
                            class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">}</span>
$<span class="token punctuation">{</span>#lists<span class="token punctuation">.</span><span class="token function">sort</span><span
                            class="token punctuation">(</span>list<span class="token punctuation">,</span> comparator<span
                            class="token punctuation">)</span><span class="token punctuation">}</span></code></pre>
            </section>
            <section id="sets" class="level3"><h3>Sets</h3>
                <ul>
                    <li><strong>#sets</strong> : utility methods for sets</li>
                </ul>
                <pre class=" language-java"><code class=" language-java"><span class="token comment" spellcheck="true">/*
* ======================================================================
* See javadoc API for class org.thymeleaf.expression.Sets
* ======================================================================
*/</span>

<span class="token comment" spellcheck="true">/*
* Converts to set
*/</span>
$<span class="token punctuation">{</span>#sets<span class="token punctuation">.</span><span class="token function">toSet</span><span
                            class="token punctuation">(</span>object<span class="token punctuation">)</span><span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">/*
* Compute size
*/</span>
$<span class="token punctuation">{</span>#sets<span class="token punctuation">.</span><span class="token function">size</span><span
                            class="token punctuation">(</span>set<span class="token punctuation">)</span><span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">/*
* Check whether set is empty
*/</span>
$<span class="token punctuation">{</span>#sets<span class="token punctuation">.</span><span class="token function">isEmpty</span><span
                            class="token punctuation">(</span>set<span class="token punctuation">)</span><span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">/*
* Check if element or elements are contained in set
*/</span>
$<span class="token punctuation">{</span>#sets<span class="token punctuation">.</span><span class="token function">contains</span><span
                            class="token punctuation">(</span>set<span class="token punctuation">,</span> element<span class="token punctuation">)</span><span
                            class="token punctuation">}</span>
$<span class="token punctuation">{</span>#sets<span class="token punctuation">.</span><span class="token function">containsAll</span><span
                            class="token punctuation">(</span>set<span class="token punctuation">,</span> elements<span class="token punctuation">)</span><span
                            class="token punctuation">}</span></code></pre>
            </section>
            <section id="maps" class="level3"><h3>Maps</h3>
                <ul>
                    <li><strong>#maps</strong> : utility methods for maps</li>
                </ul>
                <pre class=" language-java"><code class=" language-java"><span class="token comment" spellcheck="true">/*
* ======================================================================
* See javadoc API for class org.thymeleaf.expression.Maps
* ======================================================================
*/</span>

<span class="token comment" spellcheck="true">/*
* Compute size
*/</span>
$<span class="token punctuation">{</span>#maps<span class="token punctuation">.</span><span class="token function">size</span><span
                            class="token punctuation">(</span>map<span class="token punctuation">)</span><span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">/*
* Check whether map is empty
*/</span>
$<span class="token punctuation">{</span>#maps<span class="token punctuation">.</span><span class="token function">isEmpty</span><span
                            class="token punctuation">(</span>map<span class="token punctuation">)</span><span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">/*
* Check if key/s or value/s are contained in maps
*/</span>
$<span class="token punctuation">{</span>#maps<span class="token punctuation">.</span><span class="token function">containsKey</span><span
                            class="token punctuation">(</span>map<span class="token punctuation">,</span> key<span class="token punctuation">)</span><span
                            class="token punctuation">}</span>
$<span class="token punctuation">{</span>#maps<span class="token punctuation">.</span><span class="token function">containsAllKeys</span><span
                            class="token punctuation">(</span>map<span class="token punctuation">,</span> keys<span class="token punctuation">)</span><span
                            class="token punctuation">}</span>
$<span class="token punctuation">{</span>#maps<span class="token punctuation">.</span><span class="token function">containsValue</span><span
                            class="token punctuation">(</span>map<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span
                            class="token punctuation">}</span>
$<span class="token punctuation">{</span>#maps<span class="token punctuation">.</span><span class="token function">containsAllValues</span><span
                            class="token punctuation">(</span>map<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span
                            class="token punctuation">}</span></code></pre>
            </section>
            <section id="aggregates" class="level3"><h3>Aggregates</h3>
                <ul>
                    <li><strong>#aggregates</strong> : utility methods for creating aggregates on arrays or collections</li>
                </ul>
                <pre class=" language-java"><code class=" language-java"><span class="token comment" spellcheck="true">/*
* ======================================================================
* See javadoc API for class org.thymeleaf.expression.Aggregates
* ======================================================================
*/</span>

<span class="token comment" spellcheck="true">/*
* Compute sum. Returns null if array or collection is empty
*/</span>
$<span class="token punctuation">{</span>#aggregates<span class="token punctuation">.</span><span class="token function">sum</span><span
                            class="token punctuation">(</span>array<span class="token punctuation">)</span><span class="token punctuation">}</span>
$<span class="token punctuation">{</span>#aggregates<span class="token punctuation">.</span><span class="token function">sum</span><span
                            class="token punctuation">(</span>collection<span class="token punctuation">)</span><span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">/*
* Compute average. Returns null if array or collection is empty
*/</span>
$<span class="token punctuation">{</span>#aggregates<span class="token punctuation">.</span><span class="token function">avg</span><span
                            class="token punctuation">(</span>array<span class="token punctuation">)</span><span class="token punctuation">}</span>
$<span class="token punctuation">{</span>#aggregates<span class="token punctuation">.</span><span class="token function">avg</span><span
                            class="token punctuation">(</span>collection<span class="token punctuation">)</span><span class="token punctuation">}</span></code></pre>
            </section>
            <section id="ids" class="level3"><h3>IDs</h3>
                <ul>
                    <li><strong>#ids</strong> : utility methods for dealing with <code>id</code> attributes that might be repeated (for example, as a result of
                        an iteration).
                    </li>
                </ul>
                <pre class=" language-java"><code class=" language-java"><span class="token comment" spellcheck="true">/*
* ======================================================================
* See javadoc API for class org.thymeleaf.expression.Ids
* ======================================================================
*/</span>

<span class="token comment" spellcheck="true">/*
* Normally used in th:id attributes, for appending a counter to the id attribute value
* so that it remains unique even when involved in an iteration process.
*/</span>
$<span class="token punctuation">{</span>#ids<span class="token punctuation">.</span><span class="token function">seq</span><span
                            class="token punctuation">(</span><span class="token string">'someId'</span><span class="token punctuation">)</span><span
                            class="token punctuation">}</span>

<span class="token comment" spellcheck="true">/*
* Normally used in th:for attributes in &lt;label&gt; tags, so that these labels can refer to Ids
* generated by means if the #ids.seq(...) function.
*
* Depending on whether the &lt;label&gt; goes before or after the element with the #ids.seq(...)
* function, the "next" (label goes before "seq") or the "prev" function (label goes after
* "seq") function should be called.
*/</span>
$<span class="token punctuation">{</span>#ids<span class="token punctuation">.</span><span class="token function">next</span><span
                            class="token punctuation">(</span><span class="token string">'someId'</span><span class="token punctuation">)</span><span
                            class="token punctuation">}</span>
$<span class="token punctuation">{</span>#ids<span class="token punctuation">.</span><span class="token function">prev</span><span
                            class="token punctuation">(</span><span class="token string">'someId'</span><span class="token punctuation">)</span><span
                            class="token punctuation">}</span></code></pre>
            </section>
        </section>
        <section id="appendix-c-markup-selector-syntax" class="level1"><h1>20 Appendix C: Markup Selector Syntax</h1>
            <p>Thymeleaf’s Markup Selectors are directly borrowed from Thymeleaf’s parsing library: <a href="http://attoparser.org">AttoParser</a>.</p>
            <p>The syntax for this selectors has large similarities with that of selectors in XPath, CSS and jQuery, which makes them easy to use for most
                users. You can have a look at the complete syntax reference at the <a
                        href="http://www.attoparser.org/apidocs/attoparser/2.0.4.RELEASE/org/attoparser/select/package-summary.html">AttoParser
                    documentation</a>.</p>
            <p>For example, the following selector will select every <code>&lt;div&gt;</code> with the class <code>content</code>, in every position inside the
                markup (note this is not as concise as it could be, read on to know why):</p>
            <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span
                    class="token attr-name"><span class="token namespace">th:</span>insert</span><span class="token attr-value"><span class="token punctuation">=</span><span
                    class="token punctuation">"</span>~{mytemplate :: //div[@class<span class="token punctuation">=</span><span
                    class="token punctuation">'</span>content<span class="token punctuation">'</span>]}<span class="token punctuation">"</span></span><span
                    class="token punctuation">&gt;</span></span>...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span
                    class="token punctuation">&gt;</span></span></code></pre>
            <p>The basic syntax includes:</p>
            <ul>
                <li><p><code>/x</code> means direct children of the current node with name x.</p></li>
                <li><p><code>//x</code> means children of the current node with name x, at any depth.</p></li>
                <li><p><code>x[@z="v"]</code> means elements with name x and an attribute called z with value “v”.</p></li>
                <li><p><code>x[@z1="v1" and @z2="v2"]</code> means elements with name x and attributes z1 and z2 with values “v1” and “v2”, respectively.</p>
                </li>
                <li><p><code>x[i]</code> means element with name x positioned in number i among its siblings.</p></li>
                <li><p><code>x[@z="v"][i]</code> means elements with name x, attribute z with value “v” and positioned in number i among its siblings that also
                    match this condition.</p></li>
            </ul>
            <p>But more concise syntax can also be used:</p>
            <ul>
                <li><p><code>x</code> is exactly equivalent to <code>//x</code> (search an element with name or reference <code>x</code> at any depth level, a
                    <em>reference</em> being a <code>th:ref</code> or a <code>th:fragment</code> attribute).</p></li>
                <li><p>Selectors are also allowed without element name/reference, as long as they include a specification of arguments. So <code>[@class='oneclass']</code>
                    is a valid selector that looks for any elements (tags) with a class attribute with value <code>"oneclass"</code>.</p></li>
            </ul>
            <p>Advanced attribute selection features:</p>
            <ul>
                <li><p>Besides <code>=</code> (equal), other comparison operators are also valid: <code>!=</code> (not equal), <code>^=</code> (starts with) and
                    <code>$=</code> (ends with). For example: <code>x[@class^='section']</code> means elements with name <code>x</code> and a value for
                    attribute <code>class</code> that starts with <code>section</code>.</p></li>
                <li><p>Attributes can be specified both starting with <code>@</code> (XPath-style) and without (jQuery-style). So <code>x[z='v']</code> is
                    equivalent to <code>x[@z='v']</code>.</p></li>
                <li><p>Multiple-attribute modifiers can be joined both with <code>and</code> (XPath-style) and also by chaining multiple modifiers
                    (jQuery-style). So <code>x[@z1='v1' and @z2='v2']</code> is actually equivalent to <code>x[@z1='v1'][@z2='v2']</code> (and also to <code>x[z1='v1'][z2='v2']</code>).
                </p></li>
            </ul>
            <p>Direct <em>jQuery-like</em> selectors:</p>
            <ul>
                <li><p><code>x.oneclass</code> is equivalent to <code>x[class='oneclass']</code>.</p></li>
                <li><p><code>.oneclass</code> is equivalent to <code>[class='oneclass']</code>.</p></li>
                <li><p><code>x#oneid</code> is equivalent to <code>x[id='oneid']</code>.</p></li>
                <li><p><code>#oneid</code> is equivalent to <code>[id='oneid']</code>.</p></li>
                <li><p><code>x%oneref</code> means <code>&lt;x&gt;</code> tags that have a <code>th:ref="oneref"</code> or <code>th:fragment="oneref"</code>
                    attribute.</p></li>
                <li><p><code>%oneref</code> means any tags that have a <code>th:ref="oneref"</code> or <code>th:fragment="oneref"</code> attribute. Note this is
                    actually equivalent to simply <code>oneref</code> because references can be used instead of element names.</p></li>
                <li><p>Direct selectors and attribute selectors can be mixed: <code>a.external[@href^='https']</code>.</p></li>
            </ul>
            <p>So the above Markup Selector expression:</p>
            <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span
                    class="token attr-name"><span class="token namespace">th:</span>insert</span><span class="token attr-value"><span class="token punctuation">=</span><span
                    class="token punctuation">"</span>~{mytemplate :: //div[@class<span class="token punctuation">=</span><span
                    class="token punctuation">'</span>content<span class="token punctuation">'</span>]}<span class="token punctuation">"</span></span><span
                    class="token punctuation">&gt;</span></span>...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span
                    class="token punctuation">&gt;</span></span></code></pre>
            <p>Could be written as:</p>
            <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span
                    class="token attr-name"><span class="token namespace">th:</span>insert</span><span class="token attr-value"><span class="token punctuation">=</span><span
                    class="token punctuation">"</span>~{mytemplate :: div.content}<span class="token punctuation">"</span></span><span
                    class="token punctuation">&gt;</span></span>...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span
                    class="token punctuation">&gt;</span></span></code></pre>
            <p>Examining a different example, this:</p>
            <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span
                    class="token attr-name"><span class="token namespace">th:</span>replace</span><span class="token attr-value"><span
                    class="token punctuation">=</span><span class="token punctuation">"</span>~{mytemplate :: myfrag}<span
                    class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>...<span class="token tag"><span
                    class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></code></pre>
            <p>Will look for a <code>th:fragment="myfrag"</code> fragment signature (or <code>th:ref</code> references). But would also look for tags with name
                <code>myfrag</code> if they existed (which they don’t, in HTML). Note the difference with:</p>
            <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span
                    class="token attr-name"><span class="token namespace">th:</span>replace</span><span class="token attr-value"><span
                    class="token punctuation">=</span><span class="token punctuation">"</span>~{mytemplate :: .myfrag}<span
                    class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>...<span class="token tag"><span
                    class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></code></pre>
            <p>…which will actually look for any elements with <code>class="myfrag"</code>, without caring about <code>th:fragment</code> signatures (or <code>th:ref</code>
                references).</p>
            <section id="multivalued-class-matching" class="level3"><h3>Multivalued class matching</h3>
                <p>Markup Selectors understand the class attribute to be <strong>multivalued</strong>, and therefore allow the application of selectors on this
                    attribute even if the element has several class values.</p>
                <p>For example, <code>div.two</code> will match <code>&lt;div class="one two three" /&gt;</code></p></section>
        </section>
    </div>

</div>
