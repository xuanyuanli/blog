<div id="content" class="fluid-block">
    <section id="preface" class="level1"><h1>Preface</h1>
        <p>This tutorial explains how Thymeleaf can be integrated with the Spring Framework, especially (but not only) Spring MVC.</p>
        <p>Note that Thymeleaf has integrations for both versions 5.x and 6.x of the Spring Framework, provided by two separate libraries called <code>thymeleaf-spring5</code>
            and <code>thymeleaf-spring6</code>. These libraries are packaged in separate <code>.jar</code> files (<code>thymeleaf-spring5-{version}.jar</code>
            and <code>thymeleaf-spring6-{version}.jar</code>) and need to be added to your classpath in order to use Thymeleaf’s Spring integrations in your
            application.</p>
        <p>The code samples and example application in this tutorial make use of <strong>Spring 6.x</strong> and its corresponding Thymeleaf integrations, but
            the contents of this text are valid also for Spring 5.x. If your application uses Spring 5.x, all you have to do is replace the <code>org.thymeleaf.spring6</code>
            package with <code>org.thymeleaf.spring5</code> in the code samples.</p></section>
    <section id="integrating-thymeleaf-with-spring" class="level1"><h1>1 Integrating Thymeleaf with Spring</h1>
        <p>Thymeleaf offers a set of Spring integrations that allow you to use it as a fully-featured substitute for JSP in Spring MVC applications.</p>
        <p>These integrations will allow you to:</p>
        <ul>
            <li>Make the mapped methods in your Spring MVC <code>@Controller</code> objects forward to templates managed by Thymeleaf, exactly like you do with
                JSPs.
            </li>
            <li>Use <strong>Spring Expression Language</strong> (Spring EL) instead of OGNL in your templates.</li>
            <li>Create forms in your templates that are completely integrated with your form-backing beans and result bindings, including the use of property
                editors, conversion services and validation error handling.
            </li>
            <li>Display internationalization messages from message files managed by Spring (through the usual <code>MessageSource</code> objects).</li>
            <li>Resolve your templates using Spring’s own resource resolution mechanisms.</li>
        </ul>
        <p>Note that in order to fully understand this tutorial, you should have first gone through the <em>“Using Thymeleaf”</em> tutorial, which explains the
            Standard Dialect in depth.</p></section>
    <section id="the-springstandard-dialect" class="level1"><h1>2 The SpringStandard Dialect</h1>
        <p>In order to achieve an easier and better integration, Thymeleaf provides a dialect which specifically implements all the needed features for it to
            work correctly with Spring.</p>
        <p>This specific dialect is based on the Thymeleaf Standard Dialect and is implemented in a class called <code>org.thymeleaf.spring6.dialect.SpringStandardDialect</code>,
            which in fact extends from <code>org.thymeleaf.standard.StandardDialect</code>.</p>
        <p>Besides all the features already present in the Standard Dialect –and therefore inherited–, the SpringStandard Dialect introduces the following
            specific features:</p>
        <ul>
            <li>Use Spring Expression Language (Spring EL or SpEL) as a variable expression language, instead of OGNL. Consequently, all <code>${...}</code> and
                <code>*{...}</code> expressions will be evaluated by Spring’s Expression Language engine. Note also that support for the Spring EL compiler is
                available.
            </li>
            <li>Access any beans in your application context using SpringEL’s syntax: <code>${@myBean.doSomething()}</code></li>
            <li>New attributes for form processing: <code>th:field</code>, <code>th:errors</code> and <code>th:errorclass</code>, besides a new implementation
                of <code>th:object</code> that allows it to be used for form command selection.
            </li>
            <li>An expression object and method, <code>#themes.code(...)</code>, which is equivalent to the <code>spring:theme</code> JSP custom tag.</li>
            <li>An expression object and method, <code>#mvc.uri(...)</code>, which is equivalent to the <code>spring:mvcUrl(...)</code> JSP custom function.
            </li>
        </ul>
        <p>Note that most of the times <em>you shouldn’t be using this dialect directly in a normal <code>TemplateEngine</code> object</em> as a part of its
            configuration. Unless you have very specific Spring integration needs, you should instead be creating an instance of a new template engine class
            that performs all the required configuration steps automatically: <code>org.thymeleaf.spring6.SpringTemplateEngine</code>.</p>
        <p>An example bean configuration:</p>
        <pre class=" language-java"><code class=" language-java"><span class="token annotation punctuation">@Bean</span>
<span class="token keyword">public</span> SpringResourceTemplateResolver <span class="token function">templateResolver</span><span
                    class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">// SpringResourceTemplateResolver automatically integrates with Spring's own</span>
    <span class="token comment" spellcheck="true">// resource resolution infrastructure, which is highly recommended.</span>
    SpringResourceTemplateResolver templateResolver <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SpringResourceTemplateResolver</span><span
                    class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    templateResolver<span class="token punctuation">.</span><span class="token function">setApplicationContext</span><span
                    class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>applicationContext<span
                    class="token punctuation">)</span><span class="token punctuation">;</span>
    templateResolver<span class="token punctuation">.</span><span class="token function">setPrefix</span><span class="token punctuation">(</span><span
                    class="token string">"/WEB-INF/templates/"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    templateResolver<span class="token punctuation">.</span><span class="token function">setSuffix</span><span class="token punctuation">(</span><span
                    class="token string">".html"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment" spellcheck="true">// HTML is the default value, added here for the sake of clarity.</span>
    templateResolver<span class="token punctuation">.</span><span class="token function">setTemplateMode</span><span class="token punctuation">(</span>TemplateMode<span
                    class="token punctuation">.</span>HTML<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment" spellcheck="true">// Template cache is true by default. Set to false if you want</span>
    <span class="token comment" spellcheck="true">// templates to be automatically updated when modified.</span>
    templateResolver<span class="token punctuation">.</span><span class="token function">setCacheable</span><span class="token punctuation">(</span><span
                    class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> templateResolver<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token annotation punctuation">@Bean</span>
<span class="token keyword">public</span> SpringTemplateEngine <span class="token function">templateEngine</span><span class="token punctuation">(</span><span
                    class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">// SpringTemplateEngine automatically applies SpringStandardDialect and</span>
    <span class="token comment" spellcheck="true">// enables Spring's own MessageSource message resolution mechanisms.</span>
    SpringTemplateEngine templateEngine <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SpringTemplateEngine</span><span
                    class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    templateEngine<span class="token punctuation">.</span><span class="token function">setTemplateResolver</span><span class="token punctuation">(</span><span
                    class="token function">templateResolver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span
                    class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment" spellcheck="true">// Enabling the SpringEL compiler with Spring 4.2.4 or newer can</span>
    <span class="token comment" spellcheck="true">// speed up execution in most scenarios, but might be incompatible</span>
    <span class="token comment" spellcheck="true">// with specific cases when expressions in one template are reused</span>
    <span class="token comment" spellcheck="true">// across different data types, so this flag is "false" by default</span>
    <span class="token comment" spellcheck="true">// for safer backwards compatibility.</span>
    templateEngine<span class="token punctuation">.</span><span class="token function">setEnableSpringELCompiler</span><span
                    class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span
                    class="token punctuation">;</span>
    <span class="token keyword">return</span> templateEngine<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
        <p>Or, using Spring’s XML-based configuration:</p>
        <pre class=" language-xml"><code class=" language-xml"><span class="token comment" spellcheck="true">&lt;!-- SpringResourceTemplateResolver automatically integrates with Spring's own --&gt;</span>
<span class="token comment" spellcheck="true">&lt;!-- resource resolution infrastructure, which is highly recommended.          --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span
        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>templateResolver<span
        class="token punctuation">"</span></span>
       <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>org.thymeleaf.spring6.templateresolver.SpringResourceTemplateResolver<span
            class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span
          class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>prefix<span
          class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span
          class="token punctuation">=</span><span class="token punctuation">"</span>/WEB-INF/templates/<span class="token punctuation">"</span></span> <span
          class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span
          class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>suffix<span
          class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span
          class="token punctuation">=</span><span class="token punctuation">"</span>.html<span class="token punctuation">"</span></span> <span
          class="token punctuation">/&gt;</span></span>
  <span class="token comment" spellcheck="true">&lt;!-- HTML is the default value, added here for the sake of clarity.          --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span
          class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>templateMode<span
          class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span
          class="token punctuation">=</span><span class="token punctuation">"</span>HTML<span class="token punctuation">"</span></span> <span
          class="token punctuation">/&gt;</span></span>
  <span class="token comment" spellcheck="true">&lt;!-- Template cache is true by default. Set to false if you want             --&gt;</span>
  <span class="token comment" spellcheck="true">&lt;!-- templates to be automatically updated when modified.                    --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span
          class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>cacheable<span
          class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span
          class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span> <span
          class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>

<span class="token comment" spellcheck="true">&lt;!-- SpringTemplateEngine automatically applies SpringStandardDialect and      --&gt;</span>
<span class="token comment" spellcheck="true">&lt;!-- enables Spring's own MessageSource message resolution mechanisms.         --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span
        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>templateEngine<span
        class="token punctuation">"</span></span>
      <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>org.thymeleaf.spring6.SpringTemplateEngine<span
            class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span
          class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>templateResolver<span
          class="token punctuation">"</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span
          class="token punctuation">=</span><span class="token punctuation">"</span>templateResolver<span class="token punctuation">"</span></span> <span
          class="token punctuation">/&gt;</span></span>
  <span class="token comment" spellcheck="true">&lt;!-- Enabling the SpringEL compiler can speed up execution in most           --&gt;</span>
  <span class="token comment" spellcheck="true">&lt;!-- scenarios, but might be incompatible with specific cases when           --&gt;</span>
  <span class="token comment" spellcheck="true">&lt;!-- expressions in one template are reused across different data types, so  --&gt;</span>
  <span class="token comment" spellcheck="true">&lt;!-- this flag is "false" by default for safer backwards compatibility.      --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span
          class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>enableSpringELCompiler<span
          class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span
          class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span> <span
          class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span></code></pre>
    </section>
    <section id="views-and-view-resolvers" class="level1"><h1>3 Views and View Resolvers</h1>
        <section id="views-and-view-resolvers-in-spring-mvc" class="level2"><h2>3.1 Views and View Resolvers in Spring MVC</h2>
            <p>There are two interfaces in Spring MVC that conform the core of its templating system:</p>
            <ul>
                <li><code>org.springframework.web.servlet.View</code></li>
                <li><code>org.springframework.web.servlet.ViewResolver</code></li>
            </ul>
            <p>Views model pages in our applications and allow us to modify and predefine their behaviour by defining them as beans. Views are in charge of
                rendering the actual HTML interface, usually by the execution of some template engine like Thymeleaf.</p>
            <p>ViewResolvers are the objects in charge of obtaining View objects for a specific operation and locale. Typically, controllers ask ViewResolvers
                to forward to a view with a specific name (a String returned by the controller method), and then all the view resolvers in the application
                execute in ordered chain until one of them is able to resolve that view, in which case a View object is returned and control is passed to it for
                the renderization of HTML.</p>
            <blockquote><p>Note that not all pages in our applications have to be defined as Views, but only those which behaviour we wish to be non-standard or
                configured in a specific way (for example, by wiring some special beans to it). If a ViewResolver is asked a view that has no corresponding bean
                –which is the common case–, a new View object is created ad hoc and returned.</p></blockquote>
            <p>A typical configuration for a JSP+JSTL ViewResolver in a Spring MVC application from the past looked like this:</p>
            <pre class=" language-xml"><code class=" language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span
                    class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span
                    class="token punctuation">"</span>org.springframework.web.servlet.view.InternalResourceViewResolver<span class="token punctuation">"</span></span><span
                    class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span
          class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>viewClass<span
          class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span
          class="token punctuation">=</span><span class="token punctuation">"</span>org.springframework.web.servlet.view.JstlView<span
          class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span
          class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>prefix<span
          class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span
          class="token punctuation">=</span><span class="token punctuation">"</span>/WEB-INF/jsps/<span class="token punctuation">"</span></span> <span
          class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span
          class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>suffix<span
          class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span
          class="token punctuation">=</span><span class="token punctuation">"</span>.jsp<span class="token punctuation">"</span></span> <span
          class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span
          class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>order<span class="token punctuation">"</span></span> <span
          class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span
          class="token punctuation">"</span>2<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span
          class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>viewNames<span
          class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span
          class="token punctuation">=</span><span class="token punctuation">"</span>*jsp<span class="token punctuation">"</span></span> <span
          class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span></code></pre>
            <p>A quick look at its properties is enough to know about how it was configured:</p>
            <ul>
                <li><code>viewClass</code> establishes the class of the View instances. This is needed for a JSP resolver, but it will not be needed at all when
                    we’re working with Thymeleaf.
                </li>
                <li><code>prefix</code> and <code>suffix</code> work in a similar way to the attributes of the same names in Thymeleaf’s TemplateResolver
                    objects.
                </li>
                <li><code>order</code> establishes the order in which the ViewResolver will be queried in the chain.</li>
                <li><code>viewNames</code> allows the definition (with wildcards) of the view names that will be resolved by this ViewResolver.</li>
            </ul>
        </section>
        <section id="views-and-view-resolvers-in-thymeleaf" class="level2"><h2>3.2 Views and View Resolvers in Thymeleaf</h2>
            <p>Thymeleaf offers implementations for the two interfaces mentioned above:</p>
            <ul>
                <li><code>org.thymeleaf.spring6.view.ThymeleafView</code></li>
                <li><code>org.thymeleaf.spring6.view.ThymeleafViewResolver</code></li>
            </ul>
            <p>These two classes will be in charge of processing Thymeleaf templates as a result of the execution of controllers.</p>
            <p>Configuration of the Thymeleaf View Resolver is very similar to that of JSP:</p>
            <pre class=" language-java"><code class=" language-java"><span class="token annotation punctuation">@Bean</span>
<span class="token keyword">public</span> ThymeleafViewResolver <span class="token function">viewResolver</span><span class="token punctuation">(</span><span
                        class="token punctuation">)</span><span class="token punctuation">{</span>
    ThymeleafViewResolver viewResolver <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ThymeleafViewResolver</span><span
                        class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    viewResolver<span class="token punctuation">.</span><span class="token function">setTemplateEngine</span><span class="token punctuation">(</span><span
                        class="token function">templateEngine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span
                        class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment" spellcheck="true">// NOTE 'order' and 'viewNames' are optional</span>
    viewResolver<span class="token punctuation">.</span><span class="token function">setOrder</span><span class="token punctuation">(</span><span
                        class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    viewResolver<span class="token punctuation">.</span><span class="token function">setViewNames</span><span class="token punctuation">(</span><span
                        class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span
                        class="token punctuation">]</span> <span class="token punctuation">{</span><span class="token string">".html"</span><span
                        class="token punctuation">,</span> <span class="token string">".xhtml"</span><span class="token punctuation">}</span><span
                        class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> viewResolver<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
            <p>…or in XML:</p>
            <pre class=" language-xml"><code class=" language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span
                    class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span
                    class="token punctuation">"</span>org.thymeleaf.spring6.view.ThymeleafViewResolver<span class="token punctuation">"</span></span><span
                    class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span
          class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>templateEngine<span
          class="token punctuation">"</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span
          class="token punctuation">=</span><span class="token punctuation">"</span>templateEngine<span class="token punctuation">"</span></span> <span
          class="token punctuation">/&gt;</span></span>
  <span class="token comment" spellcheck="true">&lt;!-- NOTE 'order' and 'viewNames' are optional --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span
          class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>order<span class="token punctuation">"</span></span> <span
          class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span
          class="token punctuation">"</span>1<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span
          class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>viewNames<span
          class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span
          class="token punctuation">=</span><span class="token punctuation">"</span>*.html,*.xhtml<span class="token punctuation">"</span></span> <span
          class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span></code></pre>
            <p>The <code>templateEngine</code> parameter is, of course, the <code>SpringTemplateEngine</code> object we defined in the previous chapter. The
                other two (<code>order</code> and <code>viewNames</code>) are both optional, and have the same meaning as in the JSP ViewResolver we saw before.
            </p>
            <p>Note that we do not need <code>prefix</code> or <code>suffix</code> parameters, because these are already specified at the Template Resolver
                (which in turn is passed to the Template Engine).</p>
            <p>And what if we wanted to define a <code>View</code> bean and add some static variables to it? Easy, just define a <em>prototype</em> bean for it:
            </p>
            <pre class=" language-java"><code class=" language-java"><span class="token annotation punctuation">@Bean</span>
<span class="token annotation punctuation">@Scope</span><span class="token punctuation">(</span><span class="token string">"prototype"</span><span
                        class="token punctuation">)</span>
<span class="token keyword">public</span> ThymeleafView <span class="token function">mainView</span><span class="token punctuation">(</span><span
                        class="token punctuation">)</span> <span class="token punctuation">{</span>
    ThymeleafView view <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ThymeleafView</span><span
                        class="token punctuation">(</span><span class="token string">"main"</span><span class="token punctuation">)</span><span
                        class="token punctuation">;</span> <span class="token comment" spellcheck="true">// templateName = 'main'</span>
    view<span class="token punctuation">.</span><span class="token function">setStaticVariables</span><span class="token punctuation">(</span>
        Collections<span class="token punctuation">.</span><span class="token function">singletonMap</span><span class="token punctuation">(</span><span
                        class="token string">"footer"</span><span class="token punctuation">,</span> <span
                        class="token string">"The ACME Fruit Company"</span><span class="token punctuation">)</span><span
                        class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> view<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
            <p>By doing this, you will be able to execute specifically this view bean selecting it by bean name (<code>mainView</code>, in this case).</p>
        </section>
    </section>
    <section id="spring-thyme-seed-starter-manager" class="level1"><h1>4 Spring Thyme Seed Starter Manager</h1>
        <p>The source code for the examples shown in this and future chapters of this guide can be found in the <em>Spring Thyme Seed Starter Manager
            (STSM)</em> example app:</p>
        <ul>
            <li><a href="https://github.com/thymeleaf/thymeleaf/tree/3.1-master/examples/spring5/thymeleaf-examples-spring5-stsm">Spring 5 STSM</a>.</li>
            <li><a href="https://github.com/thymeleaf/thymeleaf/tree/3.1-master/examples/spring6/thymeleaf-examples-spring6-stsm">Spring 6 STSM</a>.</li>
        </ul>
        <section id="the-concept" class="level2"><h2>4.1 The Concept</h2>
            <p>At Thymeleaf we’re huge fans of thyme, and every spring we prepare our seed starting kits with good soil and our favourite seeds, place them
                under the Spanish sun and patiently wait for our new plants to grow.</p>
            <p>But this year we got fed up with sticking labels to the seed starter containers for knowing which seed was in each cell of the container, so we
                decided to prepare an application using Spring MVC and Thymeleaf to help us catalogue our starters: <em>The Spring Thyme SeedStarter
                    Manager</em>.</p>
            <figure><img src="images/thymeleafspring/stsm-view.png" alt="STSM front page">
                <figcaption>STSM front page</figcaption>
            </figure>
            <p>In a similar way to the Good Thymes Virtual Grocery application we developed in the <em>Using Thymeleaf</em> tutorial, the STSM will allow us to
                exemplify the most important aspects of the integration of Thymeleaf as a template engine for Spring MVC.</p></section>
        <section id="business-layer" class="level2"><h2>4.2 Business Layer</h2>
            <p>We will need a very simple business layer for our application. First of all, let’s have a look at our model entities:</p>
            <figure><img src="images/thymeleafspring/stsm-model.png" alt="STSM model">
                <figcaption>STSM model</figcaption>
            </figure>
            <p>A couple of very simple service classes will provide the required business methods. Like:</p>
            <pre class=" language-java"><code class=" language-java"><span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SeedStarterService</span> <span
                        class="token punctuation">{</span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> SeedStarterRepository seedstarterRepository<span class="token punctuation">;</span>

    <span class="token keyword">public</span> List<span class="token operator">&lt;</span>SeedStarter<span class="token operator">&gt;</span> <span
                        class="token function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span
                        class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>seedstarterRepository<span
                        class="token punctuation">.</span><span class="token function">findAll</span><span class="token punctuation">(</span><span
                        class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">add</span><span
                        class="token punctuation">(</span><span class="token keyword">final</span> SeedStarter seedStarter<span
                        class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>seedstarterRepository<span class="token punctuation">.</span><span
                        class="token function">add</span><span class="token punctuation">(</span>seedStarter<span class="token punctuation">)</span><span
                        class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span></code></pre>
            <p>And:</p>
            <pre class=" language-java"><code class=" language-java"><span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">VarietyService</span> <span
                        class="token punctuation">{</span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> VarietyRepository varietyRepository<span class="token punctuation">;</span>

    <span class="token keyword">public</span> List<span class="token operator">&lt;</span>Variety<span class="token operator">&gt;</span> <span
                        class="token function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span
                        class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>varietyRepository<span
                        class="token punctuation">.</span><span class="token function">findAll</span><span class="token punctuation">(</span><span
                        class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> Variety <span class="token function">findById</span><span class="token punctuation">(</span><span
                        class="token keyword">final</span> Integer id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>varietyRepository<span
                        class="token punctuation">.</span><span class="token function">findById</span><span class="token punctuation">(</span>id<span
                        class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span></code></pre>
        </section>
        <section id="spring-mvc-configuration" class="level2"><h2>4.3 Spring MVC configuration</h2>
            <p>Next we need to set up the Spring MVC configuration for the application, which will include not only the standard Spring MVC artifacts like
                resource handling or annotation scanning, but also the creation of the Template Engine and View Resolver instances.</p>
            <pre class=" language-java"><code class=" language-java"><span class="token annotation punctuation">@Configuration</span>
<span class="token annotation punctuation">@EnableWebMvc</span>
<span class="token annotation punctuation">@ComponentScan</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpringWebConfig</span>
        <span class="token keyword">extends</span> <span class="token class-name">WebMvcConfigurerAdapter</span> <span
                        class="token keyword">implements</span> <span class="token class-name">ApplicationContextAware</span> <span
                        class="token punctuation">{</span>

    <span class="token keyword">private</span> ApplicationContext applicationContext<span class="token punctuation">;</span>


    <span class="token keyword">public</span> <span class="token function">SpringWebConfig</span><span class="token punctuation">(</span><span
                        class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setApplicationContext</span><span
                        class="token punctuation">(</span><span class="token keyword">final</span> ApplicationContext applicationContext<span
                        class="token punctuation">)</span>
            <span class="token keyword">throws</span> BeansException <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>applicationContext <span class="token operator">=</span> applicationContext<span
                        class="token punctuation">;</span>
    <span class="token punctuation">}</span>



    <span class="token comment" spellcheck="true">/* ******************************************************************* */</span>
    <span class="token comment" spellcheck="true">/*  GENERAL CONFIGURATION ARTIFACTS                                    */</span>
    <span class="token comment" spellcheck="true">/*  Static Resources, i18n Messages, Formatters (Conversion Service)   */</span>
    <span class="token comment" spellcheck="true">/* ******************************************************************* */</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addResourceHandlers</span><span
                        class="token punctuation">(</span><span class="token keyword">final</span> ResourceHandlerRegistry registry<span
                        class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">addResourceHandlers</span><span
                        class="token punctuation">(</span>registry<span class="token punctuation">)</span><span class="token punctuation">;</span>
        registry<span class="token punctuation">.</span><span class="token function">addResourceHandler</span><span class="token punctuation">(</span><span
                        class="token string">"/images/**"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span
                        class="token function">addResourceLocations</span><span class="token punctuation">(</span><span
                        class="token string">"/images/"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        registry<span class="token punctuation">.</span><span class="token function">addResourceHandler</span><span class="token punctuation">(</span><span
                        class="token string">"/css/**"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span
                        class="token function">addResourceLocations</span><span class="token punctuation">(</span><span class="token string">"/css/"</span><span
                        class="token punctuation">)</span><span class="token punctuation">;</span>
        registry<span class="token punctuation">.</span><span class="token function">addResourceHandler</span><span class="token punctuation">(</span><span
                        class="token string">"/js/**"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span
                        class="token function">addResourceLocations</span><span class="token punctuation">(</span><span class="token string">"/js/"</span><span
                        class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> ResourceBundleMessageSource <span class="token function">messageSource</span><span
                        class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        ResourceBundleMessageSource messageSource <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ResourceBundleMessageSource</span><span
                        class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        messageSource<span class="token punctuation">.</span><span class="token function">setBasename</span><span class="token punctuation">(</span><span
                        class="token string">"Messages"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> messageSource<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addFormatters</span><span
                        class="token punctuation">(</span><span class="token keyword">final</span> FormatterRegistry registry<span
                        class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">addFormatters</span><span
                        class="token punctuation">(</span>registry<span class="token punctuation">)</span><span class="token punctuation">;</span>
        registry<span class="token punctuation">.</span><span class="token function">addFormatter</span><span class="token punctuation">(</span><span
                        class="token function">varietyFormatter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span
                        class="token punctuation">)</span><span class="token punctuation">;</span>
        registry<span class="token punctuation">.</span><span class="token function">addFormatter</span><span class="token punctuation">(</span><span
                        class="token function">dateFormatter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span
                        class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> VarietyFormatter <span class="token function">varietyFormatter</span><span class="token punctuation">(</span><span
                        class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">VarietyFormatter</span><span
                        class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> DateFormatter <span class="token function">dateFormatter</span><span class="token punctuation">(</span><span
                        class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">DateFormatter</span><span
                        class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>



    <span class="token operator">/</span><span class="token operator">*</span> <span class="token operator">*</span><span class="token operator">*</span><span
                        class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span
                        class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span
                        class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span
                        class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span
                        class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span
                        class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span
                        class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span
                        class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span
                        class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span
                        class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span
                        class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span
                        class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span
                        class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span
                        class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span
                        class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span
                        class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span
                        class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span
                        class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span
                        class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span
                        class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span
                        class="token operator">*</span><span class="token operator">*</span> <span class="token operator">*</span><span
                        class="token operator">/</span>
    <span class="token comment" spellcheck="true">/*  THYMELEAF-SPECIFIC ARTIFACTS                                    */</span>
    <span class="token comment" spellcheck="true">/*  TemplateResolver &lt;- TemplateEngine &lt;- ViewResolver              */</span>
    <span class="token comment" spellcheck="true">/* **************************************************************** */</span>

    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> SpringResourceTemplateResolver <span class="token function">templateResolver</span><span
                        class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment" spellcheck="true">// SpringResourceTemplateResolver automatically integrates with Spring's own</span>
        <span class="token comment" spellcheck="true">// resource resolution infrastructure, which is highly recommended.</span>
        SpringResourceTemplateResolver templateResolver <span class="token operator">=</span> <span class="token keyword">new</span> <span
                        class="token class-name">SpringResourceTemplateResolver</span><span class="token punctuation">(</span><span
                        class="token punctuation">)</span><span class="token punctuation">;</span>
        templateResolver<span class="token punctuation">.</span><span class="token function">setApplicationContext</span><span
                        class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>applicationContext<span
                        class="token punctuation">)</span><span class="token punctuation">;</span>
        templateResolver<span class="token punctuation">.</span><span class="token function">setPrefix</span><span class="token punctuation">(</span><span
                        class="token string">"/WEB-INF/templates/"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        templateResolver<span class="token punctuation">.</span><span class="token function">setSuffix</span><span class="token punctuation">(</span><span
                        class="token string">".html"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">// HTML is the default value, added here for the sake of clarity.</span>
        templateResolver<span class="token punctuation">.</span><span class="token function">setTemplateMode</span><span class="token punctuation">(</span>TemplateMode<span
                        class="token punctuation">.</span>HTML<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">// Template cache is true by default. Set to false if you want</span>
        <span class="token comment" spellcheck="true">// templates to be automatically updated when modified.</span>
        templateResolver<span class="token punctuation">.</span><span class="token function">setCacheable</span><span class="token punctuation">(</span><span
                        class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> templateResolver<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> SpringTemplateEngine <span class="token function">templateEngine</span><span
                        class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment" spellcheck="true">// SpringTemplateEngine automatically applies SpringStandardDialect and</span>
        <span class="token comment" spellcheck="true">// enables Spring's own MessageSource message resolution mechanisms.</span>
        SpringTemplateEngine templateEngine <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SpringTemplateEngine</span><span
                        class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        templateEngine<span class="token punctuation">.</span><span class="token function">setTemplateResolver</span><span
                        class="token punctuation">(</span><span class="token function">templateResolver</span><span class="token punctuation">(</span><span
                        class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">// Enabling the SpringEL compiler with Spring 4.2.4 or newer can</span>
        <span class="token comment" spellcheck="true">// speed up execution in most scenarios, but might be incompatible</span>
        <span class="token comment" spellcheck="true">// with specific cases when expressions in one template are reused</span>
        <span class="token comment" spellcheck="true">// across different data types, so this flag is "false" by default</span>
        <span class="token comment" spellcheck="true">// for safer backwards compatibility.</span>
        templateEngine<span class="token punctuation">.</span><span class="token function">setEnableSpringELCompiler</span><span
                        class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span
                        class="token punctuation">;</span>
        <span class="token keyword">return</span> templateEngine<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> ThymeleafViewResolver <span class="token function">viewResolver</span><span
                        class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        ThymeleafViewResolver viewResolver <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ThymeleafViewResolver</span><span
                        class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        viewResolver<span class="token punctuation">.</span><span class="token function">setTemplateEngine</span><span class="token punctuation">(</span><span
                        class="token function">templateEngine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span
                        class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> viewResolver<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span></code></pre>
        </section>
        <section id="the-controller" class="level2"><h2>4.4 The Controller</h2>
            <p>Of course, we will also need a controller for our application. As the STSM will only contain one web page with a list of seed starters and a form
                for adding new ones, we will write only one controller class for all the server interactions:</p>
            <pre class=" language-java"><code class=" language-java"><span class="token annotation punctuation">@Controller</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SeedStarterMngController</span> <span
                        class="token punctuation">{</span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> VarietyService varietyService<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> SeedStarterService seedStarterService<span class="token punctuation">;</span>

    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

<span class="token punctuation">}</span></code></pre>
            <p>Now let’s see what we can add to this controller class.</p>
            <section id="model-attributes" class="level3"><h3>Model Attributes</h3>
                <p>First we will add some model attributes that we will need in the page:</p>
                <pre class=" language-java"><code class=" language-java"><span class="token annotation punctuation">@ModelAttribute</span><span
                        class="token punctuation">(</span><span class="token string">"allTypes"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> List<span class="token operator">&lt;</span>Type<span class="token operator">&gt;</span> <span class="token function">populateTypes</span><span
                            class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> Arrays<span class="token punctuation">.</span><span class="token function">asList</span><span
                            class="token punctuation">(</span>Type<span class="token punctuation">.</span>ALL<span class="token punctuation">)</span><span
                            class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token annotation punctuation">@ModelAttribute</span><span class="token punctuation">(</span><span class="token string">"allFeatures"</span><span
                            class="token punctuation">)</span>
<span class="token keyword">public</span> List<span class="token operator">&lt;</span>Feature<span class="token operator">&gt;</span> <span
                            class="token function">populateFeatures</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span
                            class="token punctuation">{</span>
    <span class="token keyword">return</span> Arrays<span class="token punctuation">.</span><span class="token function">asList</span><span
                            class="token punctuation">(</span>Feature<span class="token punctuation">.</span>ALL<span class="token punctuation">)</span><span
                            class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token annotation punctuation">@ModelAttribute</span><span class="token punctuation">(</span><span class="token string">"allVarieties"</span><span
                            class="token punctuation">)</span>
<span class="token keyword">public</span> List<span class="token operator">&lt;</span>Variety<span class="token operator">&gt;</span> <span
                            class="token function">populateVarieties</span><span class="token punctuation">(</span><span
                            class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>varietyService<span
                            class="token punctuation">.</span><span class="token function">findAll</span><span class="token punctuation">(</span><span
                            class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token annotation punctuation">@ModelAttribute</span><span class="token punctuation">(</span><span
                            class="token string">"allSeedStarters"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> List<span class="token operator">&lt;</span>SeedStarter<span class="token operator">&gt;</span> <span
                            class="token function">populateSeedStarters</span><span class="token punctuation">(</span><span
                            class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>seedStarterService<span
                            class="token punctuation">.</span><span class="token function">findAll</span><span class="token punctuation">(</span><span
                            class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
            </section>
            <section id="mapped-methods" class="level3"><h3>Mapped methods</h3>
                <p>And now the most important part of a controller, the mapped methods: one for showing the form page, and another one for processing the
                    addition of new <code>SeedStarter</code> objects.</p>
                <pre class=" language-java"><code class=" language-java"><span class="token annotation punctuation">@RequestMapping</span><span
                        class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">"/"</span><span
                        class="token punctuation">,</span><span class="token string">"/seedstartermng"</span><span class="token punctuation">}</span><span
                        class="token punctuation">)</span>
<span class="token keyword">public</span> String <span class="token function">showSeedstarters</span><span class="token punctuation">(</span><span
                            class="token keyword">final</span> SeedStarter seedStarter<span class="token punctuation">)</span> <span
                            class="token punctuation">{</span>
    seedStarter<span class="token punctuation">.</span><span class="token function">setDatePlanted</span><span class="token punctuation">(</span>Calendar<span
                            class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span
                            class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span
                            class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span
                            class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token string">"seedstartermng"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span
                            class="token string">"/seedstartermng"</span><span class="token punctuation">,</span> params<span
                            class="token operator">=</span><span class="token punctuation">{</span><span class="token string">"save"</span><span
                            class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> String <span class="token function">saveSeedstarter</span><span class="token punctuation">(</span>
        <span class="token keyword">final</span> SeedStarter seedStarter<span class="token punctuation">,</span> <span class="token keyword">final</span> BindingResult bindingResult<span
                            class="token punctuation">,</span> <span class="token keyword">final</span> ModelMap model<span
                            class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>bindingResult<span class="token punctuation">.</span><span
                            class="token function">hasErrors</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span
                            class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">"seedstartermng"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>seedStarterService<span class="token punctuation">.</span><span
                            class="token function">add</span><span class="token punctuation">(</span>seedStarter<span class="token punctuation">)</span><span
                            class="token punctuation">;</span>
    model<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span
                            class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token string">"redirect:/seedstartermng"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
            </section>
        </section>
        <section id="configuring-a-conversion-service" class="level2"><h2>4.5 Configuring a Conversion Service</h2>
            <p>In order to allow easy formatting of <code>Date</code> and also <code>Variety</code> objects in our view layer, we configured our application so
                that a Spring <code>ConversionService</code> object was created and initialized (by the <code>WebMvcConfigurerAdapter</code> we extend) with a
                couple of <em>formatter</em> objects we will need. See it again:</p>
            <pre class=" language-java"><code class=" language-java"><span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addFormatters</span><span
                        class="token punctuation">(</span><span class="token keyword">final</span> FormatterRegistry registry<span
                        class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">addFormatters</span><span
                        class="token punctuation">(</span>registry<span class="token punctuation">)</span><span class="token punctuation">;</span>
    registry<span class="token punctuation">.</span><span class="token function">addFormatter</span><span class="token punctuation">(</span><span
                        class="token function">varietyFormatter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span
                        class="token punctuation">)</span><span class="token punctuation">;</span>
    registry<span class="token punctuation">.</span><span class="token function">addFormatter</span><span class="token punctuation">(</span><span
                        class="token function">dateFormatter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span
                        class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token annotation punctuation">@Bean</span>
<span class="token keyword">public</span> VarietyFormatter <span class="token function">varietyFormatter</span><span class="token punctuation">(</span><span
                        class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">VarietyFormatter</span><span
                        class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token annotation punctuation">@Bean</span>
<span class="token keyword">public</span> DateFormatter <span class="token function">dateFormatter</span><span class="token punctuation">(</span><span
                        class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">DateFormatter</span><span
                        class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
            <p>Spring <em>formatters</em> are implementations of the <code>org.springframework.format.Formatter</code> interface. For more information on how
                the Spring conversion infrastructure works, see the docs at <a
                        href="http://docs.spring.io/spring/docs/4.3.x/spring-framework-reference/html/validation.html#core-convert">spring.io</a>.</p>
            <p>Let’s have a look at the <code>DateFormatter</code>, which formats dates according to a format string present at the <code>date.format</code>
                message key of our <code>Messages.properties</code>:</p>
            <pre class=" language-java"><code class=" language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span
                    class="token class-name">DateFormatter</span> <span class="token keyword">implements</span> <span
                    class="token class-name">Formatter</span><span class="token operator">&lt;</span>Date<span class="token operator">&gt;</span> <span
                    class="token punctuation">{</span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> MessageSource messageSource<span class="token punctuation">;</span>


    <span class="token keyword">public</span> <span class="token function">DateFormatter</span><span class="token punctuation">(</span><span
                        class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> Date <span class="token function">parse</span><span class="token punctuation">(</span><span class="token keyword">final</span> String text<span
                        class="token punctuation">,</span> <span class="token keyword">final</span> Locale locale<span class="token punctuation">)</span> <span
                        class="token keyword">throws</span> ParseException <span class="token punctuation">{</span>
        <span class="token keyword">final</span> SimpleDateFormat dateFormat <span class="token operator">=</span> <span
                        class="token function">createDateFormat</span><span class="token punctuation">(</span>locale<span
                        class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> dateFormat<span class="token punctuation">.</span><span class="token function">parse</span><span
                        class="token punctuation">(</span>text<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> String <span class="token function">print</span><span class="token punctuation">(</span><span
                        class="token keyword">final</span> Date object<span class="token punctuation">,</span> <span class="token keyword">final</span> Locale locale<span
                        class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">final</span> SimpleDateFormat dateFormat <span class="token operator">=</span> <span
                        class="token function">createDateFormat</span><span class="token punctuation">(</span>locale<span
                        class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> dateFormat<span class="token punctuation">.</span><span class="token function">format</span><span
                        class="token punctuation">(</span>object<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> SimpleDateFormat <span class="token function">createDateFormat</span><span
                        class="token punctuation">(</span><span class="token keyword">final</span> Locale locale<span class="token punctuation">)</span> <span
                        class="token punctuation">{</span>
        <span class="token keyword">final</span> String format <span class="token operator">=</span> <span class="token keyword">this</span><span
                        class="token punctuation">.</span>messageSource<span class="token punctuation">.</span><span
                        class="token function">getMessage</span><span class="token punctuation">(</span><span class="token string">"date.format"</span><span
                        class="token punctuation">,</span> null<span class="token punctuation">,</span> locale<span class="token punctuation">)</span><span
                        class="token punctuation">;</span>
        <span class="token keyword">final</span> SimpleDateFormat dateFormat <span class="token operator">=</span> <span class="token keyword">new</span> <span
                        class="token class-name">SimpleDateFormat</span><span class="token punctuation">(</span>format<span
                        class="token punctuation">)</span><span class="token punctuation">;</span>
        dateFormat<span class="token punctuation">.</span><span class="token function">setLenient</span><span class="token punctuation">(</span><span
                        class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> dateFormat<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span></code></pre>
            <p>The <code>VarietyFormatter</code> automatically converts between our <code>Variety</code> entities and the way we want to use them in our forms
                (basically, by their <code>id</code> field values):</p>
            <pre class=" language-java"><code class=" language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span
                    class="token class-name">VarietyFormatter</span> <span class="token keyword">implements</span> <span
                    class="token class-name">Formatter</span><span class="token operator">&lt;</span>Variety<span class="token operator">&gt;</span> <span
                    class="token punctuation">{</span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> VarietyService varietyService<span class="token punctuation">;</span>


    <span class="token keyword">public</span> <span class="token function">VarietyFormatter</span><span class="token punctuation">(</span><span
                        class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> Variety <span class="token function">parse</span><span class="token punctuation">(</span><span
                        class="token keyword">final</span> String text<span class="token punctuation">,</span> <span class="token keyword">final</span> Locale locale<span
                        class="token punctuation">)</span> <span class="token keyword">throws</span> ParseException <span class="token punctuation">{</span>
        <span class="token keyword">final</span> Integer varietyId <span class="token operator">=</span> Integer<span class="token punctuation">.</span><span
                        class="token function">valueOf</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span><span
                        class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>varietyService<span
                        class="token punctuation">.</span><span class="token function">findById</span><span class="token punctuation">(</span>varietyId<span
                        class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


    <span class="token keyword">public</span> String <span class="token function">print</span><span class="token punctuation">(</span><span
                        class="token keyword">final</span> Variety object<span class="token punctuation">,</span> <span class="token keyword">final</span> Locale locale<span
                        class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>object <span class="token operator">!=</span> null <span
                        class="token operator">?</span> object<span class="token punctuation">.</span><span class="token function">getId</span><span
                        class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span
                        class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span
                        class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">)</span><span
                        class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span></code></pre>
            <p>We will learn more on how these formatters affect the way our data is displayed later on.</p></section>
    </section>
    <section id="listing-seed-starter-data" class="level1"><h1>5 Listing Seed Starter Data</h1>
        <p>The first thing that our <code>/WEB-INF/templates/seedstartermng.html</code> page will show is a listing with the seed starters currently stored. For
            this we will need some externalized messages and also some expression evaluation on model attributes. Like this:</p>
        <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span
                class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span
                class="token punctuation">"</span>seedstarterlist<span class="token punctuation">"</span></span> <span class="token attr-name"><span
                class="token namespace">th:</span>unless</span><span class="token attr-value"><span class="token punctuation">=</span><span
                class="token punctuation">"</span>${#lists.isEmpty(allSeedStarters)}<span class="token punctuation">"</span></span><span
                class="token punctuation">&gt;</span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span> <span class="token attr-name"><span
          class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span
          class="token punctuation">"</span>#{title.list}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>List of Seed Starters<span
                    class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span
                    class="token punctuation">&gt;</span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>table</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>thead</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span> <span class="token attr-name"><span
                class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span
                class="token punctuation">"</span>#{seedstarter.datePlanted}<span class="token punctuation">"</span></span><span
                class="token punctuation">&gt;</span></span>Date Planted<span class="token tag"><span class="token tag"><span
                    class="token punctuation">&lt;/</span>th</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span> <span class="token attr-name"><span
                class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span
                class="token punctuation">"</span>#{seedstarter.covered}<span class="token punctuation">"</span></span><span
                class="token punctuation">&gt;</span></span>Covered<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span
                    class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span> <span class="token attr-name"><span
                class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span
                class="token punctuation">"</span>#{seedstarter.type}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Type<span
                    class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span
                    class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span> <span class="token attr-name"><span
                class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span
                class="token punctuation">"</span>#{seedstarter.features}<span class="token punctuation">"</span></span><span
                class="token punctuation">&gt;</span></span>Features<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span
                    class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span> <span class="token attr-name"><span
                class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span
                class="token punctuation">"</span>#{seedstarter.rows}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Rows<span
                    class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span
                    class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>thead</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tbody</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span> <span class="token attr-name"><span
              class="token namespace">th:</span>each</span><span class="token attr-value"><span class="token punctuation">=</span><span
              class="token punctuation">"</span>sb : ${allSeedStarters}<span class="token punctuation">"</span></span><span
              class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name"><span
                class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span
                class="token punctuation">"</span>${{ sb.datePlanted }}<span class="token punctuation">"</span></span><span
                class="token punctuation">&gt;</span></span>13/01/2011<span class="token tag"><span class="token tag"><span
                    class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name"><span
                class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span
                class="token punctuation">"</span>#{|bool.${sb.covered}|}<span class="token punctuation">"</span></span><span
                class="token punctuation">&gt;</span></span>yes<span class="token tag"><span class="token tag"><span
                    class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name"><span
                class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span
                class="token punctuation">"</span>#{|seedstarter.type.${sb.type}|}<span class="token punctuation">"</span></span><span
                class="token punctuation">&gt;</span></span>Wireframe<span class="token tag"><span class="token tag"><span
                    class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name"><span
                class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span
                class="token punctuation">"</span>${#strings.arrayJoin(
                           #messages.arrayMsg(
                               #strings.arrayPrepend(sb.features,<span class="token punctuation">'</span>seedstarter.feature.<span
                    class="token punctuation">'</span>)),
                           <span class="token punctuation">'</span>, <span class="token punctuation">'</span>)}<span
                    class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Electric Heating, Turf<span
                    class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span
                    class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>table</span><span
                  class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tbody</span><span
                    class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span> <span class="token attr-name"><span
                      class="token namespace">th:</span>each</span><span class="token attr-value"><span class="token punctuation">=</span><span
                      class="token punctuation">"</span>row,rowStat : ${sb.rows}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name"><span
                        class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span
                        class="token punctuation">"</span>${rowStat.count}<span class="token punctuation">"</span></span><span
                        class="token punctuation">&gt;</span></span>1<span class="token tag"><span class="token tag"><span
                    class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name"><span
                        class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span
                        class="token punctuation">"</span>${row.variety.name}<span class="token punctuation">"</span></span><span
                        class="token punctuation">&gt;</span></span>Thymus Thymi<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span
                    class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name"><span
                        class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span
                        class="token punctuation">"</span>${row.seedsPerCell}<span class="token punctuation">"</span></span><span
                        class="token punctuation">&gt;</span></span>12<span class="token tag"><span class="token tag"><span
                    class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span
                      class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tbody</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>table</span><span
                  class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tbody</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>table</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></code></pre>
        <p>Lots to see here. Let’s have a look at each fragment separately.</p>
        <p>First of all, this section will only be shown if there are any seed starters. We achieve that with a th:unless attribute and the <code>#lists.isEmpty(...)</code>
            function.</p>
        <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span
                class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span
                class="token punctuation">"</span>seedstarterlist<span class="token punctuation">"</span></span> <span class="token attr-name"><span
                class="token namespace">th:</span>unless</span><span class="token attr-value"><span class="token punctuation">=</span><span
                class="token punctuation">"</span>${#lists.isEmpty(allSeedStarters)}<span class="token punctuation">"</span></span><span
                class="token punctuation">&gt;</span></span></code></pre>
        <p>Note that all utility objects like <code>#lists</code> are available in Spring EL expressions just as they were in OGNL expressions in the Standard
            Dialect.</p>
        <p>The next thing to see is a lot of internationalized (externalized) texts, like:</p>
        <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span
                class="token punctuation">&lt;</span>h2</span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span
                class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>#{title.list}<span
                class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>List of Seed Starters<span class="token tag"><span
                class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>table</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>thead</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span> <span class="token attr-name"><span
              class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span
              class="token punctuation">"</span>#{seedstarter.datePlanted}<span class="token punctuation">"</span></span><span
              class="token punctuation">&gt;</span></span>Date Planted<span class="token tag"><span class="token tag"><span
                    class="token punctuation">&lt;/</span>th</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span> <span class="token attr-name"><span
              class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span
              class="token punctuation">"</span>#{seedstarter.covered}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Covered<span
                    class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span
                    class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span> <span class="token attr-name"><span
              class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span
              class="token punctuation">"</span>#{seedstarter.type}<span class="token punctuation">"</span></span><span
              class="token punctuation">&gt;</span></span>Type<span class="token tag"><span class="token tag"><span
                    class="token punctuation">&lt;/</span>th</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span> <span class="token attr-name"><span
              class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span
              class="token punctuation">"</span>#{seedstarter.features}<span class="token punctuation">"</span></span><span
              class="token punctuation">&gt;</span></span>Features<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span
                    class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span> <span class="token attr-name"><span
              class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span
              class="token punctuation">"</span>#{seedstarter.rows}<span class="token punctuation">"</span></span><span
              class="token punctuation">&gt;</span></span>Rows<span class="token tag"><span class="token tag"><span
                    class="token punctuation">&lt;/</span>th</span><span class="token punctuation">&gt;</span></span>
      ...</code></pre>
        <p>This being a Spring MVC application, we already defined a <code>MessageSource</code> bean in our Spring configuration (<code>MessageSource</code>
            objects are the standard way of managing externalized texts in Spring MVC):</p>
        <pre class=" language-java"><code class=" language-java"><span class="token annotation punctuation">@Bean</span>
<span class="token keyword">public</span> ResourceBundleMessageSource <span class="token function">messageSource</span><span
                    class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    ResourceBundleMessageSource messageSource <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ResourceBundleMessageSource</span><span
                    class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    messageSource<span class="token punctuation">.</span><span class="token function">setBasename</span><span class="token punctuation">(</span><span
                    class="token string">"Messages"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> messageSource<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
        <p>…and that <code>basename</code> property indicates that we will have files like <code>Messages_es.properties</code> or
            <code>Messages_en.properties</code> in our classpath. Let’s have a look at the Spanish version:</p>
        <pre class="properties"><code>title.list=Lista de semilleros

date.format=dd/MM/yyyy
bool.true=sí
bool.false=no

seedstarter.datePlanted=Fecha de plantación
seedstarter.covered=Cubierto
seedstarter.type=Tipo
seedstarter.features=Características
seedstarter.rows=Filas

seedstarter.type.WOOD=Madera
seedstarter.type.PLASTIC=Plástico

seedstarter.feature.SEEDSTARTER_SPECIFIC_SUBSTRATE=Sustrato específico para semilleros
seedstarter.feature.FERTILIZER=Fertilizante
seedstarter.feature.PH_CORRECTOR=Corrector de PH</code></pre>
        <p>In the first column of the table listing we will show the date when the seed starter was prepared. But <strong>we will show it formatted</strong> in
            the way we defined in our <code>DateFormatter</code>. In order to do that we will use the double-brace syntax (<code>${{ ... }}</code>), which will
            automatically apply the Spring Conversion Service, including the <code>DateFormatter</code> we registered at configuration.</p>
        <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span
                class="token punctuation">&lt;</span>td</span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span
                class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${{ sb.datePlanted }}<span
                class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>13/01/2011<span class="token tag"><span
                class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span></code></pre>
        <p>Next is showing whether the seed starter container is covered or not, by transforming the value of the boolean covered bean property into an
            internationalized <em>“yes”</em> or <em>“no”</em> with a literal substitution expression:</p>
        <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span
                class="token punctuation">&lt;</span>td</span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span
                class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>#{|bool.${sb.covered}|}<span
                class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>yes<span class="token tag"><span
                class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span></code></pre>
        <p>Now we have to show the type of seed starter container. Type is a java enum with two values (<code>WOOD</code> and <code>PLASTIC</code>), and that’s
            why we defined two properties in our <code>Messages</code> file called <code>seedstarter.type.WOOD</code> and <code>seedstarter.type.PLASTIC</code>.
        </p>
        <p>But in order to obtain the internationalized names of the types, we will need to add the <code>seedstarter.type.</code> prefix to the enum value by
            means of an expression, which result we will then use as the message key:</p>
        <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span
                class="token punctuation">&lt;</span>td</span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span
                class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>#{|seedstarter.type.${sb.type}|}<span
                class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Wireframe<span class="token tag"><span
                class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span></code></pre>
        <p>The most difficult part of this listing is the <em>features</em> column. In it we want to display all the features of our container —that come in the
            form of an array of <code>Feature</code> enums—, separated by commas. Like <em>“Electric Heating, Turf”</em>.</p>
        <p>Note that this is particularly difficult because these enum values also need to be externalized, as we did with Types. The flow is then:</p>
        <ol type="1">
            <li>Prepend the corresponding prefix to all the elements of the <code>features</code> array.</li>
            <li>Obtain the externalized messages corresponding to all the keys from step 1.</li>
            <li>Join all the messages obtained in step 2, using a comma as a delimiter.</li>
        </ol>
        <p>For achieving this, we create the following code:</p>
        <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span
                class="token punctuation">&lt;</span>td</span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span
                class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${#strings.arrayJoin(
                   #messages.arrayMsg(
                       #strings.arrayPrepend(sb.features,<span class="token punctuation">'</span>seedstarter.feature.<span class="token punctuation">'</span>)),
                   <span class="token punctuation">'</span>, <span class="token punctuation">'</span>)}<span class="token punctuation">"</span></span><span
                class="token punctuation">&gt;</span></span>Electric Heating, Turf<span class="token tag"><span class="token tag"><span
                class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span></code></pre>
        <p>The last column of our listing will be quite simple, in fact. Even if it has a nested table for showing the contents of each row in the
            container:</p>
        <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span
                class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>table</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tbody</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span> <span class="token attr-name"><span
              class="token namespace">th:</span>each</span><span class="token attr-value"><span class="token punctuation">=</span><span
              class="token punctuation">"</span>row,rowStat : ${sb.rows}<span class="token punctuation">"</span></span><span
              class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name"><span
                class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span
                class="token punctuation">"</span>${rowStat.count}<span class="token punctuation">"</span></span><span
                class="token punctuation">&gt;</span></span>1<span class="token tag"><span class="token tag"><span
                    class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name"><span
                class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span
                class="token punctuation">"</span>${row.variety.name}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Thymus Thymi<span
                    class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span
                    class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name"><span
                class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span
                class="token punctuation">"</span>${row.seedsPerCell}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>12<span
                    class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span
                    class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tbody</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>table</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span
        class="token punctuation">&gt;</span></span></code></pre>
    </section>
    <section id="creating-a-form" class="level1"><h1>6 Creating a Form</h1>
        <section id="handling-the-command-object" class="level2"><h2>6.1 Handling the command object</h2>
            <p><em>Command object</em> is the name Spring MVC gives to form-backing beans, this is, to objects that model a form’s fields and provide getter and
                setter methods that will be used by the framework for establishing and obtaining the values input by the user at the browser side.</p>
            <p>Thymeleaf requires you to specify the command object by using a <code>th:object</code> attribute in your <code>&lt;form&gt;</code> tag:</p>
            <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span
                    class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>#<span
                    class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">th:</span>action</span><span
                    class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@{/seedstartermng}<span
                    class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">th:</span>object</span><span
                    class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${seedStarter}<span
                    class="token punctuation">"</span></span> <span class="token attr-name">method</span><span class="token attr-value"><span
                    class="token punctuation">=</span><span class="token punctuation">"</span>post<span class="token punctuation">"</span></span><span
                    class="token punctuation">&gt;</span></span>
    ...
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span></code></pre>
            <p>This is consistent with other uses of <code>th:object,</code> but in fact this specific scenario adds some limitations in order to correctly
                integrate with Spring MVC’s infrastructure:</p>
            <ul>
                <li>Values for <code>th:object</code> attributes in form tags must be variable expressions (<code>${...}</code>) specifying only the name of a
                    model attribute, without property navigation. This means that an expression like <code>${seedStarter}</code> is valid, but <code>${seedStarter.data}</code>
                    would not be.
                </li>
                <li>Once inside the <code>&lt;form&gt;</code> tag, no other <code>th:object</code> attribute can be specified. This is consistent with the fact
                    that HTML forms cannot be nested.
                </li>
            </ul>
        </section>
        <section id="inputs" class="level2"><h2>6.2 Inputs</h2>
            <p>Let’s see now how to add an input to our form:</p>
            <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span
                    class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span
                    class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name"><span
                    class="token namespace">th:</span>field</span><span class="token attr-value"><span class="token punctuation">=</span><span
                    class="token punctuation">"</span>*{datePlanted}<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span></code></pre>
            <p>As you can see, we are introducing a new attribute here: <code>th:field.</code> This is a very important feature for Spring MVC integration
                because it does all the heavy work of binding your input with a property in the form-backing bean. You can see it as an equivalent of the path
                attribute in a
                <form:input> tag from Spring MVC’s JSP tag library.</form:input>
            </p>
            <p>The <code>th:field</code> attribute behaves differently depending on whether it is attached to an <code>&lt;input&gt;</code>, <code>&lt;select&gt;</code>
                or <code>&lt;textarea&gt;</code> tag (and also depending on the specific type of <code>&lt;input&gt;</code> tag). In this case (<code>input[type=text]</code>),
                the above line of code is similar to:</p>
            <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span
                    class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span
                    class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span
                    class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>datePlanted<span
                    class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span
                    class="token punctuation">=</span><span class="token punctuation">"</span>datePlanted<span class="token punctuation">"</span></span> <span
                    class="token attr-name"><span class="token namespace">th:</span>value</span><span class="token attr-value"><span
                    class="token punctuation">=</span><span class="token punctuation">"</span>*{datePlanted}<span
                    class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span></code></pre>
            <p>…but in fact it is a little bit more than that, because <code>th:field</code> will also apply the registered Spring Conversion Service, including
                the <code>DateFormatter</code> we saw before (even if the field expression is not double-bracketed). Thanks to this, the date will be shown
                correctly formatted.</p>
            <p>Values for <code>th:field</code> attributes must be selection expressions (<code>*{...}</code>), which makes sense given the fact that they will
                be evaluated on the form-backing bean and not on the context variables (or model attributes in Spring MVC jargon).</p>
            <p>Contrary to the ones in <code>th:object</code>, these expressions can include property navigation (in fact any expression allowed for the path
                attribute of a <code>&lt;form:input&gt;</code> JSP tag will be allowed here).</p>
            <p>Note that <code>th:field</code> also understands the new types of <code>&lt;input&gt;</code> element introduced by HTML5 like <code>&lt;input
                type="datetime" ... /&gt;</code>, <code>&lt;input type="color" ... /&gt;</code>, etc., effectively adding complete HTML5 support to Spring MVC.
            </p></section>
        <section id="checkbox-fields" class="level2"><h2>6.3 Checkbox fields</h2>
            <p><code>th:field</code> also allows us to define checkbox inputs. Let’s see an example from our HTML page:</p>
            <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span
                    class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name"><span
          class="token namespace">th:</span>for</span><span class="token attr-value"><span class="token punctuation">=</span><span
          class="token punctuation">"</span>${#ids.next(<span class="token punctuation">'</span>covered<span class="token punctuation">'</span>)}<span
          class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span
          class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>#{seedstarter.covered}<span
          class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Covered<span class="token tag"><span
                        class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span
          class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>checkbox<span
          class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">th:</span>field</span><span
          class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>*{covered}<span
          class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></code></pre>
            <p>Note there’s some fine stuff here besides the checkbox itself, like an externalized label and also the use of the
                <code>#ids.next('covered')</code> function for obtaining the value that will be applied to the id attribute of the checkbox input.</p>
            <p>Why do we need this dynamic generation of an id attribute for this field? Because checkboxes are potentially multi-valued, and thus their id
                values will always be suffixed a sequence number (by internally using the <code>#ids.seq(...)</code> function) in order to ensure that each of
                the checkbox inputs for the same property has a different id value.</p>
            <p>We can see this more easily if we look at such a multi-valued checkbox field:</p>
            <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span
                    class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name"><span
          class="token namespace">th:</span>each</span><span class="token attr-value"><span class="token punctuation">=</span><span
          class="token punctuation">"</span>feat : ${allFeatures}<span class="token punctuation">"</span></span><span
          class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span
            class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>checkbox<span
            class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">th:</span>field</span><span
            class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>*{features}<span class="token punctuation">"</span></span> <span
            class="token attr-name"><span class="token namespace">th:</span>value</span><span class="token attr-value"><span
            class="token punctuation">=</span><span class="token punctuation">"</span>${feat}<span class="token punctuation">"</span></span> <span
            class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name"><span
            class="token namespace">th:</span>for</span><span class="token attr-value"><span class="token punctuation">=</span><span
            class="token punctuation">"</span>${#ids.prev(<span class="token punctuation">'</span>features<span class="token punctuation">'</span>)}<span
            class="token punctuation">"</span></span>
           <span class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span
                class="token punctuation">=</span><span class="token punctuation">"</span>#{${<span class="token punctuation">'</span>seedstarter.feature.<span
                class="token punctuation">'</span> + feat}}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Heating<span
                        class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span
                        class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span
        class="token punctuation">&gt;</span></span></code></pre>
            <p>Note that we’ve added a <code>th:value</code> attribute this time, because the features field is not a boolean like covered was, but instead is
                an array of values.</p>
            <p>Let’s see the HTML output generated by this code:</p>
            <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span
                    class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">id</span><span
            class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>features1<span
            class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span
            class="token punctuation">=</span><span class="token punctuation">"</span>features<span class="token punctuation">"</span></span> <span
            class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>checkbox<span
            class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span
            class="token punctuation">=</span><span class="token punctuation">"</span>SEEDSTARTER_SPECIFIC_SUBSTRATE<span
            class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">name</span><span
            class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>_features<span
            class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span
            class="token punctuation">=</span><span class="token punctuation">"</span>hidden<span class="token punctuation">"</span></span> <span
            class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>on<span
            class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span
            class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>features1<span
            class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Seed starter-specific substrate<span
                        class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span
                        class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">id</span><span
            class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>features2<span
            class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span
            class="token punctuation">=</span><span class="token punctuation">"</span>features<span class="token punctuation">"</span></span> <span
            class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>checkbox<span
            class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span
            class="token punctuation">=</span><span class="token punctuation">"</span>FERTILIZER<span class="token punctuation">"</span></span> <span
            class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">name</span><span
            class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>_features<span
            class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span
            class="token punctuation">=</span><span class="token punctuation">"</span>hidden<span class="token punctuation">"</span></span> <span
            class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>on<span
            class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span
            class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>features2<span
            class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Fertilizer used<span class="token tag"><span
                        class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">id</span><span
            class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>features3<span
            class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span
            class="token punctuation">=</span><span class="token punctuation">"</span>features<span class="token punctuation">"</span></span> <span
            class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>checkbox<span
            class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span
            class="token punctuation">=</span><span class="token punctuation">"</span>PH_CORRECTOR<span class="token punctuation">"</span></span> <span
            class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">name</span><span
            class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>_features<span
            class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span
            class="token punctuation">=</span><span class="token punctuation">"</span>hidden<span class="token punctuation">"</span></span> <span
            class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>on<span
            class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span
            class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>features3<span
            class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>PH Corrector used<span class="token tag"><span
                        class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span
        class="token punctuation">&gt;</span></span></code></pre>
            <p>We can see here how a sequence suffix is added to each input’s id attribute, and how the <code>#ids.prev(...)</code> function allows us to
                retrieve the last sequence value generated for a specific input id.</p>
            <blockquote><p>Don’t worry about those hidden inputs with <code>name="_features"</code>: they are automatically added in order to avoid problems
                with browsers not sending unchecked checkbox values to the server upon form submission.</p></blockquote>
            <p>Also note that if our features property contained some selected values in our form-backing bean, <code>th:field</code>would have taken care of
                that and would have added a <code>checked="checked"</code> attribute to the corresponding input tags.</p></section>
        <section id="radio-button-fields" class="level2"><h2>6.4 Radio Button fields</h2>
            <p>Radio button fields are specified in a similar way to non-boolean (multi-valued) checkboxes —except that they are not multivalued, of course:</p>
            <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span
                    class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name"><span
          class="token namespace">th:</span>each</span><span class="token attr-value"><span class="token punctuation">=</span><span
          class="token punctuation">"</span>ty : ${allTypes}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span
            class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>radio<span
            class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">th:</span>field</span><span
            class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>*{type}<span
            class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">th:</span>value</span><span
            class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${ty}<span
            class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name"><span
            class="token namespace">th:</span>for</span><span class="token attr-value"><span class="token punctuation">=</span><span
            class="token punctuation">"</span>${#ids.prev(<span class="token punctuation">'</span>type<span class="token punctuation">'</span>)}<span
            class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span
            class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>#{${<span
            class="token punctuation">'</span>seedstarter.type.<span class="token punctuation">'</span> + ty}}<span
            class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Wireframe<span class="token tag"><span class="token tag"><span
                        class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span
        class="token punctuation">&gt;</span></span></code></pre>
        </section>
        <section id="dropdownlist-selectors" class="level2"><h2>6.5 Dropdown/List selectors</h2>
            <p>Select fields have two parts: the <code>&lt;select&gt;</code> tag and its nested <code>&lt;option&gt;</code> tags. When creating this kind of
                field, only the <code>&lt;select&gt;</code> tag has to include a <code>th:field</code> attribute, but the <code>th:value</code> attributes in
                the nested <code>&lt;option&gt;</code> tags will be very important because they will provide the means of knowing which is the currently
                selected option (in a similar way to non-boolean checkboxes and radio buttons).</p>
            <p>Let’s re-build the type field as a dropdown select:</p>
            <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span
                    class="token attr-name"><span class="token namespace">th:</span>field</span><span class="token attr-value"><span
                    class="token punctuation">=</span><span class="token punctuation">"</span>*{type}<span class="token punctuation">"</span></span><span
                    class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name"><span
          class="token namespace">th:</span>each</span><span class="token attr-value"><span class="token punctuation">=</span><span
          class="token punctuation">"</span>type : ${allTypes}<span class="token punctuation">"</span></span>
          <span class="token attr-name"><span class="token namespace">th:</span>value</span><span class="token attr-value"><span
              class="token punctuation">=</span><span class="token punctuation">"</span>${type}<span class="token punctuation">"</span></span>
          <span class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span
              class="token punctuation">=</span><span class="token punctuation">"</span>#{${<span class="token punctuation">'</span>seedstarter.type.<span
              class="token punctuation">'</span> + type}}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Wireframe<span
                        class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span
                        class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span
        class="token punctuation">&gt;</span></span></code></pre>
            <p>At this point, understanding this piece of code is quite easy. Just notice how attribute precedence allows us to set the <code>th:each</code>
                attribute in the <code>&lt;option&gt;</code> tag itself.</p></section>
        <section id="dynamic-fields" class="level2"><h2>6.6 Dynamic fields</h2>
            <p>Thanks to the advanced form-field binding capabilities in Spring MVC, we can use complex Spring EL expressions to bind dynamic form fields to our
                form-backing bean. This will allow us to create new Row objects in our <code>SeedStarter</code> bean, and to add those rows’ fields to our form
                at user request.</p>
            <p>In order to do this, we will need a couple of new mapped methods in our controller, which will add or remove a row from our
                <code>SeedStarter</code> depending on the existence of specific request parameters:</p>
            <pre class=" language-java"><code class=" language-java"><span class="token annotation punctuation">@RequestMapping</span><span
                    class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">"/seedstartermng"</span><span
                    class="token punctuation">,</span> params<span class="token operator">=</span><span class="token punctuation">{</span><span
                    class="token string">"addRow"</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> String <span class="token function">addRow</span><span class="token punctuation">(</span><span class="token keyword">final</span> SeedStarter seedStarter<span
                        class="token punctuation">,</span> <span class="token keyword">final</span> BindingResult bindingResult<span
                        class="token punctuation">)</span> <span class="token punctuation">{</span>
    seedStarter<span class="token punctuation">.</span><span class="token function">getRows</span><span class="token punctuation">(</span><span
                        class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">add</span><span
                        class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Row</span><span
                        class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span
                        class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token string">"seedstartermng"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span
                        class="token string">"/seedstartermng"</span><span class="token punctuation">,</span> params<span class="token operator">=</span><span
                        class="token punctuation">{</span><span class="token string">"removeRow"</span><span class="token punctuation">}</span><span
                        class="token punctuation">)</span>
<span class="token keyword">public</span> String <span class="token function">removeRow</span><span class="token punctuation">(</span>
        <span class="token keyword">final</span> SeedStarter seedStarter<span class="token punctuation">,</span> <span class="token keyword">final</span> BindingResult bindingResult<span
                        class="token punctuation">,</span>
        <span class="token keyword">final</span> HttpServletRequest req<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">final</span> Integer rowId <span class="token operator">=</span> Integer<span class="token punctuation">.</span><span
                        class="token function">valueOf</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span><span
                        class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"removeRow"</span><span
                        class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    seedStarter<span class="token punctuation">.</span><span class="token function">getRows</span><span class="token punctuation">(</span><span
                        class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">remove</span><span
                        class="token punctuation">(</span>rowId<span class="token punctuation">.</span><span class="token function">intValue</span><span
                        class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span
                        class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token string">"seedstartermng"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
            <p>And now we can add a dynamic table to our form:</p>
            <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>table</span><span
                    class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>thead</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span> <span class="token attr-name"><span
              class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span
              class="token punctuation">"</span>#{seedstarter.rows.head.rownum}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Row<span
                        class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span
                        class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span> <span class="token attr-name"><span
              class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span
              class="token punctuation">"</span>#{seedstarter.rows.head.variety}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Variety<span
                        class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span
                        class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span> <span class="token attr-name"><span
              class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span
              class="token punctuation">"</span>#{seedstarter.rows.head.seedsPerCell}<span class="token punctuation">"</span></span><span
              class="token punctuation">&gt;</span></span>Seeds per cell<span class="token tag"><span class="token tag"><span
                        class="token punctuation">&lt;/</span>th</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span
                class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>submit<span
                class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span
                class="token punctuation">=</span><span class="token punctuation">"</span>addRow<span class="token punctuation">"</span></span> <span
                class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span
                class="token punctuation">=</span><span class="token punctuation">"</span>#{seedstarter.row.add}<span
                class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Add row<span class="token tag"><span
                        class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>thead</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tbody</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span> <span class="token attr-name"><span
            class="token namespace">th:</span>each</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>row,rowStat : *{rows}<span
            class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name"><span
              class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span
              class="token punctuation">"</span>${rowStat.count}<span class="token punctuation">"</span></span><span
              class="token punctuation">&gt;</span></span>1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span
                        class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name"><span
                class="token namespace">th:</span>field</span><span class="token attr-value"><span class="token punctuation">=</span><span
                class="token punctuation">"</span>*{rows[__${rowStat.index}__].variety}<span class="token punctuation">"</span></span><span
                class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name"><span
                  class="token namespace">th:</span>each</span><span class="token attr-value"><span class="token punctuation">=</span><span
                  class="token punctuation">"</span>var : ${allVarieties}<span class="token punctuation">"</span></span>
                  <span class="token attr-name"><span class="token namespace">th:</span>value</span><span class="token attr-value"><span
                      class="token punctuation">=</span><span class="token punctuation">"</span>${var.id}<span class="token punctuation">"</span></span>
                  <span class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span
                      class="token punctuation">=</span><span class="token punctuation">"</span>${var.name}<span class="token punctuation">"</span></span><span
                      class="token punctuation">&gt;</span></span>Thymus Thymi<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span
                        class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span
                class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span
                class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text<span
                class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">th:</span>field</span><span
                class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>*{rows[__${rowStat.index}__].seedsPerCell}<span
                class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span
                class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>submit<span
                class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span
                class="token punctuation">=</span><span class="token punctuation">"</span>removeRow<span class="token punctuation">"</span></span>
                <span class="token attr-name"><span class="token namespace">th:</span>value</span><span class="token attr-value"><span
                    class="token punctuation">=</span><span class="token punctuation">"</span>${rowStat.index}<span
                    class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span
                    class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>#{seedstarter.row.remove}<span
                    class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Remove row<span class="token tag"><span
                        class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tbody</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>table</span><span
        class="token punctuation">&gt;</span></span></code></pre>
            <p>Quite a lot of things to see here, but not much we should not understand by now… except for one <code>strange</code> thing:</p>
            <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span
                    class="token attr-name"><span class="token namespace">th:</span>field</span><span class="token attr-value"><span
                    class="token punctuation">=</span><span class="token punctuation">"</span>*{rows[__${rowStat.index}__].variety}<span
                    class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>

    ...

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span
        class="token punctuation">&gt;</span></span></code></pre>
            <p>If you recall from the <em>“Using Thymeleaf”</em> tutorial, that <code>__${...}__</code> syntax is a preprocessing expression, which is an inner
                expression that is evaluated before actually evaluating the whole expression. But why that way of specifying the row index? Wouldn’t it be
                enough with:</p>
            <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span
                    class="token attr-name"><span class="token namespace">th:</span>field</span><span class="token attr-value"><span
                    class="token punctuation">=</span><span class="token punctuation">"</span>*{rows[rowStat.index].variety}<span
                    class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>

    ...

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span
        class="token punctuation">&gt;</span></span></code></pre>
            <p>…well, actually, no. The problem is that Spring EL does not evaluate variables inside array index brackets, so when executing the above
                expression we would obtain an error telling us that <code>rows[rowStat.index]</code> (instead of <code>rows[0]</code>, <code>rows[1]</code>,
                etc) is not a valid position in the rows collection. That’s why preprocessing is needed here.</p>
            <p>Let’s have a look at a fragment of the resulting HTML after pressing <em>“Add Row”</em> a couple of times:</p>
            <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tbody</span><span
                    class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>1<span
                        class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span
                        class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span
              class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>rows0.variety<span
              class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span
              class="token punctuation">"</span>rows[0].variety<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span
                class="token attr-name">selected</span><span class="token attr-value"><span class="token punctuation">=</span><span
                class="token punctuation">"</span>selected<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span
                class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>1<span
                class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Thymus vulgaris<span class="token tag"><span
                        class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">value</span><span
                class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>2<span
                class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Thymus x citriodorus<span class="token tag"><span
                        class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">value</span><span
                class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>3<span
                class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Thymus herba-barona<span class="token tag"><span
                        class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">value</span><span
                class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>4<span
                class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Thymus pseudolaginosus<span class="token tag"><span
                        class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">value</span><span
                class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>5<span
                class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Thymus serpyllum<span class="token tag"><span
                        class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span
              class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">id</span><span
              class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>rows0.seedsPerCell<span
              class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span
              class="token punctuation">"</span>rows[0].seedsPerCell<span class="token punctuation">"</span></span> <span
              class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text<span
              class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span
              class="token punctuation">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span
              class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">name</span><span
              class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>removeRow<span class="token punctuation">"</span></span> <span
              class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>submit<span
              class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span
              class="token punctuation">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span><span
              class="token punctuation">&gt;</span></span>Remove row<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span
                        class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>2<span
                        class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span
                        class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span
              class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>rows1.variety<span
              class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span
              class="token punctuation">"</span>rows[1].variety<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span
                class="token attr-name">selected</span><span class="token attr-value"><span class="token punctuation">=</span><span
                class="token punctuation">"</span>selected<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span
                class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>1<span
                class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Thymus vulgaris<span class="token tag"><span
                        class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">value</span><span
                class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>2<span
                class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Thymus x citriodorus<span class="token tag"><span
                        class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">value</span><span
                class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>3<span
                class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Thymus herba-barona<span class="token tag"><span
                        class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">value</span><span
                class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>4<span
                class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Thymus pseudolaginosus<span class="token tag"><span
                        class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">value</span><span
                class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>5<span
                class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Thymus serpyllum<span class="token tag"><span
                        class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span
              class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">id</span><span
              class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>rows1.seedsPerCell<span
              class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span
              class="token punctuation">"</span>rows[1].seedsPerCell<span class="token punctuation">"</span></span> <span
              class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text<span
              class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span
              class="token punctuation">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span
              class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">name</span><span
              class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>removeRow<span class="token punctuation">"</span></span> <span
              class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>submit<span
              class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span
              class="token punctuation">=</span><span class="token punctuation">"</span>1<span class="token punctuation">"</span></span><span
              class="token punctuation">&gt;</span></span>Remove row<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span
                        class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tbody</span><span
        class="token punctuation">&gt;</span></span></code></pre>
        </section>
    </section>
    <section id="validation-and-error-messages" class="level1"><h1>7 Validation and Error Messages</h1>
        <p>Most of our forms will need to show validation messages in order to inform the user of the errors he/she has made.</p>
        <p>Thymeleaf offers some tools for this: a couple of functions in the <code>#fields</code> object, the <code>th:errors</code> and the <code>th:errorclass</code>
            attributes.</p>
        <section id="field-errors" class="level2"><h2>7.1 Field errors</h2>
            <p>Let’s see how we could set a specific CSS class to a field if it has an error:</p>
            <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span
                    class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span
                    class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name"><span
                    class="token namespace">th:</span>field</span><span class="token attr-value"><span class="token punctuation">=</span><span
                    class="token punctuation">"</span>*{datePlanted}<span class="token punctuation">"</span></span>
                   <span class="token attr-name"><span class="token namespace">th:</span>class</span><span class="token attr-value"><span
                        class="token punctuation">=</span><span class="token punctuation">"</span>${#fields.hasErrors(<span class="token punctuation">'</span>datePlanted<span
                        class="token punctuation">'</span>)}? fieldError<span class="token punctuation">"</span></span> <span
                        class="token punctuation">/&gt;</span></span></code></pre>
            <p>As you can see, the <code>#fields.hasErrors(...)</code> function receives the field expression as a parameter (<code>datePlanted</code>), and
                returns a boolean telling whether any validation errors exist for that field.</p>
            <p>We could also obtain all the errors for that field and iterate them:</p>
            <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span
                    class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name"><span
          class="token namespace">th:</span>each</span><span class="token attr-value"><span class="token punctuation">=</span><span
          class="token punctuation">"</span>err : ${#fields.errors(<span class="token punctuation">'</span>datePlanted<span class="token punctuation">'</span>)}<span
          class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span
          class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${err}<span
          class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span
        class="token punctuation">&gt;</span></span></code></pre>
            <p>Instead of iterating, we could have also used <code>th:errors</code>, a specialized attribute which builds a list with all the errors for the
                specified selector, separated by <code>&lt;br /&gt;</code>:</p>
            <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span
                    class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span
                    class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name"><span
                    class="token namespace">th:</span>field</span><span class="token attr-value"><span class="token punctuation">=</span><span
                    class="token punctuation">"</span>*{datePlanted}<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name"><span class="token namespace">th:</span>if</span><span
        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${#fields.hasErrors(<span
        class="token punctuation">'</span>datePlanted<span class="token punctuation">'</span>)}<span class="token punctuation">"</span></span> <span
        class="token attr-name"><span class="token namespace">th:</span>errors</span><span class="token attr-value"><span
        class="token punctuation">=</span><span class="token punctuation">"</span>*{datePlanted}<span class="token punctuation">"</span></span><span
        class="token punctuation">&gt;</span></span>Incorrect date<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span
                        class="token punctuation">&gt;</span></span></code></pre>
            <section id="simplifying-error-based-css-styling-therrorclass" class="level3"><h3>Simplifying error-based CSS styling: <code>th:errorclass</code>
            </h3>
                <p>The example we saw above, <em>setting a CSS class to a form input if that field has errors</em>, is so common that Thymeleaf offers a
                    specific attribute for doing exacly that: <code>th:errorclass</code>.</p>
                <p>Applied to a form field tag (input, select, textarea…), it will read the name of the field to be examined from any existing <code>name</code>
                    or <code>th:field</code> attributes in the same tag, and then append the specified CSS class to the tag if such field has any associated
                    errors:</p>
                <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span
                        class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span
                        class="token punctuation">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span
                        class="token attr-name"><span class="token namespace">th:</span>field</span><span class="token attr-value"><span
                        class="token punctuation">=</span><span class="token punctuation">"</span>*{datePlanted}<span class="token punctuation">"</span></span> <span
                        class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span
                        class="token punctuation">"</span>small<span class="token punctuation">"</span></span> <span class="token attr-name"><span
                        class="token namespace">th:</span>errorclass</span><span class="token attr-value"><span class="token punctuation">=</span><span
                        class="token punctuation">"</span>fieldError<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span></code></pre>
                <p>If <code>datePlanted</code> has errors, this will render as:</p>
                <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span
                        class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span
                        class="token punctuation">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span
                        class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>datePlanted<span
                        class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span
                        class="token punctuation">=</span><span class="token punctuation">"</span>datePlanted<span
                        class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span
                        class="token punctuation">=</span><span class="token punctuation">"</span>2013-01-01<span
                        class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span
                        class="token punctuation">=</span><span class="token punctuation">"</span>small fieldError<span
                        class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span></code></pre>
            </section>
        </section>
        <section id="all-errors" class="level2"><h2>7.2 All errors</h2>
            <p>And what if we want to show all the errors in the form? We just need to query the <code>#fields.hasErrors(...)</code> and <code>#fields.errors(...)</code>
                methods with the <code>'*'</code> or <code>'all'</code> constants (which are equivalent):</p>
            <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span> <span
                    class="token attr-name"><span class="token namespace">th:</span>if</span><span class="token attr-value"><span
                    class="token punctuation">=</span><span class="token punctuation">"</span>${#fields.hasErrors(<span class="token punctuation">'</span>*<span
                    class="token punctuation">'</span>)}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name"><span
          class="token namespace">th:</span>each</span><span class="token attr-value"><span class="token punctuation">=</span><span
          class="token punctuation">"</span>err : ${#fields.errors(<span class="token punctuation">'</span>*<span class="token punctuation">'</span>)}<span
          class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span
          class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${err}<span
          class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Input is incorrect<span class="token tag"><span
                        class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span
        class="token punctuation">&gt;</span></span></code></pre>
            <p>As in the examples above, we could obtain all the errors and iterate them…</p>
            <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span
                    class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name"><span
          class="token namespace">th:</span>each</span><span class="token attr-value"><span class="token punctuation">=</span><span
          class="token punctuation">"</span>err : ${#fields.errors(<span class="token punctuation">'</span>*<span class="token punctuation">'</span>)}<span
          class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span
          class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${err}<span
          class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span
        class="token punctuation">&gt;</span></span></code></pre>
            <p>…as well as build a <code>&lt;br /&gt;</code>-separated list:</p>
            <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span
                    class="token attr-name"><span class="token namespace">th:</span>if</span><span class="token attr-value"><span
                    class="token punctuation">=</span><span class="token punctuation">"</span>${#fields.hasErrors(<span
                    class="token punctuation">'</span>all<span class="token punctuation">'</span>)}<span class="token punctuation">"</span></span> <span
                    class="token attr-name"><span class="token namespace">th:</span>errors</span><span class="token attr-value"><span class="token punctuation">=</span><span
                    class="token punctuation">"</span>*{all}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Incorrect date<span
                    class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span
                    class="token punctuation">&gt;</span></span></code></pre>
            <p>Finally note that <code>#fields.hasErrors('*')</code> is equivalent to <code>#fields.hasAnyErrors()</code> and <code>#fields.errors('*')</code>
                is equivalent to <code>#fields.allErrors()</code>. Use whichever syntax you prefer:</p>
            <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span
                    class="token attr-name"><span class="token namespace">th:</span>if</span><span class="token attr-value"><span
                    class="token punctuation">=</span><span class="token punctuation">"</span>${#fields.hasAnyErrors()}<span class="token punctuation">"</span></span><span
                    class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name"><span
          class="token namespace">th:</span>each</span><span class="token attr-value"><span class="token punctuation">=</span><span
          class="token punctuation">"</span>err : ${#fields.allErrors()}<span class="token punctuation">"</span></span> <span class="token attr-name"><span
          class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span
          class="token punctuation">"</span>${err}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>...<span
                        class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span
                        class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></code></pre>
        </section>
        <section id="global-errors" class="level2"><h2>7.3 Global errors</h2>
            <p>There is a third type of error in a Spring form: <em>global</em> errors. These are errors that are not associated with any specific fields in the
                form, but still exist.</p>
            <p>Thymeleaf offers the <code>global</code> constant for accessing these errors:</p>
            <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span> <span
                    class="token attr-name"><span class="token namespace">th:</span>if</span><span class="token attr-value"><span
                    class="token punctuation">=</span><span class="token punctuation">"</span>${#fields.hasErrors(<span class="token punctuation">'</span>global<span
                    class="token punctuation">'</span>)}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name"><span
          class="token namespace">th:</span>each</span><span class="token attr-value"><span class="token punctuation">=</span><span
          class="token punctuation">"</span>err : ${#fields.errors(<span class="token punctuation">'</span>global<span class="token punctuation">'</span>)}<span
          class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span
          class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${err}<span
          class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Input is incorrect<span class="token tag"><span
                        class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span
        class="token punctuation">&gt;</span></span></code></pre>
            <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span
                    class="token attr-name"><span class="token namespace">th:</span>if</span><span class="token attr-value"><span
                    class="token punctuation">=</span><span class="token punctuation">"</span>${#fields.hasErrors(<span class="token punctuation">'</span>global<span
                    class="token punctuation">'</span>)}<span class="token punctuation">"</span></span> <span class="token attr-name"><span
                    class="token namespace">th:</span>errors</span><span class="token attr-value"><span class="token punctuation">=</span><span
                    class="token punctuation">"</span>*{global}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Incorrect date<span
                    class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span
                    class="token punctuation">&gt;</span></span></code></pre>
            <p>…as well as equivalent <code>#fields.hasGlobalErrors()</code> and <code>#fields.globalErrors()</code> convenience methods:</p>
            <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span
                    class="token attr-name"><span class="token namespace">th:</span>if</span><span class="token attr-value"><span
                    class="token punctuation">=</span><span class="token punctuation">"</span>${#fields.hasGlobalErrors()}<span
                    class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name"><span
          class="token namespace">th:</span>each</span><span class="token attr-value"><span class="token punctuation">=</span><span
          class="token punctuation">"</span>err : ${#fields.globalErrors()}<span class="token punctuation">"</span></span> <span class="token attr-name"><span
          class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span
          class="token punctuation">"</span>${err}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>...<span
                        class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span
                        class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></code></pre>
        </section>
        <section id="displaying-errors-outside-forms" class="level2"><h2>7.4 Displaying errors outside forms</h2>
            <p>Form validation errors can also be displayed outside forms by using variable (<code>${...}</code>) instead of selection (<code>*{...}</code>)
                expressions and prefixing the name of the form-backing bean:</p>
            <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span
                    class="token attr-name"><span class="token namespace">th:</span>errors</span><span class="token attr-value"><span class="token punctuation">=</span><span
                    class="token punctuation">"</span>${myForm}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>...<span
                    class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name"><span
        class="token namespace">th:</span>errors</span><span class="token attr-value"><span class="token punctuation">=</span><span
        class="token punctuation">"</span>${myForm.date}<span class="token punctuation">"</span></span><span
        class="token punctuation">&gt;</span></span>...<span class="token tag"><span class="token tag"><span
                        class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name"><span
        class="token namespace">th:</span>errors</span><span class="token attr-value"><span class="token punctuation">=</span><span
        class="token punctuation">"</span>${myForm.*}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>...<span
                        class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span
                        class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name"><span
        class="token namespace">th:</span>if</span><span class="token attr-value"><span class="token punctuation">=</span><span
        class="token punctuation">"</span>${#fields.hasErrors(<span class="token punctuation">'</span>${myForm}<span class="token punctuation">'</span>)}<span
        class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>...<span class="token tag"><span class="token tag"><span
                        class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name"><span
        class="token namespace">th:</span>if</span><span class="token attr-value"><span class="token punctuation">=</span><span
        class="token punctuation">"</span>${#fields.hasErrors(<span class="token punctuation">'</span>${myForm.date}<span
        class="token punctuation">'</span>)}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>...<span
                        class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span
                        class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name"><span
        class="token namespace">th:</span>if</span><span class="token attr-value"><span class="token punctuation">=</span><span
        class="token punctuation">"</span>${#fields.hasErrors(<span class="token punctuation">'</span>${myForm.*}<span class="token punctuation">'</span>)}<span
        class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>...<span class="token tag"><span class="token tag"><span
                        class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name"><span
        class="token namespace">th:</span>object</span><span class="token attr-value"><span class="token punctuation">=</span><span
        class="token punctuation">"</span>${myForm}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    ...
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span></code></pre>
        </section>
        <section id="rich-error-objects" class="level2"><h2>7.5 Rich error objects</h2>
            <p>Thymeleaf offers the possibility to obtain form error information in the form of beans (instead of mere <em>strings</em>), with the <code>fieldName</code>
                (String), <code>message</code> (String) and <code>global</code> (boolean) attributes.</p>
            <p>These errors can be obtained by means of the <code>#fields.detailedErrors()</code> utility method:</p>
            <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span
                    class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name"><span
            class="token namespace">th:</span>each</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>e : ${#fields.detailedErrors()}<span
            class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">th:</span>class</span><span
            class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${e.global}? globalerr : fielderr<span
            class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name"><span
                class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span
                class="token punctuation">"</span>${e.global}? <span class="token punctuation">'</span>*<span class="token punctuation">'</span> : ${e.fieldName}<span
                class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>The field name<span class="token tag"><span
                        class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span> |
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name"><span
                class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span
                class="token punctuation">"</span>${e.message}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>The error message<span
                        class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span
                        class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span
        class="token punctuation">&gt;</span></span></code></pre>
        </section>
    </section>
    <section id="its-still-a-prototype" class="level1"><h1>8 It’s still a Prototype!</h1>
        <p>Our application is ready now. But let’s have a second look at the <code>.html</code> page we created…</p>
        <p>One of the nicest consequences of working with Thymeleaf is that after all this functionality we have added to our HTML, we can still use it as a
            prototype (we say it is a <em>Natural Template</em>). Let’s open <code>seedstartermng.html</code> directly in our browser without executing our
            application:</p>
        <figure><img src="images/thymeleafspring/stsm-natural-templating.png" alt="STSM natural templating">
            <figcaption>STSM natural templating</figcaption>
        </figure>
        <p>There it is! It’s not a working application, it’s not real data… but it is a perfectly valid prototype made up of perfectly displayable HTML
            code.</p></section>
    <section id="the-conversion-service" class="level1"><h1>9 The Conversion Service</h1>
        <section id="configuration" class="level2"><h2>9.1 Configuration</h2>
            <p>As explained before, Thymeleaf can make use of a Conversion Service registered at the Application Context. Our application configuration class,
                by extending Spring’s own <code>WebMvcConfigurerAdapter</code> helper, will automatically register such conversion service, which we can
                configure by adding the <em>formatters</em> that we need. Let’s see again what it looks like:</p>
            <pre class=" language-java"><code class=" language-java"><span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addFormatters</span><span
                        class="token punctuation">(</span><span class="token keyword">final</span> FormatterRegistry registry<span
                        class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">addFormatters</span><span
                        class="token punctuation">(</span>registry<span class="token punctuation">)</span><span class="token punctuation">;</span>
    registry<span class="token punctuation">.</span><span class="token function">addFormatter</span><span class="token punctuation">(</span><span
                        class="token function">varietyFormatter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span
                        class="token punctuation">)</span><span class="token punctuation">;</span>
    registry<span class="token punctuation">.</span><span class="token function">addFormatter</span><span class="token punctuation">(</span><span
                        class="token function">dateFormatter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span
                        class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token annotation punctuation">@Bean</span>
<span class="token keyword">public</span> VarietyFormatter <span class="token function">varietyFormatter</span><span class="token punctuation">(</span><span
                        class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">VarietyFormatter</span><span
                        class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token annotation punctuation">@Bean</span>
<span class="token keyword">public</span> DateFormatter <span class="token function">dateFormatter</span><span class="token punctuation">(</span><span
                        class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">DateFormatter</span><span
                        class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
        </section>
        <section id="double-brace-syntax" class="level2"><h2>9.1 Double-brace syntax</h2>
            <p>The Conversion Service can be easily applied in order to convert/format any object into String. This is done by means of the double-brace
                expression syntax:</p>
            <ul>
                <li>For variable expressions: <code>${{ ... }}</code></li>
                <li>For selection expressions: <code>*{{ ... }}</code></li>
            </ul>
            <p>So, for example, given an Integer-to-String converter that adds commas as a thousands separator, this:</p>
            <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span
                    class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span
                    class="token punctuation">=</span><span class="token punctuation">"</span>${val}<span class="token punctuation">"</span></span><span
                    class="token punctuation">&gt;</span></span>...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span
                    class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span
        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${{ val }}<span
        class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>...<span class="token tag"><span class="token tag"><span
                        class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span></code></pre>
            <p>…should result in:</p>
            <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span
                    class="token punctuation">&gt;</span></span>1234567890<span class="token tag"><span class="token tag"><span
                    class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>1,234,567,890<span
                        class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span
                        class="token punctuation">&gt;</span></span></code></pre>
        </section>
        <section id="use-in-forms" class="level2"><h2>9.2 Use in forms</h2>
            <p>We saw before that every <code>th:field</code> attribute will always apply the conversion service, so this:</p>
            <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span
                    class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span
                    class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name"><span
                    class="token namespace">th:</span>field</span><span class="token attr-value"><span class="token punctuation">=</span><span
                    class="token punctuation">"</span>*{datePlanted}<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span></code></pre>
            <p>…is actually equivalent to:</p>
            <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span
                    class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span
                    class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name"><span
                    class="token namespace">th:</span>field</span><span class="token attr-value"><span class="token punctuation">=</span><span
                    class="token punctuation">"</span>*{{ datePlanted }}<span class="token punctuation">"</span></span> <span
                    class="token punctuation">/&gt;</span></span></code></pre>
            <p>Note that, per requirement of Spring, this is the only scenario in which the Conversion Service is applied in expressions using single-brace
                syntax.</p></section>
        <section id="conversions-utility-object" class="level2"><h2>9.3 <code>#conversions</code> utility object</h2>
            <p>The <code>#conversions</code> expression utility object allows the manual execution of the Conversion Service wherever needed:</p>
            <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span
                    class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span
                    class="token punctuation">=</span><span class="token punctuation">"</span>${<span class="token punctuation">'</span>Val: <span
                    class="token punctuation">'</span> + #conversions.convert(val,<span class="token punctuation">'</span>String<span class="token punctuation">'</span>)}<span
                    class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>...<span class="token tag"><span
                    class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span></code></pre>
            <p>Syntax for this utility object:</p>
            <ul>
                <li><code>#conversions.convert(Object,Class)</code>: converts the object to the specified class.</li>
                <li><code>#conversions.convert(Object,String)</code>: same as above, but specifying the target class as a String (note the
                    <code>java.lang.</code> package can be ommitted).
                </li>
            </ul>
        </section>
    </section>
    <section id="rendering-template-fragments" class="level1"><h1>10 Rendering Template Fragments</h1>
        <p>Thymeleaf offers the possibility to render only part of a template as the result of its execution: a <em>fragment</em>.</p>
        <p>This can be a useful componentization tool. For example, it can be used at controllers that execute on AJAX calls, which might return markup
            fragments of a page that is already loaded at the browser (for updating a select, enabling/disabling buttons…).</p>
        <p>Fragmentary rendering can be achieved by using Thymeleaf’s <em>fragment specs</em>: objects implementing the <code>org.thymeleaf.fragment.IFragmentSpec</code>
            interface.</p>
        <p>The most common of these implementations is <code>org.thymeleaf.standard.fragment.StandardDOMSelectorFragmentSpec</code>, which allows specifying a
            fragment using a DOM Selector exactly like the ones used at <code>th:include</code> or <code>th:replace</code>.</p>
        <section id="specifying-fragments-in-view-beans" class="level2"><h2>10.1 Specifying fragments in view beans</h2>
            <p><em>View beans</em> are beans of the <code>org.thymeleaf.spring6.view.ThymeleafView</code> class declared at the application context
                (<code>@Bean</code> declarations if you are using Java configuration). They allow the specification of fragments like this:</p>
            <pre class=" language-java"><code class=" language-java"><span class="token annotation punctuation">@Bean</span><span
                    class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">"content-part"</span><span
                    class="token punctuation">)</span>
<span class="token annotation punctuation">@Scope</span><span class="token punctuation">(</span><span class="token string">"prototype"</span><span
                        class="token punctuation">)</span>
<span class="token keyword">public</span> ThymeleafView <span class="token function">someViewBean</span><span class="token punctuation">(</span><span
                        class="token punctuation">)</span> <span class="token punctuation">{</span>
    ThymeleafView view <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ThymeleafView</span><span
                        class="token punctuation">(</span><span class="token string">"index"</span><span class="token punctuation">)</span><span
                        class="token punctuation">;</span> <span class="token comment" spellcheck="true">// templateName = 'index'</span>
    view<span class="token punctuation">.</span><span class="token function">setMarkupSelector</span><span class="token punctuation">(</span><span
                        class="token string">"content"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> view<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
            <p>Given the above bean definition, if our controller returns <code>content-part</code> (the name of the above bean)…</p>
            <pre class=" language-java"><code class=" language-java"><span class="token annotation punctuation">@RequestMapping</span><span
                    class="token punctuation">(</span><span class="token string">"/showContentPart"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> String <span class="token function">showContentPart</span><span class="token punctuation">(</span><span
                        class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token keyword">return</span> <span class="token string">"content-part"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
            <p>…thymeleaf will return only the <code>content</code> fragment of the <code>index</code> template – which location will probably be something like
                <code>/WEB-INF/templates/index.html</code>, once prefix and suffix are applied. So the result will be completely equivalent to specifying <code>index
                    :: content</code>:</p>
            <pre class=" language-html"><code class=" language-html"><span class="token doctype">&lt;!DOCTYPE html&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
  ...
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    ...
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name"><span
            class="token namespace">th:</span>fragment</span><span class="token attr-value"><span class="token punctuation">=</span><span
            class="token punctuation">"</span>content<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
      Only this div will be rendered!
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    ...
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span></code></pre>
            <p>Note also that, thanks to the power of Thymeleaf Markup Selectors, we could select a fragment in a template without needing any
                <code>th:fragment</code> attributes at all. Let’s use the <code>id</code> attribute, for example:</p>
            <pre class=" language-java"><code class=" language-java"><span class="token annotation punctuation">@Bean</span><span
                    class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">"content-part"</span><span
                    class="token punctuation">)</span>
<span class="token annotation punctuation">@Scope</span><span class="token punctuation">(</span><span class="token string">"prototype"</span><span
                        class="token punctuation">)</span>
<span class="token keyword">public</span> ThymeleafView <span class="token function">someViewBean</span><span class="token punctuation">(</span><span
                        class="token punctuation">)</span> <span class="token punctuation">{</span>
    ThymeleafView view <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ThymeleafView</span><span
                        class="token punctuation">(</span><span class="token string">"index"</span><span class="token punctuation">)</span><span
                        class="token punctuation">;</span> <span class="token comment" spellcheck="true">// templateName = 'index'</span>
    view<span class="token punctuation">.</span><span class="token function">setMarkupSelector</span><span class="token punctuation">(</span><span
                        class="token string">"#content"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> view<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
            <p>…which will perfectly select:</p>
            <pre class=" language-html"><code class=" language-html"><span class="token doctype">&lt;!DOCTYPE html&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
  ...
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    ...
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span
            class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>content<span
            class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
      Only this div will be rendered!
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    ...
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span></code></pre>
        </section>
        <section id="specifying-fragments-in-controller-return-values" class="level2"><h2>10.2 Specifying fragments in controller return values</h2>
            <p>Instead of declaring <em>view beans</em>, fragments can be specified from the controllers themselves by using the syntax of <em>fragment
                expressions</em>. Just like in <code>th:insert</code> or <code>th:replace</code> attributes:</p>
            <pre class=" language-java"><code class=" language-java"><span class="token annotation punctuation">@RequestMapping</span><span
                    class="token punctuation">(</span><span class="token string">"/showContentPart"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> String <span class="token function">showContentPart</span><span class="token punctuation">(</span><span
                        class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token keyword">return</span> <span class="token string">"index :: content"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
            <p>Of course, again the full power of DOM Selectors is available, so we could select our fragment based on standard HTML attributes, like <code>id="content"</code>:
            </p>
            <pre class=" language-java"><code class=" language-java"><span class="token annotation punctuation">@RequestMapping</span><span
                    class="token punctuation">(</span><span class="token string">"/showContentPart"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> String <span class="token function">showContentPart</span><span class="token punctuation">(</span><span
                        class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token keyword">return</span> <span class="token string">"index :: #content"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
            <p>And we can also use parameters, like:</p>
            <pre class=" language-java"><code class=" language-java"><span class="token annotation punctuation">@RequestMapping</span><span
                    class="token punctuation">(</span><span class="token string">"/showContentPart"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> String <span class="token function">showContentPart</span><span class="token punctuation">(</span><span
                        class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token keyword">return</span> <span class="token string">"index :: #content ('myvalue')"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
        </section>
    </section>
    <section id="advanced-integration-features" class="level1"><h1>11 Advanced Integration Features</h1>
        <section id="integration-with-requestdatavalueprocessor" class="level2"><h2>11.1 Integration with <code>RequestDataValueProcessor</code></h2>
            <p>Thymeleaf seamlessly integrates with Spring’s <code>RequestDataValueProcessor</code> interface. This interface allows the interception of link
                URLs, form URLs and form field values before they are written to the markup result, as well as transparently adding hidden form fields that
                enable security features like e.g.&nbsp;protection agains CSRF (Cross-Site Request Forgery).</p>
            <p>An implementation of <code>RequestDataValueProcessor</code> can be easily configured at the Application Context. It needs to implement the <code>org.springframework.web.servlet.support.RequestDataValueProcessor</code>
                interface and have <code>requestDataValueProcessor</code> as a bean name:</p>
            <pre class=" language-java"><code class=" language-java"><span class="token annotation punctuation">@Bean</span>
<span class="token keyword">public</span> RequestDataValueProcessor <span class="token function">requestDataValueProcessor</span><span
                        class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">MyRequestDataValueProcessor</span><span
                        class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
            <p>…and Thymeleaf will use it this way:</p>
            <ul>
                <li><p><code>th:href</code> and <code>th:src</code> call <code>RequestDataValueProcessor.processUrl(...)</code> before rendering the URL.</p>
                </li>
                <li><p><code>th:action</code> calls <code>RequestDataValueProcessor.processAction(...)</code> before rendering the form’s <code>action</code>
                    attribute, and additionally it detects when this attribute is being applied on a <code>&lt;form&gt;</code> tag —which should be the only
                    place, anyway—, and in such case calls <code>RequestDataValueProcessor.getExtraHiddenFields(...)</code> and adds the returned hidden fields
                    just before the closing <code>&lt;/form&gt;</code> tag.</p></li>
                <li><p><code>th:value</code> calls <code>RequestDataValueProcessor.processFormFieldValue(...)</code> for rendering the value it refers to,
                    unless there is a <code>th:field</code> present in the same tag (in which case <code>th:field</code> will take care).</p></li>
                <li><p><code>th:field</code> calls <code>RequestDataValueProcessor.processFormFieldValue(...)</code> for rendering the value of the field it
                    applies to (or the tag body if it is a <code>&lt;textarea&gt;</code>).</p></li>
            </ul>
            <blockquote><p>Note there are very few scenarios in which you would need to explicitly implement <code>RequestDataValueProcessor</code> in your
                application. In most cases, this will be used automatically by security libraries you transparently use, like e.g.&nbsp;Spring Security’s CSRF
                support.</p></blockquote>
        </section>
        <section id="building-uris-to-controllers" class="level2"><h2>11.1 Building URIs to controllers</h2>
            <p>Since version 4.1, Spring allows the possibility to build links to annotated controllers directly from views, without the need to know the URIs
                these controllers are mapped to.</p>
            <p>In Thymeleaf, this can be achieved by means of the <code>#mvc.url(...)</code> expression object method, which allows the specification of
                controller methods by the capital letters of the controller class they are in, followed by the name of the method itself. This is equivalent to
                JSP’s <code>spring:mvcUrl(...)</code> custom function.</p>
            <p>For example, for:</p>
            <pre class=" language-java"><code class=" language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span
                    class="token class-name">ExampleController</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/data"</span><span
                        class="token punctuation">)</span>
    <span class="token keyword">public</span> String <span class="token function">getData</span><span class="token punctuation">(</span>Model model<span
                        class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">.</span><span
                        class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token keyword">return</span> <span
                        class="token string">"template"</span> <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/data"</span><span
                        class="token punctuation">)</span>
    <span class="token keyword">public</span> String <span class="token function">getDataParam</span><span class="token punctuation">(</span><span
                        class="token annotation punctuation">@RequestParam</span> String type<span class="token punctuation">)</span> <span
                        class="token punctuation">{</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span
                        class="token punctuation">.</span> <span class="token keyword">return</span> <span class="token string">"template"</span> <span
                        class="token punctuation">}</span>

<span class="token punctuation">}</span></code></pre>
            <p>The following code will create a link to it:</p>
            <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span
                    class="token attr-name"><span class="token namespace">th:</span>href</span><span class="token attr-value"><span
                    class="token punctuation">=</span><span class="token punctuation">"</span>${(#mvc.url(<span
                    class="token punctuation">'</span>EC#getData<span class="token punctuation">'</span>)).build()}<span
                    class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Get Data Param<span class="token tag"><span
                    class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name"><span class="token namespace">th:</span>href</span><span
        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${(#mvc.url(<span
        class="token punctuation">'</span>EC#getDataParam<span class="token punctuation">'</span>).arg(0,<span class="token punctuation">'</span>internal<span
        class="token punctuation">'</span>)).build()}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Get Data Param<span
                        class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span
                        class="token punctuation">&gt;</span></span></code></pre>
            <p>You can read more about this mechanism at
                http://docs.spring.io/spring-framework/docs/4.1.2.RELEASE/spring-framework-reference/html/mvc.html#mvc-links-to-controllers-from-views</p>
        </section>
    </section>
    <section id="spring-webflow-integration" class="level1"><h1>12 Spring WebFlow integration</h1>
        <section id="basic-configuration" class="level2"><h2>12.1 Basic configuration</h2>
            <p>The Thymeleaf + Spring integration packages include integration with Spring WebFlow.</p>
            <p><em>Note: Spring WebFlow 3.0+ is required when Thymeleaf is used with Spring 6, and Spring WebFlow 2.5 is needed with Spring 5.</em></p>
            <p>WebFlow includes some AJAX capabilities for rendering fragments of the displayed page when specific events (<em>transitions</em>) are triggered,
                and in order to enable Thymeleaf to attend these AJAX requests, we will have to use a different <code>ViewResolver</code> implementation,
                configured like this:</p>
            <pre class=" language-java"><code class=" language-java"><span class="token annotation punctuation">@Bean</span>
<span class="token keyword">public</span> FlowDefinitionRegistry <span class="token function">flowRegistry</span><span class="token punctuation">(</span><span
                        class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">// NOTE: Additional configuration might be needed in your app</span>
    <span class="token keyword">return</span> <span class="token function">getFlowDefinitionRegistryBuilder</span><span class="token punctuation">(</span><span
                        class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">addFlowLocation</span><span class="token punctuation">(</span><span
                        class="token string">"..."</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">setFlowBuilderServices</span><span class="token punctuation">(</span><span
                        class="token function">flowBuilderServices</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span
                        class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span
                        class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token annotation punctuation">@Bean</span>
<span class="token keyword">public</span> FlowExecutor <span class="token function">flowExecutor</span><span class="token punctuation">(</span><span
                        class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">// NOTE: Additional configuration might be needed in your app</span>
    <span class="token keyword">return</span> <span class="token function">getFlowExecutorBuilder</span><span class="token punctuation">(</span><span
                        class="token function">flowRegistry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span
                        class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span
                        class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token annotation punctuation">@Bean</span>
<span class="token keyword">public</span> FlowBuilderServices <span class="token function">flowBuilderServices</span><span
                        class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">// NOTE: Additional configuration might be needed in your app</span>
    <span class="token keyword">return</span> <span class="token function">getFlowBuilderServicesBuilder</span><span class="token punctuation">(</span><span
                        class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">setViewFactoryCreator</span><span class="token punctuation">(</span><span
                        class="token function">viewFactoryCreator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span
                        class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span
                        class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token annotation punctuation">@Bean</span>
<span class="token keyword">public</span> ViewFactoryCreator <span class="token function">viewFactoryCreator</span><span class="token punctuation">(</span><span
                        class="token punctuation">)</span> <span class="token punctuation">{</span>
    MvcViewFactoryCreator factoryCreator <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MvcViewFactoryCreator</span><span
                        class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    factoryCreator<span class="token punctuation">.</span><span class="token function">setViewResolvers</span><span class="token punctuation">(</span>
            Collections<span class="token punctuation">.</span><span class="token function">singletonList</span><span class="token punctuation">(</span><span
                        class="token function">thymeleafViewResolver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span
                        class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    factoryCreator<span class="token punctuation">.</span><span class="token function">setUseSpringBeanBinding</span><span
                        class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span
                        class="token punctuation">;</span>
    <span class="token keyword">return</span> factoryCreator<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token annotation punctuation">@Bean</span>
<span class="token keyword">public</span> ViewResolver <span class="token function">thymeleafViewResolver</span><span class="token punctuation">(</span><span
                        class="token punctuation">)</span> <span class="token punctuation">{</span>
    AjaxThymeleafViewResolver viewResolver <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AjaxThymeleafViewResolver</span><span
                        class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment" spellcheck="true">// We need to set a special ThymeleafView implementation: FlowAjaxThymeleafView</span>
    viewResolver<span class="token punctuation">.</span><span class="token function">setViewClass</span><span class="token punctuation">(</span>FlowAjaxThymeleafView<span
                        class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span
                        class="token punctuation">;</span>
    viewResolver<span class="token punctuation">.</span><span class="token function">setTemplateEngine</span><span class="token punctuation">(</span><span
                        class="token function">templateEngine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span
                        class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> viewResolver<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
            <p>Note the above is not a complete configuration: you will still need to configure your handlers, etc. Refer to the Spring WebFlow documentation
                for that.</p>
            <p>From here on, you can specify Thymeleaf templates in your view-state’s:</p>
            <pre class=" language-xml"><code class=" language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view-state</span> <span
                    class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span
                    class="token punctuation">"</span>detail<span class="token punctuation">"</span></span> <span class="token attr-name">view</span><span
                    class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>bookingDetail<span
                    class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    ...
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view-state</span><span class="token punctuation">&gt;</span></span></code></pre>
            <p>In the above example, <code>bookingDetail</code> is a Thymeleaf template specified in the usual way, understandable by any of the <em>Template
                Resolvers</em> configured at the <code>TemplateEngine</code>.</p></section>
        <section id="ajax-fragments-in-spring-webflow" class="level2"><h2>12.2 AJAX fragments in Spring WebFlow</h2>
            <blockquote><p>Note that what is explained here is just the way to create AJAX fragments to be used with Spring WebFlow. If you are not using
                WebFlow, creating a Spring MVC controller that responds to an AJAX request and returns a chunk of HTML is as straightforward as creating any
                other template-returning controller, with the only exception that you would probably be returning a fragment like <code>"main :: admin"</code>
                from your controller method.</p></blockquote>
            <p>WebFlow allows the specification of fragments to be rendered via AJAX with <code>&lt;render&gt;</code> tags, like this:</p>
            <pre class=" language-xml"><code class=" language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view-state</span> <span
                    class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span
                    class="token punctuation">"</span>detail<span class="token punctuation">"</span></span> <span class="token attr-name">view</span><span
                    class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>bookingDetail<span
                    class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>transition</span> <span class="token attr-name">on</span><span
            class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>updateData<span
            class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>render</span> <span
                class="token attr-name">fragments</span><span class="token attr-value"><span class="token punctuation">=</span><span
                class="token punctuation">"</span>hoteldata<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>transition</span><span
            class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view-state</span><span class="token punctuation">&gt;</span></span></code></pre>
            <p>These fragments (<code>hoteldata</code>, in this case) can be a comma-separated list of fragments specified at the markup with
                <code>th:fragment</code>:</p>
            <pre class=" language-xml"><code class=" language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span
                    class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span
                    class="token punctuation">"</span>data<span class="token punctuation">"</span></span> <span class="token attr-name"><span
                    class="token namespace">th:</span>fragment</span><span class="token attr-value"><span class="token punctuation">=</span><span
                    class="token punctuation">"</span>hoteldata<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    This is a content to be changed
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></code></pre>
            <p><em>Always remember that the specified fragments must have an <code>id</code> attribute, so that the Spring JavaScript libraries running on the
                browser are capable of substituting the markup.</em></p>
            <p><code>&lt;render&gt;</code> tags can also be specified using DOM selectors:</p>
            <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view-state</span> <span
                    class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span
                    class="token punctuation">"</span>detail<span class="token punctuation">"</span></span> <span class="token attr-name">view</span><span
                    class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>bookingDetail<span
                    class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>transition</span> <span class="token attr-name">on</span><span
            class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>updateData<span
            class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>render</span> <span
                class="token attr-name">fragments</span><span class="token attr-value"><span class="token punctuation">=</span><span
                class="token punctuation">"</span>[//div[@id<span class="token punctuation">=</span><span class="token punctuation">'</span>data<span
                class="token punctuation">'</span>]]<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>transition</span><span
            class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view-state</span><span class="token punctuation">&gt;</span></span></code></pre>
            <p>…and this will mean no <code>th:fragment</code> is needed:</p>
            <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span
                    class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span
                    class="token punctuation">"</span>data<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    This is a content to be changed
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></code></pre>
            <p>As for the code that triggers the <code>updateData</code> transition, it looks like:</p>
            <pre class=" language-html"><code class=" language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span
                    class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span
                    class="token punctuation">"</span>text/javascript<span class="token punctuation">"</span></span> <span class="token attr-name"><span
                    class="token namespace">th:</span>src</span><span class="token attr-value"><span class="token punctuation">=</span><span
                    class="token punctuation">"</span>@{/resources/dojo/dojo.js}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span
                    class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span
                    class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span
        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text/javascript<span class="token punctuation">"</span></span> <span
        class="token attr-name"><span class="token namespace">th:</span>src</span><span class="token attr-value"><span class="token punctuation">=</span><span
        class="token punctuation">"</span>@{/resources/spring/Spring.js}<span class="token punctuation">"</span></span><span
        class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span
                        class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span
        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text/javascript<span class="token punctuation">"</span></span> <span
        class="token attr-name"><span class="token namespace">th:</span>src</span><span class="token attr-value"><span class="token punctuation">=</span><span
        class="token punctuation">"</span>@{/resources/spring/Spring-Dojo.js}<span class="token punctuation">"</span></span><span
        class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span
                        class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

  ...

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">id</span><span
        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>triggerform<span
        class="token punctuation">"</span></span> <span class="token attr-name">method</span><span class="token attr-value"><span
        class="token punctuation">=</span><span class="token punctuation">"</span>post<span class="token punctuation">"</span></span> <span
        class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation">=</span><span
        class="token punctuation">"</span><span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span
            class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>submit<span
            class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span
            class="token punctuation">=</span><span class="token punctuation">"</span>doUpdate<span class="token punctuation">"</span></span> <span
            class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>_eventId_updateData<span
            class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span
            class="token punctuation">=</span><span class="token punctuation">"</span>Update now!<span class="token punctuation">"</span></span> <span
            class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span
        class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text/javascript<span class="token punctuation">"</span></span><span
        class="token punctuation">&gt;</span></span>
    Spring.addDecoration(
        new Spring.AjaxEventDecoration({formId:'triggerform',elementId:'doUpdate',event:'onclick'}));
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span
        class="token punctuation">&gt;</span></span></code></pre>
        </section>
    </section>
</div>
