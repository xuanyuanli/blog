---
title: CSS进阶-滤镜与混合模式
date: 2019-03-20 14:00:00
permalink: /pages/css-filter-blend/
categories: 
  - 前端
  - HTML & CSS
tags: 
  - CSS
author: 
  name: 轩辕李
  link: https://github.com/xuanyuanli
---

CSS滤镜（Filter）和混合模式（Blend Mode）是实现丰富视觉效果的强大工具。它们能让你轻松创建模糊、颜色调整、图层混合等效果，而无需依赖图片编辑软件。

本文将系统介绍CSS滤镜函数、混合模式以及它们在实际项目中的应用技巧。

<!-- more -->

## 一、CSS滤镜（Filter）

### 1.1 filter属性概述

`filter` 属性对元素应用图形效果，如模糊、颜色偏移等。

```css
/* 基础语法 */
.element {
  filter: <filter-function>;
}

/* 多个滤镜（按顺序应用） */
.element {
  filter: blur(5px) brightness(1.2) contrast(1.1);
}

/* 移除滤镜 */
.element {
  filter: none; /* 默认值 */
}
```

### 1.2 blur（模糊）

创建高斯模糊效果。

```css
/* 语法：blur(radius) */

/* 轻微模糊 */
.blur-light {
  filter: blur(2px);
}

/* 中度模糊 */
.blur-medium {
  filter: blur(5px);
}

/* 重度模糊 */
.blur-heavy {
  filter: blur(10px);
}

/* 实战：背景模糊（毛玻璃效果） */
.glass-effect {
  backdrop-filter: blur(10px);
  background: rgba(255, 255, 255, 0.2);
  border: 1px solid rgba(255, 255, 255, 0.3);
}

/* 实战：图片加载时的模糊占位 */
.lazy-image {
  filter: blur(20px);
  transition: filter 0.3s ease;
}

.lazy-image.loaded {
  filter: blur(0);
}
```

### 1.3 brightness（亮度）

调整图像亮度。

```css
/* 语法：brightness(amount) */
/* 0 = 全黑，1 = 原始，>1 = 更亮 */

/* 变暗 */
.darker {
  filter: brightness(0.5); /* 50%亮度 */
}

/* 正常 */
.normal {
  filter: brightness(1); /* 100%亮度 */
}

/* 变亮 */
.brighter {
  filter: brightness(1.5); /* 150%亮度 */
}

/* 实战：悬停时变亮 */
.card {
  filter: brightness(0.9);
  transition: filter 0.3s ease;
}

.card:hover {
  filter: brightness(1.1);
}

/* 实战：夜间模式调暗 */
.night-mode img {
  filter: brightness(0.7);
}
```

### 1.4 contrast（对比度）

调整图像对比度。

```css
/* 语法：contrast(amount) */
/* 0 = 灰色，1 = 原始，>1 = 更高对比度 */

/* 降低对比度 */
.low-contrast {
  filter: contrast(0.5);
}

/* 正常对比度 */
.normal-contrast {
  filter: contrast(1);
}

/* 增强对比度 */
.high-contrast {
  filter: contrast(1.5);
}

/* 实战：增强文字清晰度 */
.sharp-text {
  filter: contrast(1.2) brightness(1.1);
}

/* 实战：弱化背景图 */
.background-image {
  filter: contrast(0.8) brightness(0.9);
}
```

### 1.5 grayscale（灰度）

将图像转换为灰度。

```css
/* 语法：grayscale(amount) */
/* 0 = 彩色，1 = 完全灰度 */

/* 彩色 */
.color {
  filter: grayscale(0);
}

/* 部分灰度 */
.semi-gray {
  filter: grayscale(0.5);
}

/* 完全灰度 */
.full-gray {
  filter: grayscale(1);
}

/* 实战：图片悬停时彩色 */
.image-gray {
  filter: grayscale(1);
  transition: filter 0.3s ease;
}

.image-gray:hover {
  filter: grayscale(0);
}

/* 实战：禁用状态 */
button:disabled {
  filter: grayscale(1);
  opacity: 0.6;
  cursor: not-allowed;
}
```

### 1.6 sepia（褐色/复古）

给图像添加褐色调，产生复古照片效果。

```css
/* 语法：sepia(amount) */
/* 0 = 无效果，1 = 完全褐色 */

/* 轻微复古 */
.vintage-light {
  filter: sepia(0.3);
}

/* 中度复古 */
.vintage-medium {
  filter: sepia(0.6);
}

/* 完全复古 */
.vintage-full {
  filter: sepia(1);
}

/* 实战：老照片效果 */
.old-photo {
  filter: sepia(0.8) contrast(1.2) brightness(0.9);
}
```

### 1.7 saturate（饱和度）

调整图像颜色饱和度。

```css
/* 语法：saturate(amount) */
/* 0 = 完全不饱和（灰度），1 = 原始，>1 = 过饱和 */

/* 降低饱和度 */
.desaturate {
  filter: saturate(0.5);
}

/* 正常饱和度 */
.normal-saturate {
  filter: saturate(1);
}

/* 增强饱和度 */
.over-saturate {
  filter: saturate(2);
}

/* 实战：鲜艳的图片 */
.vibrant {
  filter: saturate(1.5) contrast(1.1);
}

/* 实战：柔和的配色 */
.soft-colors {
  filter: saturate(0.7);
}
```

### 1.8 hue-rotate（色相旋转）

旋转图像色相环。

```css
/* 语法：hue-rotate(angle) */
/* 0deg = 原始，360deg = 旋转一圈回到原始 */

/* 旋转90度 */
.hue-90 {
  filter: hue-rotate(90deg);
}

/* 旋转180度（反色效果） */
.hue-180 {
  filter: hue-rotate(180deg);
}

/* 完整一圈 */
.hue-360 {
  filter: hue-rotate(360deg); /* 回到原始 */
}

/* 实战：动态色相变化 */
.color-shift {
  animation: hue-shift 3s linear infinite;
}

@keyframes hue-shift {
  from {
    filter: hue-rotate(0deg);
  }
  to {
    filter: hue-rotate(360deg);
  }
}

/* 实战：主题变色 */
.theme-blue {
  filter: hue-rotate(0deg);
}

.theme-green {
  filter: hue-rotate(60deg);
}

.theme-purple {
  filter: hue-rotate(-60deg);
}
```

### 1.9 invert（反转）

反转图像颜色。

```css
/* 语法：invert(amount) */
/* 0 = 原始，1 = 完全反转 */

/* 原始 */
.normal {
  filter: invert(0);
}

/* 部分反转 */
.semi-invert {
  filter: invert(0.5);
}

/* 完全反转 */
.full-invert {
  filter: invert(1);
}

/* 实战：暗黑模式图标 */
.dark-mode .icon {
  filter: invert(1);
}

/* 实战：负片效果 */
.negative {
  filter: invert(1) hue-rotate(180deg);
}
```

### 1.10 opacity（透明度）

调整图像透明度（与 `opacity` 属性类似，但在滤镜中可组合）。

```css
/* 语法：opacity(amount) */
/* 0 = 完全透明，1 = 完全不透明 */

/* 半透明 */
.semi-transparent {
  filter: opacity(0.5);
}

/* 实战：组合滤镜 */
.faded-image {
  filter: opacity(0.8) grayscale(0.3) blur(1px);
}

/* vs 普通opacity属性 */
.element {
  opacity: 0.5; /* 包括子元素都会半透明 */
}

.element {
  filter: opacity(0.5); /* 仅元素本身，可与其他滤镜组合 */
}
```

### 1.11 drop-shadow（投影）

为元素添加投影，类似 `box-shadow` 但遵循元素形状（包括透明区域）。

```css
/* 语法：drop-shadow(offset-x offset-y blur-radius color) */

/* 基础投影 */
.shadow {
  filter: drop-shadow(2px 2px 4px rgba(0, 0, 0, 0.3));
}

/* 多重投影 */
.multi-shadow {
  filter: 
    drop-shadow(2px 2px 4px rgba(0, 0, 0, 0.3))
    drop-shadow(-2px -2px 4px rgba(255, 255, 255, 0.5));
}

/* drop-shadow vs box-shadow */
.box-shadow-demo {
  box-shadow: 5px 5px 10px rgba(0, 0, 0, 0.5);
  /* 投影是矩形，不考虑透明区域 */
}

.drop-shadow-demo {
  filter: drop-shadow(5px 5px 10px rgba(0, 0, 0, 0.5));
  /* 投影跟随PNG图片的实际形状 */
}

/* 实战：图标投影 */
.icon {
  filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.2));
}

/* 实战：发光效果 */
.glow {
  filter: 
    drop-shadow(0 0 10px currentColor)
    drop-shadow(0 0 20px currentColor);
}
```

### 1.12 url（SVG滤镜）

引用SVG滤镜进行更复杂的效果。

```html
<!-- SVG滤镜定义 -->
<svg style="display: none;">
  <defs>
    <filter id="turbulence">
      <feTurbulence type="turbulence" baseFrequency="0.05" numOctaves="2" result="turbulence"/>
      <feDisplacementMap in2="turbulence" in="SourceGraphic" scale="20" xChannelSelector="R" yChannelSelector="G"/>
    </filter>
  </defs>
</svg>
```

```css
/* 使用SVG滤镜 */
.distorted {
  filter: url(#turbulence);
}

/* 组合SVG滤镜和CSS滤镜 */
.combined {
  filter: url(#turbulence) blur(2px);
}
```

### 1.13 backdrop-filter（背景滤镜）

对元素背景区域应用滤镜（毛玻璃效果）。

```css
/* 毛玻璃效果 */
.glass {
  backdrop-filter: blur(10px);
  background: rgba(255, 255, 255, 0.2);
  border: 1px solid rgba(255, 255, 255, 0.3);
}

/* iOS风格毛玻璃 */
.ios-glass {
  backdrop-filter: blur(20px) saturate(180%);
  background: rgba(255, 255, 255, 0.7);
}

/* 实战：模态框背景 */
.modal-backdrop {
  backdrop-filter: blur(5px) brightness(0.7);
  background: rgba(0, 0, 0, 0.3);
}

/* 实战：导航栏 */
.navbar {
  backdrop-filter: blur(10px);
  background: rgba(255, 255, 255, 0.8);
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
}
```

## 二、混合模式（Blend Mode）

### 2.1 mix-blend-mode（元素混合模式）

定义元素内容如何与其背景混合。

```css
/* 语法 */
.element {
  mix-blend-mode: <blend-mode>;
}

/* 混合模式值 */
.normal      { mix-blend-mode: normal; }      /* 正常（默认） */
.multiply    { mix-blend-mode: multiply; }    /* 正片叠底 */
.screen      { mix-blend-mode: screen; }      /* 滤色 */
.overlay     { mix-blend-mode: overlay; }     /* 叠加 */
.darken      { mix-blend-mode: darken; }      /* 变暗 */
.lighten     { mix-blend-mode: lighten; }     /* 变亮 */
.color-dodge { mix-blend-mode: color-dodge; } /* 颜色减淡 */
.color-burn  { mix-blend-mode: color-burn; }  /* 颜色加深 */
.hard-light  { mix-blend-mode: hard-light; }  /* 强光 */
.soft-light  { mix-blend-mode: soft-light; }  /* 柔光 */
.difference  { mix-blend-mode: difference; }  /* 差值 */
.exclusion   { mix-blend-mode: exclusion; }   /* 排除 */
.hue         { mix-blend-mode: hue; }         /* 色相 */
.saturation  { mix-blend-mode: saturation; }  /* 饱和度 */
.color       { mix-blend-mode: color; }       /* 颜色 */
.luminosity  { mix-blend-mode: luminosity; }  /* 明度 */
```

#### multiply（正片叠底）

```css
/* 让颜色变暗，白色变为透明 */
.multiply-text {
  mix-blend-mode: multiply;
  color: #333;
}

/* 实战：文字与图片融合 */
.text-overlay {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  font-size: 3rem;
  font-weight: bold;
  color: white;
  mix-blend-mode: multiply;
}
```

#### screen（滤色）

```css
/* 让颜色变亮，黑色变为透明 */
.screen-effect {
  mix-blend-mode: screen;
}

/* 实战：光效叠加 */
.light-overlay {
  position: absolute;
  width: 100%;
  height: 100%;
  background: radial-gradient(circle, rgba(255,255,255,0.5) 0%, transparent 70%);
  mix-blend-mode: screen;
  pointer-events: none;
}
```

#### overlay（叠加）

```css
/* 结合multiply和screen，增强对比度 */
.overlay-effect {
  mix-blend-mode: overlay;
}

/* 实战：图片滤镜 */
.photo-filter {
  position: relative;
}

.photo-filter::after {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
  mix-blend-mode: overlay;
  opacity: 0.6;
}
```

#### difference（差值）

```css
/* 创建反差效果 */
.difference-effect {
  mix-blend-mode: difference;
  color: white;
}

/* 实战：动态文字效果 */
.dynamic-text {
  position: relative;
  font-size: 4rem;
  font-weight: bold;
  color: white;
  mix-blend-mode: difference;
}
```

#### color（颜色）

```css
/* 保留底层的明度，应用上层的色相和饱和度 */
.color-blend {
  mix-blend-mode: color;
}

/* 实战：图片着色 */
.colorize {
  position: relative;
}

.colorize::after {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: #ff6b6b;
  mix-blend-mode: color;
}
```

### 2.2 background-blend-mode（背景混合模式）

定义元素的背景图片与背景颜色如何混合。

```css
/* 基础语法 */
.element {
  background-image: url('image.jpg');
  background-color: #ff6b6b;
  background-blend-mode: multiply;
}

/* 多重背景混合 */
.multi-bg {
  background-image: 
    url('overlay.png'),
    url('background.jpg');
  background-blend-mode: screen, normal;
  /* 第一张图片用screen，第二张用normal */
}

/* 实战：双色调效果 */
.duotone {
  background-image: 
    linear-gradient(#ff6b6b, #4ecdc4),
    url('photo.jpg');
  background-blend-mode: multiply;
  background-size: cover;
}

/* 实战：纹理叠加 */
.texture-overlay {
  background-image: 
    url('texture.png'),
    linear-gradient(to bottom, #667eea, #764ba2);
  background-blend-mode: overlay;
}

/* 实战：彩色渐变遮罩 */
.gradient-mask {
  background-image: 
    linear-gradient(45deg, rgba(255,107,107,0.8), rgba(78,205,196,0.8)),
    url('image.jpg');
  background-blend-mode: color;
  background-size: cover;
  background-position: center;
}
```

### 2.3 isolation（隔离）

创建新的堆叠上下文，阻止混合模式影响外部元素。

```css
/* 默认：不隔离 */
.no-isolation {
  isolation: auto;
}

/* 隔离混合 */
.isolated {
  isolation: isolate;
}

/* 实战：控制混合范围 */
.blend-container {
  isolation: isolate; /* 内部的混合模式不影响外部 */
}

.blend-container .blend-element {
  mix-blend-mode: multiply;
  /* 仅与容器内的元素混合 */
}
```

## 三、实战案例

### 3.1 毛玻璃卡片

::: demo [vanilla]
```html
<html>
  <div class="glass-background">
    <div class="glass-card">
      <h2>毛玻璃效果</h2>
      <p>使用 backdrop-filter 实现的现代化卡片设计</p>
      <button class="glass-button">了解更多</button>
    </div>
  </div>
</html>
<style>
  .glass-background {
    min-height: 300px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: 
      linear-gradient(135deg, #667eea 0%, #764ba2 100%),
      url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="25" cy="25" r="20" fill="rgba(255,255,255,0.1)"/><circle cx="75" cy="75" r="30" fill="rgba(255,255,255,0.05)"/></svg>');
    background-size: cover, 200px;
    border-radius: 12px;
    padding: 20px;
  }
  
  .glass-card {
    backdrop-filter: blur(10px) saturate(180%);
    background: rgba(255, 255, 255, 0.2);
    border: 1px solid rgba(255, 255, 255, 0.3);
    border-radius: 16px;
    padding: 30px;
    max-width: 400px;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
  }
  
  .glass-card h2 {
    margin: 0 0 10px 0;
    color: white;
    font-size: 1.5rem;
  }
  
  .glass-card p {
    margin: 0 0 20px 0;
    color: rgba(255, 255, 255, 0.9);
    line-height: 1.6;
  }
  
  .glass-button {
    backdrop-filter: blur(5px);
    background: rgba(255, 255, 255, 0.3);
    border: 1px solid rgba(255, 255, 255, 0.5);
    color: white;
    padding: 10px 20px;
    border-radius: 8px;
    cursor: pointer;
    font-weight: 600;
    transition: all 0.3s ease;
  }
  
  .glass-button:hover {
    background: rgba(255, 255, 255, 0.4);
    transform: translateY(-2px);
  }
</style>
```
:::

### 3.2 图片滤镜效果

::: demo [vanilla]
```html
<html>
  <div class="filter-gallery">
    <div class="filter-item">
      <div class="filter-box filter-original"></div>
      <span>原图</span>
    </div>
    <div class="filter-item">
      <div class="filter-box filter-grayscale"></div>
      <span>灰度</span>
    </div>
    <div class="filter-item">
      <div class="filter-box filter-sepia"></div>
      <span>复古</span>
    </div>
    <div class="filter-item">
      <div class="filter-box filter-blur"></div>
      <span>模糊</span>
    </div>
    <div class="filter-item">
      <div class="filter-box filter-bright"></div>
      <span>明亮</span>
    </div>
    <div class="filter-item">
      <div class="filter-box filter-saturate"></div>
      <span>饱和</span>
    </div>
    <div class="filter-item">
      <div class="filter-box filter-hue"></div>
      <span>色相</span>
    </div>
    <div class="filter-item">
      <div class="filter-box filter-invert"></div>
      <span>反转</span>
    </div>
  </div>
</html>
<style>
  .filter-gallery {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
    gap: 15px;
    padding: 10px;
  }
  
  .filter-item {
    text-align: center;
  }
  
  .filter-box {
    width: 100%;
    height: 100px;
    background: 
      linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
    border-radius: 8px;
    margin-bottom: 8px;
    transition: transform 0.3s ease;
  }
  
  .filter-box:hover {
    transform: scale(1.05);
  }
  
  .filter-item span {
    display: block;
    font-size: 0.85rem;
    color: #666;
  }
  
  .filter-original {
    filter: none;
  }
  
  .filter-grayscale {
    filter: grayscale(1);
  }
  
  .filter-sepia {
    filter: sepia(1);
  }
  
  .filter-blur {
    filter: blur(3px);
  }
  
  .filter-bright {
    filter: brightness(1.5);
  }
  
  .filter-saturate {
    filter: saturate(2);
  }
  
  .filter-hue {
    filter: hue-rotate(90deg);
  }
  
  .filter-invert {
    filter: invert(1);
  }
</style>
```
:::

### 3.3 混合模式文字效果

::: demo [vanilla]
```html
<html>
  <div class="blend-demo">
    <div class="blend-text-container">
      <h1 class="blend-text">BLEND MODE</h1>
    </div>
  </div>
</html>
<style>
  .blend-demo {
    min-height: 250px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: 
      linear-gradient(45deg, #ff6b6b 0%, #ffd93d 25%, #6bcf7f 50%, #4d96ff 75%, #a78bfa 100%);
    border-radius: 12px;
  }
  
  .blend-text-container {
    position: relative;
    padding: 20px;
  }
  
  .blend-text {
    font-size: 4rem;
    font-weight: 900;
    margin: 0;
    color: white;
    mix-blend-mode: multiply;
    text-align: center;
    letter-spacing: 0.05em;
    animation: blend-shift 5s ease-in-out infinite;
  }
  
  @keyframes blend-shift {
    0%, 100% {
      mix-blend-mode: multiply;
    }
    25% {
      mix-blend-mode: screen;
    }
    50% {
      mix-blend-mode: overlay;
    }
    75% {
      mix-blend-mode: difference;
    }
  }
  
  @media (max-width: 600px) {
    .blend-text {
      font-size: 2.5rem;
    }
  }
</style>
```
:::

### 3.4 双色调图片效果

::: demo [vanilla]
```html
<html>
  <div class="duotone-gallery">
    <div class="duotone-item duotone-red">
      <div class="duotone-label">红色调</div>
    </div>
    <div class="duotone-item duotone-blue">
      <div class="duotone-label">蓝色调</div>
    </div>
    <div class="duotone-item duotone-green">
      <div class="duotone-label">绿色调</div>
    </div>
  </div>
</html>
<style>
  .duotone-gallery {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    gap: 15px;
  }
  
  .duotone-item {
    position: relative;
    height: 200px;
    border-radius: 12px;
    overflow: hidden;
    cursor: pointer;
    transition: transform 0.3s ease;
  }
  
  .duotone-item:hover {
    transform: scale(1.05);
  }
  
  .duotone-item::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: 
      radial-gradient(circle at 30% 40%, rgba(255,255,255,0.8) 0%, transparent 50%),
      linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  }
  
  .duotone-label {
    position: absolute;
    bottom: 15px;
    left: 15px;
    color: white;
    font-weight: 600;
    font-size: 1rem;
    z-index: 1;
    text-shadow: 0 2px 4px rgba(0,0,0,0.3);
  }
  
  .duotone-red::before {
    background: 
      radial-gradient(circle at 30% 40%, rgba(255,255,255,0.8) 0%, transparent 50%),
      linear-gradient(135deg, #ff6b6b 0%, #ee5a6f 100%);
  }
  
  .duotone-red::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(to bottom, #ff0000, #cc0000);
    mix-blend-mode: multiply;
  }
  
  .duotone-blue::before {
    background: 
      radial-gradient(circle at 30% 40%, rgba(255,255,255,0.8) 0%, transparent 50%),
      linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
  }
  
  .duotone-blue::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(to bottom, #0066ff, #0044cc);
    mix-blend-mode: multiply;
  }
  
  .duotone-green::before {
    background: 
      radial-gradient(circle at 30% 40%, rgba(255,255,255,0.8) 0%, transparent 50%),
      linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
  }
  
  .duotone-green::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(to bottom, #00cc66, #009944);
    mix-blend-mode: multiply;
  }
</style>
```
:::

### 3.5 动态滤镜切换

::: demo [vanilla]
```html
<html>
  <div class="filter-switch-demo">
    <div class="filter-preview" id="filterPreview">
      <div class="filter-content"></div>
    </div>
    <div class="filter-controls">
      <button class="filter-btn" data-filter="none">原始</button>
      <button class="filter-btn" data-filter="vintage">复古</button>
      <button class="filter-btn" data-filter="cool">冷色</button>
      <button class="filter-btn" data-filter="warm">暖色</button>
      <button class="filter-btn" data-filter="dramatic">戏剧</button>
    </div>
  </div>
</html>
<style>
  .filter-switch-demo {
    text-align: center;
  }
  
  .filter-preview {
    width: 100%;
    height: 250px;
    border-radius: 12px;
    overflow: hidden;
    margin-bottom: 20px;
    position: relative;
  }
  
  .filter-content {
    width: 100%;
    height: 100%;
    background: 
      linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
    transition: filter 0.5s ease;
  }
  
  .filter-content[data-active="vintage"] {
    filter: sepia(0.8) contrast(1.2) brightness(0.9);
  }
  
  .filter-content[data-active="cool"] {
    filter: saturate(1.5) hue-rotate(180deg) brightness(1.1);
  }
  
  .filter-content[data-active="warm"] {
    filter: saturate(1.3) hue-rotate(-20deg) brightness(1.05);
  }
  
  .filter-content[data-active="dramatic"] {
    filter: contrast(1.5) saturate(0.5) brightness(0.8);
  }
  
  .filter-controls {
    display: flex;
    gap: 10px;
    justify-content: center;
    flex-wrap: wrap;
  }
  
  .filter-btn {
    padding: 10px 20px;
    border: 2px solid #667eea;
    background: white;
    color: #667eea;
    border-radius: 8px;
    cursor: pointer;
    font-weight: 600;
    transition: all 0.3s ease;
  }
  
  .filter-btn:hover {
    background: #667eea;
    color: white;
    transform: translateY(-2px);
  }
  
  .filter-btn.active {
    background: #667eea;
    color: white;
  }
</style>
<script>
  const filterPreview = document.getElementById('filterPreview');
  const filterContent = filterPreview.querySelector('.filter-content');
  const filterBtns = document.querySelectorAll('.filter-btn');
  
  filterBtns.forEach(btn => {
    btn.addEventListener('click', () => {
      const filterType = btn.dataset.filter;
      
      // 移除所有active类
      filterBtns.forEach(b => b.classList.remove('active'));
      
      // 添加active类到当前按钮
      btn.classList.add('active');
      
      // 应用滤镜
      if (filterType === 'none') {
        filterContent.removeAttribute('data-active');
      } else {
        filterContent.setAttribute('data-active', filterType);
      }
    });
  });
  
  // 默认选中第一个
  filterBtns[0].classList.add('active');
</script>
```
:::

## 四、性能优化与最佳实践

### 4.1 性能考虑

```css
/* ✅ 推荐：使用GPU加速的滤镜 */
.optimized {
  filter: blur(5px) brightness(1.2);
  /* blur、opacity等会触发GPU加速 */
}

/* ✅ 推荐：使用will-change提示浏览器 */
.animated-filter {
  will-change: filter;
  filter: blur(0);
  transition: filter 0.3s ease;
}

.animated-filter:hover {
  filter: blur(5px);
}

/* ❌ 避免：过度使用复杂滤镜 */
.too-many-filters {
  filter: 
    blur(5px) 
    brightness(1.2) 
    contrast(1.1) 
    saturate(1.5) 
    hue-rotate(30deg)
    drop-shadow(0 0 10px red)
    drop-shadow(0 0 20px blue);
  /* 过多滤镜会影响性能 */
}

/* ✅ 推荐：适度组合 */
.reasonable-filters {
  filter: blur(3px) brightness(1.1);
}

/* ❌ 避免：在大面积元素上使用backdrop-filter */
.bad-backdrop {
  backdrop-filter: blur(20px);
  width: 100vw;
  height: 100vh;
  /* 在整个视口使用会非常耗性能 */
}

/* ✅ 推荐：限制使用范围 */
.good-backdrop {
  backdrop-filter: blur(10px);
  width: 400px;
  height: 300px;
}
```

### 4.2 浏览器兼容性处理

```css
/* 提供降级方案 */
.glass-card {
  background: rgba(255, 255, 255, 0.8); /* 不支持时的备用 */
  backdrop-filter: blur(10px);
}

/* 使用@supports检测 */
@supports (backdrop-filter: blur(10px)) {
  .glass-card {
    background: rgba(255, 255, 255, 0.2);
    backdrop-filter: blur(10px);
  }
}

@supports not (backdrop-filter: blur(10px)) {
  .glass-card {
    background: rgba(255, 255, 255, 0.9);
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
  }
}

/* 检测混合模式支持 */
@supports (mix-blend-mode: multiply) {
  .blend-text {
    mix-blend-mode: multiply;
  }
}
```

### 4.3 可访问性

```css
/* 尊重用户的减少动画偏好 */
@media (prefers-reduced-motion: reduce) {
  .animated-filter {
    transition: none;
  }
  
  .color-shift {
    animation: none;
  }
}

/* 确保文本可读性 */
.text-with-filter {
  filter: brightness(1.2);
}

/* 如果滤镜影响可读性，提供备用方案 */
@media (prefers-contrast: high) {
  .text-with-filter {
    filter: none;
    color: #000;
    background: #fff;
  }
}

/* 避免过度使用可能导致眩晕的效果 */
.safe-animation {
  /* 避免快速闪烁、旋转的滤镜效果 */
  animation: subtle-shift 3s ease-in-out infinite;
}

@keyframes subtle-shift {
  0%, 100% { filter: hue-rotate(0deg); }
  50% { filter: hue-rotate(10deg); }
}
```

### 4.4 实用技巧

```css
/* 1. 组合滤镜创建效果 */
.instagram-filter {
  filter: contrast(1.1) brightness(1.1) saturate(1.3);
}

/* 2. 使用CSS变量动态控制 */
:root {
  --blur-amount: 0px;
  --brightness: 1;
}

.dynamic-filter {
  filter: blur(var(--blur-amount)) brightness(var(--brightness));
  transition: filter 0.3s ease;
}

/* JavaScript: element.style.setProperty('--blur-amount', '5px') */

/* 3. 创建可重用的滤镜类 */
.filter-vintage {
  filter: sepia(0.5) contrast(1.2) brightness(0.9);
}

.filter-cool {
  filter: saturate(1.3) hue-rotate(20deg) brightness(1.05);
}

.filter-warm {
  filter: saturate(1.2) hue-rotate(-20deg) brightness(1.1);
}

/* 4. 响应式滤镜 */
@media (max-width: 768px) {
  .mobile-optimized {
    filter: none; /* 移动端禁用滤镜以提升性能 */
  }
}

@media (min-width: 769px) {
  .mobile-optimized {
    filter: blur(5px) brightness(1.2);
  }
}

/* 5. 打印样式 */
@media print {
  .no-print-filter {
    filter: none !important;
    /* 打印时移除滤镜，确保清晰度 */
  }
}
```

### 4.5 常见错误

**❌ 错误做法**：

```css
/* 1. 过度模糊导致不可读 */
.bad-blur {
  filter: blur(20px);
  /* 文字完全不可读 */
}

/* 2. 滤镜影响性能 */
* {
  filter: brightness(1.1);
  /* 对所有元素应用滤镜 */
}

/* 3. 忘记transition */
.no-transition {
  filter: grayscale(0);
}

.no-transition:hover {
  filter: grayscale(1);
  /* 变化太突兀 */
}

/* 4. mix-blend-mode在白色背景失效 */
.white-bg-blend {
  background: white;
  color: white;
  mix-blend-mode: multiply;
  /* 白色multiply白色还是白色，看不见 */
}
```

**✅ 正确做法**：

```css
/* 1. 适度模糊 */
.good-blur {
  filter: blur(3px);
  /* 保持可读性 */
}

/* 2. 限制滤镜范围 */
.image-container img {
  filter: brightness(1.1);
  /* 仅对图片应用 */
}

/* 3. 添加过渡效果 */
.smooth-transition {
  filter: grayscale(0);
  transition: filter 0.3s ease;
}

.smooth-transition:hover {
  filter: grayscale(1);
}

/* 4. 使用对比色 */
.good-blend {
  background: linear-gradient(45deg, #667eea, #764ba2);
  color: white;
  mix-blend-mode: multiply;
}
```

## 五、浏览器兼容性

### 5.1 filter属性

| 特性 | Chrome | Firefox | Safari | Edge |
|---|---|---|---|---|
| `filter` 基础 | ✅ 53+ | ✅ 35+ | ✅ 9.1+ | ✅ 79+ |
| `-webkit-filter` | ✅ 18-52 | ❌ | ✅ 6-9 | ❌ |
| `backdrop-filter` | ✅ 76+ | ✅ 103+ | ✅ 9+ (-webkit-) | ✅ 79+ |
| `drop-shadow()` | ✅ 53+ | ✅ 35+ | ✅ 9.1+ | ✅ 79+ |

### 5.2 混合模式

| 特性 | Chrome | Firefox | Safari | Edge |
|---|---|---|---|---|
| `mix-blend-mode` | ✅ 41+ | ✅ 32+ | ✅ 8+ | ✅ 79+ |
| `background-blend-mode` | ✅ 35+ | ✅ 30+ | ✅ 8+ | ✅ 79+ |
| `isolation` | ✅ 41+ | ✅ 36+ | ✅ 8+ | ✅ 79+ |

### 5.3 前缀处理

```css
/* backdrop-filter需要-webkit-前缀（Safari） */
.glass {
  -webkit-backdrop-filter: blur(10px);
  backdrop-filter: blur(10px);
}

/* 旧版Chrome需要-webkit-前缀的filter */
.legacy-filter {
  -webkit-filter: blur(5px);
  filter: blur(5px);
}
```

## 六、总结

### 核心要点

1. **CSS滤镜**：
   - 11种滤镜函数：`blur`、`brightness`、`contrast`、`grayscale`、`sepia`、`saturate`、`hue-rotate`、`invert`、`opacity`、`drop-shadow`、`url`
   - `backdrop-filter` 实现毛玻璃效果
   - 可组合使用多个滤镜
   - 支持动画和过渡

2. **混合模式**：
   - `mix-blend-mode`：元素与背景混合
   - `background-blend-mode`：背景图层混合
   - 16种混合模式，模拟Photoshop效果
   - `isolation` 控制混合范围

3. **性能优化**：
   - 适度使用滤镜，避免过度叠加
   - 大面积元素慎用 `backdrop-filter`
   - 使用 `will-change` 提示GPU加速
   - 移动端考虑禁用复杂滤镜

4. **最佳实践**：
   - 提供降级方案（`@supports`）
   - 尊重用户偏好（`prefers-reduced-motion`）
   - 确保可访问性（对比度、可读性）
   - 使用CSS变量实现动态控制

5. **常见应用**：
   - 毛玻璃效果（`backdrop-filter`）
   - 图片滤镜（Instagram风格）
   - 双色调效果（`background-blend-mode`）
   - 文字混合（`mix-blend-mode`）

掌握CSS滤镜和混合模式，能够让你的网页视觉效果更加丰富多彩，创造出专业级的设计效果。

**祝你变得更强!**
