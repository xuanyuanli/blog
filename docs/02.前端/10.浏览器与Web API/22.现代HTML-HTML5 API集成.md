---
title: ç°ä»£HTML-HTML5 APIé›†æˆ
date: 2019-05-24 10:00:00
permalink: /pages/html5-api-integration/
categories: 
  - å‰ç«¯
  - HTML & CSS
tags: 
  - HTML5
  - API
author: 
  name: è½©è¾•æ
  link: https://github.com/xuanyuanli
---

HTML5ä¸ä»…å¼•å…¥äº†æ–°çš„è¯­ä¹‰æ ‡ç­¾,è¿˜æä¾›äº†ä¸°å¯Œçš„JavaScript API,ä½¿Webåº”ç”¨èƒ½å¤Ÿå®ç°æ›´å¤šåŸç”Ÿåº”ç”¨çš„åŠŸèƒ½ã€‚æœ¬æ–‡å°†ä»‹ç»HTML5ä¸­å¸¸ç”¨çš„API,åŒ…æ‹¬è‡ªå®šä¹‰æ•°æ®å±æ€§ã€å†…å®¹ç¼–è¾‘ã€æ‹–æ”¾ã€æœ¬åœ°å­˜å‚¨ç­‰ã€‚

<!-- more -->

## ä¸€ã€è‡ªå®šä¹‰æ•°æ®å±æ€§ (data-*)

### 1.1 åŸºæœ¬ç”¨æ³•

`data-*` å±æ€§ç”¨äºåœ¨HTMLå…ƒç´ ä¸Šå­˜å‚¨è‡ªå®šä¹‰æ•°æ®ã€‚

```html
<article data-id="123" 
         data-category="technology"
         data-author="å¼ ä¸‰"
         data-publish-date="2024-01-15">
  æ–‡ç« å†…å®¹...
</article>
```

### 1.2 JavaScriptè®¿é—®

```html
<button id="btn" 
        data-action="submit"
        data-confirm="ç¡®å®šè¦æäº¤å—?"
        data-url="/api/submit">
  æäº¤
</button>

<script>
  const btn = document.getElementById('btn');
  
  // æ–¹å¼1: dataset API (æ¨è)
  console.log(btn.dataset.action);      // "submit"
  console.log(btn.dataset.confirm);     // "ç¡®å®šè¦æäº¤å—?"
  console.log(btn.dataset.url);         // "/api/submit"
  
  // é©¼å³°å‘½åè½¬æ¢
  console.log(btn.dataset.publishDate);  // å¯¹åº” data-publish-date
  
  // æ–¹å¼2: getAttribute
  console.log(btn.getAttribute('data-action'));
  
  // è®¾ç½®æ•°æ®
  btn.dataset.status = 'pending';
  
  // åˆ é™¤æ•°æ®
  delete btn.dataset.action;
</script>
```

### 1.3 å®é™…åº”ç”¨

```html
<!-- é€‰é¡¹å¡ -->
<div class="tabs">
  <button data-tab="home">é¦–é¡µ</button>
  <button data-tab="profile">ä¸ªäºº</button>
  <button data-tab="settings">è®¾ç½®</button>
</div>

<div class="tab-content">
  <div data-tab-content="home">é¦–é¡µå†…å®¹</div>
  <div data-tab-content="profile">ä¸ªäººå†…å®¹</div>
  <div data-tab-content="settings">è®¾ç½®å†…å®¹</div>
</div>

<script>
  const tabs = document.querySelectorAll('[data-tab]');
  const contents = document.querySelectorAll('[data-tab-content]');
  
  tabs.forEach(tab => {
    tab.addEventListener('click', () => {
      const target = tab.dataset.tab;
      
      // éšè—æ‰€æœ‰å†…å®¹
      contents.forEach(content => {
        content.style.display = 'none';
      });
      
      // æ˜¾ç¤ºç›®æ ‡å†…å®¹
      const targetContent = document.querySelector(`[data-tab-content="${target}"]`);
      if (targetContent) {
        targetContent.style.display = 'block';
      }
    });
  });
</script>
```

## äºŒã€å†…å®¹ç¼–è¾‘ (contenteditable)

### 2.1 åŸºæœ¬ç”¨æ³•

`contenteditable` å±æ€§ä½¿å…ƒç´ å†…å®¹å¯ç¼–è¾‘ã€‚

```html
<!-- å¯ç¼–è¾‘ -->
<div contenteditable="true">
  ç‚¹å‡»ç¼–è¾‘è¿™æ®µæ–‡å­—
</div>

<!-- ä¸å¯ç¼–è¾‘ -->
<div contenteditable="false">
  ä¸å¯ç¼–è¾‘
</div>

<!-- ç»§æ‰¿çˆ¶å…ƒç´  -->
<div contenteditable="inherit">
  ç»§æ‰¿çˆ¶å…ƒç´ è®¾ç½®
</div>
```

### 2.2 å¯Œæ–‡æœ¬ç¼–è¾‘å™¨

```html
<div id="editor" contenteditable="true" 
     style="border: 1px solid #ddd; padding: 10px; min-height: 200px;">
  å¼€å§‹è¾“å…¥...
</div>

<div class="toolbar">
  <button onclick="document.execCommand('bold')">ç²—ä½“</button>
  <button onclick="document.execCommand('italic')">æ–œä½“</button>
  <button onclick="document.execCommand('underline')">ä¸‹åˆ’çº¿</button>
  <button onclick="document.execCommand('insertUnorderedList')">åˆ—è¡¨</button>
</div>

<script>
  const editor = document.getElementById('editor');
  
  // ç›‘å¬å†…å®¹å˜åŒ–
  editor.addEventListener('input', () => {
    console.log('å†…å®¹:', editor.innerHTML);
  });
  
  // è·å–é€‰ä¸­æ–‡æœ¬
  editor.addEventListener('mouseup', () => {
    const selection = window.getSelection().toString();
    if (selection) {
      console.log('é€‰ä¸­:', selection);
    }
  });
</script>
```

### 2.3 å®ç”¨åŠŸèƒ½

```html
<div id="notepad" contenteditable="true"></div>
<button onclick="saveContent()">ä¿å­˜</button>
<button onclick="loadContent()">åŠ è½½</button>
<button onclick="clearContent()">æ¸…ç©º</button>

<script>
  function saveContent() {
    const content = document.getElementById('notepad').innerHTML;
    localStorage.setItem('notepad', content);
    alert('å·²ä¿å­˜');
  }
  
  function loadContent() {
    const content = localStorage.getItem('notepad');
    if (content) {
      document.getElementById('notepad').innerHTML = content;
    }
  }
  
  function clearContent() {
    document.getElementById('notepad').innerHTML = '';
  }
  
  // é¡µé¢åŠ è½½æ—¶è‡ªåŠ¨åŠ è½½
  window.addEventListener('load', loadContent);
</script>
```

## ä¸‰ã€æ‹–æ”¾ API (Drag and Drop)

### 3.1 åŸºæœ¬æ¦‚å¿µ

æ‹–æ”¾æ¶‰åŠä¸¤ä¸ªå¯¹è±¡ï¼š
- **å¯æ‹–æ‹½å…ƒç´ **: è®¾ç½® `draggable="true"`
- **æ”¾ç½®ç›®æ ‡**: å¤„ç†æ‹–æ”¾äº‹ä»¶

### 3.2 åŸºç¡€ç¤ºä¾‹

```html
<div id="drag-item" draggable="true" 
     style="width: 100px; height: 100px; background: #667eea; color: white; 
            display: flex; align-items: center; justify-content: center;">
  æ‹–æˆ‘
</div>

<div id="drop-zone" 
     style="width: 300px; height: 200px; border: 2px dashed #ddd; 
            margin-top: 20px; padding: 20px;">
  æ‹–æ”¾åŒºåŸŸ
</div>

<script>
  const dragItem = document.getElementById('drag-item');
  const dropZone = document.getElementById('drop-zone');
  
  // æ‹–æ‹½å¼€å§‹
  dragItem.addEventListener('dragstart', (e) => {
    e.dataTransfer.effectAllowed = 'move';
    e.dataTransfer.setData('text/html', e.target.innerHTML);
    e.target.style.opacity = '0.5';
  });
  
  // æ‹–æ‹½ç»“æŸ
  dragItem.addEventListener('dragend', (e) => {
    e.target.style.opacity = '1';
  });
  
  // æ‹–æ‹½è¿›å…¥æ”¾ç½®åŒºåŸŸ
  dropZone.addEventListener('dragenter', (e) => {
    e.preventDefault();
    dropZone.style.background = '#f0f0f0';
  });
  
  // åœ¨æ”¾ç½®åŒºåŸŸä¸Šæ–¹
  dropZone.addEventListener('dragover', (e) => {
    e.preventDefault();
  });
  
  // ç¦»å¼€æ”¾ç½®åŒºåŸŸ
  dropZone.addEventListener('dragleave', (e) => {
    dropZone.style.background = '';
  });
  
  // æ”¾ç½®
  dropZone.addEventListener('drop', (e) => {
    e.preventDefault();
    const data = e.dataTransfer.getData('text/html');
    dropZone.innerHTML += `<div style="padding: 10px; background: #667eea; color: white; margin: 5px;">${data}</div>`;
    dropZone.style.background = '';
  });
</script>
```

### 3.3 æ–‡ä»¶æ‹–æ”¾ä¸Šä¼ 

```html
<div id="file-drop" 
     style="width: 400px; height: 200px; border: 2px dashed #667eea; 
            display: flex; align-items: center; justify-content: center;
            color: #667eea; font-size: 18px;">
  æ‹–æ”¾æ–‡ä»¶åˆ°è¿™é‡Œ
</div>
<div id="file-list"></div>

<script>
  const fileDrop = document.getElementById('file-drop');
  const fileList = document.getElementById('file-list');
  
  fileDrop.addEventListener('dragover', (e) => {
    e.preventDefault();
    fileDrop.style.background = '#f0f0f0';
  });
  
  fileDrop.addEventListener('dragleave', () => {
    fileDrop.style.background = '';
  });
  
  fileDrop.addEventListener('drop', (e) => {
    e.preventDefault();
    fileDrop.style.background = '';
    
    const files = e.dataTransfer.files;
    fileList.innerHTML = '<h3>ä¸Šä¼ çš„æ–‡ä»¶:</h3>';
    
    Array.from(files).forEach(file => {
      fileList.innerHTML += `
        <div style="padding: 10px; border-bottom: 1px solid #ddd;">
          <strong>${file.name}</strong> 
          (${(file.size / 1024).toFixed(2)} KB)
        </div>
      `;
    });
  });
</script>
```

## å››ã€æœ¬åœ°å­˜å‚¨

### 4.1 localStorage

æŒä¹…åŒ–å­˜å‚¨ï¼Œé™¤éæ‰‹åŠ¨æ¸…é™¤ã€‚

```javascript
// å­˜å‚¨
localStorage.setItem('username', 'å¼ ä¸‰');
localStorage.setItem('theme', 'dark');

// è¯»å–
const username = localStorage.getItem('username');
const theme = localStorage.getItem('theme');

// åˆ é™¤
localStorage.removeItem('username');

// æ¸…ç©ºæ‰€æœ‰
localStorage.clear();

// å­˜å‚¨å¯¹è±¡
const user = { name: 'å¼ ä¸‰', age: 25 };
localStorage.setItem('user', JSON.stringify(user));

// è¯»å–å¯¹è±¡
const savedUser = JSON.parse(localStorage.getItem('user'));
```

### 4.2 sessionStorage

ä¼šè¯çº§å­˜å‚¨ï¼Œå…³é—­æ ‡ç­¾é¡µå³æ¸…é™¤ã€‚

```javascript
// ç”¨æ³•ä¸localStorageç›¸åŒ
sessionStorage.setItem('tempData', 'value');
const tempData = sessionStorage.getItem('tempData');
```

### 4.3 å®é™…åº”ç”¨ - ä¸»é¢˜åˆ‡æ¢

```html
<button onclick="toggleTheme()">åˆ‡æ¢ä¸»é¢˜</button>

<style>
  body.dark {
    background: #333;
    color: white;
  }
</style>

<script>
  // é¡µé¢åŠ è½½æ—¶åº”ç”¨ä¿å­˜çš„ä¸»é¢˜
  function applyTheme() {
    const theme = localStorage.getItem('theme');
    if (theme === 'dark') {
      document.body.classList.add('dark');
    }
  }
  
  function toggleTheme() {
    document.body.classList.toggle('dark');
    const isDark = document.body.classList.contains('dark');
    localStorage.setItem('theme', isDark ? 'dark' : 'light');
  }
  
  // åˆå§‹åŒ–
  applyTheme();
</script>
```

### 4.4 å­˜å‚¨äº‹ä»¶ç›‘å¬

```javascript
// åœ¨å…¶ä»–æ ‡ç­¾é¡µç›‘å¬å­˜å‚¨å˜åŒ–
window.addEventListener('storage', (e) => {
  console.log('é”®:', e.key);
  console.log('æ—§å€¼:', e.oldValue);
  console.log('æ–°å€¼:', e.newValue);
  console.log('URL:', e.url);
});
```

## äº”ã€å…¶ä»–å¸¸ç”¨API

### 5.1 Geolocation åœ°ç†ä½ç½®

```javascript
if ('geolocation' in navigator) {
  navigator.geolocation.getCurrentPosition(
    (position) => {
      console.log('çº¬åº¦:', position.coords.latitude);
      console.log('ç»åº¦:', position.coords.longitude);
      console.log('ç²¾åº¦:', position.coords.accuracy);
    },
    (error) => {
      console.error('é”™è¯¯:', error.message);
    },
    {
      enableHighAccuracy: true,
      timeout: 5000,
      maximumAge: 0
    }
  );
}
```

### 5.2 History API

```javascript
// æ·»åŠ å†å²è®°å½•
history.pushState({ page: 1 }, 'title', '/page1');

// æ›¿æ¢å½“å‰è®°å½•
history.replaceState({ page: 2 }, 'title', '/page2');

// å‰è¿›åé€€
history.back();
history.forward();
history.go(-2); // åé€€2é¡µ

// ç›‘å¬å†å²å˜åŒ–
window.addEventListener('popstate', (e) => {
  console.log('çŠ¶æ€:', e.state);
});
```

### 5.3 Page Visibility API

```javascript
// é¡µé¢å¯è§æ€§å˜åŒ–
document.addEventListener('visibilitychange', () => {
  if (document.hidden) {
    console.log('é¡µé¢éšè—');
    // æš‚åœè§†é¢‘ã€åœæ­¢åŠ¨ç”»ç­‰
  } else {
    console.log('é¡µé¢å¯è§');
    // æ¢å¤æ’­æ”¾
  }
});
```

### 5.4 Fullscreen API

```javascript
const elem = document.getElementById('video');

// å…¨å±
function openFullscreen() {
  if (elem.requestFullscreen) {
    elem.requestFullscreen();
  } else if (elem.webkitRequestFullscreen) {
    elem.webkitRequestFullscreen();
  } else if (elem.msRequestFullscreen) {
    elem.msRequestFullscreen();
  }
}

// é€€å‡ºå…¨å±
function exitFullscreen() {
  if (document.exitFullscreen) {
    document.exitFullscreen();
  }
}

// ç›‘å¬å…¨å±å˜åŒ–
document.addEventListener('fullscreenchange', () => {
  console.log('å…¨å±çŠ¶æ€:', !!document.fullscreenElement);
});
```

## å…­ã€ç»¼åˆç¤ºä¾‹

::: demo [vanilla]
```html
<html>
  <div class="api-demo-h5i6j">
    <h2>HTML5 API ç»¼åˆç¤ºä¾‹</h2>
    
    <!-- é€‰é¡¹å¡ -->
    <div class="tabs-h5i6j">
      <button class="tab-btn-h5i6j active-h5i6j" data-tab="storage">æœ¬åœ°å­˜å‚¨</button>
      <button class="tab-btn-h5i6j" data-tab="drag">æ‹–æ”¾</button>
      <button class="tab-btn-h5i6j" data-tab="editor">å†…å®¹ç¼–è¾‘</button>
    </div>
    
    <!-- æœ¬åœ°å­˜å‚¨ -->
    <div class="tab-content-h5i6j" data-tab-content="storage" style="display: block;">
      <h3>ğŸ“¦ æœ¬åœ°å­˜å‚¨æ¼”ç¤º</h3>
      <div class="storage-demo-h5i6j">
        <input type="text" id="storage-key-h5i6j" placeholder="é”®" class="input-h5i6j">
        <input type="text" id="storage-value-h5i6j" placeholder="å€¼" class="input-h5i6j">
        <button onclick="saveToStorage()" class="btn-h5i6j">ä¿å­˜</button>
        <button onclick="loadFromStorage()" class="btn-h5i6j">åŠ è½½</button>
        <button onclick="clearStorage()" class="btn-h5i6j btn-danger-h5i6j">æ¸…ç©º</button>
        <div id="storage-display-h5i6j" class="display-h5i6j"></div>
      </div>
    </div>
    
    <!-- æ‹–æ”¾ -->
    <div class="tab-content-h5i6j" data-tab-content="drag">
      <h3>ğŸ¯ æ‹–æ”¾æ¼”ç¤º</h3>
      <div class="drag-demo-h5i6j">
        <div class="drag-items-h5i6j">
          <div class="drag-item-h5i6j" draggable="true" data-id="1">ğŸ“¦ é¡¹ç›® 1</div>
          <div class="drag-item-h5i6j" draggable="true" data-id="2">ğŸ“¦ é¡¹ç›® 2</div>
          <div class="drag-item-h5i6j" draggable="true" data-id="3">ğŸ“¦ é¡¹ç›® 3</div>
        </div>
        <div class="drop-zones-h5i6j">
          <div class="drop-zone-h5i6j" data-zone="todo">
            <h4>å¾…åŠ</h4>
          </div>
          <div class="drop-zone-h5i6j" data-zone="done">
            <h4>å·²å®Œæˆ</h4>
          </div>
        </div>
      </div>
    </div>
    
    <!-- å†…å®¹ç¼–è¾‘ -->
    <div class="tab-content-h5i6j" data-tab-content="editor">
      <h3>âœï¸ å†…å®¹ç¼–è¾‘æ¼”ç¤º</h3>
      <div class="editor-toolbar-h5i6j">
        <button onclick="execCmd('bold')" class="tool-btn-h5i6j" title="ç²—ä½“"><strong>B</strong></button>
        <button onclick="execCmd('italic')" class="tool-btn-h5i6j" title="æ–œä½“"><em>I</em></button>
        <button onclick="execCmd('underline')" class="tool-btn-h5i6j" title="ä¸‹åˆ’çº¿"><u>U</u></button>
        <button onclick="execCmd('insertUnorderedList')" class="tool-btn-h5i6j" title="åˆ—è¡¨">â‰¡</button>
        <button onclick="saveNote()" class="btn-h5i6j">ğŸ’¾ ä¿å­˜</button>
        <button onclick="loadNote()" class="btn-h5i6j">ğŸ“‚ åŠ è½½</button>
      </div>
      <div id="editor-h5i6j" contenteditable="true" class="editor-h5i6j">
        å¼€å§‹ç¼–è¾‘ä½ çš„ç¬”è®°...
      </div>
    </div>
  </div>
</html>
<style>
  .api-demo-h5i6j {
    padding: 2rem;
    background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
    border-radius: 12px;
  }
  
  .api-demo-h5i6j h2 {
    text-align: center;
    color: #333;
    margin-bottom: 2rem;
  }
  
  /* é€‰é¡¹å¡ */
  .tabs-h5i6j {
    display: flex;
    gap: 0.5rem;
    margin-bottom: 2rem;
    border-bottom: 2px solid #dee2e6;
  }
  
  .tab-btn-h5i6j {
    padding: 0.75rem 1.5rem;
    background: transparent;
    border: none;
    border-bottom: 3px solid transparent;
    cursor: pointer;
    font-size: 1rem;
    color: #666;
    transition: all 0.3s;
  }
  
  .tab-btn-h5i6j:hover {
    color: #667eea;
  }
  
  .tab-btn-h5i6j.active-h5i6j {
    color: #667eea;
    border-bottom-color: #667eea;
    font-weight: 600;
  }
  
  .tab-content-h5i6j {
    display: none;
    background: white;
    padding: 2rem;
    border-radius: 8px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  }
  
  .tab-content-h5i6j h3 {
    margin: 0 0 1.5rem 0;
    color: #333;
  }
  
  /* æœ¬åœ°å­˜å‚¨ */
  .storage-demo-h5i6j {
    display: flex;
    flex-wrap: wrap;
    gap: 1rem;
    align-items: flex-start;
  }
  
  .input-h5i6j {
    padding: 0.75rem 1rem;
    border: 2px solid #dee2e6;
    border-radius: 6px;
    font-size: 1rem;
    flex: 1;
    min-width: 150px;
  }
  
  .input-h5i6j:focus {
    outline: none;
    border-color: #667eea;
  }
  
  .btn-h5i6j {
    padding: 0.75rem 1.5rem;
    background: #667eea;
    color: white;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    font-size: 1rem;
    transition: all 0.3s;
  }
  
  .btn-h5i6j:hover {
    background: #5a67d8;
    transform: translateY(-2px);
  }
  
  .btn-danger-h5i6j {
    background: #dc3545;
  }
  
  .btn-danger-h5i6j:hover {
    background: #c82333;
  }
  
  .display-h5i6j {
    width: 100%;
    margin-top: 1rem;
    padding: 1rem;
    background: #f8f9fa;
    border-radius: 6px;
    min-height: 100px;
  }
  
  /* æ‹–æ”¾ */
  .drag-demo-h5i6j {
    display: grid;
    grid-template-columns: 1fr 2fr;
    gap: 2rem;
  }
  
  .drag-items-h5i6j {
    display: flex;
    flex-direction: column;
    gap: 1rem;
  }
  
  .drag-item-h5i6j {
    padding: 1rem;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    border-radius: 6px;
    cursor: move;
    user-select: none;
    transition: all 0.3s;
  }
  
  .drag-item-h5i6j:hover {
    transform: scale(1.05);
  }
  
  .drag-item-h5i6j.dragging-h5i6j {
    opacity: 0.5;
  }
  
  .drop-zones-h5i6j {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1rem;
  }
  
  .drop-zone-h5i6j {
    min-height: 200px;
    padding: 1rem;
    border: 2px dashed #dee2e6;
    border-radius: 8px;
    background: #f8f9fa;
  }
  
  .drop-zone-h5i6j h4 {
    margin: 0 0 1rem 0;
    color: #666;
    text-align: center;
  }
  
  .drop-zone-h5i6j.drag-over-h5i6j {
    border-color: #667eea;
    background: #e7f3ff;
  }
  
  .drop-zone-h5i6j .drag-item-h5i6j {
    margin-bottom: 0.5rem;
    cursor: grab;
  }
  
  /* å†…å®¹ç¼–è¾‘ */
  .editor-toolbar-h5i6j {
    display: flex;
    gap: 0.5rem;
    margin-bottom: 1rem;
    padding: 0.75rem;
    background: #f8f9fa;
    border-radius: 6px;
    flex-wrap: wrap;
  }
  
  .tool-btn-h5i6j {
    width: 40px;
    height: 40px;
    border: 1px solid #dee2e6;
    background: white;
    border-radius: 4px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s;
  }
  
  .tool-btn-h5i6j:hover {
    background: #e9ecef;
    border-color: #667eea;
  }
  
  .editor-h5i6j {
    min-height: 200px;
    padding: 1rem;
    border: 2px solid #dee2e6;
    border-radius: 6px;
    background: white;
    line-height: 1.6;
  }
  
  .editor-h5i6j:focus {
    outline: none;
    border-color: #667eea;
  }
  
  @media (max-width: 768px) {
    .drag-demo-h5i6j {
      grid-template-columns: 1fr;
    }
    
    .drop-zones-h5i6j {
      grid-template-columns: 1fr;
    }
  }
</style>
<script>
  // é€‰é¡¹å¡åˆ‡æ¢
  document.querySelectorAll('[data-tab]').forEach(tab => {
    tab.addEventListener('click', () => {
      const target = tab.dataset.tab;
      
      // æ›´æ–°æŒ‰é’®çŠ¶æ€
      document.querySelectorAll('[data-tab]').forEach(t => t.classList.remove('active-h5i6j'));
      tab.classList.add('active-h5i6j');
      
      // åˆ‡æ¢å†…å®¹
      document.querySelectorAll('[data-tab-content]').forEach(content => {
        content.style.display = content.dataset.tabContent === target ? 'block' : 'none';
      });
    });
  });
  
  // æœ¬åœ°å­˜å‚¨
  function saveToStorage() {
    const key = document.getElementById('storage-key-h5i6j').value;
    const value = document.getElementById('storage-value-h5i6j').value;
    if (key && value) {
      localStorage.setItem(key, value);
      loadFromStorage();
    }
  }
  
  function loadFromStorage() {
    const display = document.getElementById('storage-display-h5i6j');
    const items = Object.keys(localStorage).map(key => {
      return `<div style="padding: 8px; border-bottom: 1px solid #ddd;"><strong>${key}:</strong> ${localStorage.getItem(key)}</div>`;
    }).join('');
    display.innerHTML = items || 'æš‚æ— æ•°æ®';
  }
  
  function clearStorage() {
    if (confirm('ç¡®å®šæ¸…ç©ºæ‰€æœ‰æ•°æ®?')) {
      localStorage.clear();
      loadFromStorage();
    }
  }
  
  // åˆå§‹åŒ–æ˜¾ç¤º
  loadFromStorage();
  
  // æ‹–æ”¾
  const dragItems = document.querySelectorAll('.drag-item-h5i6j');
  const dropZones = document.querySelectorAll('.drop-zone-h5i6j');
  
  let draggedItem = null;
  
  dragItems.forEach(item => {
    item.addEventListener('dragstart', function(e) {
      draggedItem = this;
      this.classList.add('dragging-h5i6j');
      e.dataTransfer.effectAllowed = 'move';
    });
    
    item.addEventListener('dragend', function() {
      this.classList.remove('dragging-h5i6j');
    });
  });
  
  dropZones.forEach(zone => {
    zone.addEventListener('dragover', function(e) {
      e.preventDefault();
      this.classList.add('drag-over-h5i6j');
    });
    
    zone.addEventListener('dragleave', function() {
      this.classList.remove('drag-over-h5i6j');
    });
    
    zone.addEventListener('drop', function(e) {
      e.preventDefault();
      this.classList.remove('drag-over-h5i6j');
      if (draggedItem) {
        this.appendChild(draggedItem);
      }
    });
  });
  
  // å†…å®¹ç¼–è¾‘
  function execCmd(command) {
    document.execCommand(command, false, null);
  }
  
  function saveNote() {
    const content = document.getElementById('editor-h5i6j').innerHTML;
    localStorage.setItem('note', content);
    alert('ç¬”è®°å·²ä¿å­˜!');
  }
  
  function loadNote() {
    const content = localStorage.getItem('note');
    if (content) {
      document.getElementById('editor-h5i6j').innerHTML = content;
    }
  }
</script>
```
:::

## ä¸ƒã€æœ€ä½³å®è·µ

### 7.1 æ•°æ®å±æ€§å‘½å

```html
<!-- âœ… æ¨èï¼šè¯­ä¹‰åŒ–ã€æè¿°æ€§ -->
<div data-user-id="123" data-role="admin"></div>

<!-- âŒ é¿å…ï¼šæ— æ„ä¹‰çš„å‘½å -->
<div data-a="123" data-b="admin"></div>
```

### 7.2 localStorageå®¹é‡ç®¡ç†

```javascript
// æ£€æŸ¥å­˜å‚¨å®¹é‡
function checkStorageQuota() {
  if ('storage' in navigator && 'estimate' in navigator.storage) {
    navigator.storage.estimate().then(estimate => {
      console.log('å·²ä½¿ç”¨:', estimate.usage);
      console.log('é…é¢:', estimate.quota);
    });
  }
}

// æ•è·å­˜å‚¨é”™è¯¯
try {
  localStorage.setItem('key', 'value');
} catch (e) {
  if (e.name === 'QuotaExceededError') {
    console.error('å­˜å‚¨ç©ºé—´å·²æ»¡');
  }
}
```

### 7.3 å®‰å…¨è€ƒè™‘

```javascript
// é¿å…å­˜å‚¨æ•æ„Ÿä¿¡æ¯
// âŒ ä¸è¦å­˜å‚¨
localStorage.setItem('password', '123456');
localStorage.setItem('creditCard', '1234-5678-9012-3456');

// âœ… å¯ä»¥å­˜å‚¨
localStorage.setItem('theme', 'dark');
localStorage.setItem('language', 'zh-CN');
```

## å…«ã€æ€»ç»“

HTML5 APIçš„å…³é”®ç‚¹ï¼š

1. **data-* å±æ€§**: å­˜å‚¨è‡ªå®šä¹‰æ•°æ®ï¼Œä¾¿äºJavaScriptè®¿é—®
2. **contenteditable**: å®ç°å¯Œæ–‡æœ¬ç¼–è¾‘åŠŸèƒ½
3. **æ‹–æ”¾API**: åˆ›å»ºç›´è§‚çš„æ‹–æ”¾äº¤äº’
4. **æœ¬åœ°å­˜å‚¨**: localStorageæŒä¹…åŒ–ï¼ŒsessionStorageä¼šè¯çº§
5. **å…¶ä»–API**: åœ°ç†ä½ç½®ã€å†å²ç®¡ç†ã€å…¨å±ç­‰
6. **å®‰å…¨æ€§**: é¿å…å­˜å‚¨æ•æ„Ÿä¿¡æ¯
7. **å…¼å®¹æ€§**: æ£€æµ‹APIæ”¯æŒæƒ…å†µ

æŒæ¡HTML5 APIèƒ½å¤Ÿè®©Webåº”ç”¨å®ç°æ›´ä¸°å¯Œçš„åŠŸèƒ½ï¼Œæä¾›æ›´å¥½çš„ç”¨æˆ·ä½“éªŒã€‚

**ç¥ä½ å˜å¾—æ›´å¼º!**
