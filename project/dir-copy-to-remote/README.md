# dir-copy-to-remote (dcr)

SSH è¿œç¨‹ç›®å½•ä¼ è¾“å·¥å…·ï¼Œæ”¯æŒè‡ªåŠ¨å‹ç¼©å’Œä¼ è¾“æœ¬åœ°ç›®å½•åˆ°è¿œç¨‹ Linux æœåŠ¡å™¨ã€‚

## åŠŸèƒ½ç‰¹æ€§

- ğŸš€ å¿«é€Ÿå‹ç¼©æœ¬åœ°ç›®å½•ä¸º zip
- ğŸ” SSH ç§é’¥è®¤è¯
- ğŸ“¦ è‡ªåŠ¨ä¸Šä¼ å¹¶è§£å‹åˆ°è¿œç¨‹æœåŠ¡å™¨
- ğŸ“Š å®æ—¶æ˜¾ç¤ºä¼ è¾“è¿›åº¦
- âš™ï¸ é…ç½®æŒä¹…åŒ–ä¿å­˜
- ğŸ¯ è‡ªåŠ¨æ’é™¤ node_modulesã€.git ç­‰å¸¸è§å¤§æ–‡ä»¶å¤¹
- ğŸŒ æ”¯æŒå…¨å±€å®‰è£…ï¼Œä»»æ„ç›®å½•ä½¿ç”¨

## å®‰è£…

### å…¨å±€å®‰è£…ï¼ˆæ¨èï¼‰

```bash
npm install -g dir-copy-to-remote
```

å®‰è£…åå¯åœ¨ä»»æ„ç›®å½•ä½¿ç”¨ `dcr` å‘½ä»¤ã€‚

### æœ¬åœ°å¼€å‘å®‰è£…

```bash
cd project/dir-copy-to-remote
npm install
npm run build
npm link
```

## ä½¿ç”¨æ–¹æ³•

### 1. é…ç½®è¿æ¥ä¿¡æ¯

é¦–æ¬¡ä½¿ç”¨éœ€è¦é…ç½® SSH è¿æ¥ä¿¡æ¯ï¼š

```bash
dcr config
```

æŒ‰æç¤ºè¾“å…¥ï¼š
- **SSH ä¸»æœºåœ°å€**: è¿œç¨‹æœåŠ¡å™¨ IP æˆ–åŸŸåï¼ˆå¦‚ `192.168.1.100`ï¼‰
- **SSH ç«¯å£**: SSH ç«¯å£å·ï¼ˆé»˜è®¤ `22`ï¼‰
- **SSH ç”¨æˆ·å**: ç™»å½•ç”¨æˆ·åï¼ˆå¦‚ `root`ï¼‰
- **SSH ç§é’¥æ–‡ä»¶è·¯å¾„**: ç§é’¥æ–‡ä»¶çš„ç»å¯¹è·¯å¾„ï¼ˆå¦‚ `~/.ssh/id_rsa`ï¼‰
- **æœ¬åœ°ç›®å½•è·¯å¾„**: è¦ä¼ è¾“çš„æœ¬åœ°ç›®å½•ï¼ˆé»˜è®¤ä¸ºå½“å‰ç›®å½•ï¼‰
- **è¿œç¨‹ç›®å½•è·¯å¾„**: è¿œç¨‹æœåŠ¡å™¨ç›®æ ‡ç›®å½•ï¼ˆå¦‚ `/var/www/html`ï¼‰

### 2. ä¼ è¾“ç›®å½•

é…ç½®å®Œæˆåï¼Œåœ¨è¦ä¼ è¾“çš„ç›®å½•ä¸‹æ‰§è¡Œï¼š

```bash
dcr
```

å·¥å…·ä¼šè‡ªåŠ¨å®Œæˆï¼š
1. âœ… å‹ç¼©æœ¬åœ°ç›®å½•ï¼ˆè‡ªåŠ¨æ’é™¤ node_modulesã€.git ç­‰ï¼‰
2. âœ… è¿æ¥è¿œç¨‹æœåŠ¡å™¨
3. âœ… ä¸Šä¼  zip æ–‡ä»¶ï¼ˆæ˜¾ç¤ºå®æ—¶è¿›åº¦ï¼‰
4. âœ… è¿œç¨‹è‡ªåŠ¨è§£å‹
5. âœ… æ¸…ç†ä¸´æ—¶æ–‡ä»¶

### 3. æŸ¥çœ‹å¸®åŠ©

```bash
dcr --help
dcr config --help
```

## ä½¿ç”¨åœºæ™¯

### åœºæ™¯ 1ï¼šéƒ¨ç½²å‰ç«¯é¡¹ç›®

```bash
cd /path/to/my-web-project
dcr config
dcr
```

### åœºæ™¯ 2ï¼šåŒæ­¥å¼€å‘æ–‡ä»¶åˆ°æµ‹è¯•æœåŠ¡å™¨

```bash
cd ~/workspace/api-service
dcr
```

### åœºæ™¯ 3ï¼šæ‰¹é‡ä¸Šä¼ é…ç½®æ–‡ä»¶

```bash
cd ~/config-files
dcr
```

## é…ç½®æ–‡ä»¶

é…ç½®æ–‡ä»¶è‡ªåŠ¨ä¿å­˜åœ¨ç³»ç»Ÿé…ç½®ç›®å½•ï¼š
- **Windows**: `%APPDATA%\dir-copy-to-remote\config.json`
- **macOS**: `~/Library/Preferences/dir-copy-to-remote/config.json`
- **Linux**: `~/.config/dir-copy-to-remote/config.json`

## æ’é™¤æ–‡ä»¶

é»˜è®¤æ’é™¤ä»¥ä¸‹æ–‡ä»¶å’Œç›®å½•ï¼š
- `node_modules`
- `.git`
- `.vscode`
- `.idea`
- `dist`
- `build`
- `*.log`
- `.DS_Store`
- `Thumbs.db`

## å‰ç½®è¦æ±‚

### æœ¬åœ°ç¯å¢ƒ
- Node.js >= 18.0.0
- SSH ç§é’¥æ–‡ä»¶

### è¿œç¨‹æœåŠ¡å™¨
- SSH æœåŠ¡å¼€å¯
- å·²é…ç½®ç§é’¥è®¤è¯
- å®‰è£… `unzip` å·¥å…·ï¼ˆå¤§å¤šæ•° Linux å‘è¡Œç‰ˆé»˜è®¤å·²å®‰è£…ï¼‰

å¦‚æœè¿œç¨‹æœåŠ¡å™¨æ²¡æœ‰ `unzip`ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤å®‰è£…ï¼š

```bash
sudo apt-get install unzip
sudo yum install unzip
```

## æŠ€æœ¯æ ˆ

- **TypeScript** - ç±»å‹å®‰å…¨
- **ssh2** - SSH è¿æ¥å’Œ SFTP
- **archiver** - zip å‹ç¼©
- **commander** - CLI æ¡†æ¶
- **inquirer** - äº¤äº’å¼é…ç½®
- **ora** - è¿›åº¦æç¤º
- **chalk** - å½©è‰²è¾“å‡º
- **conf** - é…ç½®ç®¡ç†

## å¸¸è§é—®é¢˜

### 1. ç§é’¥æƒé™é—®é¢˜

å¦‚æœé‡åˆ°ç§é’¥æƒé™é”™è¯¯ï¼Œè¯·ç¡®ä¿ç§é’¥æ–‡ä»¶æƒé™æ­£ç¡®ï¼š

```bash
chmod 600 ~/.ssh/id_rsa
```

### 2. è¿æ¥è¶…æ—¶

æ£€æŸ¥ï¼š
- æœåŠ¡å™¨ IP å’Œç«¯å£æ˜¯å¦æ­£ç¡®
- é˜²ç«å¢™æ˜¯å¦å¼€æ”¾ SSH ç«¯å£
- ç§é’¥æ˜¯å¦å·²æ·»åŠ åˆ°æœåŠ¡å™¨ `~/.ssh/authorized_keys`

### 3. è¿œç¨‹è§£å‹å¤±è´¥

ç¡®ä¿è¿œç¨‹æœåŠ¡å™¨å·²å®‰è£… `unzip` å·¥å…·ã€‚

## å¼€å‘

```bash
git clone <repo-url>
cd dir-copy-to-remote
npm install
npm run dev
npm link
```

## License

MIT
