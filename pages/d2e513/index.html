<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Java集合 | 轩辕李的博客</title>
    <meta name="generator" content="VuePress 1.9.5">
    <link rel="icon" href="/blog/img/favicon.ico">
    <meta name="description" content="轩辕李的技术博客,自我成长，变得更强">
    <meta name="keywords" content="个人技术博客,前端,后端,运维,技术文档,学习,面试,JavaScript,js,java,vue,python,css3,css,html5,Node,markdown,Kubernetes,Docker">
    <meta name="theme-color" content="#11a8cd">
    
    <link rel="preload" href="/blog/assets/css/0.styles.8b6f9cb2.css" as="style"><link rel="preload" href="/blog/assets/js/app.01ab09a8.js" as="script"><link rel="preload" href="/blog/assets/js/2.cb21dba0.js" as="script"><link rel="preload" href="/blog/assets/js/17.c47d4b76.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.cbae5994.js"><link rel="prefetch" href="/blog/assets/js/11.26bc7671.js"><link rel="prefetch" href="/blog/assets/js/12.392b3b8d.js"><link rel="prefetch" href="/blog/assets/js/13.97cc2b3c.js"><link rel="prefetch" href="/blog/assets/js/14.b79e5598.js"><link rel="prefetch" href="/blog/assets/js/15.4d568dd9.js"><link rel="prefetch" href="/blog/assets/js/16.7ad9f978.js"><link rel="prefetch" href="/blog/assets/js/18.fbaa3fcc.js"><link rel="prefetch" href="/blog/assets/js/19.18e1e200.js"><link rel="prefetch" href="/blog/assets/js/20.3b21dfb0.js"><link rel="prefetch" href="/blog/assets/js/21.a2e08dd0.js"><link rel="prefetch" href="/blog/assets/js/22.62c8aa6e.js"><link rel="prefetch" href="/blog/assets/js/23.d3ae3372.js"><link rel="prefetch" href="/blog/assets/js/24.9a14eb44.js"><link rel="prefetch" href="/blog/assets/js/25.3ffcdbe0.js"><link rel="prefetch" href="/blog/assets/js/26.4e3cd358.js"><link rel="prefetch" href="/blog/assets/js/27.8102072e.js"><link rel="prefetch" href="/blog/assets/js/28.39d6e807.js"><link rel="prefetch" href="/blog/assets/js/29.73d719e5.js"><link rel="prefetch" href="/blog/assets/js/3.43307d58.js"><link rel="prefetch" href="/blog/assets/js/30.42de7b92.js"><link rel="prefetch" href="/blog/assets/js/31.8e7b1f6c.js"><link rel="prefetch" href="/blog/assets/js/32.a5b7465f.js"><link rel="prefetch" href="/blog/assets/js/33.2c2cfdb0.js"><link rel="prefetch" href="/blog/assets/js/34.e456df99.js"><link rel="prefetch" href="/blog/assets/js/35.ea2eb292.js"><link rel="prefetch" href="/blog/assets/js/36.2d18424c.js"><link rel="prefetch" href="/blog/assets/js/37.e0439f11.js"><link rel="prefetch" href="/blog/assets/js/38.e3ca0fed.js"><link rel="prefetch" href="/blog/assets/js/39.121c55c9.js"><link rel="prefetch" href="/blog/assets/js/4.981852e7.js"><link rel="prefetch" href="/blog/assets/js/40.c09dfbff.js"><link rel="prefetch" href="/blog/assets/js/41.43ccf10c.js"><link rel="prefetch" href="/blog/assets/js/42.96587c01.js"><link rel="prefetch" href="/blog/assets/js/43.ac2e4f7a.js"><link rel="prefetch" href="/blog/assets/js/44.f8991bcc.js"><link rel="prefetch" href="/blog/assets/js/45.96c75153.js"><link rel="prefetch" href="/blog/assets/js/5.e552e1f2.js"><link rel="prefetch" href="/blog/assets/js/6.dd64a897.js"><link rel="prefetch" href="/blog/assets/js/7.63e76dfa.js"><link rel="prefetch" href="/blog/assets/js/8.009721ba.js"><link rel="prefetch" href="/blog/assets/js/9.7a30687e.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.8b6f9cb2.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><img src="/blog/img/logo.png" alt="轩辕李的博客" class="logo"> <span class="site-name can-hide">轩辕李的博客</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><a href="/blog/server/" class="link-title">后端</a> <span class="title" style="display:none;">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/server/java/" class="nav-link">Java</a></li><li class="dropdown-item"><!----> <a href="/blog/server/spring/" class="nav-link">Spring</a></li><li class="dropdown-item"><!----> <a href="/blog/server/util/" class="nav-link">工具</a></li><li class="dropdown-item"><!----> <a href="/blog/server/distribution/" class="nav-link">分布式</a></li><li class="dropdown-item"><!----> <a href="/blog/server/think/" class="nav-link">心得</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><a href="/blog/web/" class="link-title">前端</a> <span class="title" style="display:none;">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/web/htmlcss/" class="nav-link">HTML&amp;CSS</a></li><li class="dropdown-item"><!----> <a href="/blog/web/js/" class="nav-link">JavaScript</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="运维" class="dropdown-title"><a href="/blog/operation/" class="link-title">运维</a> <span class="title" style="display:none;">运维</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/operation/linuxc/" class="nav-link">Linux &amp; C</a></li></ul></div></div><div class="nav-item"><a href="/blog/about/" class="nav-link">关于</a></div><div class="nav-item"><a href="/blog/pages/beb6c0bd8a66cea6/" class="nav-link">收藏</a></div><div class="nav-item"><a href="/blog/english-corner/" class="nav-link">英语角</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/blog/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/blog/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/blog/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://github.com/xuanyuanli/blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="https://cdn.staticaly.com/gh/xuanyuanli/Img@master/picx/image.5k3g1yhljok0.jpg"> <div class="blogger-info"><h3>轩辕李</h3> <span>勇猛精进，星辰大海</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/blog/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><a href="/blog/server/" class="link-title">后端</a> <span class="title" style="display:none;">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/server/java/" class="nav-link">Java</a></li><li class="dropdown-item"><!----> <a href="/blog/server/spring/" class="nav-link">Spring</a></li><li class="dropdown-item"><!----> <a href="/blog/server/util/" class="nav-link">工具</a></li><li class="dropdown-item"><!----> <a href="/blog/server/distribution/" class="nav-link">分布式</a></li><li class="dropdown-item"><!----> <a href="/blog/server/think/" class="nav-link">心得</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><a href="/blog/web/" class="link-title">前端</a> <span class="title" style="display:none;">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/web/htmlcss/" class="nav-link">HTML&amp;CSS</a></li><li class="dropdown-item"><!----> <a href="/blog/web/js/" class="nav-link">JavaScript</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="运维" class="dropdown-title"><a href="/blog/operation/" class="link-title">运维</a> <span class="title" style="display:none;">运维</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/operation/linuxc/" class="nav-link">Linux &amp; C</a></li></ul></div></div><div class="nav-item"><a href="/blog/about/" class="nav-link">关于</a></div><div class="nav-item"><a href="/blog/pages/beb6c0bd8a66cea6/" class="nav-link">收藏</a></div><div class="nav-item"><a href="/blog/english-corner/" class="nav-link">英语角</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/blog/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/blog/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/blog/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://github.com/xuanyuanli/blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Java</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><span>核心</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/pages/c6325d/" class="sidebar-link">Java8--Lambda 表达式、Stream 和时间 API</a></li><li><a href="/blog/pages/d2e513/" aria-current="page" class="active sidebar-link">Java集合</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/blog/pages/d2e513/#jdk内部集合" class="sidebar-link">JDK内部集合</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/blog/pages/d2e513/#_1、数组" class="sidebar-link">1、数组</a></li><li class="sidebar-sub-header level3"><a href="/blog/pages/d2e513/#_2、list" class="sidebar-link">2、List</a></li><li class="sidebar-sub-header level3"><a href="/blog/pages/d2e513/#_3、set" class="sidebar-link">3、Set</a></li><li class="sidebar-sub-header level3"><a href="/blog/pages/d2e513/#_4、map" class="sidebar-link">4、Map</a></li><li class="sidebar-sub-header level3"><a href="/blog/pages/d2e513/#_5、其他" class="sidebar-link">5、其他</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/blog/pages/d2e513/#apache-commons-collection集合" class="sidebar-link">Apache Commons Collection集合</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/blog/pages/d2e513/#_1、工具类" class="sidebar-link">1、工具类</a></li><li class="sidebar-sub-header level3"><a href="/blog/pages/d2e513/#_2、容器类" class="sidebar-link">2、容器类</a></li><li class="sidebar-sub-header level3"><a href="/blog/pages/d2e513/#_3、辅助类" class="sidebar-link">3、辅助类</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/blog/pages/d2e513/#guava集合" class="sidebar-link">Guava集合</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/blog/pages/d2e513/#_1、不可变系列对象" class="sidebar-link">1、不可变系列对象</a></li><li class="sidebar-sub-header level3"><a href="/blog/pages/d2e513/#_2、新的集合类型" class="sidebar-link">2、新的集合类型</a></li><li class="sidebar-sub-header level3"><a href="/blog/pages/d2e513/#_3、实用工具类" class="sidebar-link">3、实用工具类</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/blog/pages/d2e513/#并发集合" class="sidebar-link">并发集合</a></li><li class="sidebar-sub-header level2"><a href="/blog/pages/d2e513/#redission分布式集合" class="sidebar-link">Redission分布式集合</a></li><li class="sidebar-sub-header level2"><a href="/blog/pages/d2e513/#总结" class="sidebar-link">总结</a></li></ul></li><li><a href="/blog/pages/88c2d0/" class="sidebar-link">Java IO</a></li><li><a href="/blog/pages/f36bf8/" class="sidebar-link">Java 文件操作</a></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>并发</span> <span class="arrow right"></span></p> <!----></section></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Spring</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>工具</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>分布式</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>心得</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/blog/" title="首页" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><a href="/blog/server/#后端" data-v-06225672>后端</a></li><li data-v-06225672><a href="/blog/server/#Java" data-v-06225672>Java</a></li><li data-v-06225672><a href="/blog/server/#核心" data-v-06225672>核心</a></li></ul> <div class="info" data-v-06225672><div title="作者" class="author iconfont icon-touxiang" data-v-06225672><a href="https://github.com/xuanyuanli" target="_blank" title="作者" class="beLink" data-v-06225672>轩辕李</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2022-08-06</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABH1JREFUSA3tVl1oHFUUPmdmd2ltklqbpJDiNnXFmgbFktho7YMPNiJSSZM0+CAYSkUELVhM6YuwIPpgoOKDqOBDC0XE2CQoNtQXBUFTTcCi+Wlh1V2TQExsUzcltd3M9Tt3ZjZzZ2fT+OJTL8yeM+eee757fmeJbq//KQL8X3DUSFOcfr7cRsRtxNQMWueeVzOkaITIGqQHNg5y8+jNW9ldM7A6nTpAjuolUikAwq7CE3WcM2RRDz+XGVgN3FptU/aUSlvq9Pa3iZ1+sgAqJyyAFqkipd9dqiwHF3P65YycLWc/6sqGrvoEoIp6DOFaX5h6+dnfjkWprwqsPk0dUGq5vySwDImC10KxFHgGL1SWoc92O3eVht09qdXNH11I2SsTsJYqMWzihqGMi+A+Garf3BAuuLI5oGlULyNfyB/HYNujwktOfRrMr5t77NmevqaUopx0grnKAyvVpmwUDB4x6FPXuGvYLTDwWsejwgtgkYKPqRJg8SV6xaiZ3ZTppGneS4yfH5/66fZSDHv+QZci/+h5c5UHtpy67JUqGppM0sh0Nc1dW6/N1W5Yoqat8/TU/VnadmdeW2PLLSyh0cvxBs3KbqTmwYPpxN4do/mzE8nEpvX/UMu2Wbp74zUAK5q6WkHns7V0eWkdPbPzd3rxkTGybadYySumVzhcaJFbs5UrEkQ/+CK8gF5dnh/6ciIZ73gwQ927L1IitoxKLXYP3SjYdOrHHfTZhRRlFyrorafPk20B3HPD1y2G3qKZME5Jcf3t/HUC13/8tSd++vqFveMUTwAUxSUFI1QekR1+bIze3D9MF2aq6cPvG72CgnldWCFqyRw3lwH8ZMerjTD9ElRO7Gv44wNpC90aASqGfVlz/Rx17srQ57/UU26hkhQqUB7dBR71WmzQhHUnblGmVOEw0jhbV1n9OlXUDCIRGaNV5Jp43N516fN7JmnTHdfp7Hgy0luO4aMhtkLL8Bi3bUWYvzh5Mn1dTxrL6QmGuRhGL/TiTTxRoEdTszSaq9GR0NGA3KdkOz3hqSV3MIDhQ5IVX/Ivx3umBti2es2h4eZby7x8br1rkf7Mo90AqC8aQ3sJeNzqFRu+vSANAQe3PL7l0HGOAdwDCeZYvNKeoZp1Qfs6Aipndh86HmFRi0LAnEO47wsqM6cdfjh3jBPUzhZy7nvlUfFsamED1VQt6aISHVymXZ/B2aCtIG8AI8xfobj2d3en1wWVhOeHELKmLQ1s211s88comkv4UCwWyF787mJdYXtNfhKAXVqnKTq8QZvGAGGOfaTo5pGZ/PwbUCr5+DPr/1J92JNHr9aOl/F3iI5+O1nfybsGxoimvZ3ViWSluDITw3P37mypheDIPY0tw7+O/5ApbkYw+zpfaUVu32Pi98+defdUhEpZkRFq0aqyNh9FuL9hpYbEm6iwi0z2REd09ZmyENEbuhjDWzKvZXTqKYaBIr3tt5kuPtQBZFvEUwHt60vfCNu41XsksH9Ij1BMMz1Y0OOunHNShFIP5868g5zeXmuLwL9T4b6Q2+KejgAAAABJRU5ErkJggg==">Java集合<!----></h1>  <div class="theme-vdoing-content content__default"><p>本文主要讲解JDK内部集合类、Apache Commons Collection中的集合类、Guava中的集合类、并发集合类、Redission分布式集合类。<br></p> <h2 id="jdk内部集合"><a href="#jdk内部集合" class="header-anchor">#</a> JDK内部集合</h2> <h3 id="_1、数组"><a href="#_1、数组" class="header-anchor">#</a> 1、数组</h3> <p>两种初始化方法：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// 方式1</span>
<span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// 方式1</span>
<span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>多维数组：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div><p>用法：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// 访问元素</span>
arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>

<span class="token comment">// 循环-方式1</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> s <span class="token operator">:</span> arr<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>

<span class="token comment">// 循环-方式2</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">String</span> s <span class="token operator">=</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
<span class="token comment">// 循环-方式3</span>
<span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>s <span class="token operator">-&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 循环-倒序</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> arr<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">String</span> s <span class="token operator">=</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Arrays工具类中的方法：</p> <ul><li>stream 数组转为Stream流</li> <li>copyOfRange 将指定数组的指定范围复制到新数组中</li> <li>copyOf 复制指定的数组，截断或填充空值（如有必要），使副本具有指定的长度</li> <li>binarySearch 二分搜索</li> <li>fill 将指定的值分配给数组的每个元素</li> <li>setAll 和fill类似，不过指定值为自定义Function</li> <li>sort 升序排序</li> <li>spliterator 拆分器。大多数情况下，你都不需要使用到这个方法，他主要是跟StreamSupport配合使用。参考<a href="https://blog.csdn.net/weixin_38308374/article/details/112972462" target="_blank" rel="noopener noreferrer">java8 Stream之Spliterator<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>parallelPrefix 使用提供的函数并行累积给定数组的每个元素。相当于并行的reduce操作</li> <li>parallelSetAll setAll的并行版本</li> <li>parallelSort sort的并行版本</li> <li>toString、equals、hashCode 共用基础方法，不多说。此外这三个方法还有对应的deep系列，分别是deepToString、deepEquals、deepHashCode</li></ul> <p>这其中要重点说一下数组拷贝，其实Java中数组拷贝最终都是调用<code>System.arraycopy()</code>方法，这个方法的性能是非常高的，因为它是直接对内存进行复制。所以关于数组复制尽量调用此方法。<br>
需要注意的是<code>System.arraycopy()</code>属于浅复制，也就是复制对象和二维数组的时候复制的是引用，修改复制后的对象会影响到原始对象。</p> <p>数组特点：</p> <ul><li>访问速度快。插入和查询时间复杂度是O(1)</li> <li>初始化之后长度不可变，不支持动态扩容</li></ul> <h3 id="_2、list"><a href="#_2、list" class="header-anchor">#</a> 2、List</h3> <p>为了解决数组动态扩容的问题，产生了List集合。<br>
主要有两个实现类：</p> <ul><li>ArrayList 数组实现。遍历和随机访问效率高</li> <li>LinkedList 链表实现。插入和删除效率高</li></ul> <p>初始化：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// java9之后。of方法返回的是不可变List</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token class-name">List</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span>
</code></pre></div><p>List继承自Collection接口，Collection继承自Iterable接口。<br>
Iterable中的方法：</p> <ul><li>iterator 迭代器。有了他我们就可以使用foreach循环了</li> <li>forEach java8之后新增方法，lambda式的forEach</li> <li>spliterator 拆分器</li></ul> <p>Collection中的方法：</p> <ul><li>size 获得集合中的元素数</li> <li>isEmpty 此集合是否不包含任何元素</li> <li>contains 是否包含指定元素</li> <li>toArray 转换为array数组。toArray默认返回时Object数组，但他有两个重载方法，可以返回指定类型的数组</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr2 <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span>i<span class="token operator">-&gt;</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>add 添加元素</li> <li>remove 删除元素</li> <li>containsAll 是否包含指定的所有元素</li> <li>addAll 添加指定的所有元素</li> <li>removeAll 删除指定的所有元素</li> <li>removeIf 删除满足条件的元素</li> <li>retainAll 保留指定的所有元素，其他元素则删除</li> <li>clear 清空集合</li> <li>stream 获得stream流</li> <li>parallelStream 获得并行stream流</li></ul> <p>List中的方法：</p> <ul><li>addAll(i,col) 指定位置添加元素</li> <li>replaceAll 按照指定规则替换所有元素</li> <li>sort 根据Comparator进行排序。在java8中使用lambda表达式特别方便</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// 对于基本类型</span>
list<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token operator">::</span><span class="token function">compareTo</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//对于Comparator&lt;String&gt; compare = String::compareTo;你可能会比较迷惑，其实他的转换过程是这样的</span>
<span class="token class-name">BiFunction</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> bf <span class="token operator">=</span> <span class="token class-name">String</span><span class="token operator">::</span><span class="token function">compareTo</span><span class="token punctuation">;</span>
<span class="token class-name">Comparator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> compare <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Comparator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span> bf<span class="token punctuation">;</span>  <span class="token comment">// 可以看到Comparator函数接口的结果和BiFunction是相似的，java做了简化处理</span>


<span class="token comment">// 对于Bean</span>
list<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token class-name">Comparator</span><span class="token punctuation">.</span><span class="token function">comparing</span><span class="token punctuation">(</span><span class="token class-name">TUser</span><span class="token operator">::</span><span class="token function">getId</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><ul><li>get 获得指定位置元素</li> <li>set 设置指定位置元素</li> <li>add(i,e) 添加指定位置元素。会导致原先此位置的元素后移</li> <li>remove(i) 删除指定位置元素。如果List中泛型为Integer，这里会和Collection中的remove有一个冲突，具体这么做</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// 调用的是Collection.remove</span>
intList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 调用的是List.remove</span>
intList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>indexOf 指定元素第一次出现时的索引</li> <li>lastIndexOf 指定元素最后一次出现时的索引</li> <li>listIterator 获得ListIterator，支持在迭代期间修改列表</li> <li>subList 返回指定位置范围的视图</li></ul> <p>List还有两个静态方法：</p> <ul><li>of java9之后支持。获得不可修改的列表</li> <li>copyOf java11之后支持。拷贝一个不可修改的列表</li></ul> <h3 id="_3、set"><a href="#_3、set" class="header-anchor">#</a> 3、Set</h3> <p>Set是不包含重复元素的集合。继承自Collection接口，主要实现类：</p> <ul><li>HashSet 不保证迭代顺序和插入顺序一致。内部借助HashMap来实现</li> <li>LinkedHashSet 能保证迭代顺序和插入顺序一致。内部借助LinkedHashMap来实现</li> <li>TreeSet 元素按照自然顺序或者提供的Comparator来排序</li></ul> <p>初始化：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// 方式1</span>
<span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> set <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
set<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
set<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;b&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 方式2。返回不可变Set</span>
<span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> integers <span class="token operator">=</span> <span class="token class-name">Set</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>HashSet和LinkedHashSet没有自己独立的方法，参考Collection接口即可。<br>
Set接口有of和copyOf方法，功能同List。<br>
TreeSet继承自NavigableSet，NavigableSet继承自SortedSet。我们来看看他们其中的方法。</p> <p>SortedSet提供了对元素排序的功能，其中的方法有：</p> <ul><li>subSet 返回此集合部分的视图，其元素范围从fromElement （包括）到toElement （不包括）</li> <li>headSet 返回此集合中元素严格小于toElement的部分的视图</li> <li>tailSet 返回此集合中元素大于或等于fromElement的部分的视图</li> <li>first 第一个元素</li> <li>last 最后一个元素</li></ul> <p>NavigableSet是对SortedSet的导航扩展，报告给定搜索目标的最接近匹配。参考<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/NavigableSet.html" target="_blank" rel="noopener noreferrer">NavigableSet Api<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>Set和List都继承自Collection接口，JDK提供了Collections工具类，其中有一些常用的方法：</p> <ul><li>sort 自然排序</li> <li>binarySearch 二分搜索</li> <li>reverse 反转集合顺序</li> <li>shuffle 打乱顺序（洗牌）</li> <li>swap 根据下标交换指定元素的位置</li> <li>copy 列表拷贝</li> <li>min 根据排序规则，取得最小值</li> <li>max 根据排序规则，取得最大值</li> <li>rotate 旋转，元素的位置将要被重新调整为(i - distance) mod list.size()。用于快速元素移动很有效</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token class-name">Lists</span><span class="token punctuation">.</span><span class="token function">newArrayList</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 将元素整体后移一位</span>
<span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">rotate</span><span class="token punctuation">(</span>list<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// [4, 1, 2, 3]</span>
<span class="token comment">// 将元素整体前移一位</span>
<span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">rotate</span><span class="token punctuation">(</span>list<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// [2, 3, 4, 1]</span>
<span class="token comment">// 仅移动部分区间数据</span>
<span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">rotate</span><span class="token punctuation">(</span>list<span class="token punctuation">.</span><span class="token function">subList</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// [1, 3, 2, 4]</span>
</code></pre></div><ul><li>replaceAll 替换集合中旧值为新值</li> <li>indexOfSubList 列表级别的indexOf</li> <li>unmodifiableCollection 变为不可修改集合。还有系列方法：unmodifiableSet、unmodifiableSortedSet、unmodifiableNavigableSet、unmodifiableMap等</li> <li>synchronizedCollection 变为现场安全的集合。系统方法同上。Java1.5之后新增了同步容器ConcurrentMap等，所以不再推荐使用此系列方法</li> <li>checkedCollection 返回指定集合的动态类型安全视图，只允许插入指定的类型。系列方法同上</li> <li>emptyIterator 返回一个没有元素的迭代器。还有系列方法：emptySet、emptyList、emptyMap等</li> <li>singleton 返回一个只包含指定对象的不可变集合。还有系列方法：singletonList、singletonMap</li> <li>nCopies n个对象副本组成的不可变列表</li> <li>reverseOrder 排序辅助方法，返回逆序的Comparator</li> <li>enumeration 返回集合的Enumeration对象</li> <li>list Enumeration对象转换为List对象</li> <li>frequency 返回指定集合中等于指定对象的元素数，其实可以叫getCount</li> <li>disjoint 两集合没有共同的元素，则返回true</li></ul> <h3 id="_4、map"><a href="#_4、map" class="header-anchor">#</a> 4、Map</h3> <p>Map是键值对，每个键最多映射到一个值上。主要实现类有：</p> <ul><li>HashMap 基于哈希表的实现，允许null键和null值。内部使用数组+链表的数据结构，为了保证性能，Java8之后链表元素数量大于阈值会变为红黑树</li> <li>LinkedHashMap 保证了迭代顺序和插入顺序一致，允许null键和null值。内部使用哈希表+双向链表实现</li> <li>TreeMap 键值按照自然顺序或者提供的Comparator来排序，不允许null键，允许null值。内部使用红黑树来实现</li> <li>HashTable 线程安全的哈希表，因为性能太差，不推荐使用。讲到并发集合的时候，用ConcurrentMap替代它</li></ul> <p>Map接口有of和copyOf方法，功能同List。此外还有两个静态方法：entry和ofEntries。<br>
初始化：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// 方式1</span>
<span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;b&quot;</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
<span class="token comment">// 方式2。返回不可变Map</span>
<span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> integerMap <span class="token operator">=</span> <span class="token class-name">Map</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 方式3。返回不可变Map</span>
<span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> stringIntegerMap <span class="token operator">=</span> <span class="token class-name">Map</span><span class="token punctuation">.</span><span class="token function">ofEntries</span><span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token punctuation">.</span><span class="token function">entry</span><span class="token punctuation">(</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">Map</span><span class="token punctuation">.</span><span class="token function">entry</span><span class="token punctuation">(</span><span class="token string">&quot;b&quot;</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Map接口的方法：</p> <ul><li>size 键值数量</li> <li>isEmpty 是否为空字典</li> <li>containsKey 是否包含指定键</li> <li>containsValue 是否包含指定值</li> <li>get 根据键获得值</li> <li>put 添加键值</li> <li>remove 删除键值</li> <li>putAll 批量添加</li> <li>clear 清空键值字典</li> <li>keySet 获得键Set</li> <li>values 获得值集合</li> <li>entrySet 获得键值对Set，泛型为Map.Entry</li> <li>getOrDefault 安全的get，没有值则返回默认值</li> <li>forEach foreach的lambda版本</li> <li>replaceAll 替换匹配的所有元素</li> <li>putIfAbsent 字典中不存在此键，则添加；否则不做操作</li> <li>replace 替换</li> <li>computeIfAbsent putIfAbsent的Function版本</li> <li>computeIfPresent 当指定键存在时，重新计算新值</li> <li>compute 尝试计算指定键及其当前映射值的映射</li> <li>merge 旧值替换为新值，或直接赋值</li></ul> <p>后四个方法为Java 8中新增的，有必要演示一下：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// 基础数据</span>
<span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Jack&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// computeIfAbsent：name不会被插入成功。因为已经存在了name键</span>
map<span class="token punctuation">.</span><span class="token function">computeIfAbsent</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> k <span class="token operator">-&gt;</span> k <span class="token operator">+</span> <span class="token string">&quot; random&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 返回值为&quot;Jack&quot;。map：{name=Jack, age=25}</span>
map<span class="token punctuation">.</span><span class="token function">computeIfAbsent</span><span class="token punctuation">(</span><span class="token string">&quot;score&quot;</span><span class="token punctuation">,</span> k <span class="token operator">-&gt;</span> <span class="token number">90</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 返回值为90。map：{name=Jack, age=25, score=90}</span>
        
<span class="token comment">// computeIfPresent：name会被插入成功,会替换掉旧值</span>
map<span class="token punctuation">.</span><span class="token function">computeIfPresent</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>k<span class="token punctuation">,</span>v<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> k <span class="token operator">+</span> <span class="token string">&quot; random&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// 返回值为&quot;name random&quot;。map：{name=name random, age=25}</span>
<span class="token comment">// 可以按照你想要的规则进行替换</span>
map<span class="token punctuation">.</span><span class="token function">computeIfPresent</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>k<span class="token punctuation">,</span>v<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> v <span class="token operator">+</span> <span class="token string">&quot; random&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// {name=Jack random, age=25}</span>
map<span class="token punctuation">.</span><span class="token function">computeIfPresent</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>k<span class="token punctuation">,</span>v<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> k <span class="token operator">+</span> v<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// {name=name Jack, age=25}</span>
<span class="token comment">// 替换新值为null的话键值会被删除</span>
map<span class="token punctuation">.</span><span class="token function">computeIfPresent</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>k<span class="token punctuation">,</span>v<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 返回值为null。map：{age=25}</span>
<span class="token comment">// 插入一个不存在的键值会失败</span>
map<span class="token punctuation">.</span><span class="token function">computeIfPresent</span><span class="token punctuation">(</span><span class="token string">&quot;score&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>k<span class="token punctuation">,</span>v<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token number">90</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 返回值为null。map：{name=Jack, age=25}</span>

<span class="token comment">// compute：可定制的计算，computeIfPresent的增强版，可以获得现有的k，v对齐进行操作</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

<span class="token comment">// merge：合并。如果存在旧值，则使用BiFunction进行替换；否则赋予新值</span>
map<span class="token punctuation">.</span><span class="token function">merge</span><span class="token punctuation">(</span><span class="token string">&quot;score&quot;</span><span class="token punctuation">,</span> <span class="token number">80</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>k<span class="token punctuation">,</span> v<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> v <span class="token operator">+</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//map：{name=Jack, age=25, score=80}</span>
</code></pre></div><p>HashMap和LinkedHashMap没有自己独有的方法，只是实现了Map接口。<br>
TreeMap还实现了NavigableMap-&gt;SortedMap，参考<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/NavigableMap.html" target="_blank" rel="noopener noreferrer">NavigableMap Api<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="_5、其他"><a href="#_5、其他" class="header-anchor">#</a> 5、其他</h3> <p>Queue接口定义了队列，有offer、poll、peek等队列专有方法。主要实现类有PriorityQueue（优先级队列）。<br>
Deque继承自Queue，定义了双端队列，有offer/poll/peek-First/Last等系列方法，主要实现类是ArrayDeque、LinkedList。</p> <p>Stack是Java中栈的实现类，有push、pop、peek等专有方法。</p> <h2 id="apache-commons-collection集合"><a href="#apache-commons-collection集合" class="header-anchor">#</a> Apache Commons Collection集合</h2> <p>Apache Commons系列工具包是Java开发中常用的工具包，其中关于集合方面的扩展要使用到commons-collections4：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token generics"><span class="token punctuation">&lt;</span>dependency<span class="token punctuation">&gt;</span></span>
    <span class="token generics"><span class="token punctuation">&lt;</span>groupId<span class="token punctuation">&gt;</span></span>org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>commons<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">&gt;</span>
    <span class="token generics"><span class="token punctuation">&lt;</span>artifactId<span class="token punctuation">&gt;</span></span>commons<span class="token operator">-</span>collections4<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">&gt;</span>
    <span class="token generics"><span class="token punctuation">&lt;</span>version<span class="token punctuation">&gt;</span></span><span class="token number">4.4</span><span class="token operator">&lt;</span><span class="token operator">/</span>version<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>dependency<span class="token operator">&gt;</span>
</code></pre></div><p>此工具工具包主要提供了三方面的扩展</p> <h3 id="_1、工具类"><a href="#_1、工具类" class="header-anchor">#</a> 1、工具类</h3> <p>主要是SetUtils、ListUtils、CollectionUtils、MapUtils。这些工具类有一些方法在Java8之后有点过时了，比如：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token class-name">List</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// select方法</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> select <span class="token operator">=</span> <span class="token class-name">ListUtils</span><span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span>list<span class="token punctuation">,</span> e <span class="token operator">-&gt;</span> e <span class="token operator">&gt;</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// java8之后这么做</span>
select <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>e<span class="token operator">-&gt;</span>e<span class="token operator">&gt;</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>其他诸如filter、transform、getCardinalityMap等方法，用Stream操作会更简单一些。</p> <p>下面列出一些提高效率的便利方法：</p> <ul><li>subtract 取得差集</li> <li>disjunction 获得彼此差集之后的并集</li> <li>intersection 取得交集</li> <li>union 取得并集</li> <li>containsAny 包含任何</li> <li>permutations 返回列表的所有排列组合，大小是列表大小的阶乘级别，注意性能和内存问题</li></ul> <h3 id="_2、容器类"><a href="#_2、容器类" class="header-anchor">#</a> 2、容器类</h3> <p>Bag 会记录对象在集合中出现的次数，用法：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">Bag</span> bag <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashBag</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
bag<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;ONE&quot;</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 添加6次</span>
bag<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">&quot;ONE&quot;</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 删除2次</span>
bag<span class="token punctuation">.</span><span class="token function">getCount</span><span class="token punctuation">(</span><span class="token string">&quot;ONE&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 返回4</span>
</code></pre></div><p>主要实现类有HashBag和TreeBag（自然排序）</p> <hr> <p>List的扩展，主要有如下类：</p> <ul><li>CursorableLinkedList 提供了可修改的迭代器。在JDK的List.listIterator中提供了类似功能</li> <li>FixedSizeList 固定大小的List，add、remove、clear和retain操作是不被支持的，set方法是允许的但是不会影响列表大小</li> <li>GrowthList 可以使其在因set或add操作造成索引超出异常时无缝的增加列表长度，可以避免大多数的IndexOutOfBoundsException</li> <li>LazyList 可以自动增长，但只发生在get时--允许指定一个Factory获得超出索引位置的值</li> <li>PredicatedList 添加元素时进行校验</li> <li>SetUniqueList 不允许重复元素的列表</li> <li>TransformedList 在set和add时对元素进行转换后再添加</li> <li>TreeList 实现了一个快速插入、删除，同时查询性能也可观的List</li></ul> <p>看完之后，怎么说呢？这些类用的频率都不太高，但又弃之可惜。</p> <hr> <p>Set的扩展有如下类：</p> <ul><li>CompositeSet 多个Set的组合视图</li> <li>剩余的Predicated、Transformed、Unmodifiable和List一样，不赘言</li></ul> <hr> <p>Map的扩展有如下类：</p> <ul><li>CaseInsensitiveMap 大小写不敏感的Map，会把键都转换为小写</li> <li>CompositeMap 多个Map的组合视图</li> <li>DefaultedMap 键不存在，返回默认对象</li> <li>FixedSizeMap 固定大小的Map</li> <li>IdentityMap 匹配键值不是通过==，而是equals</li> <li>MultiKeyMap 允许多个键关联到一个值上</li> <li>MultiValueMap 允许多个值关联到一个键上</li> <li>BidiMap 双向Map，可以通过值查找键。主要实现类是DualHashBidiMap、TreeBidiMap</li> <li>LRUMap 固定大小Map，容器满了之后删除最近最少使用（Least Recently Used）的元素</li> <li>LazyMap/PredicatedMap/TransformedMap/TypedMap/UnmodifiableMap，逻辑同List扩展一样，不赘言</li></ul> <h3 id="_3、辅助类"><a href="#_3、辅助类" class="header-anchor">#</a> 3、辅助类</h3> <p>主要是Comparator、Predicate、Transformer等辅助类，这些辅助类在Java8 Stream面前都显得有些过时了，不赘言</p> <h2 id="guava集合"><a href="#guava集合" class="header-anchor">#</a> Guava集合</h2> <p>如果说commons-collections4是质朴村花的话，那么Guava就是靓丽女神了。<br>
Guava中最受欢迎的就是他的集合类。</p> <h3 id="_1、不可变系列对象"><a href="#_1、不可变系列对象" class="header-anchor">#</a> 1、不可变系列对象</h3> <p>比如ImmutableList、ImmutableSet，比如JDK内部的Collections.unmodifiable系列方法来说，具有如下优点：</p> <ul><li>线程安全</li> <li>更加节省空间</li></ul> <p>需要注意的是，所有Immutable都拒绝空值。</p> <p>使用：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">ImmutableSet</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">&quot;red&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;orange&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;yellow&quot;</span><span class="token punctuation">)</span>

<span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Bar</span><span class="token punctuation">&gt;</span></span> bars <span class="token operator">=</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token class-name">ImmutableSet</span><span class="token punctuation">.</span><span class="token function">copyOf</span><span class="token punctuation">(</span>bars<span class="token punctuation">)</span>

<span class="token class-name">ImmutableSet</span><span class="token punctuation">.</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Color</span><span class="token punctuation">&gt;</span></span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addAll</span><span class="token punctuation">(</span><span class="token constant">WEBSAFE_COLORS</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Color</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">191</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_2、新的集合类型"><a href="#_2、新的集合类型" class="header-anchor">#</a> 2、新的集合类型</h3> <p>Multiset，定义一个集合，该集合计算对象在集合中出现的次数。<br>
主要方法有add、remove、getCount，使用起来比较简单：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">MultiSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> multiSet <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMultiSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
multiSet<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
multiSet<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
multiSet<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
multiSet<span class="token punctuation">.</span><span class="token function">getCount</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 5</span>
</code></pre></div><hr> <p>Multimap，一个键可以关联多个值。<br>
初始化：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">ListMultimap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> multimap1 <span class="token operator">=</span> <span class="token class-name">MultimapBuilder</span><span class="token punctuation">.</span><span class="token function">hashKeys</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">arrayListValues</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">SetMultimap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> multimap2 <span class="token operator">=</span> <span class="token class-name">MultimapBuilder</span><span class="token punctuation">.</span><span class="token function">treeKeys</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">hashSetValues</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>使用：</p> <div class="language-java extra-class"><pre class="language-java"><code>multimap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;type&quot;</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
multimap<span class="token punctuation">.</span><span class="token function">putAll</span><span class="token punctuation">(</span><span class="token string">&quot;type&quot;</span><span class="token punctuation">,</span> <span class="token class-name">Lists</span><span class="token punctuation">.</span><span class="token function">newArrayList</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> types <span class="token operator">=</span> multimap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;type&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Collection</span><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> multimap<span class="token punctuation">.</span><span class="token function">asMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><hr> <p>BiMap，双向Map。在commons-collections4有类似实现</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">BiMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> userId <span class="token operator">=</span> <span class="token class-name">HashBiMap</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

<span class="token class-name">String</span> userForId <span class="token operator">=</span> userId<span class="token punctuation">.</span><span class="token function">inverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><hr> <p>Table，一个索引映射多个值，类似<code>Map&lt;FirstName, Map&lt;LastName, Person&gt;&gt;</code>这样的结果<br>
用法：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">Table</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Double</span><span class="token punctuation">&gt;</span></span> table <span class="token operator">=</span> <span class="token class-name">HashBasedTable</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
table<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;cny&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;usd&quot;</span><span class="token punctuation">,</span> <span class="token number">0.235</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
table<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;cny&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;jpy&quot;</span><span class="token punctuation">,</span> <span class="token number">8.523</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
table<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;hkd&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;jpy&quot;</span><span class="token punctuation">,</span> <span class="token number">2.053</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

table<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;cny&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;usd&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 0.235</span>
table<span class="token punctuation">.</span><span class="token function">row</span><span class="token punctuation">(</span><span class="token string">&quot;cny&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">//{usd=0.235, jpy=8.523}</span>
table<span class="token punctuation">.</span><span class="token function">column</span><span class="token punctuation">(</span><span class="token string">&quot;jpy&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//{cny=8.523, hkd=2.053}</span>
table<span class="token punctuation">.</span><span class="token function">rowKeySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//cny, hkd</span>
</code></pre></div><hr> <p>RangeSet，包含范围的集合。<br>
用法：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">RangeSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> rangeSet <span class="token operator">=</span> <span class="token class-name">TreeRangeSet</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
rangeSet<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">Range</span><span class="token punctuation">.</span><span class="token function">closed</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {[1, 10]}</span>
rangeSet<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">Range</span><span class="token punctuation">.</span><span class="token function">closedOpen</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// disconnected range: {[1, 10], [11, 15)}</span>
rangeSet<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">Range</span><span class="token punctuation">.</span><span class="token function">closedOpen</span><span class="token punctuation">(</span><span class="token number">15</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// connected range; {[1, 10], [11, 20)}</span>
rangeSet<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">Range</span><span class="token punctuation">.</span><span class="token function">openClosed</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// empty range; {[1, 10], [11, 20)}</span>
rangeSet<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token class-name">Range</span><span class="token punctuation">.</span><span class="token keyword">open</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// splits [1, 10]; {[1, 5], [10, 10], [11, 20)}</span>

<span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Range</span><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> ranges <span class="token operator">=</span> rangeSet<span class="token punctuation">.</span><span class="token function">asRanges</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><hr> <p>RangeMap，包含范围的Map。与RangeSet不同的是它不合并相邻映射。<br>
用法：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">RangeMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> rangeMap <span class="token operator">=</span> <span class="token class-name">TreeRangeMap</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
rangeMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token class-name">Range</span><span class="token punctuation">.</span><span class="token function">closed</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;foo&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {[1, 10] =&gt; &quot;foo&quot;}</span>
rangeMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token class-name">Range</span><span class="token punctuation">.</span><span class="token keyword">open</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;bar&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {[1, 3] =&gt; &quot;foo&quot;, (3, 6) =&gt; &quot;bar&quot;, [6, 10] =&gt; &quot;foo&quot;}</span>
rangeMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token class-name">Range</span><span class="token punctuation">.</span><span class="token keyword">open</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;foo&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {[1, 3] =&gt; &quot;foo&quot;, (3, 6) =&gt; &quot;bar&quot;, [6, 10] =&gt; &quot;foo&quot;, (10, 20) =&gt; &quot;foo&quot;}</span>
rangeMap<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token class-name">Range</span><span class="token punctuation">.</span><span class="token function">closed</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {[1, 3] =&gt; &quot;foo&quot;, (3, 5) =&gt; &quot;bar&quot;, (11, 20) =&gt; &quot;foo&quot;}</span>
</code></pre></div><h3 id="_3、实用工具类"><a href="#_3、实用工具类" class="header-anchor">#</a> 3、实用工具类</h3> <p>比如Lists、Sets等，你可能想象不到，Guava中使用频率最高的是如下代码：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> integers <span class="token operator">=</span> <span class="token class-name">Lists</span><span class="token punctuation">.</span><span class="token function">newArrayList</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>不由得令人感慨，偷懒是最高生产力。</p> <p>这些工具类中方法众多，具体参考：<a href="https://github.com/google/guava/wiki/CollectionUtilitiesExplained" target="_blank" rel="noopener noreferrer">Guava 集合工具扩展<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>这里列出一些使用频率较高，令人眼前一亮的工具扩展：</p> <ul><li>Lists.partition 分割列表。返回连续子列表，每个子列表大小系统（最后一个可能更小）</li> <li>Sets.subSet 提取范围内的子视图</li> <li>Maps.subMap 提取范围内的子视图</li></ul> <h2 id="并发集合"><a href="#并发集合" class="header-anchor">#</a> 并发集合</h2> <p>前面说道不推荐使用Collections.synchronized系列方法，原因是它内部只是提供了一个简单的互斥操作，在高并发情况下，并不十分高效。<br>
Java 5之后利用CAS指令（乐观锁）提供了更高效的并发容器，它们分别是：</p> <ul><li>ConcurrentLinkedQueue 高并发环境下性能最好的队列</li> <li>CopyOnWriteArrayList 只在写时加锁的ArrayList，采用写时复制的思想，读性能大幅提升</li> <li>BlockingQueue 一个阻塞式的数据共享通道，参考：<a href="/blog/01.后端/01.Java/597089/">阻塞队列BlockingQueue</a>。他有三个主要实现：
<ul><li>ArrayBlockingQueue 数组支持的有界队列</li> <li>LinkedBlockingQueue 链表支持的可选有界队列</li> <li>LinkedBlockingDeque 链表支持的双向可选有界队列</li></ul></li> <li>ConcurrentMap 线程安全的map，主要实现有：
<ul><li>ConcurrentHashMap 高并发哈希表</li> <li>ConcurrentSkipListMap 跳表，类似LinkedHashMap，提供有序的遍历。类似于平衡树，特点是插入和删除只需要对局部数据进行操作即可。平衡树的话需要全局锁，而跳表只需要部分锁。</li></ul></li></ul> <h2 id="redission分布式集合"><a href="#redission分布式集合" class="header-anchor">#</a> Redission分布式集合</h2> <p>缓存作为提升性能和体验的必要手段，使用非常广泛。<br>
在同一个JVM内部，使用ConcurrentMap作为缓存是常见手段。<br>
在分布式环境中，可能需要集中式缓存服务，目前比较流行的是Redis，它提供了多种数据结果供我们使用。<br>
Redission作为Redis客户端库，更进一步的把原生Redis数据结构封装成了Java大家熟悉的集合容器。<br>
以Map举例：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">RMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">SomeObject</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> redisson<span class="token punctuation">.</span><span class="token function">getMap</span><span class="token punctuation">(</span><span class="token string">&quot;anyMap&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">SomeObject</span> prevObject <span class="token operator">=</span> map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;123&quot;</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">SomeObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">SomeObject</span> currentObject <span class="token operator">=</span> map<span class="token punctuation">.</span><span class="token function">putIfAbsent</span><span class="token punctuation">(</span><span class="token string">&quot;323&quot;</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">SomeObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">SomeObject</span> obj <span class="token operator">=</span> map<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">&quot;123&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">RFuture</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">SomeObject</span><span class="token punctuation">&gt;</span></span> putAsyncFuture <span class="token operator">=</span> map<span class="token punctuation">.</span><span class="token function">putAsync</span><span class="token punctuation">(</span><span class="token string">&quot;321&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>它提供了同步和异步的添加和删除方法。</p> <p>Redission还对分布式环境下常用操作做了一些封装，这已经超出了本章要讨论的内容，参考：<a href="https://github.com/redisson/redisson/wiki/Redisson%E9%A1%B9%E7%9B%AE%E4%BB%8B%E7%BB%8D" target="_blank" rel="noopener noreferrer">Redisson项目介绍<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="总结"><a href="#总结" class="header-anchor">#</a> 总结</h2> <p>本文对Java中的集合进行了讨论，主要讲到JDK内部集合类、Apache Commons Collection中的集合类、Guava中的集合类、并发集合类、Redission分布式集合类的使用。<br>
就我个人经验来说，学习一门语言不难，难的是对语言中的各种工具库、编程范式做到信手拈来、熟练使用，达到这一步，工作效率会有一个质的提升。<br>
当然，实际中也不提倡死记硬背，只需要在脑海中有一副地图，这样遇到问题的时候能快速的索引到对应的位置，多使用多历练，慢慢就成为一个高手。</p> <p><strong>祝你变得更强！</strong></p></div></div>  <div class="page-edit"><div class="edit-link"><a href="https://github.com/xuanyuanli/blog/edit/main/docs/01.后端/01.Java/01.核心/02.Java集合.md" target="_blank" rel="noopener noreferrer">编辑</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="tags"><a href="/blog/tags/?tag=Java%E9%9B%86%E5%90%88" title="标签">#Java集合</a></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2022/09/12, 22:05:54</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/blog/pages/c6325d/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">Java8--Lambda 表达式、Stream 和时间 API</div></a> <a href="/blog/pages/88c2d0/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">Java IO</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/blog/pages/c6325d/" class="prev">Java8--Lambda 表达式、Stream 和时间 API</a></span> <span class="next"><a href="/blog/pages/88c2d0/">Java IO</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/blog/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/blog/pages/f36bf8/"><div>
            Java 文件操作
            <!----></div></a> <span class="date">09-12</span></dt></dl><dl><dd>02</dd> <dt><a href="/blog/pages/88c2d0/"><div>
            Java IO
            <!----></div></a> <span class="date">08-25</span></dt></dl><dl><dd>03</dd> <dt><a href="/blog/pages/7a5bcf/"><div>
            HTML基础全景图
            <!----></div></a> <span class="date">08-05</span></dt></dl> <dl><dd></dd> <dt><a href="/blog/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="mailto:xuanyuanli999@gmail.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/xuanyuanli" title="GitHub" target="_blank" class="iconfont icon-github"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2022-2022
    <span>xuanyuanli | <a href="https://github.com/xuanyuanli/blob/master/LICENSE" target="_blank">MIT License</a></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"><div></div></div></div>
    <script src="/blog/assets/js/app.01ab09a8.js" defer></script><script src="/blog/assets/js/2.cb21dba0.js" defer></script><script src="/blog/assets/js/17.c47d4b76.js" defer></script>
  </body>
</html>
