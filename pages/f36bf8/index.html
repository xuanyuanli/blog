<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Java 文件操作 | 轩辕李的博客</title>
    <meta name="generator" content="VuePress 1.9.5">
    <link rel="icon" href="/blog/img/favicon.ico">
    <meta name="description" content="轩辕李的技术博客,自我成长，变得更强">
    <meta name="keywords" content="个人技术博客,前端,后端,运维,技术文档,学习,面试,JavaScript,js,java,vue,python,css3,css,html5,Node,markdown,Kubernetes,Docker">
    <meta name="theme-color" content="#11a8cd">
    
    <link rel="preload" href="/blog/assets/css/0.styles.8b6f9cb2.css" as="style"><link rel="preload" href="/blog/assets/js/app.01ab09a8.js" as="script"><link rel="preload" href="/blog/assets/js/2.cb21dba0.js" as="script"><link rel="preload" href="/blog/assets/js/19.18e1e200.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.cbae5994.js"><link rel="prefetch" href="/blog/assets/js/11.26bc7671.js"><link rel="prefetch" href="/blog/assets/js/12.392b3b8d.js"><link rel="prefetch" href="/blog/assets/js/13.97cc2b3c.js"><link rel="prefetch" href="/blog/assets/js/14.b79e5598.js"><link rel="prefetch" href="/blog/assets/js/15.4d568dd9.js"><link rel="prefetch" href="/blog/assets/js/16.7ad9f978.js"><link rel="prefetch" href="/blog/assets/js/17.c47d4b76.js"><link rel="prefetch" href="/blog/assets/js/18.fbaa3fcc.js"><link rel="prefetch" href="/blog/assets/js/20.3b21dfb0.js"><link rel="prefetch" href="/blog/assets/js/21.a2e08dd0.js"><link rel="prefetch" href="/blog/assets/js/22.62c8aa6e.js"><link rel="prefetch" href="/blog/assets/js/23.d3ae3372.js"><link rel="prefetch" href="/blog/assets/js/24.9a14eb44.js"><link rel="prefetch" href="/blog/assets/js/25.3ffcdbe0.js"><link rel="prefetch" href="/blog/assets/js/26.4e3cd358.js"><link rel="prefetch" href="/blog/assets/js/27.8102072e.js"><link rel="prefetch" href="/blog/assets/js/28.39d6e807.js"><link rel="prefetch" href="/blog/assets/js/29.73d719e5.js"><link rel="prefetch" href="/blog/assets/js/3.43307d58.js"><link rel="prefetch" href="/blog/assets/js/30.42de7b92.js"><link rel="prefetch" href="/blog/assets/js/31.8e7b1f6c.js"><link rel="prefetch" href="/blog/assets/js/32.a5b7465f.js"><link rel="prefetch" href="/blog/assets/js/33.2c2cfdb0.js"><link rel="prefetch" href="/blog/assets/js/34.e456df99.js"><link rel="prefetch" href="/blog/assets/js/35.ea2eb292.js"><link rel="prefetch" href="/blog/assets/js/36.2d18424c.js"><link rel="prefetch" href="/blog/assets/js/37.e0439f11.js"><link rel="prefetch" href="/blog/assets/js/38.e3ca0fed.js"><link rel="prefetch" href="/blog/assets/js/39.121c55c9.js"><link rel="prefetch" href="/blog/assets/js/4.981852e7.js"><link rel="prefetch" href="/blog/assets/js/40.c09dfbff.js"><link rel="prefetch" href="/blog/assets/js/41.43ccf10c.js"><link rel="prefetch" href="/blog/assets/js/42.96587c01.js"><link rel="prefetch" href="/blog/assets/js/43.ac2e4f7a.js"><link rel="prefetch" href="/blog/assets/js/44.f8991bcc.js"><link rel="prefetch" href="/blog/assets/js/45.96c75153.js"><link rel="prefetch" href="/blog/assets/js/5.e552e1f2.js"><link rel="prefetch" href="/blog/assets/js/6.dd64a897.js"><link rel="prefetch" href="/blog/assets/js/7.63e76dfa.js"><link rel="prefetch" href="/blog/assets/js/8.009721ba.js"><link rel="prefetch" href="/blog/assets/js/9.7a30687e.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.8b6f9cb2.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><img src="/blog/img/logo.png" alt="轩辕李的博客" class="logo"> <span class="site-name can-hide">轩辕李的博客</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><a href="/blog/server/" class="link-title">后端</a> <span class="title" style="display:none;">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/server/java/" class="nav-link">Java</a></li><li class="dropdown-item"><!----> <a href="/blog/server/spring/" class="nav-link">Spring</a></li><li class="dropdown-item"><!----> <a href="/blog/server/util/" class="nav-link">工具</a></li><li class="dropdown-item"><!----> <a href="/blog/server/distribution/" class="nav-link">分布式</a></li><li class="dropdown-item"><!----> <a href="/blog/server/think/" class="nav-link">心得</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><a href="/blog/web/" class="link-title">前端</a> <span class="title" style="display:none;">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/web/htmlcss/" class="nav-link">HTML&amp;CSS</a></li><li class="dropdown-item"><!----> <a href="/blog/web/js/" class="nav-link">JavaScript</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="运维" class="dropdown-title"><a href="/blog/operation/" class="link-title">运维</a> <span class="title" style="display:none;">运维</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/operation/linuxc/" class="nav-link">Linux &amp; C</a></li></ul></div></div><div class="nav-item"><a href="/blog/about/" class="nav-link">关于</a></div><div class="nav-item"><a href="/blog/pages/beb6c0bd8a66cea6/" class="nav-link">收藏</a></div><div class="nav-item"><a href="/blog/english-corner/" class="nav-link">英语角</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/blog/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/blog/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/blog/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://github.com/xuanyuanli/blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="https://cdn.staticaly.com/gh/xuanyuanli/Img@master/picx/image.5k3g1yhljok0.jpg"> <div class="blogger-info"><h3>轩辕李</h3> <span>勇猛精进，星辰大海</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/blog/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><a href="/blog/server/" class="link-title">后端</a> <span class="title" style="display:none;">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/server/java/" class="nav-link">Java</a></li><li class="dropdown-item"><!----> <a href="/blog/server/spring/" class="nav-link">Spring</a></li><li class="dropdown-item"><!----> <a href="/blog/server/util/" class="nav-link">工具</a></li><li class="dropdown-item"><!----> <a href="/blog/server/distribution/" class="nav-link">分布式</a></li><li class="dropdown-item"><!----> <a href="/blog/server/think/" class="nav-link">心得</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><a href="/blog/web/" class="link-title">前端</a> <span class="title" style="display:none;">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/web/htmlcss/" class="nav-link">HTML&amp;CSS</a></li><li class="dropdown-item"><!----> <a href="/blog/web/js/" class="nav-link">JavaScript</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="运维" class="dropdown-title"><a href="/blog/operation/" class="link-title">运维</a> <span class="title" style="display:none;">运维</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/operation/linuxc/" class="nav-link">Linux &amp; C</a></li></ul></div></div><div class="nav-item"><a href="/blog/about/" class="nav-link">关于</a></div><div class="nav-item"><a href="/blog/pages/beb6c0bd8a66cea6/" class="nav-link">收藏</a></div><div class="nav-item"><a href="/blog/english-corner/" class="nav-link">英语角</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/blog/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/blog/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/blog/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://github.com/xuanyuanli/blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Java</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><span>核心</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/pages/c6325d/" class="sidebar-link">Java8--Lambda 表达式、Stream 和时间 API</a></li><li><a href="/blog/pages/d2e513/" class="sidebar-link">Java集合</a></li><li><a href="/blog/pages/88c2d0/" class="sidebar-link">Java IO</a></li><li><a href="/blog/pages/f36bf8/" aria-current="page" class="active sidebar-link">Java 文件操作</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/blog/pages/f36bf8/#初识" class="sidebar-link">初识</a></li><li class="sidebar-sub-header level2"><a href="/blog/pages/f36bf8/#文件对象创建" class="sidebar-link">文件对象创建</a></li><li class="sidebar-sub-header level2"><a href="/blog/pages/f36bf8/#file与path转换" class="sidebar-link">File与Path转换</a></li><li class="sidebar-sub-header level2"><a href="/blog/pages/f36bf8/#获取类方法" class="sidebar-link">获取类方法</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/blog/pages/f36bf8/#路径解析" class="sidebar-link">路径解析</a></li><li class="sidebar-sub-header level3"><a href="/blog/pages/f36bf8/#获取属性" class="sidebar-link">获取属性</a></li><li class="sidebar-sub-header level3"><a href="/blog/pages/f36bf8/#读取权限" class="sidebar-link">读取权限</a></li><li class="sidebar-sub-header level3"><a href="/blog/pages/f36bf8/#设置属性和权限" class="sidebar-link">设置属性和权限</a></li><li class="sidebar-sub-header level3"><a href="/blog/pages/f36bf8/#读取、写入内容" class="sidebar-link">读取、写入内容</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/blog/pages/f36bf8/#创建、删除、移动" class="sidebar-link">创建、删除、移动</a></li><li class="sidebar-sub-header level2"><a href="/blog/pages/f36bf8/#遍历" class="sidebar-link">遍历</a></li><li class="sidebar-sub-header level2"><a href="/blog/pages/f36bf8/#工具类库" class="sidebar-link">工具类库</a></li><li class="sidebar-sub-header level2"><a href="/blog/pages/f36bf8/#randomaccessfile" class="sidebar-link">RandomAccessFile</a></li><li class="sidebar-sub-header level2"><a href="/blog/pages/f36bf8/#总结" class="sidebar-link">总结</a></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>并发</span> <span class="arrow right"></span></p> <!----></section></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Spring</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>工具</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>分布式</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>心得</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/blog/" title="首页" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><a href="/blog/server/#后端" data-v-06225672>后端</a></li><li data-v-06225672><a href="/blog/server/#Java" data-v-06225672>Java</a></li><li data-v-06225672><a href="/blog/server/#核心" data-v-06225672>核心</a></li></ul> <div class="info" data-v-06225672><div title="作者" class="author iconfont icon-touxiang" data-v-06225672><a href="https://github.com/xuanyuanli" target="_blank" title="作者" class="beLink" data-v-06225672>轩辕李</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2022-09-12</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABGpJREFUSA3tVVtoXFUU3fvOI53UlmCaKIFmwEhsE7QK0ipFEdHEKpXaZGrp15SINsXUWvBDpBgQRKi0+KKoFeJHfZA+ED9KKoIU2gYD9UejTW4rVIzm0VSTziPzuNu1z507dibTTjL4U/DAzLn3nL3X2o91ziX6f9wMFdh6Jvbm9nNSV0msViVO6tN1Rm7NMu2OpeJ9lWBUTDxrJbYTS0hInuwciu9eLHlFxCLCZEk3MegsJmZ5K/JD6t7FkFdEvGUo1g7qJoG3MHImqRIn8/nzY1K9UPKKiJmtnUqHVE3Gbuay6vJE/N2FEmuxFjW2nUuE0yQXRRxLiTUAzs36zhZvOXJPdX850EVnnLZkB8prodQoM5JGj7Xk2mvC7JB8tG04Ef5PiXtG0UtxupRQSfTnBoCy554x18yJHI6I+G5Eru4LHmPJZEQsrvPUbMiA8G/WgMK7w7I+ez7++o2ANfbrjvaOl1tFMs+htG3IrZH9/hDX1Pr8Tc0UvH8tcX29KzAgIGcEkINyW5BF9x891hw6VYqgJHEk0huccS7vh3C6gTiODL+26huuBtbct8eZnqLML8PkxGYpuPZBqtqwkSjgc4mB5gbgig5i+y0UDK35LMxXisn9xQtK+nd26gTIHsHe/oblK/b29fUmN/8Y+9jAQrnBp56m1LcDlDp9irKTExSKduXJVWSqdBMA08pEJnEIOB3FPPMybu/oeV8zFeYN3xx576Q6RH+VmplE4ncQV5v+5rzSoyOU7PuEAg8g803PwBJ0CExno/jcMbN8tONYeOmHiuUNryvm3fRUy4tMPVLdAGkUhNWuggGrJcXPv+ouCjz0MKUHz1J2/E8IC9nqTabcxgaBYM0hPhD5Y65FsbxRQKxCQrDjDctW7PUM3HuZunFyifSAqEfuzCp48Il24luWUWZoyJCaPR82jE0+kFA643wRFVni4RYSq3ohJO2pZ7B5dO4xkDWbEpossJPLSrPjYID8rS2UHTlvyNxqIGsg674XJJ7vnh5L7PNwC4hh2sjCI96mzszOTpxLF0T7l88Yz7lAuK6OnL8gXLOnTvpzSb22YG8W7us3jSebFHeeqnXRG1vt+MoUM84LQIBmMsCTAcOauTh0T0l0neQK7m2bLMt2mGxU3HYssS0J2cdv5wljlPsrIuZLAG/2DOZIXgCYT8uMGZN+e2kSirfxZOPCsC0f24nTZzspnVn9VePS1Z5vubmAGGXG8ZFno9Hel0yfA5ZPhF7Dh972BQJ2qCpgH67lmWtBYbvk6sz02wjky2vXyz0XErP/kFB619js1BtwfOV4OPRqOQBjy3Qbk18vigUPPSD5ceHnwck7W9bhAqZdd7SuG7w4/P2F/GaJh8c7e9qgow+Q7cGBo+98WsLkuktFqiZabtXuQTu/Y5ETbR0v7tNSFnvrmu6pjdoan2KjMu8q/Hmj1EfCO2ZGfEIbIXKUlw8qaX9/b2oeSJmFksSeT/Fn0V3nSypChh4Gjh74ybO9aeZ/AN2dwciu2/MhAAAAAElFTkSuQmCC">Java 文件操作<!----></h1>  <div class="theme-vdoing-content content__default"><h2 id="初识"><a href="#初识" class="header-anchor">#</a> 初识</h2> <p>文件和目录操作是每个语言中常用的操作。在了解Java语言文件操作的过程中，你可能需要先对Java IO有一定的认识，参考：<a href="/blog/pages/88c2d0/">Java IO</a><br>
在Java 7之前，主要是用File类来对文件进行操作；在Java 7之后，可以考虑使用新的类（主要是Path和Files）来对文件进行操作。<br>
下面的示例会同时展示File和Path/Files的应用。</p> <h2 id="文件对象创建"><a href="#文件对象创建" class="header-anchor">#</a> 文件对象创建</h2> <p>传统方式，不论是文件还是对象，都可以直接构建：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">File</span> dir <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">&quot;d:/&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 判断是否是目录</span>
dir<span class="token punctuation">.</span><span class="token function">isDirectory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token class-name">File</span> txtFile <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">&quot;d:/1.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 以下两种构建方式的第一个参数都表示父目录</span>
txtFile <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span>dir<span class="token punctuation">,</span> <span class="token string">&quot;1.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
txtFile <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">&quot;d:/&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;1.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 判断是否是文件</span>
txtFile<span class="token punctuation">.</span><span class="token function">isFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>除了文件、目录判断之外，还有以下判断方法：</p> <ul><li>isAbsolute 是否是绝对路径</li> <li>isHidden 是否是隐藏文件</li> <li>exist 文件是否存在</li> <li>canExecute 是否可执行</li> <li>canRead 是否可读</li> <li>canWrite 是否可写</li></ul> <hr> <p>NIO方式：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">Path</span> dir <span class="token operator">=</span> <span class="token class-name">Paths</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;d:/&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Files</span><span class="token punctuation">.</span><span class="token function">isDirectory</span><span class="token punctuation">(</span>dir<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">Path</span> txtFile <span class="token operator">=</span> <span class="token class-name">Paths</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;d:/1.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
txtFile <span class="token operator">=</span> <span class="token class-name">Paths</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;d:/&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;1.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
txtFile <span class="token operator">=</span> dir<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&quot;1.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">Files</span><span class="token punctuation">.</span><span class="token function">isRegularFile</span><span class="token punctuation">(</span>txtFile<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>NIO中把路径和文件操作分开了。<br>
Path，即路径。他的判断方法还有：</p> <ul><li>isAbsolute 是否是绝对路径</li> <li>endsWith 是否以给定路径结尾</li> <li>startsWith 是否以给定路径开头</li></ul> <p>Paths用来方便的获取路径Path。<br>
文件操作则都在Files中，他还有其他判断方法：</p> <ul><li>isExecutable 是否是可执行文件</li> <li>isHidden 是否是隐藏文件</li> <li>isReadable 是否可读</li> <li>isSymbolicLink 是否是链接文件</li> <li>isWritable 是否可写</li> <li>exists 是否存在</li></ul> <h2 id="file与path转换"><a href="#file与path转换" class="header-anchor">#</a> File与Path转换</h2> <p>新旧api之间的转换是很简单的：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">Path</span> path <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">&quot;d:/1.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">File</span> file <span class="token operator">=</span> <span class="token class-name">Paths</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;d:/1.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="获取类方法"><a href="#获取类方法" class="header-anchor">#</a> 获取类方法</h2> <p>获取文件路径、大小、名称等：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">File</span> txtFile <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">&quot;d:/1.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 获得绝对路径</span>
txtFile<span class="token punctuation">.</span><span class="token function">getAbsolutePath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 获得父目录</span>
txtFile<span class="token punctuation">.</span><span class="token function">getParentFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 获得文件名称</span>
txtFile<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 获得文件大小（字节）</span>
txtFile<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 获得标准路径（去除..或.符号）</span>
txtFile<span class="token punctuation">.</span><span class="token function">getCanonicalPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 获得所在分区（盘）的空间大小</span>
txtFile<span class="token punctuation">.</span><span class="token function">getTotalSpace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 获得所在分区（盘）的已使用的空间</span>
txtFile<span class="token punctuation">.</span><span class="token function">getUsableSpace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 获得所在分区（盘）的剩余的空间</span>
txtFile<span class="token punctuation">.</span><span class="token function">getFreeSpace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><hr> <p>NIO中 Path获取类方法：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">Path</span> txtFile <span class="token operator">=</span> <span class="token class-name">Paths</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;d:/1.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 获得标准路径（去除..或.符号）</span>
txtFile<span class="token punctuation">.</span><span class="token function">normalize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 获得父目录</span>
txtFile<span class="token punctuation">.</span><span class="token function">getParent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 获得文件名称</span>
txtFile<span class="token punctuation">.</span><span class="token function">getFileName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 获得文件系统（盘符）</span>
txtFile<span class="token punctuation">.</span><span class="token function">getFileSystem</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 获得根路径</span>
txtFile<span class="token punctuation">.</span><span class="token function">getRoot</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 获得名称元素的数量</span>
txtFile<span class="token punctuation">.</span><span class="token function">getNameCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="路径解析"><a href="#路径解析" class="header-anchor">#</a> 路径解析</h3> <p>获得相对路径:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">Paths</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;/a/b&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">relativize</span><span class="token punctuation">(</span><span class="token class-name">Paths</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;/c/d&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// ../../c/d</span>
<span class="token class-name">Paths</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;/a/b&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">relativize</span><span class="token punctuation">(</span><span class="token class-name">Paths</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;/a/b/c/d&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// c/d</span>
</code></pre></div><p>给定路径解析，如果给定路径是绝对路径，则返回；如果是子目录，则组合：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">Paths</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;/a&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&quot;1.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// /a/1.txt</span>
<span class="token class-name">Paths</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;/a&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&quot;/c/1.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// /c/1.txt</span>
        
<span class="token comment">// 替换子目录</span>
<span class="token class-name">Paths</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;/a/b&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">resolveSibling</span><span class="token punctuation">(</span><span class="token string">&quot;c&quot;</span><span class="token punctuation">)</span>   <span class="token comment">// /a/c</span>
</code></pre></div><h3 id="获取属性"><a href="#获取属性" class="header-anchor">#</a> 获取属性</h3> <p>Files中获取文件最后修改时间：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">Files</span><span class="token punctuation">.</span><span class="token function">getLastModifiedTime</span><span class="token punctuation">(</span><span class="token class-name">Paths</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;d:/1.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">LinkOption</span><span class="token punctuation">.</span><span class="token constant">NOFOLLOW_LINKS</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>getLastModifiedTime有个可选参数LinkOption，它是一个枚举，且只有一个值：LinkOption.NOFOLLOW_LINKS。<br>
对于getLastModifiedTime方法来说，option参数的作用：默认情况下，遵循符号链接并读取链接的最终目标的文件属性。如果选项NOFOLLOW_LINKS存在，则不遵循符号链接，即读取符号链接本身时间。</p> <p>读取文件属性：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">Path</span> txtFile <span class="token operator">=</span> <span class="token class-name">Paths</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;d:/1.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 读取文件基础属性，包括：最后修改时间、最后访问时间等等</span>
<span class="token class-name">BasicFileAttributes</span> basicFileAttributes <span class="token operator">=</span> <span class="token class-name">Files</span><span class="token punctuation">.</span><span class="token function">readAttributes</span><span class="token punctuation">(</span>txtFile<span class="token punctuation">,</span> <span class="token class-name">BasicFileAttributes</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> all <span class="token operator">=</span> <span class="token class-name">Files</span><span class="token punctuation">.</span><span class="token function">readAttributes</span><span class="token punctuation">(</span>txtFile<span class="token punctuation">,</span> <span class="token string">&quot;*&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Windows系统专用</span>
<span class="token class-name">BasicFileAttributes</span> dosFileAttributes <span class="token operator">=</span> <span class="token class-name">Files</span><span class="token punctuation">.</span><span class="token function">readAttributes</span><span class="token punctuation">(</span>txtFile<span class="token punctuation">,</span> <span class="token class-name">DosFileAttributes</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> dosAll <span class="token operator">=</span> <span class="token class-name">Files</span><span class="token punctuation">.</span><span class="token function">readAttributes</span><span class="token punctuation">(</span>txtFile<span class="token punctuation">,</span> <span class="token string">&quot;dos:*&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Unix系统专用(Posix为Unix系统的应用编程规范)</span>
<span class="token class-name">PosixFileAttributes</span> posixFileAttributes <span class="token operator">=</span> <span class="token class-name">Files</span><span class="token punctuation">.</span><span class="token function">readAttributes</span><span class="token punctuation">(</span>txtFile<span class="token punctuation">,</span>  <span class="token class-name">PosixFileAttributes</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>读取属性的其他方法：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">Object</span> lastAccessTime <span class="token operator">=</span> <span class="token class-name">Files</span><span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span>txtFile<span class="token punctuation">,</span> <span class="token string">&quot;lastAccessTime&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">BasicFileAttributeView</span> fileAttributeView <span class="token operator">=</span> <span class="token class-name">Files</span><span class="token punctuation">.</span><span class="token function">getFileAttributeView</span><span class="token punctuation">(</span>txtFile<span class="token punctuation">,</span> <span class="token class-name">BasicFileAttributeView</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">BasicFileAttributes</span> basicFileAttributes <span class="token operator">=</span> fileAttributeView<span class="token punctuation">.</span><span class="token function">readAttributes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>读取文件大小、存储盘:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">Files</span><span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span>txtFile<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">FileStore</span> fileStore <span class="token operator">=</span> <span class="token class-name">Files</span><span class="token punctuation">.</span><span class="token function">getFileStore</span><span class="token punctuation">(</span>txtFile<span class="token punctuation">)</span><span class="token punctuation">;</span>
fileStore<span class="token punctuation">.</span><span class="token function">getUsableSpace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
fileStore<span class="token punctuation">.</span><span class="token function">getTotalSpace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
fileStore<span class="token punctuation">.</span><span class="token function">getUnallocatedSpace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
fileStore<span class="token punctuation">.</span><span class="token function">getBlockSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>还有一个特别有用的方法：probeContentType，探测文件类型：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">Files</span><span class="token punctuation">.</span><span class="token function">probeContentType</span><span class="token punctuation">(</span><span class="token class-name">Paths</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;D:\\1.jpg&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// image/jpeg</span>
<span class="token class-name">Files</span><span class="token punctuation">.</span><span class="token function">probeContentType</span><span class="token punctuation">(</span><span class="token class-name">Paths</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;D:\\1.webp&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// image/webp</span>
<span class="token class-name">Files</span><span class="token punctuation">.</span><span class="token function">probeContentType</span><span class="token punctuation">(</span><span class="token class-name">Paths</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;D:\\1.jfif&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// image/jpeg</span>
<span class="token class-name">Files</span><span class="token punctuation">.</span><span class="token function">probeContentType</span><span class="token punctuation">(</span><span class="token class-name">Paths</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;D:\\1.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// text/plain</span>
<span class="token class-name">Files</span><span class="token punctuation">.</span><span class="token function">probeContentType</span><span class="token punctuation">(</span><span class="token class-name">Paths</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;D:\\1.mp4&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// video/mp4</span>
<span class="token class-name">Files</span><span class="token punctuation">.</span><span class="token function">probeContentType</span><span class="token punctuation">(</span><span class="token class-name">Paths</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;D:\\QQ.exe&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// application/x-msdownload</span>
<span class="token class-name">Files</span><span class="token punctuation">.</span><span class="token function">probeContentType</span><span class="token punctuation">(</span><span class="token class-name">Paths</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;D:\\1.xlsx&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// application/vnd.openxmlformats-officedocument.spreadsheetml.sheet</span>
</code></pre></div><p>注意，这个方法不会根据真实的文件内容判断MIME类型，而是会根据后缀来判断类型。比如你把mp4文件后缀修改为txt，那么返回结果就是：text/plain</p> <h3 id="读取权限"><a href="#读取权限" class="header-anchor">#</a> 读取权限</h3> <p>获得拥有者和权限：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">UserPrincipal</span> owner <span class="token operator">=</span> <span class="token class-name">Files</span><span class="token punctuation">.</span><span class="token function">getOwner</span><span class="token punctuation">(</span>txtFile<span class="token punctuation">)</span><span class="token punctuation">;</span>
owner<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 仅限Unix系统使用</span>
<span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">PosixFilePermission</span><span class="token punctuation">&gt;</span></span> posixFilePermissions <span class="token operator">=</span> <span class="token class-name">Files</span><span class="token punctuation">.</span><span class="token function">getPosixFilePermissions</span><span class="token punctuation">(</span>txtFile<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="设置属性和权限"><a href="#设置属性和权限" class="header-anchor">#</a> 设置属性和权限</h3> <p>传统方式：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">File</span> txtFile <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">&quot;d:/1.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 设为可执行</span>
txtFile<span class="token punctuation">.</span><span class="token function">setExecutable</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 设为可读</span>
txtFile<span class="token punctuation">.</span><span class="token function">setReadable</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 设为可写</span>
txtFile<span class="token punctuation">.</span><span class="token function">setWritable</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 设为只读</span>
txtFile<span class="token punctuation">.</span><span class="token function">setReadOnly</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 设置最后修改时间</span>
txtFile<span class="token punctuation">.</span><span class="token function">setLastModified</span><span class="token punctuation">(</span>millis<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>NIO：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">Path</span> path <span class="token operator">=</span> <span class="token class-name">Paths</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;d:/1.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 设置属性</span>
<span class="token class-name">Files</span><span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span><span class="token string">&quot;lastAccessTime&quot;</span><span class="token punctuation">,</span>millis<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 设置最后修改时间</span>
<span class="token class-name">Files</span><span class="token punctuation">.</span><span class="token function">setLastModifiedTime</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span>millis<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 设置文件所有者</span>
<span class="token class-name">FileSystem</span> fileSystem <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">getFileSystem</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">UserPrincipalLookupService</span> service <span class="token operator">=</span> fileSystem<span class="token punctuation">.</span><span class="token function">getUserPrincipalLookupService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">UserPrincipal</span> userPrincipal <span class="token operator">=</span> service<span class="token punctuation">.</span><span class="token function">lookupPrincipalByName</span><span class="token punctuation">(</span><span class="token string">&quot;joe&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Files</span><span class="token punctuation">.</span><span class="token function">setOwner</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> userPrincipal<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 设置权限</span>
<span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">PosixFilePermission</span><span class="token punctuation">&gt;</span></span> perms <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
perms<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">PosixFilePermission</span><span class="token punctuation">.</span><span class="token constant">OWNER_READ</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
perms<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">PosixFilePermission</span><span class="token punctuation">.</span><span class="token constant">OWNER_WRITE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
perms<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">PosixFilePermission</span><span class="token punctuation">.</span><span class="token constant">OWNER_EXECUTE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// perms = PosixFilePermissions.fromString(&quot;rwxr--r--&quot;); // 从文字中解析权限</span>
<span class="token class-name">Files</span><span class="token punctuation">.</span><span class="token function">setPosixFilePermissions</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> perms<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="读取、写入内容"><a href="#读取、写入内容" class="header-anchor">#</a> 读取、写入内容</h3> <p>读取文件内容：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">Path</span> txtFile <span class="token operator">=</span> <span class="token class-name">Paths</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;d:/1.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">Files</span><span class="token punctuation">.</span><span class="token function">readAllLines</span><span class="token punctuation">(</span>txtFile<span class="token punctuation">,</span> <span class="token class-name">StandardCharsets</span><span class="token punctuation">.</span><span class="token constant">UTF_8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Files</span><span class="token punctuation">.</span><span class="token function">readString</span><span class="token punctuation">(</span>txtFile<span class="token punctuation">,</span> <span class="token class-name">StandardCharsets</span><span class="token punctuation">.</span><span class="token constant">UTF_8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Files</span><span class="token punctuation">.</span><span class="token function">readAllBytes</span><span class="token punctuation">(</span>txtFile<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Files</span><span class="token punctuation">.</span><span class="token function">readSymbolicLink</span><span class="token punctuation">(</span>txtFile<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">Files</span><span class="token punctuation">.</span><span class="token function">newByteChannel</span><span class="token punctuation">(</span>txtFile<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Files</span><span class="token punctuation">.</span><span class="token function">newInputStream</span><span class="token punctuation">(</span>txtFile<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Files</span><span class="token punctuation">.</span><span class="token function">newBufferedReader</span><span class="token punctuation">(</span>txtFile<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Files</span><span class="token punctuation">.</span><span class="token function">newOutputStream</span><span class="token punctuation">(</span>txtFile<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>写入文件内容：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> lines <span class="token operator">=</span> <span class="token class-name">Lists</span><span class="token punctuation">.</span><span class="token function">newArrayList</span><span class="token punctuation">(</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Files</span><span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>txtFile<span class="token punctuation">,</span> lines<span class="token punctuation">,</span> <span class="token class-name">StandardCharsets</span><span class="token punctuation">.</span><span class="token constant">UTF_8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Files</span><span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>txtFile<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Files</span><span class="token punctuation">.</span><span class="token function">writeString</span><span class="token punctuation">(</span>txtFile<span class="token punctuation">,</span> <span class="token string">&quot;1\n2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="创建、删除、移动"><a href="#创建、删除、移动" class="header-anchor">#</a> 创建、删除、移动</h2> <p>传统方式的演示：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// 创建目录</span>
<span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">&quot;d:/data&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">mkdir</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 创建任何不存在的目录</span>
<span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">&quot;d:/data/abc&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">mkdirs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
<span class="token class-name">File</span> file <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">&quot;d:/1.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 创建文件(上层目录必须已存在)。创建之前最好用exists()方法判断一下，以免异常</span>
file<span class="token punctuation">.</span><span class="token function">createNewFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 重命名(也可用于移动)</span>
file<span class="token punctuation">.</span><span class="token function">renameTo</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">&quot;d:/2.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 删除</span>
file<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
file<span class="token punctuation">.</span><span class="token function">deleteOnExit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 没有复制方法，需要自己实现</span>
</code></pre></div><p>NIO方式：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">Files</span><span class="token punctuation">.</span><span class="token function">createFile</span><span class="token punctuation">(</span><span class="token class-name">Paths</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;d:/1.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Files</span><span class="token punctuation">.</span><span class="token function">createDirectory</span><span class="token punctuation">(</span><span class="token class-name">Paths</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;d:/data&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Files</span><span class="token punctuation">.</span><span class="token function">createDirectories</span><span class="token punctuation">(</span><span class="token class-name">Paths</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;d:/data/abc&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 创建临时文件</span>
<span class="token class-name">Files</span><span class="token punctuation">.</span><span class="token function">createTempFile</span><span class="token punctuation">(</span><span class="token string">&quot;temp-&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 创建临时目录</span>
<span class="token class-name">Files</span><span class="token punctuation">.</span><span class="token function">createTempDirectory</span><span class="token punctuation">(</span><span class="token string">&quot;tdir-&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>你会发现不管是传统API还是新API，都存在一些缺失，比如移动、删除目录等，这就要借助工具库来实现了，后面会讲到。</p> <h2 id="遍历"><a href="#遍历" class="header-anchor">#</a> 遍历</h2> <p>传统方式主要是list和listFiles方法：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">File</span> dir <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">&quot;d:/data&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 获得文件和目录</span>
<span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> list <span class="token operator">=</span> dir<span class="token punctuation">.</span><span class="token function">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 获得FilenameFilter过滤后的文件</span>
list <span class="token operator">=</span> dir<span class="token punctuation">.</span><span class="token function">list</span><span class="token punctuation">(</span><span class="token punctuation">(</span>dir1<span class="token punctuation">,</span> name<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> name<span class="token punctuation">.</span><span class="token function">endsWith</span><span class="token punctuation">(</span><span class="token string">&quot;.jpg&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 获得文件和目录</span>
<span class="token class-name">File</span><span class="token punctuation">[</span><span class="token punctuation">]</span> files <span class="token operator">=</span> dir<span class="token punctuation">.</span><span class="token function">listFiles</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 获得FileFilter过滤后的文件</span>
dir<span class="token punctuation">.</span><span class="token function">listFiles</span><span class="token punctuation">(</span><span class="token class-name">File</span><span class="token operator">::</span><span class="token function">canRead</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 获得FilenameFilter过滤后的文件</span>
dir<span class="token punctuation">.</span><span class="token function">listFiles</span><span class="token punctuation">(</span><span class="token punctuation">(</span>dir1<span class="token punctuation">,</span>name<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> name<span class="token punctuation">.</span><span class="token function">endsWith</span><span class="token punctuation">(</span><span class="token string">&quot;.jpg&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>NIO:</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">Path</span> path <span class="token operator">=</span> <span class="token class-name">Paths</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;d:/data&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 文件搜索。会递归目录进行搜索，第二个参数表示深度，第三个参数表示过滤</span>
<span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Path</span><span class="token punctuation">&gt;</span></span> pathStream <span class="token operator">=</span> <span class="token class-name">Files</span><span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>path1<span class="token punctuation">,</span> basicFileAttributes<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> basicFileAttributes<span class="token punctuation">.</span><span class="token function">isRegularFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    pathStream<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">println</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 目录遍历（非深度）</span>
<span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token class-name">DirectoryStream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Path</span><span class="token punctuation">&gt;</span></span> pathStream <span class="token operator">=</span> <span class="token class-name">Files</span><span class="token punctuation">.</span><span class="token function">newDirectoryStream</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    pathStream<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">println</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 目录遍历（非深度）的另一种方式，是惰性且线程安全的</span>
<span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Path</span><span class="token punctuation">&gt;</span></span> pathStream <span class="token operator">=</span> <span class="token class-name">Files</span><span class="token punctuation">.</span><span class="token function">list</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    pathStream<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">println</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 深度优先的目录遍历。第二个参数是可选的，表示遍历的深度，如果省略则为Integer.MAX_VALUE</span>
<span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Path</span><span class="token punctuation">&gt;</span></span> pathStream <span class="token operator">=</span> <span class="token class-name">Files</span><span class="token punctuation">.</span><span class="token function">walk</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    pathStream<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">println</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 深度优先的目录遍历。使用FileVisitor，通过FileVisitResult枚举来控制遍历流程，比如终止(TERMINATE)、跳过此目录(SKIP_SUBTREE)、继续(CONTINUE)等</span>
<span class="token class-name">Files</span><span class="token punctuation">.</span><span class="token function">walkFileTree</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">FileVisitor</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">FileVisitResult</span> <span class="token function">preVisitDirectory</span><span class="token punctuation">(</span><span class="token class-name">Path</span> dir<span class="token punctuation">,</span> <span class="token class-name">BasicFileAttributes</span> attrs<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">FileVisitResult</span><span class="token punctuation">.</span><span class="token constant">CONTINUE</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">FileVisitResult</span> <span class="token function">visitFile</span><span class="token punctuation">(</span><span class="token class-name">Path</span> file<span class="token punctuation">,</span> <span class="token class-name">BasicFileAttributes</span> attrs<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>attrs<span class="token punctuation">.</span><span class="token function">isOther</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">FileVisitResult</span><span class="token punctuation">.</span><span class="token constant">TERMINATE</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">FileVisitResult</span><span class="token punctuation">.</span><span class="token constant">CONTINUE</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">FileVisitResult</span> <span class="token function">visitFileFailed</span><span class="token punctuation">(</span><span class="token class-name">Path</span> file<span class="token punctuation">,</span> <span class="token class-name">IOException</span> exc<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">FileVisitResult</span><span class="token punctuation">.</span><span class="token constant">CONTINUE</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">FileVisitResult</span> <span class="token function">postVisitDirectory</span><span class="token punctuation">(</span><span class="token class-name">Path</span> dir<span class="token punctuation">,</span> <span class="token class-name">IOException</span> exc<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">FileVisitResult</span><span class="token punctuation">.</span><span class="token constant">CONTINUE</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="工具类库"><a href="#工具类库" class="header-anchor">#</a> 工具类库</h2> <p>我们熟悉的Commons IO，maven引入：</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>commons-io<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>commons-io<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.11.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>比较有用的方法：</p> <ul><li>byteCountToDisplaySize 字节数转为人类可读，比如TB、GB</li> <li>cleanDirectory 清除目录下文件</li> <li>copyDirectory 复制目录</li> <li>deleteDirectory  删除目录下文件和本身</li> <li>moveDirectory 移动目录</li></ul> <h2 id="randomaccessfile"><a href="#randomaccessfile" class="header-anchor">#</a> RandomAccessFile</h2> <p>RandomAccessFile随机文件访问（包括读/写）的类，他的核心方法是seek，可以移动文件指针。<br>
比如从1024个字节处开始，读取1024个字节：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token class-name">RandomAccessFile</span> file <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RandomAccessFile</span><span class="token punctuation">(</span><span class="token string">&quot;D://1.txt&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;r&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    file<span class="token punctuation">.</span><span class="token function">seek</span><span class="token punctuation">(</span><span class="token number">1024</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    file<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token number">1024</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>或者在文件末尾写入内容：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token class-name">RandomAccessFile</span> file <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RandomAccessFile</span><span class="token punctuation">(</span><span class="token string">&quot;D://1.txt&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;rw&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    file<span class="token punctuation">.</span><span class="token function">seek</span><span class="token punctuation">(</span>file<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    file<span class="token punctuation">.</span><span class="token function">writeChars</span><span class="token punctuation">(</span><span class="token string">&quot;who am i&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> 
</code></pre></div><p>第二个参数是访问模式，有四种：</p> <ul><li>r 只读</li> <li>rw 可读写，文件关闭时同步内容到磁盘</li> <li>rws 可读写，每次写入都会更新元数据（最后更新时间）和同步内容到磁盘</li> <li>rwd 可读写，每次写入都会同步内容到磁盘</li></ul> <p>RandomAccessFile常用于多线程下载、断点续传、追加文件内容等场景。</p> <h2 id="总结"><a href="#总结" class="header-anchor">#</a> 总结</h2> <p>通过本章内容，你会看到新IO相对于传统IO更加的现代。不过要注意在相当一部分项目中，传统IO因为概念简单，操作方便也被大家普遍使用。<br>
把新旧API放在一起学习，会更加有利于你的记忆，希望你有所收获！</p> <p><strong>祝你变得更强！</strong></p></div></div>  <div class="page-edit"><div class="edit-link"><a href="https://github.com/xuanyuanli/blog/edit/main/docs/01.后端/01.Java/01.核心/04.Java 文件操作.md" target="_blank" rel="noopener noreferrer">编辑</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="tags"><a href="/blog/tags/?tag=Java%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C" title="标签">#Java文件操作</a></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2022/09/12, 22:05:54</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/blog/pages/88c2d0/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">Java IO</div></a> <a href="/blog/pages/29b2de/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">线程基础与synchronized关键字</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/blog/pages/88c2d0/" class="prev">Java IO</a></span> <span class="next"><a href="/blog/pages/29b2de/">线程基础与synchronized关键字</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/blog/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/blog/pages/88c2d0/"><div>
            Java IO
            <!----></div></a> <span class="date">08-25</span></dt></dl><dl><dd>02</dd> <dt><a href="/blog/pages/d2e513/"><div>
            Java集合
            <!----></div></a> <span class="date">08-06</span></dt></dl><dl><dd>03</dd> <dt><a href="/blog/pages/7a5bcf/"><div>
            HTML基础全景图
            <!----></div></a> <span class="date">08-05</span></dt></dl> <dl><dd></dd> <dt><a href="/blog/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="mailto:xuanyuanli999@gmail.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/xuanyuanli" title="GitHub" target="_blank" class="iconfont icon-github"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2022-2022
    <span>xuanyuanli | <a href="https://github.com/xuanyuanli/blob/master/LICENSE" target="_blank">MIT License</a></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"><div></div></div></div>
    <script src="/blog/assets/js/app.01ab09a8.js" defer></script><script src="/blog/assets/js/2.cb21dba0.js" defer></script><script src="/blog/assets/js/19.18e1e200.js" defer></script>
  </body>
</html>
